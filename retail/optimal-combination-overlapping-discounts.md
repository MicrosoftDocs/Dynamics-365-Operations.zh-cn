---
title: "确定折扣重叠的最佳的组合"
description: "在&quot;折扣重叠时，您必须确定重叠将导致最低的交易记录或合计的最大总折扣的折扣的组合。 在根据采购折扣金额，如在“常见购买 1，获得”产品的价格时更改 (BOGO) 零售的折扣百分比 1 X，此流程成为组合优化发货。"
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>确定折扣重叠的最佳的组合

在"折扣重叠时，您必须确定重叠将导致最低的交易记录或合计的最大总折扣的折扣的组合。 在根据采购折扣金额，如在“常见购买 1，获得”产品的价格时更改 (BOGO) 零售的折扣百分比 1 X，此流程成为组合优化发货。

文章此应用于转移到具有 3105973 KB 的 Microsoft Dynamics AX 2012 R3 (下达 2015 年 11 月 2 日) 或之后和 Microsoft Dynamics AX 2016 年 2 月。 若要确定折扣重叠的该组合及时应用和继续提供可用于以" Microsoft Dynamics AX for Retail 的富折扣的功能，我们引入应用的重叠的折扣的方法。 我们调用此新方法**分级**临界值。 临界使用值在直线，要求以评估折扣重叠时的可能组合的时间超过可配置在 Dynamics AX 的阈值**零售参数**页。 通过使用在共享的产品，的折扣的值在直线方法临界值，则为每重叠的折扣计算。 重叠的折扣从高的相对值将应用到最低的相对值。 有关新方法的详细信息，请参阅“”部分临界值，它{{在此：in}}文章。 临界分级值，如果产品的折扣金额不受时，该交易记录的其他产品的影响不使用。 例如，此方法不使用为两个简单的折扣，或用于简单的折扣和单一产品大宗折扣交易。

## <a name="discount-examples"></a>折扣示例
在 Dynamics AX 中，您可以为在一组常用的数目不限的零售折扣产品。 但是，因为没有限制，性能问题可能发生，在您尝试计算在不同的产品应该使用的折扣时使用。 以下示例更详细地说明此问题。 在示例 1 中，我们以两产品和两种折扣重叠的开始。 然后，在示例 2，我们显示发货如何更详细，在产品添加。

### <a name="example-1-two-products-and-two-discounts"></a>示例 1:两产品和两种折扣相加

在此示例中，两个需求输入折扣，以每个折扣，并且不能合并。 本示例中的折扣是**最佳**的价格折扣。 两产品输入两种折扣。 这是两种折扣。 [重叠折扣组合的![01] (。/media/overlapping 折扣组合 01.jpg)](。/media/overlapping 折扣组合 01.jpg) 供任意两种完好产品，这两种折扣由两产品的价格。 在两产品价格等于或等于几乎的时，折扣 1 是更合理。 在将产品价格比其他产品的价格时使用低于 2，折扣为更合理。 这是预估的这两种折扣相加数学规则彼此对象：[重叠折扣组合的![02] (。/media/overlapping 折扣组合 02.jpg)](。的/media/overlapping 折扣组合 02.jpg 注释) 价格，在产品 1 为价格的三百分点的四分之一二个产品 2，两种折扣相加相等。 在此示例中，1 的折扣有效的折扣百分比。某些百分比变化 (在两产品的价格离使用较远时) 到最多 25% (在两产品具有相同的价格时)。 折扣的有效的折扣率 2 是固定的。 始终为 20%。 到期的 1 折扣有效的折扣百分比具有少于或少于 2 折扣可以是更多的一个范围，的最佳折扣由两产品必须折扣的价格。 在此示例中，两种折扣相加，因为只有在这两产品，只适用于计算快速完成。 只有两种可能组合：折扣 2. 1 的折扣或一应用程序的应用程序。 未计算的布局。 通过使用两个产品，则每个折扣计算，并且使用最佳的折扣。

### <a name="example-2-four-products-and-two-discounts"></a>示例 2:四产品和两种折扣相加

接下来，我们将使用四产品和相同两种折扣。 这四种产品输入两种折扣。 具有十二个可能组合。 {{最后：In}}，两种折扣中三个组合之一中将适用于交易记录：折扣 1 的两个应用程序，折扣 2. 的折扣和 1 的 2 折扣一应用程序或某个应用程序的两个应用程序。 若要说明可能组合，我们将查看具有不同的价格的两个不同四产品组：

-   这四种产品具有相同的价格，$15.00。 在这种情况下，最佳中折扣组合折扣是 1. 的两个应用程序。 两产品将是全价，两，并且 50% 关闭。 交易记录的折扣的合计。$45 + (+ 7.50 + 7.50)，$15 是 25%) undiscounted 价格 (合计。 折扣 2 只为$12 (20%)。
-   两产品是每个$20，一产品是，$15，并且一产品是$5。 在这种情况下，最佳中折扣组合折扣是 1. 的折扣和 2 的应用程序的应用程序。 下表说明折扣。

若要表读取，请使用行的产品和从列的产品。 例如，在折扣的表 1 中，在您合并两个$20 产品时，您开始$10。 在"折扣的表 2 中，合并，在您$15 产品和$5 产品时，您开始$4。 [重叠折扣组合的![03] (。/media/overlapping 折扣组合 03.jpg)](。/media/overlapping 折扣组合) 03.jpg 首先，我们找到从任意两种产品中获取使用任意的折扣的最大折扣。 两个表显示两产品的所有组合的折扣金额。 表的带阴影的部分表示产品具有匹配在本身而言，我们不能执行的任何一个情况，或者将生成同一折扣金额，并且可以忽略两个产品中的冲销费用进行匹配。 通过查看表，您可以看到$20 两个物料的折扣是 1 用于所有四产品的任何折扣提供的延迟的最大折扣。 (此折扣在第一个表中突出显示。绿色。) 这将$15 产品和只$5 产品。 通过重新查看两个表，您可以看到的那样，这两产品，折扣为 1 折扣，重命名$2.50，而"折扣$4 2 提供折扣。 因此，我们选择" 2。 总折扣为$14。 若要支持此方式更容易直观，则这是所有可能显示的两产品组合的有效的折扣百分比。1 折扣和折扣 2. 的两个附加的表。 该列表仅组合包括的，因为为，这两种折扣中，两产品将为地方折扣的订单不重要。 最大折扣的有效 (突出显示 25%) 用红色显示每天最低和折扣的有效 (突出显示 10%)。 [重叠折扣组合的![04] (。/media/overlapping 折扣组合 04.jpg)](。/media/overlapping 折扣组合 04.jpg **注释): **，则价格变化时和两个或多个竞争对折扣，保障的唯一方式折扣的最佳的组合将两种折扣相加评估和进行比较。

## <a name="total-possible-combinations"></a>总可能组合
本节继续来自以前的部分的示例。 我们将添加更多的产品和其他折扣，并查看必须计算和比较的组合。 下表显示可能的折扣的组合数量作为产品数量将增加。 表显示发生的情况。两者，当存在两重叠的折扣时，将对于中，并且，在具有三重叠的折扣时使用。 必须验证可以评估中折扣组合的数量超出的偶数快速一计算机可以计算和比较足够快速是可接受的为零售交易记录。 [重叠折扣组合的![05] (。/media/overlapping 折扣组合 05.jpg)](。/media/overlapping 折扣组合 05.jpg) 时，或详细的重叠数量折扣时，可以应用中折扣组合总数快速输入百万，要求以快速估计和选择最好组合的时间被显而易见。 优化那些在零售价引擎中减少必须完成评估组合的总数。 但是，因为数字，折扣重叠的和。交易记录的数量不受限制，大量组合始终将必须进行评估，即如果折扣重叠。 此问题临界值为直线方法解决的问题。

## <a name="marginal-value-method"></a>临界值方法
为了解决组合都创建以指数方式增长编号的问题必须评估计算值，每折扣共享的产品组的产品在两个或多个折扣可以优化应用的存在。 我们将其称之为的此值**临界值**共享的产品的折扣。 共享，在的产品在每个折扣时，包括值包括"平均值临界按产品增加。总折扣金额。 临界值，通过执行减去折扣金额，而无需共享的产品 (DMinus 共享\\ ) 和除以共享的产品 (ProductsShared) 的数目的总折扣金额同时计算) (DTotal 该差异。 [重叠折扣组合的![06] (。/media/overlapping 折扣组合 06.jpg)](。/media/overlapping 折扣组合)，06.jpg 临界在共享的一组值。的产品后，每个折扣计算折扣应用到共享的详尽，在产品，从高的临界值最低到临界的值。 对于此方法，在此情况下，折扣的单个实例后应用，所有剩余折扣的可能性每次没有比较。 而折扣重叠的比较中的一次将应用。 此外的比较未完成。 您可以配置阈值切换到在**零售参数**页面的** **折扣的方法选项卡临界值。 可接受的时间计算总折扣在零售业上更改。 不过，此时间通常在一下跌倍毫秒范围内为秒数。


