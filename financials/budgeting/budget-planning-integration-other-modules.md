---
title: "预算计划与其他模块的集成"
description: "预算计划可以从多个不同资源生成。 所有资源的周期性流程的基本元素相同。"
author: twheeloc
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: twheeloc
ms.search.scope: Core, AX 7.0.0, Operations, UnifiedOperations
ms.custom: 64443
ms.assetid: f9a94db5-906c-404a-9ca5-91528d67c490
ms.search.region: Global
ms.author: sigitac
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: Human Translation
ms.sourcegitcommit: 975497e8ed0c9738c225bad4db9165bf2ebc0192
ms.openlocfilehash: 7f3dc8089153a6c67c1666aa8f859d63dcc9d3c9
ms.contentlocale: zh-cn
ms.lasthandoff: 06/05/2017


---

# <a name="budget-planning-integration-with-other-modules"></a>预算计划与其他模块的集成

[!include[banner](../includes/banner.md)]




<a name="periodic-processes-for-generating-budget-plans"></a>生成预算计划的周期性流程
----------------------------------------------

预算计划可以从以下资源生成：

-   总帐交易记录
-   固定资产
-   预测位置
-   项目预测
-   供应预测
-   需求预测
-   预算登记分录
-   其他预算计划

所有流程的周期性流程的基本元素相同。 选项卡可以定义数据源、目标（预算计划）属性和在后台作为批处理运行流程的选项。 本文章的后面部分介绍在每个流程中可能不明显的物料。

### <a name="actions"></a>行为

对于每个生成流程，有三个操作可用：

-   **创建新的预算计划**创建具有在**目标**部分选择的属性的新计划。 这些属性不必是唯一的。 因此，两个计划可以具有相同的名称和其他值。
-   **更换现有预算计划方案**删除所选预算计划方案中目标预算计划的所有数据，并创建使用所选源数据的新行。
-   **更新现有预算计划方案并追加新数据**更新与源行匹配的目标计划中的现有行和添加新数据的新行。 匹配基于会计科目、日期、预算类和各个其他字段。 例如，当您从预测职位生成预算计划时，该职位编号是一个重要字段。 具有与该源职位编号匹配的职位编号的所有行将使用来自该源的新行替换。

### <a name="source"></a>来源

对于所有流程，**源**选项卡可以通过使用**筛选器**按钮筛选数据。 默认情况下，特定字段添加到每个流程的筛选器。 例如，对于流程**从总帐生成预算计划**，**会计科目**和**主科目**类别可用，并且在生成页显示。 您添加到筛选器的所有字段也将添加到此页，以及您添加的任何条件。

### <a name="target"></a>目标

**目标**选项卡上的**历史**选项允许您在预算计划中使用源数据的日期作为生效日期。 通常，生效日期必须在计划的预算周期中。 当您将**历史**选项设置为**是**时，使用源的日期（甚至年份），以便您可以使用过去数据作为比较的基础。 您不能修改预算计划的历史数据，计划设置为已审核的工作流状态。 但是，如果您在计划有必需更改的其他方案，您可以重置状态。

该页顶部的**聚合总计**字段还确定要使用的日期。 此字段合计金额，并且可以选择将生效日期设置为会计年度或会计期间的第一天。 

**目标**选项卡上的很多字段将变为可编辑或只读，具体取决于您选择的操作。 在您将创建新预算计划更改为更新现有计划时，**预算计划名称**字段将变为不可用，与选择现有计划相关的字段将变为可用。 在**目标**选项卡和 **源** 选项卡上，**分类帐**字段始终不可用，因为此值由所选预算计划流程确定。 

**预算类**字段可以将预算计划行设置为支出交易记录或收入交易记录。 通常，收入交易记录是会计科目的贷方，因此存储为负金额。 通常，这些交易记录在预算计划中同时显示为负金额。 不过，通过在计划布局中作为字段添加预算类，您可以启用收入显示为正金额。

### <a name="generation-rules"></a>生成规则

三个字段提供其他功能：**系数**、**最小值**和**舍入****规则**。 

**系数**字段中的值乘以源金额来设置预算计划中的金额。 然后在您创建预算计划行时，您可以进行调整。 例如，可以为提高 3% 输入 **1.03**。 系数必须为正数。 

**最小值**字段可以设置创建预算计划行的阈值金额。 如果源金额少于此数字，预算计划行不创建。 值 **0.00**  允许所有金额，但不限制行是否为正金额。 （没有值限制行必须为正金额。 负金额始终包括在内并且通常表示贷方条目）。

**舍入规则**字段可以设置创建的预算计划行的精度。 您可以将金额舍入到最接近的货币的 1.00、10.00、100.00，依此类推。

## <a name="notes-for-specific-processes"></a>特定流程的注释
### <a name="generate-budget-plan-from-general-ledger"></a>从总帐生成预算计划

在您从总帐数据创建预算计划时，如果将**历史**选项设置为**否**，则必须将**聚合总计**字段设置为**会计年度**。 源中的期间和日期可能与目标中日期的期间不匹配。 由于流程没有可靠的方式映射这些值，您必须限制流程到年份的第一天。 

在目标中，**预算类**字段设置为**支出**或**收入**。 此设置用于在行上的主科目不是**收入**或**支出**类型时，选择创建的行的**预算类型**属性。

### <a name="generate-budget-plan-from-fixed-assets"></a>从固定资产生成预算计划

**从固定资产生成预算计划**流程不具有按期间或天聚合的选项。 还不存在将计划设置为历史的选项。 您可以使用此周期性流程在预算计划中包括固定资产的计划交易记录。

### <a name="generate-budget-plan-from-forecast-positions"></a>从预测职位生成预算计划

**从预测职位生成预算计划**流程将源预测职位分配到预算计划行。 您可以通过在预算计划布局中作为行添加预测职位或通过使用**预算计划行**查询来查看职位。 如果您不希望将预测职位分配到预算计划行，则将**在预算计划行中包含职位**选项设置为**否**。

预算计划中的行按会计科目和职位聚合。 但是，您可以排除职位编号，以使行只按会计科目聚合。 在**目标**选项卡上，将**在预算计划行中包含职位**选项设置为**否**。

在**预算计划 FTE 方案**字段中，可以选择在预算计划中包括全职等价的数量 (FTE) 的方案。 此字段限制为在目标预算计划的布局中包括的数量类型方案。 如果您选择了一个 FTE 方案，还必须选择 FTE 主科目。 此科目用于创建数量预算计划行。 

在源中选择的预算计划流程和预算计划方案设置目标方案预算计划流程和方案。 由于这些属性分配给预测职位，它们必须与预算计划匹配。 因此，这些属性不能在目标中修改。

### <a name="generate-budget-plan-from-project-forecasts"></a>从项目预测生成预算计划

**从项目预测生成预算计划**流程，如同**从预测职位生成预算计划**流程，具有在数量方案中包括项目数量（工时、支出和物料）的选项。 这两个流程在预算计划布局中还有类似的列筛选器。 

在**源**选项卡上，**包括报表**部分的三个选项确定创建哪些预算计划行。 这些选项与在您直接从项目预测创建预算登记分录时可用的选项相同。 将**损益**选项设置为**是**以创建成本行和收入行。 将 **WIP** 选项设置为**是**以创建在制品条目。 将**工资分配**选项设置为**是**以创建工时交易记录的工资对方科目的行。 

没有**预算类**字段，因为预算类（**支出**或**收入**）由源确定。 

您可以选择包含项目预算金额的预测模型，这样可将项目预算用作源。 请记住项目预算在通过审核时创建项目预测条目。

若要只为预算计划行选择成本或收入，请使用筛选器来选择**预算更新：金额类型 = 成本**。 若要只选择一种预测类型，则使用筛选器来选择**预算更新：交易记录类型 = *xxx***。 

只有一个预测模型可用于生成预算计划方案。 如果运行一个预测模型的流程，然后执行更新并尝试指定另一个模型，那么当应用相同项目和会计科目时，第一个模型将被覆盖。 若要从多个预测模型生成预算计划方案，请生成到不同的预算计划方案并使用分配选项将这些方案一起添加到另一个方案。 

**从项目预测生成预算计划**流程还将源项目分配到预算计划行。

### <a name="generate-budget-plan-from-supply-forecast"></a>从供应预测生成预算计划

**从供应预测生成预算计划**流程中的源筛选器选项在**将采购预算转移到分类帐**功能中的选项之后建模，因为该流程和该功能之间有相似之处。

### <a name="generate-budget-plan-from-demand-forecast"></a>从需求预测生成预算计划

对于**从需求预测生成预算计划**流程，可以将**销售订单**选项设置为**是**以在预算计划中生成收入行，将**消耗**设置为**是**以创建支出行，或将两个选项同时设置为**是**。

### <a name="generate-budget-plan-from-budget-register-entries"></a>从预算登记分录生成预算计划

对于**从预算登记分录生成预算计划**流程，源必须指定一个子模型、一个预算代码和一个条目编号。 换言之，一次只能为一个预算登记分录创建预算计划行。 您可以通过为每个源条目运行一次此流程来使用相同预算计划中的其他条目。

### <a name="generate-budget-plan-from-budget-plan"></a>从预算计划生成预算计划

对于**从预算计划生成预算计划**流程，**目标**选项卡上的其他选项设置可以分配新的财务维度。 如果选择了财务维度，则该值将为所有预算计划行使用。 因此，您可以使用一个预算计划作为其他预算计划的基础，不过，还可以分配不同部门或成本中心到新预算计划（举例）。

## <a name="looking-back-from-the-budget-plan"></a>从预算计划回顾
### <a name="budget-plans-by-dimension-set-inquiry"></a>按维度集排列的预算计划查询

**按维度集排列的预算计划**查询包括让您运行查询以帮助确定预算计划数据源的若干选项。 

选择某一行并单击**预算计划行**按钮运行**预算计划行**查询。 结果为所选行的维度值进行筛选。 然后可以应用附加参数。 

使用**供应预测**和**需求预测**按钮运行这些查询。 在这两种情况下，查询搜索可能创建了预算计划行的预测行。 

其他可用的报表包括**按预算计划预测职位**报表。 当您要确定职位是否正确地分配到预算计划时，此报表尤其有用。




