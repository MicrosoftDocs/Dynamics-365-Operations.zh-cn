---
title: 设置和管理 Retail Modern POS (MPOS) 的图像
description: 本文说明设置和管理显示在 Retail Modern POS (MPOS) 中的各个实体的图像所涉及的步骤。
author: athinesh99
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailChannelProfile, RetailMediaGallery, RetailImages,
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: 52851
ms.assetid: 5c21385e-64e0-4091-98fa-6a662eb33010
ms.search.region: global
ms.search.industry: Retail
ms.author: athinesh
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 8f4658696a2e6c2959b87aa852c25c108b9ba302
ms.sourcegitcommit: f87de0f949b5d60993b19e0f61297f02d42b5bef
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/24/2019
ms.locfileid: "2024836"
---
# <a name="set-up-and-manage-images-for-retail-modern-pos-mpos"></a><span data-ttu-id="d3e49-103">设置和管理 Retail Modern POS (MPOS) 的图像</span><span class="sxs-lookup"><span data-stu-id="d3e49-103">Set up and manage images for Retail Modern POS (MPOS)</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="d3e49-104">本文说明设置和管理显示在 Retail Modern POS (MPOS) 中的各个实体的图像所涉及的步骤。</span><span class="sxs-lookup"><span data-stu-id="d3e49-104">This article explains the steps that are involved in setting up and managing images for the various entities that appear in Retail Modern POS (MPOS).</span></span>

## <a name="setting-up-the-media-base-url-and-defining-media-templates-to-configure-the-format-for-image-urls"></a><span data-ttu-id="d3e49-105">设置媒体基 URL 和定义媒体模板，以配置图像 URL 的格式</span><span class="sxs-lookup"><span data-stu-id="d3e49-105">Setting up the media base URL and defining media templates to configure the format for image URLs</span></span>

<span data-ttu-id="d3e49-106">Retail Modern POS (MPOS) 中显示的图像必须在外部承载（Retail 之外）。</span><span class="sxs-lookup"><span data-stu-id="d3e49-106">The images that appear in Retail Modern POS (MPOS) must be hosted externally, outside of Retail.</span></span> <span data-ttu-id="d3e49-107">通常，可在内容管理系统、内容交付网络 (CDN) 或媒体服务器承载。</span><span class="sxs-lookup"><span data-stu-id="d3e49-107">Typically, they are hosted in a content management system, content delivery network (CDN), or media server.</span></span> <span data-ttu-id="d3e49-108">然后，MPOS 通过访问目标 URL 来获取并显示相应实体（例如产品和类别）的图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-108">MPOS then fetches and displays the images for the appropriate entities, such as products and catalogs, by accessing the target URL.</span></span> <span data-ttu-id="d3e49-109">若要获取这些外部承载的图像，MPOS 需要这些图像的正确 URL 格式。</span><span class="sxs-lookup"><span data-stu-id="d3e49-109">To fetch these externally hosted images, MPOS requires the correct URL format for the images.</span></span> <span data-ttu-id="d3e49-110">您可以通过在通道配置文件中设置**媒体基 URL**的值并使用每个实体的**定义媒体模板**功能来为图像配置所需的 URL 格式。</span><span class="sxs-lookup"><span data-stu-id="d3e49-110">You can configure the required URL format for the images by setting up the **Media base URL** value in the channel profile and using the **Define media template** functionality for each entity.</span></span> <span data-ttu-id="d3e49-111">您也可以通过使用**在 Excel 中编辑**功能来覆盖实体的子集的标准 URL 格式。</span><span class="sxs-lookup"><span data-stu-id="d3e49-111">You can also overwrite the standard URL format for a subset of entities by using the **Edit in Excel** functionality.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d3e49-112">在 Retail 的当前版本中，您不能再通过使用实体的**默认**属性组中 MPOS 的**图像**属性 XML 来设置 URL 格式。</span><span class="sxs-lookup"><span data-stu-id="d3e49-112">In the current version of Retail, you can no longer set up the URL format by using the **Image** attribute XML for MPOS in the **Default** attribute group for entities.</span></span> <span data-ttu-id="d3e49-113">如果您熟悉 Microsoft Dynamics AX 2012 R3 且正在使用 Dynamics 365 Retail 的当前版本，请确保始终使用新的**定义媒体模板**功能设置图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-113">If you're familiar with Microsoft Dynamics AX 2012 R3 and are now using the current version of Dynamics 365 Retail, make sure that you always use the new **Define media template** functionality to set up images.</span></span> <span data-ttu-id="d3e49-114">请勿使用或修改任何实体（包括产品）的**默认**属性组中的**图像**属性。</span><span class="sxs-lookup"><span data-stu-id="d3e49-114">Don't use or modify the **Image** attribute in the **Default** attribute group for any entities, including products.</span></span> <span data-ttu-id="d3e49-115">您在图像的**默认**属性组中直接作出的更改不会得到反映。</span><span class="sxs-lookup"><span data-stu-id="d3e49-115">Changes that you make directly in the **Default** attribute group for images won't be reflected.</span></span> <span data-ttu-id="d3e49-116">此选项将在未来版本中被禁用。</span><span class="sxs-lookup"><span data-stu-id="d3e49-116">This option will be disabled in a future release.</span></span>

<span data-ttu-id="d3e49-117">在以下过程中，将作为示例设置目录实体的图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-117">In the following procedures, images are set up for the Catalog entity as an example.</span></span> <span data-ttu-id="d3e49-118">这些过程将帮助确保为使用通用路径的所有目录图像隐式设置正确的图像目标路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-118">These procedures will help guarantee that the correct image destination path is set implicitly for all catalog images that use a common path.</span></span> <span data-ttu-id="d3e49-119">例如，如果您在外部设置了媒体服务器或 CDN，且希望图像在给定商店的 MPOS 中显示，**定义媒体模板**功能可帮助您设置 MPOS 可在其中查找和检索图像的路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-119">For example, if you've set up a media server or CDN externally, and want the images to appear in MPOS for a given store, the **Define media template** functionality helps you the set the path where MPOS can look up and retrieve the images.</span></span>

> [!NOTE]
> <span data-ttu-id="d3e49-120">对于此演示数据示例，媒体服务器是在零售服务器上部署的。</span><span class="sxs-lookup"><span data-stu-id="d3e49-120">For this demo data example, the media server is deployed on the Retail Server.</span></span> <span data-ttu-id="d3e49-121">但是，您可以在 Dynamics 365 Retail 以外的任何地方部署。</span><span class="sxs-lookup"><span data-stu-id="d3e49-121">However, you can have it anywhere outside Dynamics 365  Retail.</span></span>

### <a name="set-up-the-media-base-url-for-a-channel"></a><span data-ttu-id="d3e49-122">为通道设置媒体基 URL</span><span class="sxs-lookup"><span data-stu-id="d3e49-122">Set up the media base URL for a channel</span></span>

1. <span data-ttu-id="d3e49-123">打开 Retail HQ 门户。</span><span class="sxs-lookup"><span data-stu-id="d3e49-123">Open the Retail HQ portal.</span></span>
2. <span data-ttu-id="d3e49-124">单击**零售** &gt; **渠道设置** &gt; **渠道配置文件**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-124">Click **Retail** &gt; **Channel setup** &gt; **Channel profiles**.</span></span>

    <span data-ttu-id="d3e49-125">[![导航](./media/channel-profile1.png)](./media/channel-profile1.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-125">[![Navigation](./media/channel-profile1.png)](./media/channel-profile1.png)</span></span>

3. <span data-ttu-id="d3e49-126">在您的商店用于 MPOS 的通道配置文件中，将**媒体基 URL**字段更新为您的媒体服务器或 CDN 的基 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-126">In the channel profile that your store uses for MPOS, update the **Media base URL** field with the base URL of your media server or CDN.</span></span> <span data-ttu-id="d3e49-127">该基 URL 是不同实体的所有图像文件夹共享的 URL 的第一部分。</span><span class="sxs-lookup"><span data-stu-id="d3e49-127">The base URL is the first part of the URL that is shared by all image folders of different entities.</span></span>

    <span data-ttu-id="d3e49-128">[![“渠道配置文件”页](./media/channel-profile2.png)](./media/channel-profile2.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-128">[![Channel profiles page](./media/channel-profile2.png)](./media/channel-profile2.png)</span></span>

### <a name="define-the-media-template-for-an-entity"></a><span data-ttu-id="d3e49-129">为实体定义媒体模板</span><span class="sxs-lookup"><span data-stu-id="d3e49-129">Define the media template for an entity</span></span>

1. <span data-ttu-id="d3e49-130">单击**零售** &gt; **目录管理** &gt; **目录图像**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-130">Click **Retail** &gt; **Catalog management** &gt; **Catalog images**.</span></span>
2. <span data-ttu-id="d3e49-131">在**目录图像**页面上的“操作”窗格中，单击**定义媒体模板**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-131">On the **Catalog images** page, on the Action Pane, click **Define media template**.</span></span> <span data-ttu-id="d3e49-132">在**定义媒体模板**对话框的**实体**字段中，默认情况下应选择**目录**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-132">In the **Define media template** dialog box, in the **Entity** field, **Catalog** should be selected by default.</span></span>
3. <span data-ttu-id="d3e49-133">在**媒体路径**快速选项卡上，输入图像位置的剩余路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-133">On the **Media path** FastTab, enter the remaining path of the image location.</span></span> <span data-ttu-id="d3e49-134">媒体路径支持**LanguageID**作为变量。</span><span class="sxs-lookup"><span data-stu-id="d3e49-134">The media path supports **LanguageID** as a variable.</span></span> <span data-ttu-id="d3e49-135">例如，对于演示数据，您可以在您的媒体服务器的媒体基 URL (`https://testax3ret.cloud.test.dynamics.com/RetailServer/MediaServer`) 下为所有目录图像创建一个**目录**文件夹。</span><span class="sxs-lookup"><span data-stu-id="d3e49-135">For example, for the demo data, you can create a **Catalogs** folder for all catalog images under the media base URL for your media server (`https://testax3ret.cloud.test.dynamics.com/RetailServer/MediaServer`).</span></span> <span data-ttu-id="d3e49-136">然后可以为每种语言创建一个文件夹（例如 en-US 或 fr-FR），然后将相应图像复制到每个文件夹下。</span><span class="sxs-lookup"><span data-stu-id="d3e49-136">You can then have a folder for each language, such as en-US or fr-FR, and copy the appropriate images under each folder.</span></span> <span data-ttu-id="d3e49-137">如果您没有各种语言的不同图像，您可以忽略您的文件夹结构中的**LanguageID**变量，并直接指向包含目录图像的“目录”文件夹。</span><span class="sxs-lookup"><span data-stu-id="d3e49-137">If you don't have different images for the various languages, you can omit the **LanguageID** variable from your folder structure and point directly to the Catalogs folder that contains the catalog images.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d3e49-138">Retail 当前版本支持目录、产品和类别实体的 **{LanguageId}** 令牌。</span><span class="sxs-lookup"><span data-stu-id="d3e49-138">The current version of Retail supports the **{LanguageId}** token for Catalog, Product, and Category entities.</span></span> <span data-ttu-id="d3e49-139">（根据自 Microsoft Dynamics AX 6.x. 以来已生效的现有标准，客户和工作人员实体 **{LanguageID}** 令牌）</span><span class="sxs-lookup"><span data-stu-id="d3e49-139">(The **{LanguageID}** token isn't supported for Customer and Worker entities, according to the existing standard that has been effective since Microsoft Dynamics AX 6.x.)</span></span>

4. <span data-ttu-id="d3e49-140">对于图像，文件名格式是硬编码为目录名称的，不能更改。</span><span class="sxs-lookup"><span data-stu-id="d3e49-140">For images, the file name format is hard-coded to the catalog name and can't be changed.</span></span> <span data-ttu-id="d3e49-141">因此，请重命名您的图像，使其具有适当的目录名称，以帮助确保 MPOS 正确处理它们。</span><span class="sxs-lookup"><span data-stu-id="d3e49-141">Therefore, rename your images so that they have appropriate catalog names, to help guarantee that MPOS handles them correctly.</span></span>
5. <span data-ttu-id="d3e49-142">在**文件扩展名**字段中，根据您拥有的图像的类型选择预期的文件扩展名。</span><span class="sxs-lookup"><span data-stu-id="d3e49-142">In the **File Extension** field, select the expected file name extension, depending on the type of images that you have.</span></span> <span data-ttu-id="d3e49-143">例如，对于演示数据，目录图像扩展名将设置为 .jpg。</span><span class="sxs-lookup"><span data-stu-id="d3e49-143">For example, for the demo data, the catalog images are set to the .jpg extension.</span></span> <span data-ttu-id="d3e49-144">（图像文件也已重命名，使其具有类别名称。）</span><span class="sxs-lookup"><span data-stu-id="d3e49-144">(The image files are also renamed so that they have catalog names.)</span></span>
6. <span data-ttu-id="d3e49-145">单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-145">Click **OK**.</span></span>
7. <span data-ttu-id="d3e49-146">为了验证图像的媒体模板是否已正确保存，请在**目录图像**页面上再次单击**定义媒体模板**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-146">To validate that the media template for images has been saved correctly, on the **Catalog images** page, click **Define media template** again.</span></span> <span data-ttu-id="d3e49-147">若要在不关闭**定义媒体模板**对话框的情况下验证模板，您可以使用**生成适用于 Excel 的图像 URL** 快速选项卡。</span><span class="sxs-lookup"><span data-stu-id="d3e49-147">To validate the template without closing the **Define media template** dialog box, you can use the **Generate Image URLs for Excel** FastTab.</span></span> <span data-ttu-id="d3e49-148">检查图像 URL 的外观，并验证 URL 是否符合之前提到的模板标准。</span><span class="sxs-lookup"><span data-stu-id="d3e49-148">Check the appearance of the image URL, and verify that the URL complies with the template standard that was mentioned earlier.</span></span> <span data-ttu-id="d3e49-149">现在，**定义媒体模板**对话框针对使用此通用 URL 路径的所有目录图像隐式设置了图像路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-149">The **Define media template** dialog box has now set the image path implicitly for all catalog images that use this common URL path.</span></span> <span data-ttu-id="d3e49-150">此 URL 路径适用于所有目录图像，除非它们被覆盖。</span><span class="sxs-lookup"><span data-stu-id="d3e49-150">This URL path applies to all catalog images unless they are overwritten.</span></span> <span data-ttu-id="d3e49-151">图像路径的第一部分取自您在通道配置文件中定义的媒体基 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-151">The first part of the image path is taken from the media base URL that you defined in the channel profile.</span></span> <span data-ttu-id="d3e49-152">路径的其余部分取自您在媒体模板中定义的路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-152">The remaining part of the path is taken from the path that you defined in the media template.</span></span> <span data-ttu-id="d3e49-153">这两部分串联起来形成图像位置的完成 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-153">The two parts are concatenated to provide the full URL of the image location.</span></span> <span data-ttu-id="d3e49-154">例如，演示数据中一个目录名为“Fabrikam Base Catalog”。</span><span class="sxs-lookup"><span data-stu-id="d3e49-154">For example, a catalog in the demo data is named Fabrikam Base Catalog.</span></span> <span data-ttu-id="d3e49-155">因此，图像名称必须为 Fabrikam Base Catalog.jpg，以便其使用目录名称和模板中的配置的 .jpg 文件扩展名。</span><span class="sxs-lookup"><span data-stu-id="d3e49-155">Therefore, the image name must be Fabrikam Base Catalog.jpg so that it uses the catalog name and the .jpg file name extension that is configured in the template.</span></span> <span data-ttu-id="d3e49-156">在这种情况下，连接后，URL 将为 `https://testax3ret.cloud.test.dynamics.com/RetailServer/MediaServer/Catalogs/en-US/Fabrikam Base Catalog.jpg`。</span><span class="sxs-lookup"><span data-stu-id="d3e49-156">In this case, after concatenation, the URL will be `https://testax3ret.cloud.test.dynamics.com/RetailServer/MediaServer/Catalogs/en-US/Fabrikam Base Catalog.jpg`.</span></span>
8. <span data-ttu-id="d3e49-157">运行同步作业可将新模板推送到通道数据库，以便 MPOS 使用该模板访问图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-157">Run the synchronization jobs to push the new template to the channel database, so that MPOS can use the template to access the images.</span></span>
9. <span data-ttu-id="d3e49-158">若要在通道侧更新目录图像的媒体模板，请确保从**零售 IT** &gt; **配送计划**运行**目录作业 1150**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-158">To update the media template for catalog images on the channel side, be sure to run **Catalog Job 1150** from **Retail IT** &gt; **Distribution schedule**.</span></span>

    <span data-ttu-id="d3e49-159">[![“定义媒体模板”对话框](./media/catalog1.png)](./media/catalog1.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-159">[![Define media template dialog box](./media/catalog1.png)](./media/catalog1.png)</span></span>

## <a name="previewing-an-image-from-the-entity-level"></a><span data-ttu-id="d3e49-160">从实体级别预览图像</span><span class="sxs-lookup"><span data-stu-id="d3e49-160">Previewing an image from the entity level</span></span>

1. <span data-ttu-id="d3e49-161">从 HQ 中的实体项目的页面上，您可以预览使用派生自媒体模板的图像 URL 的图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-161">From the page for the entity item in HQ, you can preview the image that uses the image URL that is derived from the media template.</span></span> <span data-ttu-id="d3e49-162">对于本示例，请转到相应目录，然后在“操作”窗格中单击**媒体** &gt; **图像**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-162">For this example, go to the appropriate catalog, and then, on the Action Pane, click **Media** &gt; **Images**.</span></span> <span data-ttu-id="d3e49-163">使用下拉列表选择可能具有不同通道配置文件的不同商店。</span><span class="sxs-lookup"><span data-stu-id="d3e49-163">Use the drop-down list to select different stores that might have different channel profiles.</span></span>
2. <span data-ttu-id="d3e49-164">若要编辑或删除隐式媒体模板，您必须返回到**目录图像**页面的**定义媒体模板**对话框。</span><span class="sxs-lookup"><span data-stu-id="d3e49-164">To edit or remove the implicit media template, you must return to the **Define media template** dialog box for the **Catalog images** page.</span></span>
3. <span data-ttu-id="d3e49-165">您可以使用**添加**和**删除**手动更改基于隐式模板并用于特定图像的路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-165">You can use the **Add** and **Remove** buttons to manually change the path that is based on the implicit template and used for a specific image.</span></span> <span data-ttu-id="d3e49-166">有关更多信息，请参阅本文后面的[覆盖实体项目的媒体模板](#overwriting-the-media-template-for-entity-items)一节。</span><span class="sxs-lookup"><span data-stu-id="d3e49-166">For more information, see the [Overwriting the media template for entity items](#overwriting-the-media-template-for-entity-items) section later in this article.</span></span>
4. <span data-ttu-id="d3e49-167">完成预览图像和进行所需的更改后，请启动相应商店的 MPOS 实例，查看是否显示目录图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-167">After you've finished previewing an image and making any changes that you require, start the MPOS instance for the appropriate store, and see whether the catalog images are shown.</span></span>

    <span data-ttu-id="d3e49-168">[![“图像”对话框](./media/catalog4.png)](./media/catalog4.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-168">[![Images dialog box](./media/catalog4.png)](./media/catalog4.png)</span></span>

> [!NOTE]
> <span data-ttu-id="d3e49-169">您可以对受支持的所有五个实体使用相同的过程：工作人员、客户、目录、类别和产品。</span><span class="sxs-lookup"><span data-stu-id="d3e49-169">You can use the same procedure for all the five entities that are supported: Worker, Customer, Catalog, Category, and Products.</span></span> <span data-ttu-id="d3e49-170">“目录产品”（在目录级别设置的产品）和“通道目录”（在通道级别设置的产品）使用针对产品实体设置的媒体模板。</span><span class="sxs-lookup"><span data-stu-id="d3e49-170">"Catalog Products" (products that are set at the catalog level) and "Channel Products" (products that are set at the channel level) use the media template that is set for the Products entity.</span></span> <span data-ttu-id="d3e49-171">对于产品媒体模板，您可以选择每个产品要显示的产品图像数。</span><span class="sxs-lookup"><span data-stu-id="d3e49-171">For the Products media template, you can select the number of product images to show per product.</span></span> <span data-ttu-id="d3e49-172">您也可以为给定产品设置默认图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-172">You can also set the default image for a given product.</span></span> <span data-ttu-id="d3e49-173">这样，您可以防止 MPOS 中出现空白图像并帮助控制将哪个图像用作产品物料的默认图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-173">In this way, you can prevent blank images in MPOS and help to control which image is used as the default image for a product item.</span></span> <span data-ttu-id="d3e49-174">在以下示例中，每个产品有五个图像，第一个图像设置为默认图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-174">In the following example, each product has five images, and the first image is set as the default image.</span></span> <span data-ttu-id="d3e49-175">变型产品采用与基础产品相同的方式处理。</span><span class="sxs-lookup"><span data-stu-id="d3e49-175">Variant products are treated the same way as master products.</span></span> <span data-ttu-id="d3e49-176">图像文件的文件名应基于产品编号。</span><span class="sxs-lookup"><span data-stu-id="d3e49-176">The file name of the image file should be based on the product number.</span></span> <span data-ttu-id="d3e49-177">在生成文件名时，也会跳过一些字符。</span><span class="sxs-lookup"><span data-stu-id="d3e49-177">Some characters are also escaped while the file name is generated.</span></span> <span data-ttu-id="d3e49-178">因此，最好通过使用**生成适用于 Excel 的图像 URL** 部分来验证文件名称。</span><span class="sxs-lookup"><span data-stu-id="d3e49-178">Therefore, it's a good to verify the file name by using the **Generate Image URLs for Excel** section.</span></span>
>
> <span data-ttu-id="d3e49-179">[![“定义媒体模板”对话框](./media/prods.png)](./media/prods.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-179">[![Define media template dialog box](./media/prods.png)](./media/prods.png)</span></span>

## <a name="synchronization-jobs-to-send-a-media-template-to-the-channel-side"></a><span data-ttu-id="d3e49-180">将媒体模板发送到通道侧的同步作业</span><span class="sxs-lookup"><span data-stu-id="d3e49-180">Synchronization jobs to send a media template to the channel side</span></span>

<span data-ttu-id="d3e49-181">对于所有五个受支持的实体（工作人员、客户、目录、类别和产品），无论您何时更新**定义媒体模板**对话框来设置图像，请确保从**零售 IT** &gt; **配送计划**运行目录作业 (1150)。</span><span class="sxs-lookup"><span data-stu-id="d3e49-181">For all the five supported entities (Worker, Customer, Catalog, Category, and Products), whenever you update the **Define media template** dialog to set up an image, make sure that you run the Catalog job (1150) from **Retail IT** &gt; **Distribution schedule**.</span></span> <span data-ttu-id="d3e49-182">此作业支持将更新后的媒体模板同步到通道和供 MPOS 使用。</span><span class="sxs-lookup"><span data-stu-id="d3e49-182">This job will enable the updated media template to be synced to the channel and used by MPOS.</span></span> <span data-ttu-id="d3e49-183">在进行以下任意更改后运行目录作业 (1150)：</span><span class="sxs-lookup"><span data-stu-id="d3e49-183">Run the Catalog job (1150) after you make any of the following changes:</span></span>

- <span data-ttu-id="d3e49-184">从**目录图像** &gt; **定义媒体模板**更新目录图像媒体模板。</span><span class="sxs-lookup"><span data-stu-id="d3e49-184">You update the Catalog image media template from **Catalog images** &gt; **Define media template**.</span></span>
- <span data-ttu-id="d3e49-185">从**员工图像** &gt; **定义媒体模板**更新员工图像媒体模板。</span><span class="sxs-lookup"><span data-stu-id="d3e49-185">You update the Employee image media template from **Employee images** &gt; **Define media template**.</span></span>
- <span data-ttu-id="d3e49-186">从**客户图像** &gt; **定义媒体模板**更新客户图像媒体模板。</span><span class="sxs-lookup"><span data-stu-id="d3e49-186">You update the Customer image media template from **Customer image** &gt; **Define media template**.</span></span>
- <span data-ttu-id="d3e49-187">从**产品图像** &gt; **定义媒体模板**更新产品图像媒体模板。</span><span class="sxs-lookup"><span data-stu-id="d3e49-187">You update the Product image media template from **Product images** &gt; **Define media template**.</span></span>
- <span data-ttu-id="d3e49-188">从**类别图像** &gt; **定义媒体模板**更新类别图像媒体模板。</span><span class="sxs-lookup"><span data-stu-id="d3e49-188">You update the Category image media template from **Category images** &gt; **Define media template**.</span></span> <span data-ttu-id="d3e49-189">您还必须发布通道。</span><span class="sxs-lookup"><span data-stu-id="d3e49-189">You must also publish the channel.</span></span>

## <a name="overwriting-the-media-template-for-entity-items"></a><span data-ttu-id="d3e49-190">覆盖实体项目的媒体模板</span><span class="sxs-lookup"><span data-stu-id="d3e49-190">Overwriting the media template for entity items</span></span>

<span data-ttu-id="d3e49-191">正如您在上一节中所学的，给定实体的媒体模板仅支持一个通用路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-191">As you learned in the previous section, the media template for a given entity supports only one common path.</span></span> <span data-ttu-id="d3e49-192">该路径基于配置的媒体基 URL 和定义的媒体路径。</span><span class="sxs-lookup"><span data-stu-id="d3e49-192">This path is based on the media base URL that is configured and the media path that is defined.</span></span> <span data-ttu-id="d3e49-193">不过，在很多情况下，零售商希望能将来自不同源的图像用于一个实体中项目的子集。</span><span class="sxs-lookup"><span data-stu-id="d3e49-193">However, in many cases, a retailer wants to be able to use images from different sources for a subset of items in an entity.</span></span> <span data-ttu-id="d3e49-194">例如，某个商店将自托管的媒体服务器用于一组目录图像，而将 CDN URL 用于另一组目录图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-194">For example, a store uses the self-hosted media server for one set of catalog images but uses CDN URLs for another set.</span></span> <span data-ttu-id="d3e49-195">若要针对实体级别的实体图像覆盖基于媒体模板的图像 URL，您可以从**预览**页面使用“在 Excel 中编辑”和“手动编辑”功能。</span><span class="sxs-lookup"><span data-stu-id="d3e49-195">To overwrite image URLs that are based on a media template for entity images at the entity level, you can use the Edit in Excel and Manual edit functionality from the **Preview** page.</span></span>

### <a name="overwrite-by-using-edit-in-excel"></a><span data-ttu-id="d3e49-196">使用“在 Excel 中编辑”覆盖</span><span class="sxs-lookup"><span data-stu-id="d3e49-196">Overwrite by using Edit in Excel</span></span>

1. <span data-ttu-id="d3e49-197">单击**零售** &gt; **目录管理** &gt; **目录图像**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-197">Click **Retail** &gt; **Catalog management** &gt; **Catalog images**.</span></span>
2. <span data-ttu-id="d3e49-198">在**目录图像**页面上，单击**定义媒体模板**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-198">On the **Catalog images** page, click **Define media template**.</span></span> <span data-ttu-id="d3e49-199">在**定义媒体模板**对话框的**实体**字段中，应选择**目录**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-199">In the **Define media template** dialog box, in the **Entity** field, **Catalog** should be selected.</span></span>
3. <span data-ttu-id="d3e49-200">在**媒体路径**快速选项卡上，注意图像位置。</span><span class="sxs-lookup"><span data-stu-id="d3e49-200">On the **Media path** FastTab, notice the image location.</span></span>
4. <span data-ttu-id="d3e49-201">在**生成适用于 Excel 的图像 URL**快速选项卡上，单击**生成**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-201">On the **Generate Image URLs for Excel** FastTab, click **Generate**.</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="d3e49-202">无论何时更改媒体模板，您都必须单击**生成**才能使用“在 Excel 中编辑”功能。</span><span class="sxs-lookup"><span data-stu-id="d3e49-202">Whenever the media template is changed, you must click **Generate** before you can use the Edit in Excel functionality.</span></span>

    <span data-ttu-id="d3e49-203">[![为 Excel 快速选项卡生成图像 URL](./media/excel1.jpg)](./media/excel1.jpg)</span><span class="sxs-lookup"><span data-stu-id="d3e49-203">[![Generate Image URLs for Excel FastTab](./media/excel1.jpg)](./media/excel1.jpg)</span></span>

    <span data-ttu-id="d3e49-204">现在您可以看到基于上一次保存的媒体模板生成的图像 URL 的预览。</span><span class="sxs-lookup"><span data-stu-id="d3e49-204">You now see a preview of the image URLs that were generated based on the last saved media template.</span></span>

    <span data-ttu-id="d3e49-205">[![选择“生成”后为 Excel 快速选项卡生成图像 URL](./media/excel2.png)](./media/excel2.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-205">[![Generate Image URLs for Excel FastTab after Generate is selected](./media/excel2.png)](./media/excel2.png)</span></span>

    > [!NOTE]
    > <span data-ttu-id="d3e49-206">为 Excel 生成的 URL 使用已定义的媒体模板的路径和惯例。</span><span class="sxs-lookup"><span data-stu-id="d3e49-206">The URLs that are generated for Excel use the path and conventions of the media template that is defined.</span></span> <span data-ttu-id="d3e49-207">这些惯例包括适用于文件名的惯例。</span><span class="sxs-lookup"><span data-stu-id="d3e49-207">These conventions include the conventions for file names.</span></span> <span data-ttu-id="d3e49-208">预期是您在 Retail 以外设置了物理图像，且这些图像可以从派生自您之前定义的媒体模板的 URL 中检索。</span><span class="sxs-lookup"><span data-stu-id="d3e49-208">The expectation is that you've set up the physical images outside Retail, and the images can be retrieved from the URLs that are derived from the media template that you defined earlier.</span></span> <span data-ttu-id="d3e49-209">您可以使用“在 Excel 中编辑”功能来覆盖这些派生的 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-209">You can overwrite these derived URLs by using the Edit in Excel functionality.</span></span>

5. <span data-ttu-id="d3e49-210">单击**在 Excel 中编辑**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-210">Click **Edit in Excel**.</span></span>
6. <span data-ttu-id="d3e49-211">打开 Microsoft Excel 工作表后，在系统提示时单击**启用编辑**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-211">After the Microsoft Excel worksheet is opened, click **Enable edit** when you're prompted.</span></span>
7. <span data-ttu-id="d3e49-212">当系统提示时，单击右侧窗格中的**信任此加载项**，并等待加载项完成安装。</span><span class="sxs-lookup"><span data-stu-id="d3e49-212">When you're prompted, click **Trust this add-in** in the right pane, and wait for the add-in to complete the installation.</span></span>

    <span data-ttu-id="d3e49-213">[![信任此加载项](./media/excel4.jpg)](./media/excel4.jpg)</span><span class="sxs-lookup"><span data-stu-id="d3e49-213">[![Trust this add-in](./media/excel4.jpg)](./media/excel4.jpg)</span></span>

8. <span data-ttu-id="d3e49-214">如果系统提示您登录，请输入您用来登录 HQ 的凭证。</span><span class="sxs-lookup"><span data-stu-id="d3e49-214">If you're prompted to sign in, enter the credentials that you used to sign in to HQ.</span></span>

    <span data-ttu-id="d3e49-215">[![登录提示](./media/excel5.png)](./media/excel5.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-215">[![Sign-in prompt](./media/excel5.png)](./media/excel5.png)</span></span>

9. <span data-ttu-id="d3e49-216">登录后，您应该可以看到各种目录条目的图像 URL 的列表。</span><span class="sxs-lookup"><span data-stu-id="d3e49-216">After you sign in, you should be able to see the list of image URLs for the various catalog entries.</span></span>
10. <span data-ttu-id="d3e49-217">您可以针对各种实体项目编辑、添加和删除图像 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-217">You edit, add, and remove the image URLs for various entity items.</span></span>
11. <span data-ttu-id="d3e49-218">对于除产品外的所有实体，您可以覆盖图形 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-218">For all entities except Products, you can overwrite the image URLs.</span></span> <span data-ttu-id="d3e49-219">修改现有图像 URL，使其使用图像的新目标 URL，然后将文件名更新为图像文件的新文件名。</span><span class="sxs-lookup"><span data-stu-id="d3e49-219">Modify the existing image URL, so that it uses the new destination URL of the image, and update the file name with the new file name for the image file.</span></span> <span data-ttu-id="d3e49-220">文件名必须唯一，才能帮助保证记录唯一。</span><span class="sxs-lookup"><span data-stu-id="d3e49-220">The file name must be unique to help guarantee that the record is unique.</span></span>

    <span data-ttu-id="d3e49-221">[![在 Excel 中覆盖图像 URL](./media/excel6.jpg)](./media/excel6.jpg)</span><span class="sxs-lookup"><span data-stu-id="d3e49-221">[![Overwrite the image URLs in Excel](./media/excel6.jpg)](./media/excel6.jpg)</span></span>

    > [!NOTE]
    > <span data-ttu-id="d3e49-222">当您使用“在 Excel 中编辑”功能或实体项目页覆盖产品实体的图像 URL 时，MPOS 将始终将所有媒体模板图像 URL 与被覆盖的图像 URL 一起显示。</span><span class="sxs-lookup"><span data-stu-id="d3e49-222">When you overwrite image URLs for Products entities by using the Edit in Excel functionality or the entity item page, MPOS always shows all the media template image URLs together with the overwritten image URLs.</span></span>

12. <span data-ttu-id="d3e49-223">完成更改后，单击**在 Excel 中发布**以创建新的显式关联实体。</span><span class="sxs-lookup"><span data-stu-id="d3e49-223">After you've finished making your changes, click **Publish in Excel** to create a new explicit association entry.</span></span>
13. <span data-ttu-id="d3e49-224">返回到 HQ，并单击**确定**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-224">Return to HQ, and click **OK**.</span></span>
14. <span data-ttu-id="d3e49-225">运行与实体相应的同步作业，并在实体页面上或 MPOS 中查看预览。</span><span class="sxs-lookup"><span data-stu-id="d3e49-225">Run the appropriate synchronization jobs for the entity, and check the preview on the entity page or in MPOS.</span></span>

#### <a name="creating-new-records"></a><span data-ttu-id="d3e49-226">创建新记录</span><span class="sxs-lookup"><span data-stu-id="d3e49-226">Creating new records</span></span>

<span data-ttu-id="d3e49-227">您可以在 Excel 中创建新记录。</span><span class="sxs-lookup"><span data-stu-id="d3e49-227">You can create new records in Excel.</span></span> <span data-ttu-id="d3e49-228">不过，请确保提供正确的信息。</span><span class="sxs-lookup"><span data-stu-id="d3e49-228">However, make sure that you provide the correct information.</span></span> <span data-ttu-id="d3e49-229">例如，若要为某个目录创建一个新条目，要确保目录 ID 和目录名称正确，还要提供唯一文件名。</span><span class="sxs-lookup"><span data-stu-id="d3e49-229">For example, to create a new entry for a catalog, make sure that the catalog ID and catalog name are correct, and also provide a unique file name.</span></span> <span data-ttu-id="d3e49-230">唯一文件名很重要，因为发布过程中会验证 Excel 中记录的唯一性。</span><span class="sxs-lookup"><span data-stu-id="d3e49-230">The unique file name is very important, because the uniqueness of records in Excel is validated during publishing.</span></span> <span data-ttu-id="d3e49-231">首先复制您要为其创建新记录的目录的详细信息，然后复制记录。</span><span class="sxs-lookup"><span data-stu-id="d3e49-231">First copy the details from the catalog that you want to create a new record for, and copy the record.</span></span> <span data-ttu-id="d3e49-232">只需更新文件名和 URL，因为其余信息都将是相同的。</span><span class="sxs-lookup"><span data-stu-id="d3e49-232">You just have to update the file name and URL, because the rest of the information will be same.</span></span> <span data-ttu-id="d3e49-233">若要为产品实体项目创建新记录，您可以使用相同的基本过程。</span><span class="sxs-lookup"><span data-stu-id="d3e49-233">To create new records for Product entity items, you use the same basic procedure.</span></span> <span data-ttu-id="d3e49-234">从 Excel 工作表，复制您要为其创建新记录的产品的现有记录，然后替换图像 URL 和文件名。</span><span class="sxs-lookup"><span data-stu-id="d3e49-234">From the Excel worksheet, copy an existing record for the product that you to create a new record for, and then replace the image URL and filename.</span></span> <span data-ttu-id="d3e49-235">确保文件名是唯一的。</span><span class="sxs-lookup"><span data-stu-id="d3e49-235">Make sure that the file name is unique.</span></span>

#### <a name="deleting-an-existing-record"></a><span data-ttu-id="d3e49-236">删除现有记录</span><span class="sxs-lookup"><span data-stu-id="d3e49-236">Deleting an existing record</span></span>

<span data-ttu-id="d3e49-237">仅可删除被覆盖的图像 URL 记录。</span><span class="sxs-lookup"><span data-stu-id="d3e49-237">Only the overwritten image URL records can be deleted.</span></span> <span data-ttu-id="d3e49-238">删除某个图像并完成同步后，该图像便不会再出现在**预览**页面上或 MPOS 中。</span><span class="sxs-lookup"><span data-stu-id="d3e49-238">After an image is deleted and synchronization is completed, the image will no longer appear on the **Preview** page or in MPOS.</span></span> <span data-ttu-id="d3e49-239">不能删除从媒体模板派生的图像 URL 记录，因为这些记录每次都将始终从媒体模板中派生出来。</span><span class="sxs-lookup"><span data-stu-id="d3e49-239">Image URL records that are derived from the media template can't be deleted, because these records are always derived from the media template every time.</span></span>

### <a name="overwrite-from-the-entity-level-preview-page"></a><span data-ttu-id="d3e49-240">从实体级别“预览”页面覆盖</span><span class="sxs-lookup"><span data-stu-id="d3e49-240">Overwrite from the entity-level Preview page</span></span>

<span data-ttu-id="d3e49-241">对于除产品外的所有实体，您可以覆盖从**预览**页面在实体项目级别上覆盖给定实体项目的图像 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-241">For all entities except Products, you can overwrite the image URL for a given entity item at the entity item level from the **Preview** page.</span></span> <span data-ttu-id="d3e49-242">对于产品实体，您可以使用“目录产品”实体页面。</span><span class="sxs-lookup"><span data-stu-id="d3e49-242">For Products, you can use the "Catalog Products" entity page.</span></span> <span data-ttu-id="d3e49-243">此示例显示如何覆盖目录图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-243">This example shows how to overwrite a catalog image.</span></span>

1. <span data-ttu-id="d3e49-244">单击**目录** &gt; **媒体** &gt; **图像**，然后选择要更新的目录图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-244">Click **Catalogs** &gt; **Media** &gt; **Images**, and select the catalog image to update.</span></span>
2. <span data-ttu-id="d3e49-245">单击**添加**，然后输入该图像 URL，以覆盖媒体模板 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-245">Click **Add**, and enter the image URL to overwrite the media template URL.</span></span>
3. <span data-ttu-id="d3e49-246">如果您希望此图像在目录的 MPOS 中显示，可以将其设置为默认图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-246">If you want this image to be shown in MPOS for the catalog, you can set it as the default image.</span></span>
4. <span data-ttu-id="d3e49-247">单击**OK**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-247">Click **OK**.</span></span> <span data-ttu-id="d3e49-248">此时此目录图像的图像 URL 已更新，且会显示预览。</span><span class="sxs-lookup"><span data-stu-id="d3e49-248">The image URL is updated for this catalog image, and a preview is shown.</span></span>

    <span data-ttu-id="d3e49-249">[![“新建图像”对话框中已更新的 URL](./media/preview3.png)](./media/preview3.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-249">[![URL updated in the New image dialog box](./media/preview3.png)](./media/preview3.png)</span></span>

5. <span data-ttu-id="d3e49-250">您也可以在**目录图像**库页面上查看所有被覆盖的图像 URL 的图像预览。</span><span class="sxs-lookup"><span data-stu-id="d3e49-250">You can also see the image preview for all overwritten image URLs on the **Catalog images** gallery page.</span></span>

    <span data-ttu-id="d3e49-251">[![目录图像库页面](./media/preview-4.png)](./media/preview-4.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-251">[![Catalog images gallery page](./media/preview-4.png)](./media/preview-4.png)</span></span>

> [!NOTE]
> <span data-ttu-id="d3e49-252">目前，库不会显示媒体模板图像 URL 的图像预览。</span><span class="sxs-lookup"><span data-stu-id="d3e49-252">Currently, the gallery doesn't show image previews for media template image URLs.</span></span> <span data-ttu-id="d3e49-253">对于目录、工作人员、客户和类别实体，如果用户通过此页面明确提供 URL，我们建议您指明哪个图像是默认图像，因为零售服务器客户端仅对每个目录、客户、工作人员和类别显示一个图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-253">For Catalog, Worker, Customer, and Category entities, if the user explicitly provides a URL through this page, we recommend that you indicate which image is the default image, because Retail Server clients show only one image per Catalog, Customer, Worker, and Category.</span></span> <span data-ttu-id="d3e49-254">如果用户未指定默认图像，系统将确定默认图像并将其发送到零售服务调用方（MPOS 或 Ecommerce）。</span><span class="sxs-lookup"><span data-stu-id="d3e49-254">If the user doesn't specify a default image, the system determines the default image and send it to the Retail service caller (MPOS or Ecommerce).</span></span>

### <a name="overwrite-the-image-url-for-catalog-product-images-from-the-preview-page"></a><span data-ttu-id="d3e49-255">从“预览”页面覆盖目录产品图像的图像 URL</span><span class="sxs-lookup"><span data-stu-id="d3e49-255">Overwrite the image URL for catalog product images from the Preview page</span></span>

<span data-ttu-id="d3e49-256">若要覆盖目录产品图像的图像 URL，您必须使用**预览**页面。</span><span class="sxs-lookup"><span data-stu-id="d3e49-256">To overwrite image URLs for catalog product images, you must use the **Preview** page.</span></span> <span data-ttu-id="d3e49-257">不能使用“在 Excel 中编辑”功能。</span><span class="sxs-lookup"><span data-stu-id="d3e49-257">You can't use the Edit in Excel functionality.</span></span>

1. <span data-ttu-id="d3e49-258">若要在目录级别上覆盖产品图像，请选择一个目录，然后选择要为其覆盖图像的产品。</span><span class="sxs-lookup"><span data-stu-id="d3e49-258">To overwrite product images at a catalog level, select a catalog, and then select the product to overwrite the image for.</span></span>
2. <span data-ttu-id="d3e49-259">单击**属性**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-259">Click **Attributes**.</span></span>
3. <span data-ttu-id="d3e49-260">在下一页上，选择**图像**，然后单击**编辑**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-260">On the next page, select **Image**, and then click **Edit**.</span></span> <span data-ttu-id="d3e49-261">**预览**页面以滑块对话框形式打开。</span><span class="sxs-lookup"><span data-stu-id="d3e49-261">The **Preview** page opens as a slider dialog box.</span></span>
4. <span data-ttu-id="d3e49-262">单击**添加**，然后用新的 URL 覆盖图像 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-262">Click **Add**, and overwrite the image URL with a new URL.</span></span>
5. <span data-ttu-id="d3e49-263">单击**OK**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-263">Click **OK**.</span></span> <span data-ttu-id="d3e49-264">现在您可以看到新图像的预览，并且可以将其设置为默认图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-264">You now see the preview of the new image and can set it as the default image.</span></span>

    <span data-ttu-id="d3e49-265">[![“新建图像”对话框中的图像预览](./media/cat3.png)](./media/cat3.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-265">[![Image preview in the New image dialog box](./media/cat3.png)](./media/cat3.png)</span></span>

> [!NOTE]
> <span data-ttu-id="d3e49-266">关联类别图像后，您必须发布通道并运行通道作业才能帮助确保将更改发布到通道数据库。</span><span class="sxs-lookup"><span data-stu-id="d3e49-266">After category image association, you must publish the channel and run the Channel job to help guarantee that the changes are published to the channel database.</span></span>

## <a name="setting-up-images-to-appear-in-offline-mode-for-mpos"></a><span data-ttu-id="d3e49-267">将图像设置为在 MPOS 的脱机模式下显示</span><span class="sxs-lookup"><span data-stu-id="d3e49-267">Setting up images to appear in Offline mode for MPOS</span></span>

<span data-ttu-id="d3e49-268">MPOS 可以在联机模式下运行（当 MPOS 连接到零售服务器时），也可以在脱机模式下运行（当没有零售服务器或网络连接，且交易记录存储在本地脱机数据库中时）。</span><span class="sxs-lookup"><span data-stu-id="d3e49-268">MPOS can run in Online mode (when MPOS connected to Retail Server) or Offline mode (when there is no Retail Server or network connectivity, and transactions are stored in a local offline database).</span></span> <span data-ttu-id="d3e49-269">当 MPOS 在脱机模式下运行时，它不能从外部图像服务器获取要在零售服务器中显示的图像，因为零售服务器连接已丢失。</span><span class="sxs-lookup"><span data-stu-id="d3e49-269">When MPOS runs in Offline mode, it can't get images from the external image server to display from Retail Server, because Retail Server connectivity has been lost.</span></span> <span data-ttu-id="d3e49-270">不过，您仍可以设置图像，使其在 MPOS 以脱机模式运行时显示。</span><span class="sxs-lookup"><span data-stu-id="d3e49-270">However, you can still set up images so that they are shown when MPOS runs in Offline mode.</span></span>

### <a name="set-up-product-images-to-appear-in-offline-mode-for-mpos"></a><span data-ttu-id="d3e49-271">将产品图像设置为在 MPOS 的脱机模式下显示</span><span class="sxs-lookup"><span data-stu-id="d3e49-271">Set up product images to appear in Offline mode for MPOS</span></span>

<span data-ttu-id="d3e49-272">通过将所需的物理图像上载到基本产品图像中，可以设置必须在脱机模式下使用的产品图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-272">The product images that must be used in Offline mode can be set up by uploading the required physical image into the base product image.</span></span>

1. <span data-ttu-id="d3e49-273">单击**产品信息管理** &gt; **产品** &gt; **产品**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-273">Click **Product information management** &gt; **Products** &gt; **Products**.</span></span>
2. <span data-ttu-id="d3e49-274">选择要为其设置脱机图像的产品。</span><span class="sxs-lookup"><span data-stu-id="d3e49-274">Select the product to set the offline image for.</span></span>
3. <span data-ttu-id="d3e49-275">单击**编辑**，然后单击右角的箭头以显示右窗格。</span><span class="sxs-lookup"><span data-stu-id="d3e49-275">Click **Edit**, and then click the arrow in the right corner to show the right pane.</span></span>
4. <span data-ttu-id="d3e49-276">在**产品图像**快速选项卡上，单击**更改图像**，然后上载要在脱机模式下用于所选产品的物理图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-276">On the **Product image** FastTab, click **Change image**, and upload the physical image to use for the selected product in Offline mode.</span></span>
5. <span data-ttu-id="d3e49-277">保存并关闭页面。</span><span class="sxs-lookup"><span data-stu-id="d3e49-277">Save and close the page.</span></span>
6. <span data-ttu-id="d3e49-278">当 MPOS 处于联机模式时，在 HQ 中运行目录作业，以确保至少一次将数据发送到脱机数据库。</span><span class="sxs-lookup"><span data-stu-id="d3e49-278">While MPOS is in Online mode, run the Catalog job in HQ, to make sure that the data is sent at least one time to the offline database.</span></span>
7. <span data-ttu-id="d3e49-279">将 MPOS 置于脱机模式。</span><span class="sxs-lookup"><span data-stu-id="d3e49-279">Put MPOS into Offline mode.</span></span> <span data-ttu-id="d3e49-280">您应该可以在 HQ 中看到您为特定产品上载的图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-280">You should see the image that you uploaded for the specific product in HQ.</span></span>

    <span data-ttu-id="d3e49-281">[![脱机模式下的产品图像](./media/offline1.png)](./media/offline1.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-281">[![Product image in Offline mode](./media/offline1.png)](./media/offline1.png)</span></span>

### <a name="set-up-catalog-category-employee-and-customer-images-to-appear-in-offline-mode-for-mpos"></a><span data-ttu-id="d3e49-282">将目录、类别、员工和客户图像设置为在 MPOS 的脱机模式下显示</span><span class="sxs-lookup"><span data-stu-id="d3e49-282">Set up catalog, category, employee, and customer images to appear in Offline mode for MPOS</span></span>

<span data-ttu-id="d3e49-283">通过将所需图像的目标链接添加到库并将该图像设置为所选实体的默认图像，可以设置必须在脱机模式下使用的目录、类别、员工和客户图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-283">The catalog, category, employee, and customer images that must be used in Offline mode can be set up by adding the required image's destination link to the gallery and setting the image as the default image for the selected entity.</span></span>

1. <span data-ttu-id="d3e49-284">转到目录，然后在“操作”窗格上单击**媒体** &gt; **图像**。</span><span class="sxs-lookup"><span data-stu-id="d3e49-284">Go to the catalog, and then, on the Action Pane, click **Media** &gt; **Images**.</span></span>
2. <span data-ttu-id="d3e49-285">按照[从实体级别“预览”页面覆盖](#overwrite-from-the-entity-level-preview-page)一节中的步骤添加外部图像 URL。</span><span class="sxs-lookup"><span data-stu-id="d3e49-285">Follow the steps in the [Overwrite from the entity-level Preview page](#overwrite-from-the-entity-level-preview-page) section to add the external image URL.</span></span>
3. <span data-ttu-id="d3e49-286">通过选中网格中列出的图像的复选框，将此图像设置为该目录的默认图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-286">Mark this image as the default image for the catalog by selecting the check box against the Image listed in the grid.</span></span>
4. <span data-ttu-id="d3e49-287">运行目录作业。</span><span class="sxs-lookup"><span data-stu-id="d3e49-287">Run the Catalog job.</span></span> <span data-ttu-id="d3e49-288">现在，此图像将在 MPOS 中用作该目录的脱机图像。</span><span class="sxs-lookup"><span data-stu-id="d3e49-288">This image will now be used as the Offline image for that catalog in MPOS.</span></span>
5. <span data-ttu-id="d3e49-289">对于其他实体（例如类别、员工和客户），请按照类似流程操作。</span><span class="sxs-lookup"><span data-stu-id="d3e49-289">Follow a similar process for other entities, such as Category, Employee, and Customer.</span></span>

    <span data-ttu-id="d3e49-290">[![脱机图像](./media/offline2.png)](./media/offline2.png)</span><span class="sxs-lookup"><span data-stu-id="d3e49-290">[![Offline image](./media/offline2.png)](./media/offline2.png)</span></span>
