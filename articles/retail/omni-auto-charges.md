---
title: 全渠道高级自动费用
description: 此主题描述使用高级自动费用功能管理零售渠道订单的额外订单费用的功能。
author: hhaines
manager: annbe
ms.date: 01/22/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail
ms.author: hhaines
ms.search.validFrom: ''
ms.dyn365.ops.version: 10
ms.openlocfilehash: a980ae9571fb47522d3966dc172b2343641b827e
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/29/2019
ms.locfileid: "345551"
---
# <a name="omni-channel-advanced-auto-charges"></a><span data-ttu-id="f828f-103">全渠道高级自动费用</span><span class="sxs-lookup"><span data-stu-id="f828f-103">Omni-channel advanced auto charges</span></span>

[!include [banner](includes/preview-banner.md)]
[!include [banner](includes/banner.md)]

<span data-ttu-id="f828f-104">此主题提供有关 Dynamics 365 for Retail 版本 10.0 中提供的高级自动费用功能的配置与部署的信息。</span><span class="sxs-lookup"><span data-stu-id="f828f-104">This topic provides information on configuration and deployment of the advanced auto-charges feature which are available in Dynamics 365 for Retail version 10.0.</span></span>

<span data-ttu-id="f828f-105">在高级自动费用功能启用时，在任何支持的零售渠道（销售点 (POS)、呼叫中心和在线）中创建的订单均可以利用在 ERP 应用程序中为标题和行级别相关费用中定义的[自动费用](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services)配置。</span><span class="sxs-lookup"><span data-stu-id="f828f-105">When the advanced auto-charges features are enabled, orders created in any supported Retail channel (point of sale (POS), call center, and online), can take advantage of the [auto-charges](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services) configurations defined in the ERP application for both header and line-level related charges.</span></span>  

<span data-ttu-id="f828f-106">在 Dynamics 365 for Retail 版本 10.0 之前的版本中，[自动费用](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services)配只能由在电子商务和呼叫中心渠道创建的订单访问。</span><span class="sxs-lookup"><span data-stu-id="f828f-106">In releases prior to Dynamics 365 for Retail version 10.0, [auto-charge](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/configure-call-center-delivery#define-charges-for-delivery-services) configurations are only accessible by orders created in e-Commerce and call center channels.</span></span> <span data-ttu-id="f828f-107">在版本 10.0 及以后版本中，POS 创建的订单可以利用自动费用配置。</span><span class="sxs-lookup"><span data-stu-id="f828f-107">In versions 10.0 and later, POS-created orders can leverage the auto-charges configurations.</span></span> <span data-ttu-id="f828f-108">这样，额外的杂项费用可以系统化地添加到销售交易记录中。</span><span class="sxs-lookup"><span data-stu-id="f828f-108">That way, additional miscellaneous charges can systematically be added to sales transactions.</span></span>

<span data-ttu-id="f828f-109">在使用版本 10.0 以前的版本时，将提示 POS 用户在创建“全部装运”或“装运所选产品”POS 交易记录期间手动输入装运费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-109">When using releases prior to version 10.0, a POS user is prompted to manually enter a shipping fee during the creation of a "ship all" or "ship selected" POS transaction.</span></span> <span data-ttu-id="f828f-110">当应用程序的杂项费用功能用于与费用如何写入到订单的相关情况时，将不提供系统计算--计算依赖于用户的输入来确定费用值。</span><span class="sxs-lookup"><span data-stu-id="f828f-110">While the miscellaneous charges capabilities of the application are utilized in respect to how the charges are written to the order, no systematic calculation is provided--the calculation relies on the user's input to determine the value of the charges.</span></span> <span data-ttu-id="f828f-111">费用只能添加为一个“装运”相关费用代码，且不能在创建后在 POS 中轻松编辑或更改。</span><span class="sxs-lookup"><span data-stu-id="f828f-111">The charges can only be added as a single "shipping" related charges code and cannot easily be edited or changed in the POS after they are created.</span></span> 

<span data-ttu-id="f828f-112">使用手动提示添加装运费用在版本 10.0 及以后版本中仍然可用。</span><span class="sxs-lookup"><span data-stu-id="f828f-112">The use of manual prompts to add shipping charges is still available in versions 10.0 and later.</span></span> <span data-ttu-id="f828f-113">如果组织不启用**高级自动费用**参数，手动输入费用的 POS 提示将保持相同。</span><span class="sxs-lookup"><span data-stu-id="f828f-113">If an organization does not enable the **Advanced Auto-charges** parameter, the POS prompts for manual entry of charges will remain the same.</span></span>

<span data-ttu-id="f828f-114">使用高级自动费用功能，POS 用户可以根据自动费用设置表系统化地计算所有定义的杂项费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-114">With the advanced auto-charges feature, POS users can have systematic calculations for any defined miscellaneous charges based on auto-charges setup tables.</span></span> <span data-ttu-id="f828f-115">而且，用户将能够在标题或行级别的任何 POS 销售交易记录中添加或编辑无限制的额外费用金额（对于现金和结转或客户订单）。</span><span class="sxs-lookup"><span data-stu-id="f828f-115">In addition, users will have the ability to add or edit an unlimited amount of additional charges and fees to any POS sales transaction at the header or line-level (for a cash and carry or customer order).</span></span>

## <a name="enabling-advanced-auto-charges"></a><span data-ttu-id="f828f-116">启用高级自动费用</span><span class="sxs-lookup"><span data-stu-id="f828f-116">Enabling advanced auto-charges</span></span>

<span data-ttu-id="f828f-117">在**零售 \> 总部设置 \> 参数 \> 零售参数**页，转到**客户订单**选项卡。在**费用**快速选项卡上，将**使用高级自动费用**设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="f828f-117">On the **Retail \> Headquarters setup \> Parameters \> Retail parameters** page, go to the **Customer orders** tab.  On the **Charges** FastTab, set **Use advanced auto-charges** to **Yes**.</span></span>

![高级自动费用参数](media/advancedchargesparameter.png)

<span data-ttu-id="f828f-119">在高级自动费用启用时，用户在创建全部装运或装运所选产品客户订单时将被更长时间地提示在 POS 终端手动输入费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-119">When advanced auto-charges are enabled, users are longer prompted to manually enter a shipping charge at the POS terminal when creating a ship-all or ship-selected customer order.</span></span> <span data-ttu-id="f828f-120">POS 订单费用被系统化地计算并添加到 POS 交易记录（如果找到与正在创建的订单的条件匹配的对应的自动费用表）。</span><span class="sxs-lookup"><span data-stu-id="f828f-120">POS order charges are systematically calculated and added to the POS transaction (if a corresponding auto-charges table that matches the criterion of the order being created are found).</span></span> <span data-ttu-id="f828f-121">用户还可以通过可以添加到 POS 屏幕布局的新添加的 POS 操作手动添加或维护标题或行级别费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-121">Users can also add or maintain header or line-level charges manually through newly added POS operations that can be added to the POS screen layouts.</span></span>  

<span data-ttu-id="f828f-122">在高级自动费用启用时，不再使用**装运费用代码**和**退回装运费用**的现有**零售参数**。</span><span class="sxs-lookup"><span data-stu-id="f828f-122">When advanced auto-charges are enabled, the existing **Retail parameters** for **Shipping charges code** and **Refund shipping charges** are no longer utilized.</span></span> <span data-ttu-id="f828f-123">仅当**使用高级自动费用**参数设置为**否**时这些参数才适用。</span><span class="sxs-lookup"><span data-stu-id="f828f-123">These parameters are only applicable if the **Use advanced auto-charges** parameter is set to **No**.</span></span>

<span data-ttu-id="f828f-124">在启用此功能前，请确保您已测试并对员工进行了培训，因为这将更改装运或其他费用如何计算并添加到 POS 销售订单的业务流程。</span><span class="sxs-lookup"><span data-stu-id="f828f-124">Before you enable this feature, ensure that you have tested and trained your employees, as this will change the business process flow of how shipping or other charges are calculated and added to POS sales orders.</span></span> <span data-ttu-id="f828f-125">确保您了解此流程对从 POS 创建交易记录的影响。</span><span class="sxs-lookup"><span data-stu-id="f828f-125">Make sure that you understand the impact of the process flow to the creation of transactions from POS.</span></span> <span data-ttu-id="f828f-126">对于呼叫中心和电子商务订单，启用高级自动费用的影响是最小的。</span><span class="sxs-lookup"><span data-stu-id="f828f-126">For call center and e-Commerce orders, the impact of enabling advanced auto-charges is minimal.</span></span> <span data-ttu-id="f828f-127">在与计算额外订单费用的自动费用表相关的行为方面，呼叫中心和电子商务应用程序将继续具有以前所有的相同行为。</span><span class="sxs-lookup"><span data-stu-id="f828f-127">Call center and e-Commerce applications will continue to have the same behavior they have had historically related to the auto-charges tables to calculate additional order fees.</span></span> <span data-ttu-id="f828f-128">呼叫中心渠道用户将继续能够手动编辑标题或行级别的所有系统计算出的自动费用，或者在标题或行级别手动添加额外杂项费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-128">Call center channel users will continue to have the ability to manually edit any system calculated auto-charges at the header or line level, or manually add additional miscellaneous charges at the header or line level.</span></span>

## <a name="additional-pos-operations"></a><span data-ttu-id="f828f-129">其他 POS 操作</span><span class="sxs-lookup"><span data-stu-id="f828f-129">Additional POS operations</span></span>

<span data-ttu-id="f828f-130">为使高级自动费用能够在您的 POS 应用程序环境中正常工作，新 POS 操作已添加。</span><span class="sxs-lookup"><span data-stu-id="f828f-130">For advanced auto-charges to work properly in your POS application environment, new POS operations have been added.</span></span> <span data-ttu-id="f828f-131">在部署高级自动费用时，这些操作必须添加到 [POS 屏幕布局](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts)并部署到 POS 设备。</span><span class="sxs-lookup"><span data-stu-id="f828f-131">These operations must be added to your [POS screen layouts](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts) and deployed to the POS devices as you deploy advanced auto-charges.</span></span> <span data-ttu-id="f828f-132">如果这些操作未添加，用户将无法在 POS 交易记录中管理或维护杂项费用，且没有办法调整或更改基于自动费用配置系统化计算的费用值。</span><span class="sxs-lookup"><span data-stu-id="f828f-132">If these operations are not added, users will not be able to manage or maintain miscellaneous charges on the POS transactions and will have no way of adjusting or changing the charges values that are systematically calculated based on auto-charges configurations.</span></span> <span data-ttu-id="f828f-133">至少，建议您将**管理费用**操作部署到您的 POS 布局。</span><span class="sxs-lookup"><span data-stu-id="f828f-133">At minimum, it is suggested that you deploy the **Manage charges** operation to your POS layout.</span></span>

<span data-ttu-id="f828f-134">新操作如下所示。</span><span class="sxs-lookup"><span data-stu-id="f828f-134">The new operations are as follows.</span></span>

- <span data-ttu-id="f828f-135">**142 - 管理费用** - 使用此操作允许 POS 用户查看和编辑通过自动费用计算手动或系统添加的 POS 交易记录的杂项费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-135">**142 - Manage charges** - Use this operation to allow POS users to view and edit miscellaneous charges for the POS transaction that were either added manually or systematically through auto-charges calculations.</span></span>
- <span data-ttu-id="f828f-136">**141 - 添加标题费用** - 使用此操作为用户提供将标题级别杂项费用手动添加到任何 POS 销售交易记录的能力（以及选择要使用的费用代码）。</span><span class="sxs-lookup"><span data-stu-id="f828f-136">**141 - Add header charges** - Use this operation to give the user the ability to manually add a header-level miscellaneous charge to any POS sales transaction (and select the charges code to be used).</span></span>
- <span data-ttu-id="f828f-137">**140 - 添加行费用** - 使用此操作为用户提供将行级别杂项费用手动添加到任何 POS 销售交易记录行的能力（以及选择要使用的费用代码）。</span><span class="sxs-lookup"><span data-stu-id="f828f-137">**140 - Add line charges** - Use this operation to give the user the ability to manually add a line level miscellaneous charge to any POS sales transaction line (and select the charges code to be used).</span></span>
- <span data-ttu-id="f828f-138">**143 - 重新计算费用** - 使用此操作执行销售交易记录费用的完全重新计算。</span><span class="sxs-lookup"><span data-stu-id="f828f-138">**143 - Recalculate charges** - Use this operation to perform a full re-calculation of the charges for the sales transaction.</span></span> <span data-ttu-id="f828f-139">先前用户覆盖的任何自动费用都将根据当前的配置重新计算。</span><span class="sxs-lookup"><span data-stu-id="f828f-139">Any previously user-overwritten auto-charges will be recalculated based on the current cart configuration.</span></span>  

<span data-ttu-id="f828f-140">与 POS 操作一样，可以进行安全配置来需要经理审批才能执行操作。</span><span class="sxs-lookup"><span data-stu-id="f828f-140">As with all POS operations, security configurations can be made to require manager approval in order to execute the operation.</span></span>

## <a name="use-case-examples"></a><span data-ttu-id="f828f-141">用例示例</span><span class="sxs-lookup"><span data-stu-id="f828f-141">Use case examples</span></span>
<span data-ttu-id="f828f-142">在此部分，将呈现示例用例以帮助您了解零售渠道订单上下文内自动费用和杂项费用的配置和使用。</span><span class="sxs-lookup"><span data-stu-id="f828f-142">In this section, sample use cases are presented to help you understand the configuration and usage of auto-charges and miscellaneous charges within the context of Retail channel orders.</span></span> <span data-ttu-id="f828f-143">这些示例说明在启用了**使用高级自动费用**参数时应用程序的行为。</span><span class="sxs-lookup"><span data-stu-id="f828f-143">These examples illustrate the behavior of the application when the **Use advanced auto-charges** parameter has been enabled.</span></span>

### <a name="auto-charges-header-charges-example"></a><span data-ttu-id="f828f-144">自动费用标题费用示例</span><span class="sxs-lookup"><span data-stu-id="f828f-144">Auto-charges header charges example</span></span>
#### <a name="use-case-scenario"></a><span data-ttu-id="f828f-145">用例场景</span><span class="sxs-lookup"><span data-stu-id="f828f-145">Use case scenario</span></span>  

<span data-ttu-id="f828f-146">零售商要在需要向客户装运产品的任何零售渠道中创建交易记录时自动添加运费。</span><span class="sxs-lookup"><span data-stu-id="f828f-146">A retailer wants to automatically add charges for freight when transactions are created in any Retail channel that require a shipment of products to the customer.</span></span>  <span data-ttu-id="f828f-147">零售商提供 2 种交货方式：陆运和空运。</span><span class="sxs-lookup"><span data-stu-id="f828f-147">The retailer offers 2 methods of delivery: Ground and Air.</span></span> <span data-ttu-id="f828f-148">如果客户选择陆运，并且订单值少于 100 美元，零售商希望向客户收取 10.00 美元运费。</span><span class="sxs-lookup"><span data-stu-id="f828f-148">If a customer chooses Ground delivery and the order value is less than $100, the retailer wants to charge the customer a freight charge of $10.00.</span></span> <span data-ttu-id="f828f-149">如果订单值超过 100 美元，并且客户选择陆运，客户将不会被收取任何额外的运费。</span><span class="sxs-lookup"><span data-stu-id="f828f-149">If the order is over $100 in value and the customer chooses ground shipping, the customer will not be charged any additional freight fees.</span></span>  <span data-ttu-id="f828f-150">如果客户为所有订单选择空运交货方式，不论订单总值是多少，其将被收取运费 20.00 美元。</span><span class="sxs-lookup"><span data-stu-id="f828f-150">If the customer chooses the Air method of delivery for all orders, regardless of their total value, will be charged a freight fee of $20.00.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="f828f-151">设置和配置</span><span class="sxs-lookup"><span data-stu-id="f828f-151">Setup and configuration</span></span>

<span data-ttu-id="f828f-152">此场景需要配置两个自动费用表。</span><span class="sxs-lookup"><span data-stu-id="f828f-152">This scenario requires the configuration of two auto-charges tables.</span></span>   

<span data-ttu-id="f828f-153">转到**应收帐款 \> 费用设置 \> 自动费用**。</span><span class="sxs-lookup"><span data-stu-id="f828f-153">Go to **Accounts receivable \> Charges setup \> Auto charges**.</span></span>  

<span data-ttu-id="f828f-154">配置两个不同的标题级别自动费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-154">Configure two different header-level auto charges.</span></span> <span data-ttu-id="f828f-155">一个为“陆运模式”交货配置，一个为“空运模式”交货配置。</span><span class="sxs-lookup"><span data-stu-id="f828f-155">Configure one for the "Ground mode" of delivery and one for the "Air mode" of delivery.</span></span> <span data-ttu-id="f828f-156">对于此场景，请配置它们以用于“所有客户”。</span><span class="sxs-lookup"><span data-stu-id="f828f-156">For this scenario, configure them to be used for "All customers".</span></span>  

<span data-ttu-id="f828f-157">对于陆运费用，在**自动费用**页的行部分，将 0.01 美元到 100 美元之间的订单要应用的费用定义为 10.00 美元。</span><span class="sxs-lookup"><span data-stu-id="f828f-157">For the ground delivery charges, in the lines section of the **Auto-charges** page, define a charge that will be applied for orders between $.01 and $100 as $10.00.</span></span> <span data-ttu-id="f828f-158">创建另一个费用行来指示超过 100.01 美元的订单没有费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-158">Create another charges line to indicate orders over $100.01 will have no charges.</span></span>

![自动费用示例](media/headerchargesexample.png)

<span data-ttu-id="f828f-160">对于空运费用，在自动费用窗体的行部分，定义将应用于所有订单（值为 0.01 美元到 9,999,999 美元）的 20.00 美元费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-160">For the air delivery charges, in the lines section of the auto-charges form, define a charge of $20.00 that will be applied to all orders (between a value of $.01 to $9,999,999).</span></span>

<span data-ttu-id="f828f-161">将更改发送到 Retail Server/通道 DB，以便 POS 可以通过运行 **1040 配送计划**作业使用它们。</span><span class="sxs-lookup"><span data-stu-id="f828f-161">Send the changes to the Retail Server/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

#### <a name="sales-processing-for-this-scenario"></a><span data-ttu-id="f828f-162">此场景的销售处理</span><span class="sxs-lookup"><span data-stu-id="f828f-162">Sales processing for this scenario</span></span>

<span data-ttu-id="f828f-163">在上述配置步骤已完成，并且更改已应用到通道数据库后，在标题级别设置了陆运或空运方式的在 POS、呼叫中心或电子商务渠道创建的任何客户订单或销售交易记录都将使用这些费用并自动将它们应用到销售中。</span><span class="sxs-lookup"><span data-stu-id="f828f-163">After the configuration steps above are complete and the changes have been applied to the channel database, any customer order or sales transaction created in the POS, call center, or e-Commerce channels that have the ground or air delivery methods set at the header level will utilize these charges and automatically apply them to the sale.</span></span>   

<span data-ttu-id="f828f-164">此时，费用将应用于在利用这些交货方式的法人内创建的所有销售交易记录，因为没有指定自动费用配置将只应用于特定销售渠道的功能。</span><span class="sxs-lookup"><span data-stu-id="f828f-164">At this time the charges will apply to all sales transactions created within the legal entity that utilize these delivery modes, as there is no functionality to designate that an auto-charge configuration will only apply to a specific selling channel.</span></span>

<span data-ttu-id="f828f-165">对于 POS 和电子商务场景，因为未在这些订单中明晰定义“标题”，仅当交易记录中的所有销售行均被设置为使用完全相同的交货方式装运时才应用标题级别费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-165">For POS and e-Commerce scenarios, because there is no clearly defined "header" on these orders, header-level charges will only apply if all sales lines on the transaction are set to ship with the exact same mode of delivery.</span></span> <span data-ttu-id="f828f-166">如果 POS 或电子商务创建的交易记录中存在“混合模式”履行，将仅考虑并应用行级别自动费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-166">If there are "mixed-modes" of fulfillment on the transactions created by POS or e-Commerce, only line-level auto-charges will be considered and applied.</span></span>

<span data-ttu-id="f828f-167">在呼叫中心场景中，用户控制订单标题的交货方式的设置，因此标题级别费用将为这些订单应用，即使某些销售订已配置为使用不同的交货方式。</span><span class="sxs-lookup"><span data-stu-id="f828f-167">In call center scenarios, the user has control over the setting of the delivery mode at the order header, therefore header-level charges will apply for these orders even if some of the sales lines have been configured to use a different mode of delivery.</span></span> <span data-ttu-id="f828f-168">呼叫中心订单的标题级别费用将始终基于在销售订单的订单标题级别定义的交货方式。</span><span class="sxs-lookup"><span data-stu-id="f828f-168">Header-level charges for call center orders will always be based on the mode of delivery that is defined at the order header level of the sales order.</span></span>

### <a name="auto-charges-line-charges-example"></a><span data-ttu-id="f828f-169">自动费用行费用示例</span><span class="sxs-lookup"><span data-stu-id="f828f-169">Auto-charges line charges example</span></span>
#### <a name="use-case-scenario"></a><span data-ttu-id="f828f-170">用例场景</span><span class="sxs-lookup"><span data-stu-id="f828f-170">Use case scenario</span></span> 
<span data-ttu-id="f828f-171">零售商想要在客户购买特定计算机型号时将额外费用添加到客户以收取设置费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-171">A retailer wants to add an additional charge to the customer for setup fees when the customer purchases a particular model of computer.</span></span> <span data-ttu-id="f828f-172">此计算机需要零售商将为客户执行的额外的非可选设置操作。</span><span class="sxs-lookup"><span data-stu-id="f828f-172">This computer requires additional non-optional setup actions that the retailer will perform for the customer.</span></span> <span data-ttu-id="f828f-173">零售商已通知客户将存在此设置的额外费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-173">The retailer has informed customers that there will be an additional fee for this setup.</span></span> <span data-ttu-id="f828f-174">出于财务申报目的，零售商希望将与此费用相关的费用与产品销售价分开单独管理。</span><span class="sxs-lookup"><span data-stu-id="f828f-174">The retailer prefers to manage the charges related to this fee separately from the product sales price for financial reporting purposes.</span></span> <span data-ttu-id="f828f-175">当此特定计算机在任何零售渠道购买时，客户将被收取 19.99 美元的设置费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-175">A setup fee of $19.99 will be charged to the customer when this specific computer is purchased in any retail channel.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="f828f-176">设置和配置</span><span class="sxs-lookup"><span data-stu-id="f828f-176">Setup and configuration</span></span>

<span data-ttu-id="f828f-177">此场景需要配置一个行级别自动费用表。</span><span class="sxs-lookup"><span data-stu-id="f828f-177">This scenario requires the configuration of one line-level auto charges table.</span></span>

<span data-ttu-id="f828f-178">转到**应收帐款 \> 费用设置 \> 自动费用**。</span><span class="sxs-lookup"><span data-stu-id="f828f-178">Go to **Accounts Receivable \> Charges setup \> Auto charges**.</span></span>  

<span data-ttu-id="f828f-179">将**级别**下拉菜单设置为**行**，然后为要收取设置费用的特定产品或产品组的所有客户创建新的自动费用记录。</span><span class="sxs-lookup"><span data-stu-id="f828f-179">Set the **Level** drop-down menu to **Line**, and create a new auto-charges record for all customers and for the specific product or product group where the setup fees will be charged.</span></span>

![自动费用示例](media/linechargesexample.png)

<span data-ttu-id="f828f-181">将费用发送到 Retail Server/通道 DB，以便 POS 可以通过运行 **1040 配送计划**作业使用它们。</span><span class="sxs-lookup"><span data-stu-id="f828f-181">Send the charges to the Retail Server/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

#### <a name="sales-processing-for-this-scenario"></a><span data-ttu-id="f828f-182">此场景的销售处理</span><span class="sxs-lookup"><span data-stu-id="f828f-182">Sales processing for this scenario</span></span>

<span data-ttu-id="f828f-183">在上述配置步骤已完成，并且更改已应用到通道数据库后，在订单中有此项目的在 POS、呼叫中心或电子商务渠道创建的任何客户订单或销售交易记录都将触发将系统地添加到订单合计的行级别费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-183">After the configurations steps above are complete and the changes have been applied to the channel database, any customer order or sales transaction created in the POS, call center, or e-Commerce channels that have this item on the order will trigger a line-level charge to be systematically added to the order total.</span></span>   

<span data-ttu-id="f828f-184">此时，费用将应用于与法人内的行级别自动费用配置匹配的任何销售行，因为没有将行级别自动费用配置为只应用于特定销售渠道的功能。</span><span class="sxs-lookup"><span data-stu-id="f828f-184">At this time the charges will apply to any sales line that matches the configuration of the line-level auto charges within the legal entity, as there is no functionality to configure a line-level auto-charge to apply only to a specific selling channel.</span></span>

### <a name="manual-header-charges-example"></a><span data-ttu-id="f828f-185">手动标题费用示例</span><span class="sxs-lookup"><span data-stu-id="f828f-185">Manual header charges example</span></span>
#### <a name="use-case-scenario-description"></a><span data-ttu-id="f828f-186">用例场景描述</span><span class="sxs-lookup"><span data-stu-id="f828f-186">Use case scenario description</span></span>
<span data-ttu-id="f828f-187">零售商通过向在商店内订购产品的客户提供特殊的产品家庭交货方式，为典型流程设置了例外。</span><span class="sxs-lookup"><span data-stu-id="f828f-187">A retailer is making an exception to typical processes by offering to provide a special home delivery of products to a customers who order products in the store.</span></span> <span data-ttu-id="f828f-188">零售商和客户已同意客户将为此服务支付额外 25 美元的手续费。</span><span class="sxs-lookup"><span data-stu-id="f828f-188">The retailer and the customer have agreed that the customer will pay an additional $25 handling fee for this service.</span></span> <span data-ttu-id="f828f-189">订单接受者需要将此额外费用添加到交易记录中。</span><span class="sxs-lookup"><span data-stu-id="f828f-189">The order-taker needs to add this additional fee to the transaction.</span></span> <span data-ttu-id="f828f-190">由于此费用是总费用且与订单上的任何一个产品都无关，将使用标题费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-190">Because the fee is a blanket fee and not related to any single product on the order, a header charge will be utilized.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="f828f-191">设置和配置</span><span class="sxs-lookup"><span data-stu-id="f828f-191">Setup and configuration</span></span>

<span data-ttu-id="f828f-192">确保将此场景中使用的费用代码已正确配置，方法是转到**应收帐款 \> 费用设置 \> 费用**为此场景定义适当的费用代码。</span><span class="sxs-lookup"><span data-stu-id="f828f-192">Ensure the charges code that will be used in this scenario has been properly configured by going to **Accounts Receivable \> Charges setup \> Charges** to define an appropriate charges code for the scenario.</span></span>

![费用示例](media/chargesexample.png)

<span data-ttu-id="f828f-194">如果由于装运相关的折扣或促销目的，费用应被视作“装运”相关费用，应将费用代码中的**装运费用**设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="f828f-194">If the charge should be considered a "shipping" related charge for the purpose of shipping related discounts or promotions, set  **Shipping charge** on the charges code to **Yes**.</span></span> <span data-ttu-id="f828f-195">如果在处理 POS 应用程序中的退货交易期间，此费用也被允许系统地退还，应将**可退还**设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="f828f-195">If this charge is also allowed to be systematically refunded during the processing of a return transaction in the POS application, set **Refundable** to **Yes**.</span></span> <span data-ttu-id="f828f-196">**可退还**标志仅在**使用高级自动费用**参数设置为**是**时适用。</span><span class="sxs-lookup"><span data-stu-id="f828f-196">The **Refundable** flag is only applicable when the **Use advanced auto-charges** parameter is set to **Yes**.</span></span>   

<span data-ttu-id="f828f-197">将费用发送到 Retail Server/通道 DB，以便 POS 可以通过运行 **1040 配送计划**作业使用它们。</span><span class="sxs-lookup"><span data-stu-id="f828f-197">Send the charges to the Retail Server/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

<span data-ttu-id="f828f-198">**添加标题费用**操作必须在您的 [POS 屏幕布局](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts)中配置，以使用户可从 POS 访问的按钮可以调用此操作（操作 141）。</span><span class="sxs-lookup"><span data-stu-id="f828f-198">The **Add header charge** operation must be configured in your [POS screen layout](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts) so that a button that is accessible to the user from POS can call this operation (operation 141).</span></span>  <span data-ttu-id="f828f-199">屏幕布局的更改也必须通过分配计划功能分配到零售渠道。</span><span class="sxs-lookup"><span data-stu-id="f828f-199">The screen layout changes must be distributed to the retail channel as well through the distribution schedule function.</span></span> 

#### <a name="sales-processing-of-manual-header-charges"></a><span data-ttu-id="f828f-200">手动标题费用的销售处理</span><span class="sxs-lookup"><span data-stu-id="f828f-200">Sales processing of manual header charges</span></span>

<span data-ttu-id="f828f-201">若要在 POS 应用程序中执行此方案，POS 用户将照常创建销售交易记录，并将产品和所有其他配置添加到销售中。</span><span class="sxs-lookup"><span data-stu-id="f828f-201">To execute the scenario in the POS application, the POS user will create the sales transaction as usual, adding the products and any other configurations to the sale.</span></span> <span data-ttu-id="f828f-202">在收取付款前，用户应执行**添加标题费用**操作，这将提示用户选择费用代码并输入费用值。</span><span class="sxs-lookup"><span data-stu-id="f828f-202">Prior to collecting payment, the user should execute the **Add header charge** operation, which will prompt the user to select a charges code and enter the charges value.</span></span> <span data-ttu-id="f828f-203">在用户完成流程后，此费用将作为标题级别费用添加到销售订单。</span><span class="sxs-lookup"><span data-stu-id="f828f-203">Once the user completes the process, the charge will be added to the sales order as a header-level charge.</span></span>  

<span data-ttu-id="f828f-204">此流程可以通过使用工具栏上的**销售**选项卡中的现有**费用**功能在呼叫中心应用。</span><span class="sxs-lookup"><span data-stu-id="f828f-204">This process can be applied in the call center by using the existing **Charges** feature found on the **Sell** tab on the toolbar.</span></span> <span data-ttu-id="f828f-205">在**维护费用**页，用户可以将新费用行添加到订单头中。</span><span class="sxs-lookup"><span data-stu-id="f828f-205">On the **Maintain charges** page, the user can add a new charges line to the order header.</span></span>

### <a name="manual-line-charges-example"></a><span data-ttu-id="f828f-206">手动行费用示例</span><span class="sxs-lookup"><span data-stu-id="f828f-206">Manual line charges example</span></span>
#### <a name="use-case-scenario"></a><span data-ttu-id="f828f-207">用例场景</span><span class="sxs-lookup"><span data-stu-id="f828f-207">Use case scenario</span></span>
<span data-ttu-id="f828f-208">客户请求将其销售订单中的 2 件商品（共 5 件）包装成礼品。</span><span class="sxs-lookup"><span data-stu-id="f828f-208">A customer has requested that 2 of the 5 items on their sales order be gift-wrapped.</span></span> <span data-ttu-id="f828f-209">零售商提供此可选服务的费用为每件商品 2.00 美元。</span><span class="sxs-lookup"><span data-stu-id="f828f-209">The retailer offers this optional service for a fee of $2.00 per item.</span></span> <span data-ttu-id="f828f-210">订单接受者需要将这些费用添加到需要礼品包装的特定商品。</span><span class="sxs-lookup"><span data-stu-id="f828f-210">The order-taker will need to add these fees to the specific items that need to be gift-wrapped.</span></span>

#### <a name="setup-and-configuration"></a><span data-ttu-id="f828f-211">设置和配置</span><span class="sxs-lookup"><span data-stu-id="f828f-211">Setup and configuration</span></span>

<span data-ttu-id="f828f-212">确保将此场景中使用的费用代码已正确配置，方法是转到**应收帐款 \> 费用设置 \> 费用**为此场景定义适当的费用代码。</span><span class="sxs-lookup"><span data-stu-id="f828f-212">Ensure the charges code that will be used in this scenario has been properly configured by going to **Accounts Receivable \> Charges setup \> Charges** to define an appropriate charges code for the scenario.</span></span>

<span data-ttu-id="f828f-213">如果由于装运相关的折扣或促销目的，费用应被视作“装运”相关费用，应将费用代码中的**装运费用**设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="f828f-213">If the charge should be considered a "shipping" related charge for the purpose of shipping related discounts or promotions, set the **Shipping charge** on the charges code to **Yes**.</span></span> <span data-ttu-id="f828f-214">如果在处理 POS 应用程序中的退货交易期间，该费用也被允许系统地退还，应将**可退还**设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="f828f-214">If the charge is also allowed to be systematically refunded during the processing of a return transaction in the POS application, set **Refundable** to **Yes**.</span></span> <span data-ttu-id="f828f-215">**可退还**标志仅在**使用高级自动费用**参数设置为**是**时适用。</span><span class="sxs-lookup"><span data-stu-id="f828f-215">The **Refundable** flag is only applicable when the **Use advanced auto-charges** parameter is set to **Yes**.</span></span>  

<span data-ttu-id="f828f-216">将费用发送到 Retail Server/通道 DB，以便 POS 可以通过运行 **1040 配送计划**作业使用它们。</span><span class="sxs-lookup"><span data-stu-id="f828f-216">Send the charges to the Retail Server/Channel DB so that the POS can utilize them by running the **1040 distribution schedule** job.</span></span>

<span data-ttu-id="f828f-217">**添加行费用**操作必须在您的 [POS 屏幕布局](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts)中配置，以使用户可从 POS 访问的按钮可以调用此操作（操作 140）。</span><span class="sxs-lookup"><span data-stu-id="f828f-217">The **Add line charge** operation must be configured in your [POS screen layout](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts) so that a button that is accessible to the user from POS can call this operation (operation 140).</span></span>  <span data-ttu-id="f828f-218">屏幕布局的更改也必须通过分配计划功能分配到零售渠道。</span><span class="sxs-lookup"><span data-stu-id="f828f-218">The screen layout changes must be distributed to the retail channel as well through the distribution schedule function.</span></span> 

#### <a name="sales-processing-of-the-manual-line-charge"></a><span data-ttu-id="f828f-219">手动行费用的销售处理</span><span class="sxs-lookup"><span data-stu-id="f828f-219">Sales processing of the manual line charge</span></span>

<span data-ttu-id="f828f-220">若要在 POS 应用程序中执行此方案，POS 用户将照常创建销售交易记录，并将产品和所有其他配置添加到销售中。</span><span class="sxs-lookup"><span data-stu-id="f828f-220">To execute the scenario in the POS application, the POS user will create the sales transaction as usual, adding the products and any other configurations to the sale.</span></span> <span data-ttu-id="f828f-221">在收取付款前，用户应选择将从 POS 物料列表显示应用费用的特定行，并执行**添加行费用**操作。</span><span class="sxs-lookup"><span data-stu-id="f828f-221">Prior to collecting payment, the user should select the specific line where the charge will apply from the POS item list display and execute the **Add line charge** operation.</span></span> <span data-ttu-id="f828f-222">系统将提示用户选择费用代码并输入费用值。</span><span class="sxs-lookup"><span data-stu-id="f828f-222">The user will be prompted to select a charges code and enter the charges value.</span></span> <span data-ttu-id="f828f-223">在用户完成流程后，此费用将被链接到行并作为行级别费用添加到订单合计。</span><span class="sxs-lookup"><span data-stu-id="f828f-223">Once the user completes the process, the charge will be linked to the line and added to the order total as a line level charge.</span></span> <span data-ttu-id="f828f-224">如果需要，用户可以重复此流程，将其他行费用添加到交易记录中的其他物料行。</span><span class="sxs-lookup"><span data-stu-id="f828f-224">The user can repeat the process to add additional line charges to other items lines on the transaction if needed.</span></span>

<span data-ttu-id="f828f-225">同一流程可以通过使用**销售订单**页上**销售订单行**部分的**财务**下拉菜单下的“维护费用”功能在呼叫中心应用。</span><span class="sxs-lookup"><span data-stu-id="f828f-225">The same process can be applied in the call center by using the "maintain charges" feature found under the **Financials** drop-down menu in the **Sales order lines** section on the **Sales order** page.</span></span>  <span data-ttu-id="f828f-226">这将打开**维护费用**页，用户在其中可以将新行的特定费用添加到交易记录中。</span><span class="sxs-lookup"><span data-stu-id="f828f-226">This will open the **Maintain charges** page where the user can add a new line specific charge to the transaction.</span></span>

## <a name="additional-features"></a><span data-ttu-id="f828f-227">附加功能</span><span class="sxs-lookup"><span data-stu-id="f828f-227">Additional features</span></span>

### <a name="editing-charges-on-a-pos-sales-transaction"></a><span data-ttu-id="f828f-228">编辑 POS 销售交易记录中的费用</span><span class="sxs-lookup"><span data-stu-id="f828f-228">Editing charges on a POS sales transaction</span></span>

<span data-ttu-id="f828f-229">**管理费用**操作 (142) 应该添加到 [POS 屏幕布局](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts)，以便用户可以查看和编辑或覆盖任何系统计算或手动计算的标题或行级别费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-229">The **Manage charges** operation (142) should be added to the [POS screen layout](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts) so that a user can view and edit or override any system-calculated or manually-created header or line-level charges.</span></span> <span data-ttu-id="f828f-230">如果未添加此操作，用户将无法调整 POS 交易记录中的费用值，也不能查看费用的详细信息，如与费用关联的费用代码的类型。</span><span class="sxs-lookup"><span data-stu-id="f828f-230">If the operation is not added, users will not be able to adjust the value of the charges on the POS transaction, nor will they be able to view the details of the charges such as the type of charges code tied to the charge.</span></span>  

<span data-ttu-id="f828f-231">在 POS 中的**管理费用**页，用户可以查看标题和行级别费用详细信息。</span><span class="sxs-lookup"><span data-stu-id="f828f-231">On the **Manage charges** page in POS, the user can view both header and line-level charges details.</span></span> <span data-ttu-id="f828f-232">用户可以使用此页提供的**编辑**功能对计费到特定费用行的金额进行更改。</span><span class="sxs-lookup"><span data-stu-id="f828f-232">The user can use the **Edit** function available on this page to make changes to the amount charged to a specific charges line.</span></span> <span data-ttu-id="f828f-233">在费用行被手动覆盖后，它将不会被系统地重新计算，除非用户发起**重新计算费用**操作。</span><span class="sxs-lookup"><span data-stu-id="f828f-233">Once a charges line is overwritten manually, it will not be systematically recalculated unless the user initiates the **Recalculate charges** operation.</span></span>

<span data-ttu-id="f828f-234">如果已在**零售参数**设置页面配置了**费用覆盖原因代码**，当费用已在 POS 应用程序中修改时，用户将被提示提供原因代码。</span><span class="sxs-lookup"><span data-stu-id="f828f-234">If the **Charge override reason code** has been configured on the **Retail parameters** setup page, the user will be prompted to provide a reason code when charges have been modified in the POS application.</span></span>

<span data-ttu-id="f828f-235">如果已为覆盖的费用捕获了原因代码，还将提供新报表来查看和审核这些覆盖。</span><span class="sxs-lookup"><span data-stu-id="f828f-235">If reason codes have been captured for overwritten charges, a new report is also available to review and audit these overrides.</span></span> <span data-ttu-id="f828f-236">此报表可以在**零售 \> 查询和报表 \> 费用覆盖历史记录**中找到。</span><span class="sxs-lookup"><span data-stu-id="f828f-236">The report can be found in **Retail \> Inquiries and reports \> Charge override history**.</span></span>

### <a name="refunding-charges-on-a-pos-return-transaction"></a><span data-ttu-id="f828f-237">退还 POS 退货交易记录中的费用</span><span class="sxs-lookup"><span data-stu-id="f828f-237">Refunding charges on a POS return transaction</span></span>

<span data-ttu-id="f828f-238">如果**使用高级自动费用**参数设置为**是**，**退回装运费用**的现有零售参数不再适用。</span><span class="sxs-lookup"><span data-stu-id="f828f-238">If the **Use advanced auto-charges** parameter is set to **Yes**, the existing retail parameter for **Refund shipping charges** is no longer applicable.</span></span> <span data-ttu-id="f828f-239">若要指示哪些费用应在使用高级自动费用时系统地退还给客户，请确保相关费用代码已在**费用代码**设置页面配置为**可退还**。</span><span class="sxs-lookup"><span data-stu-id="f828f-239">To indicate which charges should be systematically refunded to a customer when using advanced auto-charges, ensure the related charges code has been configured as **Refundable** on the **Charges code** setup page.</span></span> <span data-ttu-id="f828f-240">请确保设置已通过分配计划处理同步到您的零售渠道数据库。</span><span class="sxs-lookup"><span data-stu-id="f828f-240">Make sure that the settings have been synchronized to your Retail channel databases through distribution schedule processing.</span></span>

### <a name="refunding-charges-on-a-return-order-transaction"></a><span data-ttu-id="f828f-241">退还退货单交易记录中的费用</span><span class="sxs-lookup"><span data-stu-id="f828f-241">Refunding charges on a return order transaction</span></span>

<span data-ttu-id="f828f-242">费用不会系统地退还到在 Retail 中创建的**退货单**。</span><span class="sxs-lookup"><span data-stu-id="f828f-242">Charges are not systematically refunded to **Return orders** created in Retail.</span></span> <span data-ttu-id="f828f-243">在创建**退货单**时，用户需要选择**复制费用**选项。</span><span class="sxs-lookup"><span data-stu-id="f828f-243">Users are required to select the **Copy charges** option when creating the **Return order**.</span></span> <span data-ttu-id="f828f-244">如果没有选择**复制费用**，原始销售交易记录中的费用将不自动退还。</span><span class="sxs-lookup"><span data-stu-id="f828f-244">If **Copy charges** is not selected, charges from the original sales transaction will not be automatically refunded.</span></span> <span data-ttu-id="f828f-245">如果选择**复制费用**，所有费用将被复制到退货单，并且用户可以手动编辑或删除他们不希望退还的任何费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-245">If **Copy charges** is selected, all charges will be copied to the return order and the user can manually edit or remove any charges they do not want to have refunded.</span></span> <span data-ttu-id="f828f-246">呼叫中心退货单流程目前不认可**费用代码**设置中的**可退还**标志。</span><span class="sxs-lookup"><span data-stu-id="f828f-246">The call center return order process currently does not acknowledge the **Refundable** flag on the **Charges code** setup.</span></span>

### <a name="configuring-pos-receipts-to-show-charges"></a><span data-ttu-id="f828f-247">配置 POS 收据以显示费用</span><span class="sxs-lookup"><span data-stu-id="f828f-247">Configuring POS receipts to show charges</span></span>

<span data-ttu-id="f828f-248">以下收据元素已添加到收据行和页脚以支持高级自动费用功能。</span><span class="sxs-lookup"><span data-stu-id="f828f-248">The following receipt elements have been added to the receipt line and footer to support the advanced auto-charges functionality.</span></span>

- <span data-ttu-id="f828f-249">**订单行装运费用** - 此行级别元素可用于概括已应用到销售订单行的特定费用代码。</span><span class="sxs-lookup"><span data-stu-id="f828f-249">**Line Shipping Charges** - This line-level element can be used to recap specific charges codes that have been applied to the sales line.</span></span> <span data-ttu-id="f828f-250">仅在**费用代码**页标记为**装运**费用的费用代码将在此处显示。</span><span class="sxs-lookup"><span data-stu-id="f828f-250">Only charges codes that have been flagged as **Shipping** charges on the **Charges code** page will be displayed here.</span></span>

- <span data-ttu-id="f828f-251">**订单行其他费用** - 此行级别元素可用于概括已应用到销售订单行的任何非装运特定费用代码。</span><span class="sxs-lookup"><span data-stu-id="f828f-251">**Line Other Charges** - This line-level element can be used to recap any non-shipping specific charge codes that have been applied to the sales line.</span></span> <span data-ttu-id="f828f-252">这些是**费用代码**页上的**装运**标志未启用的费用代码。</span><span class="sxs-lookup"><span data-stu-id="f828f-252">These are charges codes where the **Shipping** flag on the **Charges code** page has not been enabled.</span></span>

- <span data-ttu-id="f828f-253">**订单装运费用详细信息** - 此页脚级别元素显示应用到在**费用代码**设置页面上标记为**装运**费用的订单的费用代码的描述。</span><span class="sxs-lookup"><span data-stu-id="f828f-253">**Order Shipping Charges Details** - This footer-level element displays the descriptions of the charge codes applied to the order that have been flagged as **Shipping** charges on the **Charges code** setup page.</span></span>

- <span data-ttu-id="f828f-254">**订单装运费用** - 此页脚级别元素显示装运相关费用的美元金额。</span><span class="sxs-lookup"><span data-stu-id="f828f-254">**Order Shipping Charges**  - This footer-level element shows the dollar value of the shipping-related charges.</span></span>

- <span data-ttu-id="f828f-255">**订单其他费用详细信息** - 此页脚级别元素显示应用到未标记为装运相关费用的订单的费用代码的描述。</span><span class="sxs-lookup"><span data-stu-id="f828f-255">**Order Other Charges Details** - This footer-level element displays the description of the charges codes applied to the order that have not been flagged as shipping-related charges.</span></span>

- <span data-ttu-id="f828f-256">**订单其他费用** - 此页脚级别元素显示与装运无关的其他费用的美元金额。</span><span class="sxs-lookup"><span data-stu-id="f828f-256">**Order Other Charges** - This footer-level element displays the dollar value of the other charges that are not shipping-related.</span></span>

<span data-ttu-id="f828f-257">建议组织也将自由文本字段添加到收据页脚，以便定义将概括费用的区域。</span><span class="sxs-lookup"><span data-stu-id="f828f-257">It is recommended that the organization also add free text fields to the receipt footer, in order to define the areas where charges will be recapped.</span></span> 

### <a name="preventing-charges-from-being-calculated-until-the-pos-order-is-completed"></a><span data-ttu-id="f828f-258">防止费用在完成 POS 订单前计算</span><span class="sxs-lookup"><span data-stu-id="f828f-258">Preventing charges from being calculated until the POS order is completed</span></span>

<span data-ttu-id="f828f-259">某些组织可能更愿意等待用户将所有销售订单行都添加到 POS 交易记录后再计算费用。</span><span class="sxs-lookup"><span data-stu-id="f828f-259">Some organizations may prefer to wait until the user has finished adding all of the sales lines to the POS transaction before calculating charges.</span></span> <span data-ttu-id="f828f-260">若要防止在物料添加到 POS 交易记录时计算费用，在商店使用的**功能配置文件**中打开**手动费用计算**参数。</span><span class="sxs-lookup"><span data-stu-id="f828f-260">To prevent calculation of charges as items are added to the POS transaction, turn on the **Manual charge calculation** parameter in the **Functionality profile** used by the store.</span></span> <span data-ttu-id="f828f-261">启用此参数将需要 POS 用户在完成向 POS 交易记录添加产品时使用**计算合计**操作。</span><span class="sxs-lookup"><span data-stu-id="f828f-261">Enabling this parameter will require the POS user to use the **Calculate totals** operation when they have completed adding the products to the POS transaction.</span></span> <span data-ttu-id="f828f-262">**计算合计**操作然后将触发计算订单头或行的任何自动费用（如果适用）。</span><span class="sxs-lookup"><span data-stu-id="f828f-262">The **Calculate totals** operation will then trigger the calculation of any auto charges for the order header or lines as applicable.</span></span>
