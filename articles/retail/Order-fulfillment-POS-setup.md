---
title: "设置商店订单履行"
description: "此主题概要介绍如何设置商店订单履行。"
author: rubencdelgado
manager: AnnBe
ms.date: 10/30/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-365-retail
ms.technology: 
ms.search.form: RetailStoreTable, RetailTillLayout
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: rubencdelgado
ms.search.validFrom: 2017-10-30
ms.dyn365.ops.version: 
ms.translationtype: HT
ms.sourcegitcommit: 5098fb3339403b6f2779dfe3bb7ef5c4ca78051f
ms.openlocfilehash: eee96463099fb14ec5b2b0e29a406ae7fdc7496d
ms.contentlocale: zh-cn
ms.lasthandoff: 08/08/2018

---


# <a name="set-up-order-fulfillment-for-stores"></a>设置商店订单履行

[!include [banner](includes/banner.md)]

## <a name="overview"></a>概览
许多零售商希望通过让商店填写订单的方式优化订单履行。 商店级别的订单履行有助于缓解特定商店的存货过剩情况，或者当商店产能过剩或与客户之间的装运距离较短时，从物流的角度而言具有必要性。 为了解决此需求，在销售点提供了统一订单履行操作。

要在特定商店履行的订单在订单标头或行上指定了商店的仓库。 

销售点中的订单履行操作是销售点中用于处理订单的一个统一工作区。 这里包括从接受订单，到将订单标记为已装运或发起商店提货在内的一切操作。 

## <a name="set-up-the-order-fulfillment-operation"></a>设置订单履行操作

订单履行[操作 ID 928](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-operations) 可用于访问销售点中的商店订单履行工作区。 

按照[向按钮网格添加操作](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/pos-screen-layouts)中的步骤指定在销售点调用订单履行时要使用的参数。 默认情况下，在指定订单履行操作后，会选中**所有订单**。 配置此参数后，该操作将列出在当前商店履行的所有订单行。 另外还提供**要装运的订单**，可以分配到按钮，并当用户只想查看将从该商店装运的订单时使用。 最后是**要提货的订单**。 在销售点进行调用时，它仅列出要在该商店提货的订单。 可以向不同的按钮分配不同的参数，以便为用户提供查看订单履行的不同方式。 

### <a name="enable-users-to-access-order-fulfillment-at-the-point-of-sale"></a>使用户能够在销售点访问订单履行。 

订单履行操作没有自己现成的权限，但用户将来可能需要拥有**允许检索订单**权限才能从销售点调用操作。

在商店级别，配置设置可用于确定是否必须手动接受来自销售点内部的订单行。 如果未设置该配置选项，将默认接受订单行。 如果已启用该配置选项，销售点的用户需拥有**允许接受订单**权限才能接受来自销售点内部的订单。 


### <a name="enable-manual-order-acceptance"></a>启用手动接受订单

默认情况下，分配到商店的订单行被标记为**已接受**。 这意味着系统假定这些订单行将从指定的商店履行，而且不会被进一步分配。 在某些情况下，在履行订单前，零售商可能想要手动接受订单。 例如，如果商店人手不够，无法履行订单，商店经理将仅接受他们认为在特定的一天内能够妥善处理的订单量进行处理。 在订单被接受前，只能由后端办公系统将它重新分配到另一个商店。 这样一来，订单接受也提供了指示某个商店已确认订单并将履行该订单的一种方式。 

用于商店提货的订单行标记为**挂起**，且不需要被接受。

要为订单行启用手动接受，请导航到**零售** > **渠道** > **零售商店** > **所有零售商店**。 选择商店并单击商店 ID 可以查看该商店的详细信息。 单击**编辑**。 在**常规**快速选项卡上，找到**订单履行**子标题，并将**手动接受**从**否**更改为**是**。 

### <a name="enable-reject-order-line-capability"></a>启用拒绝订单行功能

也可拒绝来自销售点的订单行。 拒绝订单行表示不会在该商店履行该订单行，并且会将该订单行发回去，以重新分配到另一个商店或仓库。 订单行拒绝权限通过与该工作人员相关的 POS 权限组中的**允许拒绝订单**权限授予。 在拒绝行时，零售商可以要求其工作人员提供拒绝原因。 为此，可以使用**信息代码活动**类型为**订单履行**的信息代码，将该信息代码分配到与该渠道相关的功能配置文件中的**拒绝订单行**。 

>[!Note]
>只有**信息代码活动**类型为**订单履行**的信息代码才能被分配到**拒绝订单行**操作。

### <a name="synchronize-changes-to-the-channel-database"></a>将更改同步到渠道数据库

将操作分配到按钮网格、分配适当权限并配置渠道后，必须将更改同步到渠道数据库。 为此，请导航到**零售** > **零售 IT** > **配送计划**。 选择计划“1090-收银机”以同步按钮网格更改，然后单击**立即运行**。 接下来，选择“1060-人员”以同步权限更改，然后单击**立即运行**。 接下来，选择“1070-渠道配置”以同步渠道更改，并单击**立即运行**。 最后选择“1110-全局配置”以同步为拒绝原因新创建的信息代码，并单击**立即运行**。

## <a name="use-order-fulfillment-at-the-point-of-sale"></a>在销售点使用订单履行

打开销售点并选择订单履行操作。 根据配置情况，将列出所有行、要提货的订单行或要装运的订单行。 

### <a name="order-fulfillment-view"></a>订单履行视图 

订单履行视图列出在商店履行的订单行，包括以下列：

  - 转移单编号
  - 产品编号
  - 说明
  - 订购数量
  - 要求的交货日期
  - 客户名称
  - 履行状态
  
选择订单行，然后打开销售点标题中显示的登录用户/班次信息下方的弹出菜单，可以查看特定订单行的更多信息。 此菜单包括 2 个选项卡：一个用于行明细，另一个用户订单明细。 行明细选项卡包括以下信息：

  - 订购数量
  - 要装运/提货的剩余数量
  - 领取的数量
  - 包装的数量
  - 开票的数量（已提货或已装运）
  - 交货方式
  - 交货地址
  
详细信息弹出菜单还有一个选项卡提供更多订单级别的详细信息，包括：

  - 客户名称
  - 客户 ID
  - 转移单编号
  - 订单合计
  - 订单余额
  
订单履行视图底部为操作窗格。 其中包括可以对订单行执行的所有操作。 如果某个操作根据行的状态不可用，该操作将不可用。 

默认情况下，订单的状态为**已接受**。 订单状态可以作为订单行列表中的一列进行查看。 如果在渠道级别配置了**手动接受**，要装运的所有行都将显示为**挂起**，并且必须在接受之后才能履行。 用于商店提货的订单默认为**挂起**，不需要接受。

### <a name="order-fulfillment-line-actions"></a>订单履行行操作

**编辑** - 如果订单状态为挂起，可以在销售点进行编辑。 已经部分领料、包装或开票的订单不能从订单履行视图中进行编辑。

**接受** - 如果在渠道级别配置了**手动接受**，行必须在接受之后才能在订单履行流程中移动。

**领料** - 领料选项支持若干操作。 首先，**领料**会更新订单行的状态，使商店中的其他人无法企图对相同行领料。 其次，**打印领料单**将打印选定的一行或多行的领料单，并将其状态更新为**领料**。 领料单格式作为收据格式的一部分进行控制。 有关如何设置收据格式的详细信息，请参阅[收据模板和打印](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/receipt-templates-printing)。 最后，**标记为已领料**指示行已经领料。 **标记为已领料**在后端办公系统中发起相应的库存交易记录。 可以同时对多个订单和所有交货模式的多个订单行进行领料操作。

**拒绝** - 可以拒绝行或部分行。 可以从后端办公系统将它们重新分配到另外一个商店或仓库。 只有尚未领料或包装的行才可以被拒绝。 要拒绝已领料或包装的行，必须从后端办公系统对该行取消领料或取消包装。 

**包装** - 包装选项支持两个操作：**打印装箱单**将打印选定行的装箱单，**标记为已包装**将行标记为已包装，并在后端办公系统中将行标记为已交货。 只能同时包装属于相同订单且具有相同交货方式的订单行。 装箱单格式作为收据格式的一部分进行控制。 有关如何设置收据格式的详细信息，请参阅[收据模板和打印](https://docs.microsoft.com/en-us/dynamics365/unified-operations/retail/receipt-templates-printing)。

**装运** - 装运操作在后端办公系统中将选定行标记为**已交货**。 某一行全部装运后，将不再显示在订单履行视图中。

**提货** - 提货操作将行添加到用于提货的交易记录视图中。 如果一个订单中有其他目前未提货的行，这些行将被添加到交易记录视图中，且数量为零。 某一行全部提货后，将不再显示在订单履行视图中。 

### <a name="order-fulfillment-filtering"></a>订单履行筛选

在销售点的订单履行包括筛选，以帮助用户轻松找到他们需要的东西。 在**销售点**屏幕底部的操作窗格上可以更改筛选器。 默认情况下，根据设置的操作方式应用**交货类型**筛选器。 如果使用**所有订单**参数设置操作，则在访问订单履行时应用该筛选器。 相同的规则适用于**商店提货**和**从商店装运**参数。 可以应用到订单履行视图的其他筛选器包括：

  - 客户编号
  - 客户名称
  - 客户电子邮件
  - 转移单编号
  - 交货方式
  - 收据编号
  - 渠道引用 ID
  - 源商店编号
  - 行状态
  - 创建日期
  - 交货日期
  - 接收日期

