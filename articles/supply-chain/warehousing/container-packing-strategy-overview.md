---
title: 集装箱包装策略
description: 本主题介绍了集装箱包装策略之间的差异并提供了示例。
author: GalynaFedorova
ms.date: 06/11/2021
ms.topic: article
ms.search.form: WHSWaveTemplateTable, InventLocationIdLookup, WHSContainerType, WHSContainerGroup, WHSContainerizationTable, WHSContainerizationBreak, WHSCreateContainerBreak, WHSContainerStructure, WHSContainerTable
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: v-gfedorova
ms.search.validFrom: 2021-06-11
ms.dyn365.ops.version: 10.0.19
ms.openlocfilehash: f481f6ca047ee0285fe0e81d8fa96665e9d27cee
ms.sourcegitcommit: 8e846b52763f90d2232ec7d427839f4722570bce
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/22/2021
ms.locfileid: "6292753"
---
# <a name="container-packing-strategies"></a>集装箱包装策略

*集装箱包装策略* 是一种可用于定义跨集装箱的物料分配的策略。 本主题说明了 *包装到所有开放集装箱* 和 *仅包装到当前集装箱* 策略之间的差异。

- **包装到所有开放集装箱** – 系统必须检查已在集装化周期期间创建的所有开放集装箱，以确保该物料适合其中一个集装箱。 在包装期间，系统检查每个物料以确定它是否适合之前创建的任何集装箱。 如果物料不适合现有集装箱，系统将创建一个新集装箱并继续，直到完成整个订单的包装。

    例如，*n* 个订购的物料需要集装化。 最坏的情况是，每次系统处理不适合任何现有集装箱的物料时，总共将执行 (\[(*n* – 1) × (*n* + 1)\] ÷ 2) 个检查以评估该物料是否适合现有集装箱。

- **仅包装到当前集装箱** – 系统必须仅检查最近创建的集装箱，以确保该物料适合该集装箱。 在包装期间，系统检查每个物料以确定它是否适合最近创建的集装箱。 如果物料不适合该集装箱，系统将创建一个新集装箱并继续，直到完成整个订单的包装。

    例如，*n* 个订购的物料需要集装化。 最坏的情况是，系统总共将执行 (*n* – 1) 个检查以评估该物料是否适合集装箱。

## <a name="example-of-the-flow-for-container-packing-strategies"></a>集装箱包装策略流的示例

您设置以下物料进行集装化。

| 物料 | 物理维度（宽 × 深 × 高） | 权重 |
|---|---|---|
| HDMI 电缆 6' | 1 × 1 × 1 | 1 |
| HDMI 电缆 12' | 2 × 1 × 1 | 1 |
| HDMI 电缆 18' | 3 × 1 × 1 | 2 |

您还设置了以下将用于包装的箱。

| 容器 | 物理维度（长 × 宽 × 高） | 权重 | 体积 |
|---|---|---|---|
| 中等箱 | 6 × 3 × 2 | 10 | 100 |

最后，您设置具有以下产品和数量的订单。

| 销售订单行 | 数量 |
|---|---|
| HDMI 电缆 12' | 9 |
| HDMI 电缆 18' | 8 |
| HDMI 电缆 6' | 13 |

下表总结了集装化在使用 *包装到所有开放集装箱* 策略时以及使用 *仅包装到当前集装箱* 策略时的工作原理。

| 装入所有打开的集装箱 | 包装到当前集装箱 |
|---|---|
| <p>HDMI 电缆 12'：</p><ol><li>创建一个新集装箱 CONT0001。</li><li>将 9 个放入集装箱 CONT0001 中。</li></ol> | <p>HDMI 电缆 12'：</p><ol><li>创建一个新集装箱 CONT0001。</li><li>将 9 个放入集装箱 CONT0001 中。</li></ol> |
| <p>HDMI 电缆 18'：</p><ol><li>检查物料是否适合集装箱 CONT0001。</li><li>创建一个新集装箱 CONT0002。</li><li>将 5 个放入集装箱 CONT0002 中。</li><li>创建一个新集装箱 CONT0003。</li><li>将 3 个放入集装箱 CONT0003 中。</li></ol> | <p>HDMI 电缆 18'：</p><ol><li>检查物料是否适合集装箱 CONT0001。</li><li>创建一个新集装箱 CONT0002。</li><li>将 5 个放入集装箱 CONT0002 中。</li><li>创建一个新集装箱 CONT0003。</li><li>将 3 个放入集装箱 CONT0003 中。</li></ol> |
| <p>HDMI 电缆 6'：</p><ol><li>检查物料是否适合集装箱 CONT0001。</li><li>将 1 个放入集装箱 CONT0001 中。</li><li>检查物料是否适合集装箱 CONT0002。</li><li>检查物料是否适合集装箱 CONT0003。</li><li>将 4 个放入集装箱 CONT0003 中。</li><li>创建一个新集装箱 CONT0004。</li><li>将 8 个放入集装箱 CONT0004 中。</li></ol> | <p>HDMI 电缆 6'：</p><ol><li>检查物料是否适合集装箱 CONT0003。</li><li>将 4 个放入集装箱 CONT0003 中。</li><li>创建一个新集装箱 CONT0004。</li><li>将 9 个放入集装箱 CONT0004 中。</li></ol> |

## <a name="example-scenario-pack-single-orders-per-container"></a>示例场景：每个集装箱包装单个订单

本部分显示一个场景，其中系统设置为将多个订单合并到一个装运中。 因此，从销售订单完成集装化，以确保包含多个产品的每个订单都包装到自己的集装箱中。

此功能可让您处理必须仅将一个销售订单包装到每个集装箱的场景，以便配送中心可以在零售商店之间越库配送满载的集装箱。 除了零售场景（每个零售商店的订单和装运到配送中心以进行越库配送）之外，此技术也常用于精益供应链（每个即时生产线的销售订单）。

此场景显示您可以如何使用 *仅包装到当前集装箱* 策略进行集装化来减少包装期间评估的集装箱数。

### <a name="prerequisites"></a>先决条件

#### <a name="turn-on-the-consolidate-shipments-feature-in-your-system"></a>在您的系统中打开合并装运功能

该场景使用 *合并装运* 功能。 如果该功能在您的系统中尚不可用，您必须使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)打开它。

#### <a name="make-demo-data-available"></a>提供演示数据

此场景引用为 Microsoft Dynamics 365 Supply Chain Management 提供的标准演示数据中包含的值和记录。 如果要在进行此练习时使用此处提供的值，请务必在安装了演示数据的环境中操作，并且在开始前将法人设置为 **USMF**。

### <a name="inspect-or-create-container-types"></a>检查或创建集装箱类型

若要检查您的集装箱类型，或根据需要创建新的集装箱类型，请按照以下步骤操作。

1. 转到 **仓库管理** \> **设置** \> **集装箱** \> **集装箱类型**。
1. 确保以下每种集装箱类型在您的演示数据中可用。 根据需要编辑或创建集装箱类型。

    - 集装箱类型 1：

        - **集装箱类型代码**：*大箱*
        - **描述**：*大箱*
        - **最大净重**：*100*
        - **体积**：*400*
        - **长度**：*4*
        - **宽度**：*10*
        - **高度**：*10*

    - 集装箱类型 2：

        - **集装箱类型代码**：*中等箱*
        - **描述**：*中等箱*
        - **最大净重**：*50*
        - **体积**：*200*
        - **长度**：*2*
        - **宽度**：*10*
        - **高度**：*10*

    - 集装箱类型 3：

        - **集装箱类型代码**：*小箱*
        - **描述**：*小箱*
        - **最大净重**：*20*
        - **体积**：*100*
        - **长度**：*1*
        - **宽度**：*10*
        - **高度**：*10*

### <a name="inspect-or-create-container-groups"></a>检查或创建集装箱组

若要检查您的集装箱组，或根据需要创建新的集装箱组，请按照以下步骤操作。

1. 转到 **仓库管理** \> **设置** \> **集装箱** \> **集装箱组**。
1. 确保以下集装箱组在您的演示数据中可用。 如果不可用，请选择 **新建** 创建它。

    - **集装箱组 ID**：*箱*
    - **描述**：*箱大小*

1. 在 *箱* 集装箱组的 **详细信息** 快速选项卡上，确保存在以下行。 如果不存在，请选择 **新建** 添加它们。

    - 行 1：

        - **序列号**：*1*
        - **集装箱类型**：*大箱*
        - **集装箱利用率百分比**：*100*

    - 行 2：

        - **序列号**：*2*
        - **集装箱类型**：*中等箱*
        - **集装箱利用率百分比**：*100*

    - 行 3：

        - **序列号**：*3*
        - **集装箱类型**：*小箱*
        - **集装箱利用率百分比**：*100*

### <a name="create-a-new-container-build-template"></a>创建新的集装箱生成模板

若要创建新的集装箱生成模板，请按照以下步骤操作。

1. 转到 **仓库管理** \> **设置** \> **集装箱** \> **集装箱生成模板**。
1. 选择 **新建** 创建具有以下设置的集装箱生成模板：

    - **序列号**：*1*
    - **集装箱模板 ID**：*箱*
    - **集装箱组 ID**：*箱*
    - **基本查询类型**：*销售分配行*
    - **波次步骤代码**：*234*
    - **允许拆分领料**：*是*
    - **集装箱包装策略**：*仅包装到当前集装箱*
    - **按指令单位包装**：*否*

1. 在仍选择新模板行的同时，在操作窗格上选择 **编辑查询**。
1. 将显示标准查询编辑器对话框。 在 **排序** 选项卡上，选择 **添加** 以添加具有以下设置的行：

    - **表**：*临时工作事务*
    - **派生表**：*临时工作事务*
    - **字段**：*订单编号*
    - **搜索方向**：*升序*

    > [!IMPORTANT]
    > 若要避免循环检查所有其他开放的集装箱，并通过一次检查一个集装箱来加快流程，除了按订单编号排序外，请使用 *仅包装到当前集装箱* 策略。 此组合将像工作模板上的工作分解一样工作。

1. 选择 **确定** 关闭查询编辑器对话框。
1. 在仍选择新模板行的同时，在操作窗格上选择 **集装箱混合约束**。

    现在，您将添加一个约束，将单个订单中的物料放入单个集装箱中。 来自任何其他订单的物料将放入单独的集装箱中。

1. 选择 **新建** 创建具有以下设置的混合约束：

    - **表**：*销售订单*
    - **字段选择**：*SalesId*（该字段在网格中将显示为 *销售订单*。）

1. 选择 **确定** 以添加约束。
1. 关闭该页面。

### <a name="set-up-a-wave-template-for-containerization"></a>为集装化设置波次模板

若要设置波次模板，请按照以下步骤操作。

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次模板**。
1. 在列表窗格中，将 **波次模板类型** 字段设置为 *装运*。
1. 在列表中选择 **63 集装化** 模板。
1. 在操作窗格上，选择 **编辑**。
1. 在 **方法** 快速选项卡上，在 **选定方法** 列中，找到以下行：

    - **方法名称**：*集装化*
    - **名称**：*集装化*

1. 将行的 **波次步骤代码** 字段设置为 *234*。

### <a name="set-up-a-work-template"></a>设置工作模板

若要设置工作模板，请按照以下步骤操作。

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作模板**。
1. 将 **工作订单类型** 字段设置为 *销售订单*。
1. 在 **概述** 网格中，找到并选择应该用于针对每个集装箱包装单个订单的工作模板。 对于此场景，选择 **63 领料到集装箱** 模板。
1. 在操作窗格上，选择 **编辑查询**。
1. 将显示标准查询编辑器对话框。 在 **排序** 选项卡上，添加以下行：

    - 行 1：

        - **表**：*临时工作事务*
        - **派生表**：*临时工作事务*
        - **字段**：*装运 ID*
        - **搜索方向**：*升序*

    - 行 2：

        - **表**：*临时工作事务*
        - **派生表**：*临时工作事务*
        - **字段**：*订单编号*
        - **搜索方向**：*升序*

    - 行 3：

        - **表**：*临时工作事务*
        - **派生表**：*临时工作事务*
        - **字段**：*集装箱 ID*
        - **搜索方向**：*升序*

1. 选择 **确定** 关闭查询编辑器对话框。
1. 您将收到以下消息：“分组将重置，是否继续？” 选择 **是** 继续。
1. 在仍选择 **63 领料到集装箱** 模板的同时，在操作窗格上选择 **工作标题分解**。

    现在，您将应用设置以分解工作，以便订单中的每个集装箱都链接到一个工作订单。

1. 在 **工作标题分解** 页面上为每一行选中 **按此字段分组** 复选框（**装运 ID**、**订单编号** 和 **集装箱 ID**）。
1. 关闭该页面。

### <a name="set-up-shipment-consolidation-policies"></a>设置装运合并策略

若要设置装运合并策略，请按照以下步骤操作。

1. 转到 **仓库管理 \> 设置 \> 发放到仓库 \> 装运合并策略**。
1. 在列表窗格中，将 **策略类型** 字段设置为 *销售订单*。
1. 在列表中选择 **默认** 策略。
1. 在操作窗格上，选择 **编辑**。
1. 在 **合并字段** 快速选项卡上的 **选定字段** 列表中，选择 **字段名称** 字段设置为 *订单编号* 的行。
1. 选择 **删除** 按钮 ![向左箭头](media/backward-button.png) 将字段移到 **其余字段** 列表中。
1. 在操作窗格上，选择 **保存**。

### <a name="set-up-physical-dimensions-for-the-product"></a>为产品设置物理维度

若要为将在此场景中使用的产品设置物理维度，请按照以下步骤操作。

1. 转到 **产品信息管理 \> 产品 \> 已发布产品**。
1. 选择 **物料编号** 字段设置为 *A0001* 的产品。
1. 在“操作窗格”上的 **管理库存** 选项卡上，在 **仓库** 组中，选择 **物理维度**。
1. 在 **物理维度** 页面上，您应该在网格中看到以下行：

    - **单位**：*件*
    - **毛重**：*3.00*
    - **宽度**：*2.00*
    - **深度**：*2.00*
    - **高度**：*4.00*
    - **体积**：*16.00*

1. 关闭该页面。
1. 选择 **物料编号** 字段设置为 *A0002* 的产品。
1. 在“操作窗格”上的 **管理库存** 选项卡上，在 **仓库** 组中，选择 **物理维度**。
1. 在 **物理维度** 页面上，您应该在网格中看到以下行：

    - **单位**：*件*
    - **毛重**：*4.00*
    - **宽度**：*3.00*
    - **深度**：*1.00*
    - **高度**：*3.00*
    - **体积**：*9.00*

### <a name="create-sales-order-1"></a>创建销售订单 1

要创建销售订单，请按照下面的步骤操作。

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 在操作窗格上，选择 **新建**。
1. 显示用于创建新销售订单的对话框。 设置以下值：

    - **客户帐户**：*US-001*
    - **仓库**：*63*

1. 选择 **确定** 创建销售订单，然后关闭对话框。
1. 将打开新销售订单。 在 **销售订单行** 快速选项卡上，添加以下销售行：

    - 行 1：

        - **物料编号：***A0001*
        - **数量：** *2*

    - 行 2：

        - **物料编号：***A0002*
        - **数量：** *2*

1. 选择第一行，然后选择 **库存 \> 预留**。
1. 在 **预留** 页上，选择 **预留批次**。 然后关闭页面。
1. 对第二行重复前两个步骤。
1. 关闭该页面。

### <a name="create-sales-order-2"></a>创建销售订单 2

若要创建第二个销售订单，请按照以下步骤操作。

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 在操作窗格上，选择 **新建**。
1. 显示用于创建新销售订单的对话框。 设置以下值：

    - **客户帐户**：*US-001*
    - **仓库**：*63*

1. 选择 **确定** 创建销售订单，然后关闭对话框。
1. 将打开新销售订单。 在 **销售订单行** 快速选项卡上，添加以下销售行：

    - 行 1：

        - **物料编号：***A0001*
        - **数量：** *4*

    - 行 2：

        - **物料编号：***A0002*
        - **数量：** *4*

1. 选择第一行，然后选择 **库存 \> 预留**。
1. 在 **预留** 页上，选择 **预留批次**。 然后关闭页面。
1. 对第二行重复前两个步骤。
1. 关闭该页面。

### <a name="create-the-load"></a>创建负荷

若要为您为此场景创建的每个订单创建负荷，然后将其发放到仓库，请按照以下步骤操作。

1. 转到 **仓库管理 \> 装载 \> 装载计划工作台**。
1. 在 **销售行** 选项卡上，找到并选择为此场景创建的销售订单中的所有销售订单行。
1. 在操作窗格上 **供应与需求** 选项卡上 **添加** 组中，选择 **至新负荷**。 选定订单行将添加到新负荷中。
1. 在 **负荷模板分配** 对话框的 **负荷模板 ID** 字段中，选择负荷模板，例如 *40' 集装箱*。
1. 选择 **确定** 关闭对话框。
1. 在 **装载** 部分中，找到并选择刚才创建的装载。
1. 选择 **发放 \> 发放到仓库**。
1. 在 **发放到仓库** 对话框中，选择 **确定** 以将选定负荷发放到仓库。

### <a name="verify-the-shipments-and-containers"></a>验证装运和集装箱

以下过程可让您验证已创建的装运。 使用它查看您为此场景创建的订单，以确保您获得了预期的结果。

1. 转到 **仓库管理 \> 装运 \> 所有装运**。
1. 查找并选择已为刚发放的负荷创建的装运。
1. 在操作窗格上的 **运输** 选项卡上，选择 **查看集装箱**。
1. 确认销售订单中的物料已集装化到两个不同的集装箱中。

## <a name="additional-resources"></a>其他资源

- [集装化](wave-containerization.md)
