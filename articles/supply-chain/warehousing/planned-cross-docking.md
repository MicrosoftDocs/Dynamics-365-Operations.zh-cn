---
title: 计划越库配送
description: 本文介绍高级计划越库配送，在执行此类配送时，订单所需库存数量将在收到或创建时直接传输到正确的出货台或暂存区。 将通过常规储存流程把入库源中的所有剩余库存导向到正确存储货位。
author: Mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSCrossDockingTemplate, WHSLoadPostMethod, WHSWorkClass, WHSWorkTemplateTable, WHSLocDirTable, WHSPlannedCrossDocking
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: 10.0.7
ms.openlocfilehash: 28ebf1b4fb966fd6801e75e7b3a6c8741114938d
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2022
ms.locfileid: "8863670"
---
# <a name="planned-cross-docking"></a>计划越库配送

[!include [banner](../includes/banner.md)]

本文介绍高级计划越库配送。 越库配送是在执行此类配送时，订单所需库存数量将在收到或创建时直接传输到正确的出货台或暂存区的仓库流程。 将通过常规储存流程把入库源中的所有剩余库存导向到正确存储货位。

越库配送让工作人员可以跳过已经为出库订单标记的库存的入库储存和出库领料。 因此，如果可以，将把接触库存的次数降到最低。 此外，因为与系统的交互减少，所以可以节约仓库中所用时间和空间。

您必须先配置新的越库配送模板（其中为越库配送指定供应源和其他要求集），然后才能运行越库配送。 创建出库订单时，必须根据包含同一个物料的入库订单标记行。 您可以在越库配送模板上选择指令代码字段，类似于设置补货和采购订单的方式。

收到入库订单时，越库配送设置将自动确定是否需要越库配送，然后根据货位指令的设置为所需数量创建移动工作。

> [!NOTE]
> 取消越库配送工作时，*不* 取消等记库存交易记录，即使在仓库管理参数中开启了此功能的设置也不例外。

## <a name="turn-on-the-planned-cross-docking-features"></a>开启计划越库配送功能

如果您的系统尚未包含本文中所述的功能，请转到[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)，按以下顺序打开以下功能：

1. *计划越库配送*
1. *带有库位指令的越库配送模板*
    > [!NOTE]
    > 此功能支持在越库配送模板上指定 **指令代码** 字段，类似于设置补货模板的方式。 启用此功能可防止您在最终 *放置* 行的越库配送工作模板行上添加指令代码。 这可确保在考虑工作模板之前，在工作创建期间确定最终放置库位。

## <a name="setup"></a>设置

### <a name="regenerate-load-posting-methods"></a>重新生成负荷过帐方法

计划越库配送以负荷过帐方法的形式实施。 开启此功能之后，必须重新生成这些方法。

1. 转到 **仓库管理 \> 设置 \> 负荷过帐方法**。
1. 在操作窗格上，选择 **重新生成方法**。

    重新生成完成后，应该可以看到 **方法名称** 值为 *planCrossDocking* 的方法。

1. 关闭该页面。

### <a name="create-a-cross-docking-template"></a>创建越库配送模板

1. 转到 **仓库管理 \> 设置 \> 工作 \> 越库配送模板**。
1. 在“操作窗格”中，选择 **新建** 创建一个模板。
1. 在标题中，设置以下值：

    - **序列：** *1*

        此字段定义模板的评估顺序。

    - **越库配送模板 ID**：*51*
    - **说明**：*仓库 51*
    - **需求下达策略**：*在供应收货前*
    - **仓库：** *51*

1. **计划** 快速选项卡中的设置控制模板的工作方式。 设置以下值：

    - **需求要求**：*无*

        此字段定义需求库存的要求。 如果必须在下达前将需求链接到供应，请选择 *标记*。 如果必须在下达前根据需求为订单预留需求，请选择 *订单预留*。

    - **定位类型**：*装运货位*

        此字段定义越库配送工作是否应使用装运中的暂存/负荷货位，或者是否应使用货位指令查找自己的暂存/负荷货位。

    - **工作模板**：将此字段保留为空。

        此字段定义创建越库配送工作时应该使用的工作模板。

    - **供应收货时重新验证**：*否*

        此选项定义收货期间是否应重新验证供应。 如果此选项设置为 *是*，将检查最大时间范围和到期日期范围。

    - **指令代码：** 将此字段保留为空

        通过 *带有库位指令的越库配送模板* 功能启用此选项。 系统使用库位指令帮助确定越库配送库存要移动到的最佳库位。 您可以通过为每个相关的越库配送模板分配指令代码来设置此选项。 如果设置指令代码，在生成工作时，系统将按指令代码搜索库位指令。 这样，您可以限制用于特定越库配送模板的库位指令。

    - **验证时间范围**：*是*

        此选项定义在选择供应源时是否应评估最大时间范围。 如果此选项设置为 *是*，则可使用与最大和最小时间范围有关的字段。

    - **最大时间范围**：*5*

        此选项定义供应物料到达与需求物料离开之间允许的最大时间段。

    - **最大时间范围单位**：*天*
    - **最小时间范围**：*0*

        此选项定义供应物料到达与需求物料离开之间允许的最小时间段。

    - **最小时间范围单位**：*天*
    - **到期日期范围**：*0*

        *先过期先出 (FEFO) 条件*：此字段定义仓库中现在的首先到期批次的到期日期与正在收货的批次的到期日期之间的最大天数。

1. 在 **供应源** 快速选项卡中，指定此模板的有效供应类型。 选择 **新建**，然后设置以下值：

    - **序列号**：*1*
    - **供应源**：*采购订单*

> [!NOTE]
> 您可以设置查询来控制什么时候使用特定的越库配送模板。 越库配送模板的查询仅包含 *InventTable*（物料）表和内部联接的 *WHSInventTable*（WHS 物料）表。 如果要将其他表添加到此查询，则只能使用 *存在联接* 或 *不存在联接* 来联接它们。 在联接表上筛选时，会为联接表中的每个匹配记录检索主表中的记录。 如果联接类型为 *存在联接*，则搜索将在找到第一个匹配项后结束。 例如，如果您将销售订单行表联接到物料表，系统将验证和返回至少一个销售订单行具有定义条件的物料。 本质上，数据是从父（物料）表中获取的，而不是从子（销售订单行）表中获取的。 因此，不能立即按源文档（如销售订单行或客户）进行筛选。

### <a name="create-a-work-class"></a>创建工作类

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作类**。
1. 在“操作窗格”中，选择 **新建** 创建一个工作类。
1. 设置以下值：

    - **工作类 ID**：*CrossDock*
    - **说明**：*越库配送*
    - **工作订单类型**：*越库配送*

### <a name="create-a-work-template"></a>创建工作模板

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作模板**。
1. 将 **工作订单类型** 字段设置为 *越库配送*。
1. 在操作窗格上，选择 **新建** 向 **概览** 选项卡添加一行。
1. 在新行中，设置以下值：

    - **序列号**：*1*
    - **工作模板**：*51 越库配送*
    - **工作模板说明**：*51 越库配送*

1. 选择 **保存** 激活 **工作模板详细信息** 快速选项卡。
1. 在 **工作模板详细信息** 快速选项卡上，选择 **新建** 向网格添加一行。
1. 在新行中，设置以下值：

    - **工作类型：** *领料*
    - **工作类 ID**：*CrossDock*

1. 选择 **新建** 再添加一行，然后为其设置以下值：

    - **工作类型：** *放入*
    - **工作类 ID**：*CrossDock*

1. 选择 **保存**，然后确认为 *51 越库配送* 模板选中了 **有效** 复选框。
1. 可选：如果您要将条件设置为控制工作模板的使用时间和位置，请选择 **编辑查询**。

    您可以设置查询来控制什么时候使用一个特定的工作模板。 例如，您可以指定模板只能用于特定位置的工作。 如果您希望将越库配送工作模板应用于特定位置，则必须筛选 **开始位置** 字段，而不是 **位置** 字段，因为入站流程（采购、越库配送和补货）的工作创建从放置行开始。 在创建工作时，位置指令将 **位置** 字段设置为放置位置。 但是，领料位置存储在 **开始位置** 字段中。

> [!NOTE]
> *领料* 和 *放置* 工作类型的工作类 ID 必须相同。

### <a name="create-location-directives"></a>创建货位指令

1. 转到 **库存管理 \> 设置 \> 位置指令**。
1. 在左窗格中，将 **工作订单类型** 设置为 *越库配送*。
1. 在操作窗格中，选择 **新建**，然后设置以下值：

    - **序列号**：*1*
    - **名称**：*51 越库配送放置*
    - **工作类型：** *放入*
    - **站点：** *5*
    - **仓库：** *51*

1. 选择 **保存** 激活 **行** 快速选项卡。
1. 在 **行** 快速选项卡上，选择 **新建** 向网格添加一行。
1. 在新行中，设置以下值：

    - **起始数量：** *1*
    - **目标数量：** *1000000*

1. 选择 **保存** 激活 **货位指令操作** 快速选项卡。
1. 在 **货位指令操作** 快速选项卡上，选择 **新建** 向网格添加一行。
1. 在新行中，设置以下值：

    - **名称**：*Baydoor*
    - **固定货位使用情况**：*固定货位和非固定货位*

1. 选择 **保存** 激活 **货位指令操作** 工具栏上的 **编辑查询** 按钮。
1. 选择 **编辑查询** 打开查询编辑器。
1. 在 **范围** 选项卡上，确保配置下面的两行：

    - 行 1：

        - **表：** *位置*
        - **派生表**：*货位*
        - **字段**：*仓库*
        - **条件**：*51*

    - 行 2：

        - **表：** *位置*
        - **派生表**：*货位*
        - **字段**：*货位*
        - **条件**：*Baydoor*

1. 选择 **确定** 关闭查询编辑器。

### <a name="create-a-mobile-device-menu-item"></a>创建移动设备菜单项

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单项**。
1. 在左侧窗格中的菜单项列表内，选择 **采购储存**。
1. 选择 **编辑**。
1. 在 **工作类** 快速选项卡上，选择 **新建** 向网格添加一行。
1. 在新行中，设置以下值：

    - **工作类 ID**：*CrossDock*
    - **工作订单类型**：*越库配送*

1. 选择 **保存**。

## <a name="scenario"></a>应用场景

### <a name="create-a-purchase-order"></a>创建采购订单

执行以下步骤创建一个采购订单作为供应源。

1. 转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 在操作窗格上，选择 **新建**。
1. 在 **创建采购订单** 对话框中，设置以下值：

    - **供应商帐户**：*104*
    - **仓库：** *51*

1. 选择 **确定**，并记下订单号。
1. 将向 **采购订单行** 快速选项卡添加一个新行。 在这个行中，设置以下值：

    - **物料编号：***A0001*
    - **数量：** *5*

### <a name="create-a-sales-order"></a>创建销售订单

执行以下步骤创建一个销售订单作为需求源。

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 在操作窗格上，选择 **新建**。
1. 在 **创建销售订单** 对话框中，设置以下值：

    - **客户帐户**：*US-002*
    - **仓库：** *51*

1. 选择 **确定**。
1. 将向 **销售订单行** 快速选项卡添加一个新行。 在这个行中，设置以下值：

    - **物料编号：***A0001*
    - **数量：** *3*

### <a name="create-planned-cross-docking"></a>创建计划越库配送

执行以下步骤根据销售订单创建计划越库配送。

1. 在刚才创建的销售订单的 **销售订单详细信息** 页操作窗格中 **仓库** 选项卡上 **操作** 组内，选择 **发放到仓库**。

    发放到仓库操作将为销售订单行创建装运和负荷行，并尝试分配库存。
    
    您将收到参考消息。 您还会收到以下警告消息：“未为波次 XXXX 创建任何工作。 有关详细信息，请参见工作创建历史记录日志。” 这是正常行为，因为仓库中无库存。

1. 在 **销售订单行** 快速选项卡上的 **仓库** 菜单中，选择 **装运详细信息**。

    将显示 **装运详细信息** 页面，其中显示为销售订单创建的装运。

1. 请注意，**负荷行** 快速选项卡上的 **计划越库配送数量** 字段设置为 *3*。 因为仓库中没有任何库存，但是在越库配送模板中定义的时间范围内将有一个有效供应源到达，所以创建了越库配送数量。
1. 在 **负荷行** 快速选项卡中，选择 **计划越库配送** 查看创建的越库配送的详细信息。

## <a name="process-the-cross-docking"></a>处理越库配送

### <a name="purchase-order-receiving-on-the-warehousing-mobile-app"></a>仓库移动应用中的采购订单收货

系统将接收采购订单中的 5 件并放入收货货位，再创建两份工作。

创建的第一个工作 ID 的 **工作订单类型** 值为 *越库配送*，并且该 ID 将链接到销售订单。 其数量为 3，并导向到最终装运货位，从而可以立即运出。

创建的第二个工作 ID 的 **工作订单类型** 值为 *采购订单*，并且该 ID 将链接到采购订单。 其未越库配送的剩余数量为 2，并将导向以储存。

1. 以仓库 *51* 中的用户的身份登录移动设备。
1. 转到 **入库 \> 采购收货**。
1. 在 **采购订单号** 字段中，输入您的采购订单号。
1. 在 **数量** 字段中，输入 *5*。
1. 选择 **确定**。
1. 在下一页，将 **物料** 字段设置为 *A0001*。
1. 选择 **确定**。
1. 在下一页，通过选择 **确定** 确认 **采购订单号**、**物料** 和 **数量** 值。

    您将收到“工作已完成”消息。

1. 选择 **取消** 以退出。

### <a name="put-away-to-cross-docking-and-bulk"></a>储存以越库配送和批量处理

现在，两个工作 ID 的目标牌照相同。 若要完成后续步骤，必须获取工作 ID 和目标牌照 ID。 可以从采购订单行和销售订单行的工作详细信息获取此信息。 也可以转到 **仓库管理 \> 工作 \> 工作详细信息**，然后筛选以查找其 **仓库** 值为 *51* 的工作。

1. 在移动设备上，转到 **入库 \> 采购储存**，然后输入工作中的目标牌照。
1. 在 **ID** 字段中，输入工作详细信息中的目标牌照 ID。

    越库配送领料页面显示领料货位 (*RECV*)、目标牌照（*牌照*）、物料 (*A0001*) 和数量 (*3*)。

1. 选择 **确定**。
1. 在 **目标牌照** 字段中，输入应该放置（越库配送）到装运货位的牌照 ID 的目标牌照。 可以选择所选任何牌照 ID。
1. 选择 **确定**。
1. 在下一页的 **ID** 字段中，输入目标牌照 ID。
1. 选择 **确定**。
1. 确认剩余数量 2 的领料工作，然后选择 **确定**。
1. 在下一页上，选择 **完成** 结束领料流程，并开始储存流程。

    移动应用将为您提供要将物料放置到的货位和牌照。

1. 选择 **确定** 确认批量存储 **放置**。
1. 在下一页，选择 **确定** 确认越库配送 **放置**。

    您将收到“工作已完成”消息。

1. 选择 **取消** 以退出。

下图显示 Microsoft Dynamics 365 Supply Chain Management 中可能如何显示已完成的越库配送工作。

![越库配送工作已完成。](media/PlannedCrossDockingWork.png "越库配送工作已完成")


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
