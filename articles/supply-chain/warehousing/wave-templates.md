---
title: 波次模板
description: 本主题介绍如何设置决定是手动还是自动处理波次的条件以及在处理波次时为仓库生成工作的条件。
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: aca03e3fda4405fa6fe2b427a47066af5bb95b644b7f5b47d22736347208a8bd
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/05/2021
ms.locfileid: "6751617"
---
# <a name="wave-templates"></a>波次模板

[!include [banner](../includes/banner.md)]

本主题介绍如何设置决定是手动还是自动处理波次的条件以及在处理波次时为仓库生成工作的条件。 在销售订单、生产订单和看板中，通过设置波次模板和将波次与发放行匹配的查询来指定条件。

## <a name="settings-for-wave-templates"></a>波次模板的设置

在您设置波次模板时，请指定以下内容：

- 模板将为其创建工作的 **站点** 和 **仓库**。
- 模板将进行评估的顺序。 在销售订单、生产订单和看板中，模板与发放行匹配的顺序。 发放行时，系统将应用行满足条件的第一个波次模板。 条件越广泛，行满足条件的可能性越大，因此您应该将具有最具体条件的模板放置在列表顶部。 使用操作窗格上的 **上移** 和 **下移** 按钮排列列表中的模板。
- 每个模板采取的操作。 波次 **方法** 执行由模板创建的操作，例如为每种类型的波次模板创建或分配工作。
- 必须适用于要使用的波次模板的波次属性（筛选器）。

> [!NOTE]
> 如果需要，开发人员可以创建其他方法。 您可以在 **波次处理方法** 页面上查看方法的完整列表。

某些设置表示波次处理的战略决定，如下所示：

- 模板用于销售订单和转移单的装运物料，还是用于将物料移动到生产订单或看板的生产。
- 手动还是自动处理波次，如下所示：

  - **手动处理** – 将行添加到波次并预留库存，但是您必须选择 **所有波次** 列表页面上的 **处理** 以为订单创建领料工作。
  - **自动处理** – 您可以完全或部分自动化波次处理。 在创建销售订单、生产订单或看板时，如果完全自动化波次处理，则创建包含销售订单、生产订单或看板行的波次。 从现有库存扣除物料并创建领料工作。 如果部分自动化波次处理，您可以指定将触发波次处理的值。 例如，当波次中的行的总权重达到该值时，您可以为将触发波次处理的装运指定最大权重。

- 如果将装运分配给未结波次。 例如，如果您向客户保证在晚上 12:00 发放的订单将于 24 小时之内装运，您可以将波次模板设置为直到晚上 12:00 自动将订单行分配给未结波次。 那时，将自动处理波次。

在处理波次时，创建的领料工作基于工作模板和为仓库指定的库位指令。 工作模板指定如何创建领料工作，库位指令指定领料和放置库位。

## <a name="create-a-wave-template"></a>创建波次模板

若要设置波次模板，请按照下列步骤操作：

1. 转到 **仓库管理** \> **设置** \> **波次** \> **波次模板**。
1. 选择 **新建** 以创建新的波次模板。
1. 在 **波次模板类型** 字段中，选择以下选项之一：

    - *装运* - 为销售订单和转移单的装运物料使用波次模板。
    - *生产订单* - 使用波次模板移动生产订单的物料。
    - *看板* - 使用波次模板移动看板订单的物料。

1. 在 **波次模板名称** 和 **波次模板描述** 字段中，输入波次模板的名称和描述。

    > [!NOTE]
    > 如果为仓库创建了多个模板，**波次模板序列** 字段中的编号指示在满足模板条件时按照顺序应用模板的模板位置。 您可以选择 **上移** 或 **下移** 重新排列模板的顺序。

1. 在 **站点** 和 **仓库** 字段中，选择波次模板将为其创建波次和领料工作的站点和仓库。
1. 如果要自动化波次处理，请根据需要进行以下设置：

    - **自动化波次创建** - 在将销售订单、生产订单或看板发放到仓库时，将此选项设置为 *是* 以自动创建波次。
    - **分配给未结波次** - 在发放行时，将此选项设置为 *是* 以自动将行分配给未结波次。 分配给波的各行基于波模板的查询筛选器。
    - **在发放到仓库时处理波次** - 在将行发放到仓库时，将此选项设置为 *是* 以自动处理波次并创建工作。
    - **达到阈值时自动处理波次** - 在波次的值达到 **波次阈值** 字段组中指定的权重、装运和行的阈值时，将此选项设置为 *是* 以自动处理波次。 仅在 **波次模板类型** 字段中选择 *装运* 后，此设置才有效。
    - **自动化波次发放** - 将此选项设置为 *是* 以自动发放波次。 创建领料工作并使其在移动设备上可用。
    - **自动化补货工作发放** - 将此选项设置为 *是* 以创建基于需求的补货工作并将其自动发放。 您必须将补货波次方法添加到波次模板，然后使用 *波次需求* 类型创建补货模板。 在 **补货模板** 页设置一个补货模板。 这要求您将“补货”添加到波模板。
    - **在工作创建失败时继续波次处理** - 当设置为 *是* 时，如果无法在库位指令建议的库位预留库存（例如，因为库存不再可用），系统将使用空白库位。 当设置为 *否* 时，如果系统无法预留库存，波次将失败。

1. 根据需要设置 **波次阈值** 字段组：
    - **波次权重阈值** - 输入波次可以包含的最大权重。
    - **装运阈值** - 输入可以包括在波次中的最大装运数量。
    - **行阈值** - 输入可以包括在波次中的最大行数量。

1. 在 **默认值** 字段组中，选择波次属性以用作波次模板的其他条件。 波次属性对于将其他条件（例如特定客户名称）分配给波次模板有用。 在 **波次属性** 页面上创建这些属性。 

1. 将 **波次通知策略** 设置为要用于生成与使用此模板的波次相关的通知的策略。 有关波次通知策略的示例，请参阅[波次执行通知](wave-execution-notifications.md)。

1. 在 **方法** 快速选项卡上，**选定方法** 窗格列出选定波次模板的方法。 波次方法执行由模板创建的操作，例如创建或分配工作。 这些操作也称为波次步骤。 针对每种类型的波次模板预定义波次方法。 您无法删除预定义的波次方法，但可以重新排列方法的顺序并添加其他方法。 例如，如果您正在为装运创建波次模板，您可以添加补货和集装化的方法。 可将波次集装化添加到波次方法的顺序中以定义在波次模板中处理的行的集装化。 若要添加其他方法，请执行以下操作：

    - 在 **其余方法** 窗格上选择方法，然后选择 **向左** 箭头以将其添加到 **选定方法** 窗格。
    - 若要更改顺序，请选择方法，然后选择 **向上** 或 **向下** 箭头。

    > [!NOTE]
    > 在您添加方法时，它会按照步骤顺序自动在合适的位置列出。

1. 若要设置将已发放行匹配到适当波次的查询，请在操作窗格上选择 **编辑查询**。
1. 若要验证波次模板设置是否有效，请选择 **验证模板**。
