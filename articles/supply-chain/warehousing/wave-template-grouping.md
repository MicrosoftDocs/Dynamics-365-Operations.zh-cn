---
title: 波次模板分组
description: 波次模板分组功能让系统使用波次模板设置根据定义的条件确定如何拆分已发放行和将其分配给新波次或现有波次。 在根据特定条件创建了波次，但是经理希望自动，而不是手动创建波次的仓库中，此功能可能非常有用。
author: Mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSWaveTableListPage, WHSWaveTemplateTable
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: Release 10.0.8
ms.openlocfilehash: a591624f6611148abe4888e67d8d3a9bbea9cd27
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "5838026"
---
# <a name="wave-template-grouping"></a>波次模板分组

[!include [banner](../includes/banner.md)]

波次模板分组功能让系统使用[波次模板](tasks/configure-wave-processing.md)设置根据定义的条件确定如何拆分已发放行和将其分配给新波次或现有波次。 在根据特定条件创建了波次，但是经理希望自动，而不是手动创建波次的仓库中，此功能可能非常有用。 其让系统将新发放的每个装运添加到找到具有匹配分组字段的第一个波次。 卢沟未找到匹配项，系统将为新装运创建新波次。

> [!IMPORTANT]
> 工作类型 *生产原材料领料* 或 *看板领料* 不支持波次模板分组功能。 这是因为波次分组基于装运，而这些工作类型不使用装运。

## <a name="turn-on-the-wave-template-grouping-feature"></a>开启波次模板分组功能

*波次模板分组* 功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)设置检查功能状态和开启功能（如果需要）。 在 **功能管理** 工作区中，此功能按照下面的方式列出：

- **模块**：*仓库管理*
- **功能名称**：*波次模板分组*

## <a name="set-a-wave-template-to-use-wave-template-grouping"></a><a name="set-up-template"></a>设置波次模板以使用波次模板分组功能

若要启用波次模板分组功能，请执行以下步骤设置[波次模板](tasks/configure-wave-processing.md)。

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次模板**。
1. 在左侧窗格中，选择要设置的波次模板。 如果准备使用演示数据完成本主题后文的场景，请选择 **62 装运默认** 模板。
1. 选择 **编辑** 将页面设置为编辑模式。
1. 在 **常规** 快速选项卡上，设置以下值：

    - **自动创建波次**：*是*
    - **分配给未结波次**：*是*
    - **在发布到仓库时处理波次**：*否*

1. 在操作窗格上，选择 **编辑查询** 打开查询对话框。
1. 在查询对话框中 **排序** 选项卡上，查看排序条件，并确保有规则中包含要用于为波次分组的字段。

    如果准备使用演示数据完成此场景，请添加包含以下值的行：

    - **表**：*装运*
    - **派生表**：*装运*
    - **字段**：*承运人服务*

        > [!NOTE]
        > 选择此值之后，可能会收到以下消息：“承运人服务字段不是索引字段。 是否要为其添加排序？” 选择 **是** 添加排序。

    - **搜索方向**：*升序*

1. 选择 **确定** 保存更改并关闭查询对话框。
1. 在操作窗格上，选择 **波次模板分组**。
1. 根据需要在 **波次模板分组** 页面中，选中要用于将订单行分组为波次的每行的 **分组依据** 复选框。 如果准备使用演示数据完成此场景，请选中 *承运人服务* 行的 **分组依据** 复选框。
1. 选择 **保存**。
1. 关闭 **波次模板分组** 页。
1. 选择 **保存** 以保存您的模板。

## <a name="scenario"></a>应用场景

此部分提供脚本，可用于了解此功能执行的操作及其用法。

### <a name="make-sample-data-available"></a>提供示例数据

若要使用此处指定的示例记录和值完成此场景，使用的系统中必须已安装标准[演示数据](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)。 此外，开始前，还必须选择 **USMF** 法人。

使用生产系统时，也可以将此场景用作使用此功能的指导。 但是，在此情况下，必须替换为您自己的值，而您可能会缺少标准演示数据提供的某些类型的必需记录。

### <a name="scenario-wave-template-grouping"></a>场景：波次模板分组

此场景显示如何使用波次模板分组功能根据波次模板中定义的分组条件自动创建多个波次。 在此场景中，系统中将波次模板设置成为每个承运人服务创建一个波次。

首先，按照本主题前面的[设置波次模板以使用波次模板分组功能](#set-up-template)部分中的介绍准备波次模板。 如果要为此场景使用演示数据，请务必使用该过程中推荐的演示数据值。 此设置将根据为每个销售订单设置的承运人服务为波次分组。

#### <a name="create-sales-order-1"></a>创建销售订单 1

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 选择 **新建** 以创建新的销售订单。
1. 在 **创建销售订单** 对话框中，设置以下值：

    - 在 **客户** 快速选项卡上，将 **客户帐户** 字段设置为 *US-004*。
    - 在 **常规** 快速选项卡上，将 **仓库** 字段设置为 *62*。

1. 选择 **确定** 创建销售订单，然后关闭 **创建销售订单** 对话框。
1. 将在 **行** 视图中打开新销售订单。 记下销售订单编号。
1. 切换到 **标题** 视图。
1. 在 **交货** 快速选项卡的 **运输** 部分中，设置以下值：

    - **装运承运人**：*空运货物*
    - **承运人服务**：*航运*

1. 切换回 **行** 视图。
1. 在 **销售订单行** 部分中，选择 **添加行** 向网格添加一行。
1. 在新行中，设置以下值：

    - **物料编号：***A0002*
    - **数量：** *2*

1. 选择新订单行，然后在网格上方的 **库存** 菜单中选择 **预留**。
1. 在 **预留** 页中操作窗格上，选择 **预留批次** 在仓库中预留所选行的全部数量。
1. 关闭 **预留** 页回到销售订单。
1. 在“操作窗格”上的 **仓库** 选项卡上，在 **操作** 组中，选择 **发放到仓库**。
1. 将收到参考消息，其中显示该订单的装运和波次。 记下波次 ID 编号和装运 ID 编号。

#### <a name="view-the-wave-that-was-created-from-sales-order-1"></a>查看从销售订单 1 创建的波次

1. 转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。
1. 选择从销售订单创建的波次 ID。
1. 选择波次 ID 链接打开波次详细信息页。
1. 请注意，已经将装运添加到了 **波次行** 快速选项卡。

#### <a name="create-sales-order-2"></a>创建销售订单 2

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 选择 **新建** 以创建新的销售订单。
1. 在 **创建销售订单** 对话框中，设置以下值：

    - 在 **客户** 快速选项卡上，将 **客户帐户** 字段设置为 *US-005*。
    - 在 **常规** 快速选项卡上，将 **仓库** 字段设置为 *62*。

1. 选择 **确定** 创建销售订单，然后关闭 **创建销售订单** 对话框。
1. 将在 **行** 视图中打开新销售订单。 记下销售订单编号。
1. 切换到 **标题** 视图。
1. 在 **交货** 快速选项卡的 **运输** 部分中，设置以下值：

    - **装运承运人**：*运花*
    - **承运人服务**：*标准*

1. 切换回 **行** 视图。
1. 在 **销售订单行** 部分中，选择 **添加行** 向网格添加一行。
1. 在新行中，设置以下值：

    - **物料编号：***A0001*
    - **数量：** *1*

1. 选择新订单行，然后在网格上方的 **库存** 菜单中选择 **预留**。
1. 在 **预留** 页中操作窗格上，选择 **预留批次** 在仓库中预留所选行的全部数量。
1. 关闭 **预留** 页回到销售订单。
1. 在“操作窗格”上的 **仓库** 选项卡上，在 **操作** 组中，选择 **发放到仓库**。
1. 将收到参考消息，其中显示该订单的装运和波次。 记下波次 ID 编号和装运 ID 编号。 请注意，此波次 ID 与第一个销售订单的波次 ID 不同。

#### <a name="view-the-wave-that-was-created-from-sales-order-2"></a>查看从销售订单 2 创建的波次

1. 转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。
1. 选择从第二个销售订单创建的波次 ID。
1. 选择波次 ID 链接打开波次详细信息页。
1. 请注意，已经将装运添加到了 **波次行** 快速选项卡。

为此装运创建了一个新波次，因为其使用的承运人服务与第一个销售订单使用的不同。

#### <a name="create-sales-order-3"></a>创建销售订单 3

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 选择 **新建** 以创建新的销售订单。
1. 在 **创建销售订单** 对话框中，设置以下值：

    - 在 **客户** 快速选项卡上，将 **客户帐户** 字段设置为 *US-006*。
    - 在 **常规** 快速选项卡上，将 **仓库** 字段设置为 *62*。

1. 选择 **确定** 创建销售订单，然后关闭 **创建销售订单** 对话框。
1. 将在 **行** 视图中打开新销售订单。 记下销售订单编号。
1. 切换到 **标题** 视图。
1. 在 **交货** 快速选项卡的 **运输** 部分中，设置以下值：

    - **装运承运人**：*空运货物*
    - **承运人服务**：*航运*

1. 切换回 **行** 视图。
1. 在 **销售订单行** 部分中，选择 **添加行** 向网格添加一行。
1. 在新行中，设置以下值：

    - **物料编号：***A0001*
    - **数量：** *1*

1. 选择新订单行，然后在网格上方的 **库存** 菜单中选择 **预留**。
1. 在 **预留** 页中操作窗格上，选择 **预留批次** 在仓库中预留所选行的全部数量。
1. 关闭 **预留** 页回到销售订单。
1. 在“操作窗格”上的 **仓库** 选项卡上，在 **操作** 组中，选择 **发放到仓库**。
1. 将收到参考消息，其中显示该订单的装运和波次。 记下波次 ID 编号和装运 ID 编号。 已将装运分配给了第一个销售订单的现有波次。

#### <a name="view-the-wave-for-sales-orders-1-and-3"></a>查看销售订单 1 和 3 的波次

1. 转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。
1. 选择从第三个销售订单创建的波次 ID。
1. 选择波次 ID 链接打开波次详细信息页。
1. 请注意，已经将装运添加到了 **波次行** 快速选项卡，以及第一个销售订单的装运。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]