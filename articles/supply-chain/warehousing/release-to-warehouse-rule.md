---
title: 发放到仓库规则
description: 本主题介绍“发放到仓库规则”功能，该功能用于在发放到仓库期间提供灵活性。 其添加了一个配置选项，用于控制系统是否允许发放部分保留的订单行。
author: mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSParameters
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: Release 10.0.7
ms.openlocfilehash: 2a9decad96f92450b9473ca10ccf7a98edf07a4316edd6d9ef92a70cc78c05ad
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/05/2021
ms.locfileid: "6716412"
---
# <a name="release-to-warehouse-rule"></a>发放到仓库规则

[!include [banner](../includes/banner.md)]

*发放到仓库规则* 功能在发放到仓库期间提供灵活性。 其为每个仓库添加一个配置选项。 可使用此选项指定是否可为该仓库发放部分预留订单行。 此功能与高级越库配送功能在以下情况下一起工作：根据供应源标记订单行数量中的一部分，但是可以在仓库中处理其余部分。 因此，可以发放行，以便仓库继续处理可用库存数量。

## <a name="turn-on-and-initialize-the-release-to-warehouse-rule-feature"></a>开启和初始化发放到仓库规则功能

### <a name="turn-on-the-feature"></a>开启功能

*仓库发放规则* 功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)设置检查功能状态和开启功能（如果需要）。 在 **功能管理** 工作区中，此功能按照下面的方式列出：

- **模块**：*仓库管理*
- **功能名称**：*仓库发放规则*

### <a name="initialize-the-feature"></a>初始化功能

在系统中开启该功能后，必须对其进行初始化，以便将规则设置为所有仓库的正确初始状态。

- 对于未启用仓库管理的仓库，此规则最初设置为 **不适用**。
- 对于启用了仓库管理的仓库，此规则最初设置为 **允许部分预留**

若要初始化此功能并为所有仓库设置发放到仓库规则，请执行以下步骤。

1. 转到 **仓库管理 \> 设置 \> 仓库管理参数**。
1. 在 **仓库管理参数** 页面 **常规** 选项卡上的 **公司信息** 部分中，选择 **初始化发放到仓库** 规则的链接。 （如果不显示此链接，说明未开启或已初始化此功能。）
1. 提示确认操作时，选择 **是** 初始化此功能。

## <a name="set-the-release-to-warehouse-rule-for-each-warehouse"></a><a name="set-option-warehouse"></a>为每个仓库设置发放到仓库规则

开启并初始化此功能之后，您的所有仓库都将具有初始设置，如上一部分中所述。 可以执行以下步骤更改单个仓库的此设置。

1. 转到 **仓库管理 \> 设置 \> 仓库 \> 仓库**。
1. 选择要配置的仓库。
1. 选择 **编辑** 将页面设置为编辑模式。
1. 在 **仓库** 快速选项卡的 **预留** 部分中，**库存预留要求** 字段控制是否允许部分下达订单。 选择以下值之一：

    - **不适用** – 首次开启和初始化此功能时，将把该值自动分配给未启用仓库管理的所有仓库。 不能更改该设置。 该值不适用于启用了仓库管理的仓库。
    - **允许部分预留** – 如果预留了任何数量，则可下达订单。 系统将评估是否应该为高级越库配送标记未预留数量，并将根据需要标记该数量。 如果不存在标记，系统将仅为预留数量创建工作。 首次开启和初始化此功能时，将把该值自动分配给已启用仓库管理的所有仓库。 该值不适用于未启用仓库管理的仓库。
    - **需要全部预留** – 仅当预留所有数量，才能下达订单。 如果没有为越库配送物理预留或计划所有数量，则不能发放。 该值不适用于未启用仓库管理的仓库。

1. 选择 **保存**。

## <a name="scenarios"></a>方案

此部分提供两个场景，可用于了解此功能及其用法。

### <a name="make-sample-data-available"></a>提供示例数据

若要使用此处指定的示例记录和值完成这些场景，使用的系统中必须已安装标准[演示数据](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)。 此外，开始前，还必须选择 **USMF** 法人。

使用生产系统时，也可以将这些场景用作使用此功能的指导。 但是，在此情况下，必须替换为您自己的值，而您可能会缺少标准演示数据提供的某些类型的必需记录。

### <a name="scenario-1-require-full-release-no-planned-cross-docking"></a><a name="scenario1"></a>场景 1：需要完全发放（未计划越库配送）

此场景显示该功能对设置为 **需要完全预留** 的仓库的作用。

1. 转到 **仓库管理 \> 设置 \> 仓库 \> 仓库**。
1. 对于仓库 _62_，将 **库存预留要求** 字段设置为 **需要完全预留**，如本主题前面的[为每个仓库设置发放到仓库规则](#set-option-warehouse)部分中所述。
1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 选择 **新建** 以创建新的销售订单。
1. 在 **创建销售订单** 对话框中，设置以下值：

    - 在 **客户** 快速选项卡上，将 **客户帐户** 字段设置为 _US-004_。
    - 在 **常规** 快速选项卡上，将 **仓库** 字段设置为 _62_。

1. 选择 **确定** 创建新销售订单，然后关闭对话框。
1. 将打开您的新销售订单。 其在 **销售订单行** 部分的网格中添加一个新的空行。 在这个行中，设置以下值：

    - **物料编号：***A0001*
    - **数量：** *2*

1. 选择 **添加行** 添加新行，然后设置以下值：

    - **物料编号：***A0002*
    - **数量：** *2*

1. 选择第一个订单行，然后在网格上方的 **库存** 菜单中选择 **预留**。
1. 在 **预留** 页中，选择 **预留批次** 在仓库中预留所选行的全部数量。
1. 关闭 **预留** 页回到销售订单。
1. 请勿预留第二个订单行。
1. 在“操作窗格”上的 **仓库** 选项卡上，选择 **发放到仓库**。
1. 请注意，您将收到以下错误消息：“必须物理预留所有数量。” 因此，系统不会为订单创建任何工作、装运或负荷。

    > [!NOTE]
    > 如果部分预留第二行，将收到相同错误消息。

### <a name="scenario-2-allow-partial-release"></a>场景 2：允许部分发放

此场景显示该功能对设置为 **允许部分发放** 的仓库的作用。

1. 转到 **仓库管理 \> 设置 \> 仓库 \> 仓库**。
1. 对于仓库 _62_，将 **库存预留要求** 字段设置为 **允许部分预留**，如本主题前面的[为每个仓库设置发放到仓库规则](#set-option-warehouse)部分中所述。
1. 如您在 [前一个场景](#scenario1)中执行的操作，转到 **销售和市场营销 \> 销售订单 \> 所有销售订单**，然后为仓库 _62_ 中的客户帐户 _US-004_ 创建一个销售订单。 添加下面的两个订单行：

    - **行 1：** 将 **物料编号** 字段设置为 _A0001_，将 **数量** 字段设置为 _2_，将 **单位** 字段设置为 _件_。
    - **行 2：** 将 **物料编号** 字段设置为 _A0002_，将 **数量** 字段设置为 _2_，将 **单位** 字段设置为 _件_。

1. 如您在[前一个场景](#scenario1)中执行的操作，为订单行 1 预留所有数量，但是不预留订单行 2。
1. 在“操作窗格”上的 **仓库** 选项卡上，选择 **发放到仓库**。
1. 请注意，这次不会收到错误消息。 相反，系统将根据需要创建工作、装运和负荷，然后显示结果。
1. 若要查看装运、负荷和工作信息，请使用网格上方 **仓库** 菜单中的选项：

    - **行 1：** 可使用三个选项：**装运详细信息**、**负荷详细信息** 和 **工作详细信息**。 选择每个选项查看将订单下达到仓库时创建的装运、负荷和工作的详细信息。
    - **行 2：** 只能使用 **工作详细信息** 选项。 选择该选项，然后注意未创建任何工作，因为未预留任何库存。 因此，未创建任何装运或负荷。

> [!NOTE]
> 部分预留第二行时，结果应该相同。 在此情况下，将为预留行数量创建工作，但是不会为未预留数量创建。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]