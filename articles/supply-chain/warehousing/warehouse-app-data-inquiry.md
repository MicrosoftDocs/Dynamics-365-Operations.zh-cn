---
title: 使用 Warehouse Management 移动应用绕过查询数据
description: 本文介绍如何配置数据查询移动设备菜单项并将其用作绕过的一部分。
author: perlynne
ms.date: 08/09/2022
ms.topic: article
ms.search.form: WHSMobileAppFlowStepListPage, WHSMobileAppFlowStepAddDetour,WHSMobileAppFlowStepDetourSelectFields
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2022-08-01
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: cc013e962b4da803764f16e451b1d433666e75c2
ms.sourcegitcommit: 203c8bc263f4ab238cc7534d4dd902fd996d2b0f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/23/2022
ms.locfileid: "9336596"
---
# <a name="query-data-using-warehouse-management-mobile-app-detours"></a>使用 Warehouse Management 移动应用绕过查询数据

[!include [banner](../includes/banner.md)]

## <a name="feature-introduction"></a>功能介绍

通过提供条形码扫描功能，Warehouse Management 移动应用为您提供了一种捕获数据的简单准确方法，作为仓库流程的一部分。 但是，条形码有时会损坏且变得不可读，或者所需的数据信息可能并不以条形码形式存在于业务流程中。 在这些情况下，手动输入数据可能需要较长时间，甚至会导致捕获错误数据。 结果可能降低了有效性和服务级别。

通过使用灵活的数据查询流程，工作人员可以在嵌入式 Warehouse Management 移动应用流中轻松查找所需的信息，并应用筛选选项，以便仅显示相关数据。 因此，手动选择更快、更准确。

例如，在采购订单接收流中，需要使用采购订单编号才能与到达的库存匹配。 作为此流程的一部分，您可以轻松配置菜单项以提供相关采购订单编号的卡列表视图。 这样，您可以使用快速点选方法继续执行接收流。 本文提供了示例方案，但该功能也可以在任何或全部 Warehouse Management 移动应用流中使用。

## <a name="turn-on-the-data-inquiry-flow-feature-and-its-prerequisites"></a>启用数据查询流功能及其必备项

在可以使用本文中描述的功能之前，您必须完成以下过程以打开所需的功能。

1. 转到 **系统管理 \> 工作区 \> 功能管理**。 （有关如何使用 **功能管理** 工作区的详细信息，请参阅[功能管理概述](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)。）
1. 如果您运行的是 Supply Chain Management 版本 10.0.28 或更早版本，打开按以下方式列出的功能：

    - **模块**：*仓库管理*
    - **功能名称**：*仓库应用步骤说明*

    此功能是 *Warehouse Management 应用数据查询流* 功能的先决条件。 从 Supply Chain Management 版本 10.0.29 开始，此功能是强制性的，无法关闭。 有关 *仓库应用步骤说明* 功能的详细信息，请参阅[自定义 Warehouse Management 移动应用的步骤标题和说明](mobile-app-titles-instructions.md)。

1. 打开按下列方式列出的功能：

    - **模块**：*仓库管理*
    - **功能名称**：*Warehouse Management 应用绕过*

    此功能是 *Warehouse Management 应用数据查询流* 功能的先决条件。 从 Supply Chain Management 版本 10.0.29 开始，此功能默认开启。 有关 *Warehouse Management 应用绕过* 功能的详细信息，请参阅[配置移动设备菜单项中的步骤绕过](warehouse-app-detours.md)。

1. 如果 *Warehouse Management 应用绕过* 功能尚未开启，请转到 **Warehouse management \> 设置 \> 移动设备 \> 仓库应用字段名称**，选择 **创建默认设置**，更新 Warehouse Management 移动应用中的字段名称。 对您使用 Warehouse Management 移动应用的每个法人（公司）重复此步骤。 有关详细信息，请参阅[为仓库管理移动应用配置字段](configure-app-field-names-priorities-warehouse.md)。
1. 打开按下列方式列出的功能：

    - **模块**：*仓库管理*
    - **功能名称**：*Warehouse Management 应用数据查询流*

    此功能是本文中介绍的功能。

## <a name="example-scenarios"></a>示例方案

本文使用示例方案显示如何使用 *Warehouse Management 应用数据查询流* 功能来改进采购收货流。 这些方案使用标准示例数据，其中包括名为 *采购收货* 的流。 此流首先提示工作人员标识他们接收货物将根据的采购订单编号。 若要帮助工作人员更轻松地识别采购订单，您将通过将以下新查询选项添加为[绕过](warehouse-app-detours.md)来增强流的第一页：

- **按供应商查找 PO** - 打开一个提示工作人员输入供应商名称或部分供应商名称的页面。 可以使用通配符。 例如，如果工作人员今天期待名称中包含 *Tailspin* 的供应商入库交货，则他们可以输入 **Tail\*** 以查看包含此文本的未结采购订单的一组卡。 每张卡都有多个字段，这些字段提供有关每个采购订单的信息。 除了供应商的名称之外，您还可以设计卡，以便它们显示供应商帐号、交货日期和单据状态。
- **查找今天的 PO** - 打开一个页面，该页面不会提示工作人员输入数据，而是会显示预配置的筛选器（如今天的日期）。 然后，此页面会显示一组与筛选器匹配的卡。 工作人员继续选择登记库存物料所要针对的采购订单的卡。
- **按物料查找 PO** - 打开一个页面，此页面提示工作人员扫描已到库存中任何物料的条形码。 然后，流会列出包含已扫描物料编号的行的所有未结采购订单。 若要涵盖无法读取条形码的情况，您可以将另一个绕过查找添加到此页面中，让工作人员在特定采购订单中搜索物料编号。

在每种情况下，工作人员都会通过选择卡来标识采购订单，然后返回到第一页，该页面显示所选采购订单编号。 然后，工作人员可以继续执行入站库存物料登记流。

## <a name="enable-sample-data"></a>启用示例数据

要完成本文中描述的示例场景，使用的系统中必须已安装标准[演示数据](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)。 此外，开始前，还必须选择 *USMF* 法人（公司）。

## <a name="configure-the-mobile-device-menu-items"></a>配置移动设备菜单项

若要创建必须添加到流的第一页的每个新查询选项，您必须将其设置为移动设备菜单项。 稍后，您将提供查询选项作为 *采购收货* 流的绕过。

### <a name="create-the-look-up-pos-by-vendor-menu-item"></a>创建“按供应商查找 PO”菜单项

通过执行以下步骤，创建 **按供应商查找 PO** 菜单项。

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单项**。
1. 在“操作窗格”上，选择 **新建** 以添加移动设备菜单项。
1. 为新菜单项设置以下值：

    - **菜单项名称**：*按供应商查找 PO*
    - **标题**：*按供应商查找 PO*
    - **模式**：*间接*

1. 在 **常规** 快速选项卡上，设置以下值：

    - **活动代码**：*数据查询*
    - **使用流程指南**：*是*（自动选择此值。）
    - **表名称**：*PurchTable*（您要从此表查找采购订单编号。）

1. 在操作窗格上，选择 **编辑查询** 以定义基于所选基表（在本例中为采购订单表）的查询。
1. 在查询编辑器中的 **范围** 选项卡上，向网格添加以下行：

    | 表 | 派生表 | 字段 | 条件 |
    |---|---|---|---|
    | 采购订单 | 采购订单 | 采购订单状态 | 未结订单 |
    | 采购订单 | 采购订单 | 交货日期 | (dayRange(-10,10)) |
    | 采购订单 | 采购订单 | 供应商名称 | |

1. 选择 **确定**。

    在此示例中，将配置新菜单项以查找预计在过去 10 天和未来 10 天内随时到达的未结采购订单。

    在查询中，**供应商名称** 的 *条件* 列已留空。 因此，工作人员将能够在使用 Warehouse Management 移动应用时指定此值。

    如果要指定如何对列表进行排序，您可以在 **排序** 选项卡上设置排序。

1. 除了定义查询，您还必须选择将在查询列表页中的卡上显示的字段。 因此，在操作窗格上，选择 **字段列表**。
1. 在 **字段列表** 页面，设置以下值：

    - **显示字段 1**：*PurchId*（此字段将显示为每个卡的标题。）
    - **显示字段 2**：*PurchStatus*
    - **显示字段 3**：*PurchName*
    - **显示字段 4**：*OrderAccount*
    - **显示字段 5**：*DeliveryDate*
    - **显示字段 6**：*displayDocumentStatus()*（如末尾的 "()" 所示，此值是显示方法。）

1. 在操作窗格上，选择 **保存**。 然后关闭页面。

### <a name="create-the-look-up-pos-for-today-menu-item"></a>创建“查找今天的 PO”菜单项

通过执行以下步骤，创建 **查找今天的 PO** 菜单项。

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单项**。
1. 在“操作窗格”上，选择 **新建** 以添加移动设备菜单项。
1. 为新项设置以下值：

    - **菜单项名称**：*查找今天的 PO*
    - **标题**：*查找今天的 PO*
    - **模式**：*间接*

1. 在 **常规** 快速选项卡上，设置以下值：

    - **活动代码**：*数据查询*
    - **使用流程指南**：*是*（自动选择此值。）
    - **表名称**：*PurchTable*（您要从此表查找采购订单编号。）

1. 在操作窗格上，选择 **编辑查询** 以定义基于所选基表（在本例中为采购订单表）的查询。
1. 在查询编辑器中的 **范围** 选项卡上，向网格添加以下行：

    | 表 | 派生表 | 字段 | 条件 |
    |---|---|---|---|
    | 采购订单 | 采购订单 | 采购订单状态 | 未结订单 |
    | 采购订单 | 采购订单 | 交货日期 | (Day(0)) |

1. 选择 **确定**。

    在此示例中，将配置新菜单项以查找预计今天到达的未结采购订单。

    如果要指定如何对列表进行排序，您可以在 **排序** 选项卡上设置排序。

1. 除了定义查询，您还必须选择将在查询列表页中的卡上显示的字段。 因此，在操作窗格上，选择 **字段列表**。
1. 在 **字段列表** 页面，设置以下值：

    - **显示字段 1**：*PurchName*（此字段将显示为每个卡片的标题。）
    - **显示字段 2**：*PurchId*
    - **显示字段 3**：*PurchStatus*
    - **显示字段 4**：*DlvMode*
    - **显示字段 5**：*DlvTerm*
    - **显示字段 6**：*OrderAccount*
    - **显示字段 7**：*VendorName()*（如末尾的 "()" 所示，此值是显示方法。）

1. 在操作窗格上，选择 **保存**。 然后关闭页面。

### <a name="create-the-look-up-pos-by-item-menu-item"></a>创建“按项查找 PO”菜单项

通过执行以下步骤，创建 **按项查找 PO** 菜单项。

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单项**。
1. 在“操作窗格”上，选择 **新建** 以添加移动设备菜单项。
1. 为新项设置以下值：

    - **菜单项名称**：*按项查找 PO*
    - **标题**：*按项查找 PO*
    - **模式**：*间接*

1. 在 **常规** 快速选项卡上，设置以下值：

    - **活动代码**：*数据查询*
    - **使用流程指南**：*是*（自动选择此值。）
    - **表名称**：*PurchLine*（您要通过行数据根据物料编号查找采购订单编号。）

1. 在操作窗格中，选择 **编辑查询** 以定义基于所选基表的查询（在本例中为采购订单行表，但您可以通过加入 *PurchTable* 来使用与标题相关的任何值）。
1. 在查询编辑器中的 **范围** 选项卡上，向网格添加以下行：

    | 表 | 派生表 | 字段 | 条件 |
    |---|---|---|---|
    | 采购订单行 | 采购订单行 | 行状态 | 未结订单 |
    | 采购订单行 | 采购订单行 | 交货日期 | (dayRange(-10,10)) |
    | 采购订单行 | 采购订单行 | 物料编号 | |

1. 选择 **确定**。

    在此示例中，将配置新菜单项以查找在过去 10 天内和将来 10 天内随时到达的未结采购订单行。

    在查询中，**物料编号** 的 *条件* 列已留空。 因此，工作人员将能够在使用 Warehouse Management 移动应用时指定此值。

    如果要指定如何对列表进行排序，您可以在 **排序** 选项卡上设置排序。

1. 除了定义查询，您还必须选择将在查询列表页中的卡上显示的字段。 因此，在操作窗格上，选择 **字段列表**。
1. 在 **字段列表** 页面，设置以下值：

    - **显示字段 1**：*PurchId*（此字段值将用作每个卡片的标头。）
    - **显示字段 2**：*VendAccount*
    - **显示字段 3**：*PurchQty*
    - **显示字段 4**：*PurchUnit*
    - **显示字段 5**：*PurchStatus*

1. 在操作窗格上，选择 **保存**。 然后关闭页面。

## <a name="add-the-new-mobile-device-menu-items-to-a-menu"></a>将新移动设备菜单项添加到菜单中

您的三个新移动设备菜单项现已准备就绪，可以添加到移动设备菜单中。 必须先完成此任务，然后才能将菜单项用作绕过流程的一部分。 在此示例中，您将创建一个新的子菜单，并向其添加新菜单项。

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单**。
1. 在操作窗格上，选择 **新建**。
1. 在新记录的标题上设置以下值：

    - **名称**：*查询*
    - **描述**：*查询*

1. 在 **可用的菜单和菜单项** 列表中，选择刚才创建的第一个移动设备菜单项。 然后，选择向右键按钮将该项移到 **菜单结构** 列表。
1. 针对其他两个新菜单项重复前面的步骤。
1. 在左边的列表窗格中，选择 **主要** 菜单。
1. 在 **可用菜单和菜单项** 列表中，向下滚动到 **菜单** 部分，然后选择新的 **查询** 菜单。 然后，选择向右键按钮将该项移到 **菜单结构** 列表。

## <a name="configure-detours-in-your-mobile-device-steps"></a>在您的移动设备步骤中配置绕过

若要完成设置，您现在必须使用 **Mobile 设备步骤** 页上的绕过配置，以将这三个新的移动设备菜单项添加到 *采购收货流* 中的现有采购订单标识步骤。

1. 转到 **仓库管理 \> 设置 > 移动设备 \> 移动设备步骤**。
1. 在 **筛选器** 字段中，输入 *PONum*。 然后在下拉列表中选择 *步骤 ID："PONum"*。
1. 在网格中选择找到的记录时，在操作窗格中选择 **添加步骤** 配置。 在出现的下拉对话框中，将 **菜单项** 字段设置为 *采购收货*。 然后，选择 **确定** 关闭对话框。
1. 在新步骤配置（**采购收货：PONum**）的详细信息页上，在 **可用的绕过（菜单项）** 快速选项卡上，选择工具栏上的 **添加**。
1. 在 **添加便捷方式** 对话框中，查找并选择您以前创建的 **按供应商查找 PO** 菜单项。
1. 选择 **确定** 以关闭此对话框并将所选菜单项添加到绕过列表。
1. 选择新的绕过，然后在工具栏上选择 **选择要发送的字段**。
1. 在 **选择要发送的字段** 对话框中，不要将任何内容都添加到 **从采购收货中发送** 部分，因为您不想将任何值都传递到绕过菜单项。 但是，在 **从按供应商查找 PO 中恢复** 部分中，为已在其中添加的空行设置以下值：

    - **从按供应商查找 PO 中恢复**：*采购订单*
    - **粘贴到采购收货中**：*采购订单*

1. 选择 **确定** 关闭对话框。
1. 针对其他两个新菜单项（**查找今天的 PO** 和 **按物料查找 PO**）重复步骤 4 到 9。 对于 **按供应商查找 PO** 菜单项，您不需要将任何数据发送到这些绕过，但确实需要返回采购订单编号。
1. 关闭该页面。

## <a name="try-a-purchase-receiving-flow-that-has-a-data-inquiry-as-part-of-a-detour"></a>试用将数据查询作为绕过的一部分的采购收货流

按照这些步骤测试您的新移动应用设置。

1. 创建具有仓库 51 的行的多个采购订单。
1. 转到运行仓库管理移动应用的移动设备或模拟器，使用 *51* 作为用户 ID、*1* 作为密码登录到仓库 51。
1. 在移动应用菜单上，选择 **入站**，然后选择 **采购收货**。

    您应看到以下页面，其中包括三个新菜单项。

    ![使用 PO 编号的采购收货。](media/wma-purchase-receive-po-num-with-detours.png "使用 PO 编号的采购收货")

1. 试用不同的功能，并注意，您可以通过选择列表中的一个卡来发回采购订单编号。

    ![使用“按供应商查找 PO”的采购收货，示例 1。](media/wma-purchase-receive-lookup-po-vendor-keyin-detours.png "使用“按供应商查找 PO”的采购收货，示例 1")

    ![使用“按供应商查找 PO”的采购收货，示例 2。](media/wma-purchase-receive-lookup-po-vendor-detours.png "使用“按供应商查找 PO”的采购收货，示例 2")

> [!TIP]
> 您可以从查询流（**主要 \> 查询 \> 按供应商查找 PO**）开始，通过选择列表中的一个卡来调用绕过以运行所需的流，而不是从 **采购收货** 菜单项进行查找来运行接收流。 若要使用此方法，您可以在 **移动设备步骤** 页上为 **步骤 ID** 值为 *GenericDataInquiryList* 的步骤定义绕过。 由于此流是一个绕过流，因此无法从中调用更多绕过。 因此，当您到达物料编号条目屏幕时，查找将不可用，因为系统当前仅支持一个级别的绕过。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
