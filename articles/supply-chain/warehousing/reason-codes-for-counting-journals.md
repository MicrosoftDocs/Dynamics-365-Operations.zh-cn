---
title: 库存盘点的原因代码
description: 此主题描述如何为盘点任务设置和应用原因代码。
author: perlynne
ms.date: 08/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: InventCountingReasonCodePolicy, InventCountingReasonCode
audience: Application User
ms.reviewer: kamaybac
ms.custom: 1705903
ms.assetid: 427e01b3-4968-4cff-9b85-1717530f72e4
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: 10.0.21
ms.openlocfilehash: 4c178ddf342b13a0ef8fee8b8b958554a9a31069
ms.sourcegitcommit: ecd4c148287892dcd45656f273401315adb2805e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/18/2021
ms.locfileid: "7500582"
---
# <a name="reason-codes-for-inventory-counting"></a>库存盘点的原因代码

[!include [banner](../includes/banner.md)]

原因代码用于分析盘点流程的结果和执行该流程期间出现的任何差异。 可指定执行盘点的原因，如货盘损坏或基于库存样本调整存货。 同时，您可以根据每个库存调整的原因，使用调整功能将现有库存调整的值过帐到适当的抵销帐户。

## <a name="recommendation"></a>建议

建议在设置系统之前定义原因代码的处理策略。 例如，尝试回答以下问题：

- 是否必须为仓库设置原因代码？
- 是否必须为某些物料设置原因代码？
- 需要多少个原因代码？
- 是否必须预先选择调整的原因代码的有限列表？
- 条码扫描仪用户应如何使用原因代码？ 原因代码应该预选，必需还是不可编辑？
- 仓库工作人员是否要求移动扫描仪上采用不同的原因代码行为？ 如果答案为是，则可创建多个菜单项，然后将其分配给不同人员。
- 原因代码是否应推动财务抵销帐户过帐？

## <a name="turn-on-reason-code-features-in-your-system"></a>在系统中启用原因代码功能

如果您在系统中未看到本主题中描述的所有功能，您可能必须启用 *使用连接到抵销帐户可配置原因代码过帐现有库存量调整* 功能。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)设置检查功能状态和开启功能（如果需要）。 在 **功能管理** 工作区中，此功能按照下面的方式列出：

- **模块**：*仓库管理*
- **功能名称**：*使用连接到抵销帐户的可配置原因代码过帐现有库存量调整*

## <a name="set-up-reason-codes"></a>设置原因代码

### <a name="set-up-reason-code-policies"></a>设置原因代码策略

您可以创建多个原因代码策略以控制何时以及如何应用盘点原因代码。 每个原因代码策略都可以包含两个盘点原因代码类型之一（*可选* 或 *必填*）。 可在仓库级别或物料级别使用盘点原因代码。

若要创建原因代码策略，请执行以下步骤。

1. 转到 **库存管理** \> **设置** \> **库存** \> **盘点原因代码策略**。
1. 在操作窗格上，选择 **新建** 向网格添加策略。
1. 设置新策略的 **名称** 字段。
1. 在 **盘点原因代码类型** 字段中，选择 *必需* 或 *可选* 以指定是否必须在以下其中一个库存调整流程中选择原因代码：

    - 周期盘点（移动设备）
    - 现货盘点（移动设备）
    - 阈值盘点（移动设备）
    - 调入（移动设备）
    - 调出（移动设备）
    - 盘点日记帐（富客户端）
    - 数量调整/联机盘点（富客户端）

也可以为单个仓库和为产品设置原因代码策略。 产品的原因代码设置可以覆盖产品仓库的设置。

> [!NOTE]
> 对于 **盘点原因代码策略** 字段设置为 *必填* 的仓库和物料，在提供原因代码之前，不能完成和结束盘点日记帐。 有关详细信息，请参阅下一部分。

### <a name="assign-counting-reason-code-policies-to-warehouses"></a>将盘点原因代码策略分配给仓库

要将盘点原因代码策略分配给仓库，请执行以下步骤。

1. 转到 **库存管理** \> **设置** \> **库存细分** \> **仓库**。
1. 在列表窗格中选择一个仓库。
1. 在操作窗格的 **仓库** 选项卡上的 **设置** 组中，选择 **盘点原因代码策略**。 然后，在 **将盘点原因代码策略分配给仓库** 下拉对话框中，按照以下步骤之一操作：

    - 若要使用每个物料的策略设置来确定物料是否一定需要盘点日记帐，请不要输入任何值（或删除现有值）。
    - 若要要求提供仓库盘点日记帐的原因代码，请选择 **盘点原因代码类型** 字段设置为 *必填* 的原因策略。
    - 如果原因代码对于仓库盘点日记帐为可选，请选择 **盘点原因代码类型** 字段设置为 *可选* 的原因策略。

### <a name="assign-counting-reason-code-policies-to-products"></a>将盘点原因代码策略分配给产品

要将盘点原因代码策略分配给产品，请执行以下步骤。

1. 转到 **产品信息管理** \> **产品** \> **已发布产品**。
1. 在网格中选择一个产品。
1. 在操作窗格的 **产品** 选项卡上的 **设置** 组中，选择 **盘点原因代码策略**。 然后，在 **将盘点原因代码策略分配给仓库** 下拉对话框中，按照以下步骤之一操作：

    - 若要使用仓库的策略设置来确定产品是否一定需要盘点日记帐，请不要输入任何值（或删除现有值）。
    - 若要要求提供产品盘点日记帐的原因代码，请选择 **盘点原因代码类型** 字段设置为 *必填* 的原因策略。 此设置替代仓库级别的所有原因代码设置。
    - 如果原因代码对于产品盘点日记帐为可选，请选择 **盘点原因代码类型** 字段设置为 *可选* 的原因策略。 此设置替代仓库级别的所有原因代码设置。

### <a name="set-up-counting-reason-codes"></a>设置盘点原因代码

要设置您的盘点原因代码，请按照以下步骤操作。

1. 转到 **库存管理** \> **设置** \> **库存** \> **盘点原因代码**。
1. 在操作窗格上，选择 **新建** 向网格添加一行。
1. 设置新行的 **盘点原因代码** 和 **说明** 字段。
1. 若要分配抵销帐户，请在 **抵销帐户** 字段中输入或选择一个值。

    > [!NOTE]
    > 如果将抵销帐户分配给盘点原因代码，则当您过帐使用或具有该盘点原因代码的盘点日记账时，将根据分配的抵销帐户而不是默认库存过帐模板帐户过帐该值。

### <a name="set-up-counting-reason-code-groups"></a><a name="reason-groups"></a>设置盘点原因代码组

*盘点原因代码组* 可用作 Warehouse Management 移动应用中 *调入* 和 *调出* 菜单项的一部分，以限制盘点原因代码的列表。 （有关盘点原因代码组的详细信息，请参阅本主题中后面的[设置移动设备的调入和调出菜单项](#setup-adjustment-in-out)。）

1. 转到 **库存管理** \> **设置** \> **库存** \> **盘点原因代码组**。
1. 在操作窗格中，选择 **新建** 添加组。
1. 设置新组的 **盘点原因组** 和 **组说明** 字段。
1. 在操作窗格上，选择 **保存**。
1. 在 **详细信息** 部分中，在工具栏上选择 **新建** 以在网格中添加一行。 然后，设置新行的 **盘点原因代码** 字段。 
1. 重复上一步以根据需要分配更多代码。 如果您必须从组中删除代码，请选择它，然后在工具栏上选择 **删除**。

### <a name="set-up-reason-codes-for-mobile-device-menu-items"></a>为移动设备菜单项设置原因代码

您可以为以下现有调整类型配置原因代码：

- 周期盘点
- 现货盘点
- 阈值盘点
- 调入
- 调出

在大多数情况下，您可以为每个相关的移动设备菜单项定义以下信息：

- 盘点期间是否对移动设备工作人员显示原因代码。
- 移动设备菜单项中显示的默认原因代码。
- 用户是否可以编辑原因代码。

#### <a name="set-up-mobile-device-menu-items-for-a-counting-process"></a>为盘点流程设置移动设备菜单项

要为盘点流程设置移动设备菜单项，请按照下列步骤操作。

1. 转到 **Warehouse Management** \> **设置** \> **移动设备** \> **移动设备菜单项**。
1. 选择列表窗格中的相关菜单项，或创建新菜单项。
1. 在操作窗格上，选择 **周期盘点**。
1. 在 **默认盘点原因代码** 字段中，设置使用移动设备菜单项进行盘点时应记录的默认原因代码。
1. 在 **显示盘点原因代码** 字段中，选择以下值之一：

    - *行* - 记录每个差异后显示原因代码。
    - *隐藏* - 不显示原因代码。

1. 将 **编辑盘点原因代码** 设置为 *是*，以允许工作人员编辑盘点期间移动设备上显示的原因代码。 将其设置为 *否* 可以阻止工作人员编辑此代码。

> [!NOTE]
> 可在可执行盘点的任何移动设备菜单项上启用 **周期盘点** 按钮。 例如，现场盘点、用户导向的工作和系统导向的工作的菜单项。

#### <a name="set-up-mobile-device-menu-items-for-adjustment-in-and-adjustment-out"></a><a name="setup-adjustment-in-out"></a>设置调入和调出的移动设备菜单项

要设置调入和调出的移动设备菜单项，请按照下列步骤操作。

1. 转到 **Warehouse Management** \> **设置** \> **移动设备** \> **移动设备菜单项**。
1. 在操作窗格中，选择 **新建** 以创建菜单项。
1. 设置新菜单项的 **移动项名称** 和 **标题** 字段。
1. 将 **模式** 字段设置为 *工作*。
1. 将 **使用现有工作** 选项设置为 *否*。
1. 在 **工作创建流程** 字段中，选择 *调入* 或 *调出*。
1. 在 **常规** 快速选项卡上，设置以下字段。 （选择 *工作创建流程* 字段中的 *调入* 或 **调出** 时，会添加所有这些字段。）

    - **使用流程指南** - 如果您要创建 *调出* 流程，请务必将此选项设置为 *是*。 如果您要创建 *调出* 流程，则将此选项始终设置为 *是*。
    - **默认盘点原因代码** - 设置使用移动设备菜单项进行盘点时应记录的默认原因代码。
    - **显示盘点原因代码** - 选择以下值之一：

        - *行* - 记录每个差异后显示原因代码。
        - *隐藏* - 不显示原因代码。

    - **编辑盘点原因代码** - 将此选项设置为 *是*，以允许工作人员编辑盘点期间移动设备上显示的原因代码。 将其设置为 *否* 可以阻止工作人员编辑此代码。
    - **盘点原因代码组** - 如果您要限制向工作人员显示的选项列表，请选择原因代码组。 有关如何设置原因代码组的信息，请参阅本主题中前面的[设置盘点原因代码组](#reason-groups)部分。 

> [!NOTE]
> 当您将盘点原因代码组分配给 *调入* 和 *调出* 菜单项时，其中 **使用流程指南** 选项设置为 *是*，您可以在 Warehouse Management 移动应用处理过程中获取有限的盘点原因代码列表。
>
> **使用流程指南** 选项还有助于防止因错误而出现大量调整数量。 （例如，工作人员可能会意外地扫描物料编号的条码而不是数量值。）要设置此功能，请针对每个相关菜单项将 **使用流程指南** 选项设置为 *是*。 然后转到 **Warehouse Management \> 设置 \> 工作人员**，并为每个相关仓库工作人员设置 **调整数量限制** 字段，以指定工作人员可登记的最大调整数量。

## <a name="processing-that-uses-counting-reason-codes"></a>使用盘点原因代码的处理

当工作人员使用 Warehouse Management 移动应用时，将记录原因代码。 除非已定义盘点审批流程，否则记录的原因代码将立即用作接下来的盘点日记帐过帐的一部分。

### <a name="cycle-count-approvals"></a>周期盘点审核

审核盘点之前，工作人员可更改与盘点关联的原因代码。 审核盘点时，将把原因代码输入盘点日记帐行中。

#### <a name="modify-reason-codes-for-cycle-count-approvals"></a>修改周期盘点审批的原因代码

要修改周期盘点审批，请按照以下步骤操作。

1. 转到 **Warehouse Management** \> **周期盘点** \> **周期盘点工作待审阅**。
1. 在网格中选择一个周期盘点。
1. 在操作窗格上的 **工作** 选项卡上，选择 **周期盘点**。 然后，在 **原因代码** 字段中，选择新原因代码。

将把原因代码添加到 *盘点日记帐* 类型的盘点日记帐中的日记帐行。

1. 转到 **库存管理** \> **日记帐条目** \> **物料盘点** \> **盘点**。
2. 在盘点日记帐的行详细信息中，在 **盘点原因代码** 字段中，选择与当前情况匹配的原因代码。

### <a name="view-the-reason-codes-recorded-in-the-counting-history"></a>查看盘点历史记录中记录的原因代码

若要查看盘点历史记录中已经记录的原因代码，请按照以下步骤操作。

1. 转到 **库存管理** \> **查询和报表** \> **盘点历史记录**。
1. 在列表窗格中选择物料盘点记录。
1. 在 **盘点原因代码** 字段中，查看通过原因代码记录的盘点历史记录。

### <a name="use-reason-codes-for-quantity-adjustment-or-online-counting"></a>使用数量调整或联机盘点的原因代码

若要使用数量调整或联机盘点的原因代码，请按照以下步骤操作。

1. 转到 **库存管理 \> 查询和报表 \> 现有量列表**。
1. 在操作窗格上选择 **数量调整**。
1. 选择 **数量调整**，然后在 **盘点原因代码** 字段中选择一个原因代码。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
