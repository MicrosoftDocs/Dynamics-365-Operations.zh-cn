---
title: 确认并转移
description: 本主题介绍如何使用“确认并转移”功能，用户可在完成与负荷关联的所有工作之前，使用此功能将这些负荷运出仓库。
author: mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSLoadTemplate,WHSWorkTemplateTable,WHSLoadPlanningWorkbench
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: Release 10.0.8
ms.openlocfilehash: 70ebe47997f3b5945a433150ae66de6eb41ff12acf4f4f3c8268351116bdd313
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/05/2021
ms.locfileid: "6767943"
---
# <a name="confirm-and-transfer"></a>确认并转移

[!include [banner](../includes/banner.md)]

用户可在完成与负荷关联的所有工作之前，使用 *确认并转移* 将这些负荷运出仓库。 如果收到的装运中包含未完全领料的负荷行，系统将提示确认用户将剩余数量拆分到新负荷中或取消未完成数量。

设置为允许拆分负荷的系统支持以下场景：必须调整因为新情况或情况改变而必须调整计划的负荷或部分装载的负荷。

客户端中包含让部分装载的负荷以已装运状态结束和确认的逻辑。 然后，如果需要且设置也允许，将所有剩余装运和负荷行（包括完整或部分行数量）转移到新建的负荷和装运。 将根据装运和负荷的初始创建条件自动创建新装运和负荷，并且其主属性不变。 如果尚未创建工作订单，而用户认为必须取消剩余数量，也可以通过一个选项自动取消这些数量。

此功能支持以下场景：一辆开车装不下所有负荷，或者部分负荷应该在其余负荷准备好装运之前离开仓库。 在这些场景下，可以将剩余产品转移到新负荷，从而转移到新卡车。 因为此功能可以用于不然应该需要完整负荷装运的负荷，所以灵活性特别高，可帮助运输经理应对非常规场景或意外场景。

拆分负荷时，*确认并转移* 功能执行以下操作：

- 因为需要，创建新负荷和装运。 每个负荷或装运的大多数属性与原始负荷或装运的相同。 除了负荷状态，将根据工作状态重新计算负荷状态。
- 将通知用户，说明已创建了新负荷。 还会通知用户新负荷的 ID。
- 将使用新的负荷和装运信息更新拆分的负荷行、工作标题和工作行。
- 如果拆分整个装运，将保留该装运，仅更新负荷引用。 如果必须拆分装运，将创建一个新装运。

取消剩余数量时，将从负荷中删除尚未领料的和未与非取消工作关联的所有负荷行数量。 如果正在进行任何工作，则用户只能拆分负荷。 不能取消剩余数量。

只能拆分满足下面的所有条件的负荷：

- 一个或多个负荷行具有已领料数量。
- 负荷状态为低于已装载数量。
- 无负荷行数据。 （此数据通过在暂存阶段合并牌照创建，而 *确认并转移* 功能不支持合并牌照。）
- 包装货位现在没有任何库存在等待包装。 （*确认并转移* 功能不支持已领到打包站但尚未打包的库存。）

> [!NOTE]
> 此功能与运输负荷功能不同，后者在领料前不可计划和创建负荷，但是领料完成后使用可用运输空间装运的仓库中使用。
>
> 以下情况下使用 *确认并转移* 功能：通常提前规划和创建负荷，但是有时可用运输工具（如卡车）装不完负荷时除外。

## <a name="turn-on-confirm-and-transfer"></a>开启确认并转移功能

*确认并转移* 功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)设置检查功能状态和开启功能（如果需要）。 在 **功能管理** 工作区中，此功能按照下面的方式列出：

- **模块**：*仓库管理*
- **功能名称**：*确认并转移*

## <a name="set-up-confirm-and-transfer"></a>设置确认并转移功能

若要使用 *确认并转移* 功能，必须在每个相关负荷模板中开启该功能。 除外，还可能希望准备工作模板以支持此功能，具体取决于要求。 如果要完成本主题后文提供的示例场景，请按照本部分中的说明设置系统。 （此场景基于 **USMF** 演示数据。）

### <a name="prepare-your-load-templates"></a>准备负荷模板

1. 转到 **仓库管理 \> 设置 \> 负荷 \> 负荷模板**。
1. 在操作窗格上，选择 **编辑** 将页面设置为编辑模式。
1. 选中要开启此功能的每个现有模板的 **允许装运确认期间拆分负荷** 复选框。 或者选择 **新建** 创建新模板，然后根据需要进行配置。 使用该模板创建的每个负荷都将基础此功能。 （如果在使用 **USMF** 演示数据，请为 **20' 容器** 负荷模板开启此功能。）

### <a name="prepare-your-work-templates"></a>准备工作模板

任何情况下均不需要进行此设置。 此处的示例可以确保按装运分解工作以支持本主题后文提供的示例场景。 还可以通过其他方法取得此结果。

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作模板**。
1. 在页面上部的网格中，选择要在其中设置 *确认并转移* 功能的现有工作模板。 （如果在使用 **USMF** 演示数据，请选择 **51 Pick to stage** 工作模板。）也可以创建新的工作模板。
1. 在操作窗格上，选择 **编辑查询** 打开 **销售** 对话框。
1. 在 **销售** 对话框的 **排序** 选项卡中，选择 **添加** 向网格添加一行。
1. 在新行中，设置以下值：

    - **表**：*临时工作事务*
    - **派生表**：*临时工作事务*
    - **字段**：*装运 ID*
    - **搜索方向**：*升序*

1. 选择 **确定** 保存设置并关闭 **销售** 对话框。
1. 如果收到消息说明将重置分组，请选择 **是** 继续操作。
1. 在 **工作模板** 页上部的网格中，选择刚才编辑的模板，然后在操作窗格中，选择 **工作标题分解**。
1. 在操作窗格上，选择 **编辑** 将页面设置为编辑模式。
1. 在网格中，设置以下值：

    - **表名**：*临时工作事务*
    - **字段名**：*装运 ID*
    - **按此字段分组：** 选中此复选框。

1. 在操作窗格上，选择 **保存**。
1. 关闭该页面。

## <a name="scenario"></a>应用场景

此场景显示以下示例：领料流程尚未完成，但是无论如何必须将已领物料装载到卡车上并装运。 因此，用户可以将未打包负荷行拆分到新负荷中。 然后将自动更新所有数据关系。

> [!NOTE]
> 此场景中描述的具体值基于 **USMF** 演示数据。 监视在演示或了解如何使用此功能时使用这些演示数据。 如果不使用 **USMF** 演示数据，请根据需要替换为您自己的值。

### <a name="step-1-create-a-load-that-has-multiple-load-lines"></a>步骤 1：创建具有多个负荷行的负荷

必须有包含多个负荷行的负荷，才能使用此功能。 还必须确保领料货位有满足将创建的销售订单上的所有物料的足够库存。 检查货位指令的设置（**仓库管理 \> 设置 \> 货位指令**），并记下用于销售订单领料的领料货位。 如果必须调整库存，请根据需要创建手动移动，使用补货，或使用其他任何流。

若要创建授予资格负荷，请首先执行以下步骤创建三个销售订单。

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 在操作窗格上，选择 **新建** 以打开 **创建销售订单** 对话框。
1. 在 **创建销售订单** 对话框中，（至少）设置以下值：

    - 在 **客户** 快速选项卡上，将 **客户帐户** 字段设置为 *US-004* (*Cave Wholesales*)。
    - 在 **常规** 快速选项卡上，将 **仓库** 字段设置为 *51*。

1. 选择 **确定** 创建销售订单，然后关闭 **创建销售订单** 对话框。
1. 将打开您的新销售订单。 在 **销售订单行** 网格中，添加具有以下值的行：

    - **物料编号：***M9200*
    - **数量：** *40*
    - **单位：** *ea*

1. 在网格上方的 **库存** 菜单中，选择 **预留**。
1. 在操作窗格上，选择 **预留批次** 打开 **预留** 页面。
1. 预留销售行中的库存，然后关闭 **预留** 页面。
1. 重复步骤 1 到 4，为相同客户和仓库添加第二个销售订单。
1. 添加两个具有以下值的销售行。 添加各行后，按照步骤 6 到 8 中的说明预留库存。

    - **行 1：** 将 **物料编号** 字段设置为 *M9200*，将 **数量** 字段设置为 *30*，将 **单位** 字段设置为 *个*。
    - **行 2：** 将 **物料编号** 字段设置为 *M9201*，将 **数量** 字段设置为 *20*，将 **单位** 字段设置为 *个*。

1. 重复步骤 1 到 4，为相同客户和仓库添加第三个销售订单。
1. 添加两个具有以下值的销售行。 添加各行后，按照步骤 6 到 8 中的说明预留库存。

    - **行 1：** 将 **物料编号** 字段设置为 *M9201*，将 **数量** 字段设置为 *20*，将 **单位** 字段设置为 *个*。
    - **行 2：** 将 **物料编号** 字段设置为 *M9202*，将 **数量** 字段设置为 *60*，将 **单位** 字段设置为 *个*。

#### <a name="load-planning-workbench"></a>装载计划工作台

负荷计划工作台将使用负荷模板 ID 生成装运，并将销售订单行发放到仓库。

1. 转到 **仓库管理 \> 装载 \> 装载计划工作台**。
1. 在 **仓库** 字段中，选择 *51*。

    现在将生成您刚创建的销售订单的负荷。

1. 在 **销售行** 选项卡的网格中，选择新销售订单的销售行。
1. 在操作窗格上 **供应与需求** 选项卡上 **添加** 组中，选择 **至新负荷**。
1. 在 **负荷模板分配** 对话框中，在 **负荷模板 ID** 字段中，选择 *20' 容器*。
1. 选择 **确定**。
1. 在 **负荷计划工作台** 页面 **负荷** 部分的网格中，找到为仓库 *51* 新建的负荷 ID。 向右滚动，直到看到 **允许装运确认期间拆分负荷** 列。 应该选中您的负荷的复选框。
1. 选择负荷。
1. 在网格上方的 **下达** 菜单中，选择 **发放到仓库** 以创建工作。
1. 在 **将负荷发放到仓库** 对话框中，验证 **要包括的记录** 快速选项卡显示您的负荷 ID。
1. 选择 **确定**。

    在系统创建装运和工作时，您可能会收到“正在处理操作”消息。

1. 在 **负荷计划工作台** 页面的 **负荷** 部分中，您的负荷现在的负荷状态应该为 *已分波次*。 选择负荷，然后在网格上方的 **相关信息** 菜单中，选择 **波次详细信息** 查看创建的装运 ID。 完成后，关闭 **波次** 页面。
1. 在 **负荷计划工作台** 页面的 **负荷** 部分中，选择负荷，然后在网格上方的 **相关信息** 菜单中，选择 **工作详细信息** 查看为销售订单创建的工作。
1. 记下创建的工作 ID。 可能必须向右滚动才能看到与工作 ID 关联的销售订单编号和装运 ID。

### <a name="step-2-set-up-the-execution-flow-for-mobile-devices"></a>步骤 2：设置适用于移动设备的执行流

移动设备任务需要用户输入信息，如工作 ID 或牌照 ID。 在字段中，通常以文档、包装或搭架上的条形码的形式提供给仓库用户。 若要完成场景的移动设备步骤，请确保在事务中识别事务的工作 ID，以及物料和货位的牌照 ID。

1. 使用仓库 *51* 的用户 ID 和密码登录移动设备。
1. 选择 **出库**。
1. 选择 **销售领料**。
1. 可选择输入工作 ID 或牌照 ID。 输入第一个销售订单的工作 ID，然后选择 **输入**。
1. 在 **货位** 字段中，输入显示的货位以确认领料货位。 然后选择 **输入**。
1. 在 **牌照** 字段中，输入牌照 ID。 牌照 ID 必须是物料、仓库和正在从所选货位领取的物料货位的匹配项。 当您完成时，选择 **输入**。
1. 在 **物料** 字段中，输入物料编号确认正在领取物料，然后选择 **输入**。
1. 在 **数量** 字段中，输入正在领取的物料的数量，然后选择 **输入**。
1. 在 **目标牌照** 字段中，输入目标牌照 ID。 目标牌照是用户定义的。 务必输入可记住的牌照 ID。 建议使用当前日期加两位数序列 (YYMMDD\#\#) 作为格式，如 *19112301*。 当您完成时，选择 **输入**。
1. 查看显示的信息。 此信息是现在将成为放置事务的 *放置* 数据的 *领料* 信息。 当您完成时，选择 **输入**。

    - 您将收到 **工作已完成** 消息。

1. 为第二个销售订单的工作 ID 重复步骤 4 到 10。

下一步是将领到的两个牌照装载到卡车中。

1. 使用仓库 *51* 的用户 ID 和密码登录移动设备。
1. 选择 **出库**。
1. 选择 **销售装载**。
1. 输入在上一个过程中为第一个工作 ID 创建的用户定义的目标牌照 ID。 然后选择 **输入** 将目标牌照放入 **STAGE** 位置。
1. 再次输入目标牌照 ID，然后选择 **输入** 将牌照放入 **BAYDOOR** 货位。
1. 对为第二个工作 ID 创建的目标牌照 ID 重复步骤 4 到 5。

现在将结束（装载）这两个工作 ID。

### <a name="step-3-confirm-the-outbound-shipment"></a>步骤 3：确认出库装运

在此步骤中，将确认这两个销售订单和已经为负荷完成的工作，以便装运领取的负荷物料和为未领物料创建新负荷。 必须在 **负荷详细信息** 页面中进行出库装运确认。

1. 转到 **仓库管理 \> 装载 \> 装载计划工作台**。
1. 在 **负荷** 部分的网格中，为创建的负载 ID 选择行。
1. 选择负荷 ID 链接打开 **负荷详细信息** 页。
1. 在 **负荷详细信息** 页操作窗格中 **装运与收货** 选项卡上的 **确认** 组中，选择 **出库装运** 开始确认。
1. 在 **装运确认** 对话框的 **装运确认期间的负荷拆分方法** 字段中，选择 *将数量拆分至新负荷*。
1. 选择 **确定**。

    您可能会收到“正在处理操作”消息。

    您将收到参考消息，说明已确认负荷的装运，并且已经根据拆分数量创建了新负荷。

刷新 **负荷计划工作台** 页面查看新建的负荷。

也可以按照下面的方法确认已更新了事务关系：

- 使用新负荷 ID 更新了剩余（即未处理的）装运和装运行。
- 销售订单已链接到新负荷 ID。
- 原始负荷中不包含剩余负荷行。
- 已经使用新负荷 ID 更新了剩余工作。
- 波次保持不变。
- 已正确更新了新负荷的状态。 （如果工作状态为 _进行中_，负荷状态也应该为 _进行中_。）

## <a name="notes-and-tips"></a>说明和提示

- 也可以在关闭了 **负荷模板** 参数的情况下创建了负荷之后，但是在开始执行装载流程之前，开启 **允许装运确认期间拆分负荷** 参数。 转到所需负荷，然后在标题视图中开启该参数。
- 当部分剩余工作标题的状态为 *进行中* 时，也可以使用 **将数量拆分到新负荷** 选项。 因此，即使工作人员仍在使用领料单，也可以使用此功能。
- 如果在有剩余工作的状态为 *未结* 或 *进行中* 的情况下选择 **取消未履行数量**，将收到以下错误消息：“无法取消负荷的剩余数量。 负荷有工作。”
- 如果在不存在剩余工作，但是负荷中有未下达负荷行的情况下选择 **取消未履行数量**，将收到以下错误消息：“无法确认负荷的装运，因为物料的数量超过了定义的待交付百分比。” 若要避免此错误，可以将未下达负荷行中的 **待交付** 百分比设置为 100%。 不会将未下达行移到新负荷，但是将使用待交付确认当前负荷。 在这种情况下，不能重新下达原始订单。 因此，必须以其他方式处理。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]