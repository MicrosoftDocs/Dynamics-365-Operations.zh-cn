---
title: 使用工作模板和库位指令控制仓库的工作
description: 本主题介绍如何使用工作模板和库位指令确定在仓库中如何以及在哪里执行工作。
author: perlynne
manager: tfehr
ms.date: 02/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSLocDirFailure, WHSLocDirHint, WHSLocDirTable, WHSLocDirTableUOM, WHSRFMenuItem, WHSWork, WHSWorkClass, WHSWorkPool, WHSWorkTemplateTable
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: 72921
ms.assetid: 377ab8af-5b0c-4b5e-a387-06ac1e1820c0
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: aae57af04be8bcc6da2e5635b5ffa96d9fac147c
ms.sourcegitcommit: 4f9912439ff78acf0c754d5bff972c4b85763093
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/02/2020
ms.locfileid: "3205728"
---
# <a name="control-warehouse-work-by-using-work-templates-and-location-directives"></a>使用工作模板和库位指令控制仓库的工作

[!include [banner](../includes/banner.md)]

本主题介绍如何使用工作模板和库位指令确定在仓库中如何以及在哪里执行工作。

仓库工作人员在移动设备上收到的说明由您设置以定义不同仓库流程和任务的 Dynamics 365 Supply Chain Management 工作模板确定。 工作模板确定如何为每个仓库流程执行工作。 通过将库位指令与工作模板链接，您可以帮助确保在仓库的实际特定区域执行工作。

## <a name="work-templates"></a>工作模板
**工作模板**页可以定义必须在仓库中执行的工作工序。 通常，仓库工作工序包括一个对操作：仓库工作人员在一个库位领取现有库存量，然后将领取的库存放到另一个库位。 

工作模板包括标题和关联的行。 每个工作模板针对特定*工作订单类型*。 许多工作订单类型与源文档关联，例如采购订单或销售订单。 但是，其他工作订单类型表示单独的仓库流程，例如周期盘点。 *工作池 ID* 使您可组织工作组。 

在工作标题定义中的设置可用于确定什么时候应创建一项新的工作。 例如，您可以设置最大领料行数和最大预期领料时间。 然后，如果销售订单领料流程的工作超过这些值之一，工作将拆分为两项工作。 

工作行表示处理该工作所需的实际任务。 例如，对于出货仓库流程，可能存在领取仓库内的物料的工作行，以及将那些物料放入暂存区域的另一个行。 然后可能存在从暂存领取物料的附加行，以及将物料放入卡车（作为装载流程的一部分）的另一行。 您可以在工作模板行设置*指令代码*。 指令代码链接到库位指令，因而帮助确保仓库工作在正确的仓库库位中处理。 

您可以设置查询来控制什么时候使用一个特定的工作模板。 例如，您可以设置限制，以便特定模板只能在特定仓库中用于工作。 或者，您可以根据销售来源，具有用于创建出站销售订单处理的工作的若干模板。 系统使用**序列号**字段确定可用工作模板在其中评估的订单。 因此，如果您具有特定工作模板的非常详细的查询，应为其指定小序列号。 该查询然后在其他更为一般的查询前进行评估。 

若要停止或暂停工作流程，您可以在工作行使用**停止工作**设置。 在这种情况下，执行工作的工作人员将不会被要求执行下一工作行步骤。 若要移至下一个步骤，该工作人员或其他工作人员必须再次选择该工作。 您还可以通过在工作模板行使用不同的*工作类 ID* 来在一项工作内分离任务。

## <a name="location-directives"></a>位置指令
库位指令是帮助标识领料和使位置用于库存移动的规则。 例如，在销售订单交易记录中，位置指令决定在何处领物料，及将已领的物料放置在何处。 库位指令包括标题和关联行，您在**库位指令**页上创建它们。 

在标题上，必须将每个库位指令与指定指令将用于的库存交易记录类型的*工作订单类型*关联，如销售订单、补货或原材料领取。 *工作类型*指定库位指令是否将用于领取或放置工作，或者用于某些其他仓库流程，如盘点或库存状态更改。 您还必须指定*站点*和*仓库*。 您在标题上指定的*指令代码*可以用于将库位指令与一个或多个工作模板链接。 

关于工作模板，您可以设置查询以确定什么时候使用特定库位指令。 例如，您可以指定在电子商务为销售订单的来源时，必须从仓库中的专用区领取库存。 系统使用**序列号**字段确定可用库位指令在其中评估的订单。 

库位指令行设置对库位查找规则应用的其他限制。 您可以指定该指令应该用于的最小数量和最大数量，并且，您可以指定该指令应该针对特定库存单位。 例如，如果度量单位为托盘，则可将托盘中的物料放入指定位置中。 您还可以指定数量是否可以跨多个库位拆分。 与库位指令标题相似，每个库位指令具有一个确定在其中评估行的订单的序列号。 

库位指令有一个附加的详细级别：*库位指令操作*。 您可以为每个行定义多个库位指令操作。 同样，序列号用于确定在其中评估操作的订单。 在此级别，您可以设置查询以定义如何找到仓库内的最佳库位。 您还可以使用预定义的**策略**设置查找最佳位置。

## <a name="location-directives-configuration-details"></a>库位指令配置详细信息 

 ### <a name="sequence-number"></a>序列号
 
此编号指示为选定工作类型处理库位指令的序列。 可使用菜单中的**上移**和**下移**更改。
 
 ### <a name="work-type"></a>工作类型
 
这是要执行的工作类型。 可用的工作类型基于您已在**工作订单类型**字段中选择的库存交易记录类型。
-   **放置** - 如果工作类型等于**放置**，则表示库位指令将查找最适合的放置库位或查找进入系统的库存（通过收货、生产或库存调整）。 也可用于定义到暂存库位或最终货架门装运库位的放置。
-   **领料** - 如果工作类型等于**领料**，则表示仓库将寻找最适合保存物理库存（来自创建工作）的库位。 即使工作未完成，也可以完成领料（可关闭领料工作行）。 用户可以完成物理领料（这是领料步骤）。 然后，用户可通过移动设备取消，以后再完成工作。 但是，如果最终放置已完成，将关闭工作标题。 
-   **盘点、调整、自定义、库存状态更改、牌照生成、打印、状态更改、打包到嵌套的牌照** - 这些在所有库位指令设置中均不可用。 这是枚举，所以工作订单类型不可以进行筛选。 

### <a name="directive-code"></a>指令代码

选择与工作模板或补货模板关联的指令代码。 在**指令代码**窗体中，可新建代码，用于工作模板或补货模板与库位指令之间的连接。 也可以用于建立任何工作模板行与库位指令（如货架门或暂存库位）之间的链接。

请注意，如果设置代码，生成工作时，系统将不会按序列搜索库位指令，而是按指令代码进行搜索。 这意味着可以更具体地指定在工作模板中的特定步骤（如暂存材料）使用哪个库位模板。 

### <a name="site"></a>站点

站点是必填字段，因为库位指令需要站点和站点的有效仓库。 

### <a name="warehouse"></a>存放地点

仓库是必填字段，因为库位指令需要站点和站点的有效仓库。

### <a name="multiple-sku"></a>多个 SKU

这允许一个库位（如货架门）有多个库存单位 (SKU)。 如果选择**多个 SKU**，将在工作中指定放置库位（这是预期操作），但是放置库位只能处理多物料放置（如果工作中包含要领料和放置的不同 SKU，而不是一个 SKU 放置）。 如果不选择**多个 SKU**，则仅当放置只有一种 SKU 时才指定放置库位。 要使用这两种操作，需要指定两行，一行开启多 SKU，一行关闭多 SKU。 它们需要采用相同的结构和设置。 对于放置操作，库位指令需要相同，即使无法通过工作 ID 区分单 SKU 和多 SKU。 如果订单中包含多个物料，还需要针对领料进行设置。

### <a name="sequence-number"></a>序列号

输入处理选定工作类型的库位指令行所需的序列。 如果需要，还可以使用**上移**和**下移**修改序列。

### <a name="fromto-quantity"></a>开始/截止数量

用于在应选择中网格序列时指定数量范围。 可以以不同的单位指定数量中的开始/截止范围。

### <a name="unit"></a>单位

您可以指定该指令应该用于的最小数量和最大数量，并且，您可以指定该指令应该针对特定库存单位。 行中的单位字段仅用于评估数量。

检查库位指令行是否适用时，将基于库位指令行中指定的各单位的数量。 只要访问库位指令行，系统都将尝试把需求单位转换为该行中指定的单位。 如果不进行计量单位转换，将继续到下一行。 

### <a name="locate-quantity"></a>查找数量

此选项仅用于将数量放入库存中/在库存中查找数量。 仅适用于放置工作类型。 有效值为：

-   **牌照数量** - 评估该数量是否在“开始”和“截止”数量范围内时，请使用正在接收的牌照中的数量。
-   **已单元化的数量** - 评估该数量是否在“开始”和“截止”数量范围内时，请在特定交易记录期间使用正在单元化的数量。
-   **剩余数量** - 评估该数量是否在“开始”和“截止”数量范围内时，请使用当前正在签入的采购订单行中的待收货数量。
-   **预期数量** - 评估该数量是否在“开始”和“截止”数量范围内时，无论已收到的是什么，均请使用采购订单行中的总数。

### <a name="restrict-by-unit"></a>按单位施加的限制

这样库位指令行与度量单位或多个度量单位的关系就更具体。 预留数量时，如果仅希望预留一组特定库位中的货盘，则中网格序列将把这个特定序列限制为“PL”，这样少于一个货盘的所有数量都不会选择该序列。 选择**按单位施加的限制**以设置单位。 也可以将行限制为多个单位。 这仅适用于类型为领料的库位指令。 

### <a name="round-up-to-unit"></a>进位到单位

此字段与**按单位施加的限制**字段一起使用。 如果库位指令行**按单位施加的限制**设置为“箱”，则选择**进位到单位**表示通过指令为原材料领料生成的工作应进位到一个处理单位（在**按单位施加的限制**中指定）的倍数。 请注意，这仅适用于原材料领料和类型为领料的库位指令。

### <a name="locate-packing-qty"></a>查找包装数量

如果在销售订单、运输订单或生产订单中指定了包装数量，这将把系统限制为只能选择库位中有包装数量的库位。 这仅适用于类型为领料的库位指令。

### <a name="allow-split"></a>允许拆分

这指定是否允许库位指令拆分在多个仓库中收货的数量或预留的数量，或者是否必须将整个数量都放到一个库位中或在一个库位中预留才能创建工作。 

### <a name="sequence-number"></a>序列号

此编号是处理选定工作类型的库位指令时的序列。 如果需要，可以修改此序列。 但是，使用序列号时应小心谨慎，因为处理始终按序列运行。 

### <a name="name"></a>姓名

为位置指令操作输入名称。 指定的名称务必具体。

### <a name="fixed-location-usage"></a>固定货位使用情况 

-   **固定库位和非固定库位** - 库位指令将考虑所有库位。
-   **仅产品的固定库位** - 库位指令将仅考虑产品的固定库位。
-   **仅产品变型的固定库位** - 库位指令将仅考虑产品变型的固定库位。

### <a name="allow-negative-inventory"></a>允许负库存

选择以在库位指令中允许指定仓库库位的库存为负。 

### <a name="batch-enabled"></a>批处理已启用 

选择以使用批次启动的物料的批次策略。 如果访问的行中已经为**批处理已启用**设置了非批处理物料，过程将继续到下一个操作行。 

### <a name="strategy"></a>战略

-   **合并** - 在有相似物料时，使用此策略合并特定库位的物料。 这仅适用于类型为放置的库位指令。 放置的一般设置是在第一个操作行中进行合并，然后在第二个操作行中尝试放置但不合并。 合并货物可以提高后续领料的效率。
-   **匹配包装数量** - 此策略将查找包含牌照的库位，该牌照具有所需的确切数量。 它不能与不受牌照控制的库位配合使用。 此策略仅适用于类型为领料工作的库位指令。
-   **先到期先出 (FEFO) 批次预留** - 此策略在使用批次到期日期定位库存时使用，并且会分配给批次预留。 您尽可将此策略用于批次启用物料。 这仅适用于类型为领料工作的库位指令。 
-   **进位到全部牌照** - 此策略用于化整库存数量，以匹配分配给待领取的物料的牌照 (LP) 数量。 此策略只能用于领料类型库位指令的补货类型。 
-   **没有传入工作的空库位** - 此策略用于查找空库位。 如果库位没有物理库存和预期的传入工作，该库位将被视为空库位。 此策略仅用于类型为放置的库位指令。 

### <a name="example-of-the-use-of-location-directives"></a>库位指令使用示例

对于本示例，请注意采购订单流程，在此流程中库位指令必须为已在收货台登记的库存物料在仓库内查找可用容量。 首先，需要通过与现有库存量合并来在仓库内查找可用容量。 如果合并是不可能的，然后需要查找空库位。 

对于此情况，必须定义两个库位指令操作。 序列中的第一个操作必须使用**合并**策略，第二个应使用**没有传入工作的空库位**策略。 除非定义第三个操作来处理溢出情况，否则在仓库中没有更多容量时，有两个可能的结果：即使未定义库位也可以创建工作，或者创建工作流程可能失败。 结果将由**库位指令失败**页上的设置确定，在此页面您可以决定是否为每个工作订单类型选择**在库位指令失败时停止工作**选项。
