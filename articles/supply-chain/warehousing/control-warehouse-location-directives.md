---
title: 使用工作模板和库位指令控制仓库的工作
description: 本主题介绍如何使用工作模板和库位指令确定在仓库中如何以及在哪里执行工作。
author: perlynne
ms.date: 10/20/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSLocDirFailure, WHSLocDirHint, WHSLocDirTable, WHSLocDirTableUOM, WHSRFMenuItem, WHSWork, WHSWorkClass, WHSWorkPool, WHSWorkTemplateTable
audience: Application User
ms.reviewer: kamaybac
ms.custom: 72921
ms.assetid: 377ab8af-5b0c-4b5e-a387-06ac1e1820c0
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-10-09
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 91c8df8a111132d75ec02b79912c66e02aef4ea6
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "5831306"
---
# <a name="control-warehouse-work-by-using-work-templates-and-location-directives"></a><span data-ttu-id="bdb77-103">使用工作模板和库位指令控制仓库的工作</span><span class="sxs-lookup"><span data-stu-id="bdb77-103">Control warehouse work by using work templates and location directives</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="bdb77-104">本主题介绍如何使用工作模板和库位指令确定在仓库中如何以及在哪里执行工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-104">This topic describes how to use work templates and location directives to determine how and where work is carried out in the warehouse.</span></span>

<span data-ttu-id="bdb77-105">仓库工作人员在移动设备上收到的说明由您设置以定义不同仓库流程和任务的 Dynamics 365 Supply Chain Management 工作模板确定。</span><span class="sxs-lookup"><span data-stu-id="bdb77-105">The instructions that warehouse workers receive on a mobile device are determined by the Dynamics 365 Supply Chain Management work templates that you set up to define the various warehouse processes and tasks.</span></span> <span data-ttu-id="bdb77-106">工作模板确定如何为每个仓库流程执行工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-106">Work templates determine how the work is performed for each warehouse process.</span></span> <span data-ttu-id="bdb77-107">通过将库位指令与工作模板链接，您可以帮助确保在仓库的实际特定区域执行工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-107">By linking a location directive to work templates, you can help guarantee that work occurs in specific physical areas of the warehouses.</span></span>

## <a name="work-templates"></a><span data-ttu-id="bdb77-108">工作模板</span><span class="sxs-lookup"><span data-stu-id="bdb77-108">Work templates</span></span>

<span data-ttu-id="bdb77-109">**工作模板** 页可以定义必须在仓库中执行的工作工序。</span><span class="sxs-lookup"><span data-stu-id="bdb77-109">The **Work templates** page lets you define the work operations that must be performed in the warehouse.</span></span> <span data-ttu-id="bdb77-110">通常，仓库工作工序包括一个对操作：仓库工作人员在一个库位领取现有库存量，然后将领取的库存放到另一个库位。</span><span class="sxs-lookup"><span data-stu-id="bdb77-110">Typically, warehouse work operations consist of a pair of actions: a warehouse worker picks up on-hand inventory in one location and then puts the picked inventory down in another location.</span></span> 

<span data-ttu-id="bdb77-111">工作模板包括标题和关联的行。</span><span class="sxs-lookup"><span data-stu-id="bdb77-111">Work templates consists of a header and associated lines.</span></span> <span data-ttu-id="bdb77-112">每个工作模板针对特定 *工作订单类型*。</span><span class="sxs-lookup"><span data-stu-id="bdb77-112">Each work template is for a specific *work order type*.</span></span> <span data-ttu-id="bdb77-113">许多工作订单类型与源文档关联，例如采购订单或销售订单。</span><span class="sxs-lookup"><span data-stu-id="bdb77-113">Many work order types are associated with source documents, such as purchase or sales orders.</span></span> <span data-ttu-id="bdb77-114">但是，其他工作订单类型表示单独的仓库流程，例如周期盘点。</span><span class="sxs-lookup"><span data-stu-id="bdb77-114">However, other work order types represent separate warehouse processes, such as cycle counting.</span></span> <span data-ttu-id="bdb77-115">*工作池 ID* 使您可组织工作组。</span><span class="sxs-lookup"><span data-stu-id="bdb77-115">The *work pool ID* lets you organize work into groups.</span></span> 

<span data-ttu-id="bdb77-116">使用工作标题定义中的设置确定应在何时创建一项新的工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-116">Use the settings in the work header definition to determine when a new piece of work should be created.</span></span> <span data-ttu-id="bdb77-117">例如，您可以设置最大领料行数和最大预期领料时间。</span><span class="sxs-lookup"><span data-stu-id="bdb77-117">For example, you can set a maximum number of pick lines and a maximum expected pick time.</span></span> <span data-ttu-id="bdb77-118">然后，如果销售订单领料流程的工作超过这些值之一，工作将拆分为两项工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-118">Then, if the work for a sales order picking process exceeds either of those values, that work is split into two pieces of work.</span></span>

<span data-ttu-id="bdb77-119">使用 **工作标题分解** 按钮定义系统应在何时创建新的工作标题。</span><span class="sxs-lookup"><span data-stu-id="bdb77-119">Use the **Work header breaks** button to define when the system should create new work headers.</span></span> <span data-ttu-id="bdb77-120">例如，若要为每个 _订单编号_ 创建一个工作标题，在操作窗格上选择 **编辑查询**，然后将 **订单编号** 字段添加到查询编辑器的 **排序** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="bdb77-120">For example, to create a work header for each _order number_, select **Edit query** on the Action Pane, and then add the **Order number** field to the **Sorting** tab of the query editor.</span></span> <span data-ttu-id="bdb77-121">添加到 **排序** 选项卡的字段可用于作为 *分组字段* 进行选择。</span><span class="sxs-lookup"><span data-stu-id="bdb77-121">Fields that are added to the **Sorting** tab are available for selection as *grouping fields*.</span></span> <span data-ttu-id="bdb77-122">若要设置分组字段，在操作窗格上选择 **工作标题分解**，然后对于要用作分组字段的每个字段，选中 **按此字段分组** 列中的复选框。</span><span class="sxs-lookup"><span data-stu-id="bdb77-122">To set your grouping fields, select **Work header breaks** on the Action Pane, and then, for each field that you want to use as a grouping field, select the check box in the **Group by this field** column.</span></span>

<span data-ttu-id="bdb77-123">工作行表示处理工作所需的实际任务。</span><span class="sxs-lookup"><span data-stu-id="bdb77-123">The work lines represent the physical tasks that are required to process the work.</span></span> <span data-ttu-id="bdb77-124">例如，对于出库仓库流程，可能有一行用于领取仓库中的物料，还有另一行用于将那些物料放入暂存区域。</span><span class="sxs-lookup"><span data-stu-id="bdb77-124">For example, for an outbound warehouse process, there might be one line for picking up the items in the warehouse and another line for putting those items into a staging area.</span></span> <span data-ttu-id="bdb77-125">然后，可能有一个附加行用于从暂存中领取物料，还有另一行用于将物料放入卡车（作为装载流程的一部分）。</span><span class="sxs-lookup"><span data-stu-id="bdb77-125">There can then be an additional line for picking the items from staging and another line for putting the items into a truck as part of the loading process.</span></span> <span data-ttu-id="bdb77-126">您可以在工作模板行设置 *指令代码*。</span><span class="sxs-lookup"><span data-stu-id="bdb77-126">You can set a *directive code* on work template lines.</span></span> <span data-ttu-id="bdb77-127">指令代码链接到库位指令，因此帮助确保仓库工作在正确的仓库库位中处理。</span><span class="sxs-lookup"><span data-stu-id="bdb77-127">A directive code is linked to a location directive, and therefore helps ensure that the warehouse work is processed in the correct location in the warehouse.</span></span>

<span data-ttu-id="bdb77-128">您可以设置查询来控制什么时候使用一个特定的工作模板。</span><span class="sxs-lookup"><span data-stu-id="bdb77-128">You can set up a query to control when a particular work template is used.</span></span> <span data-ttu-id="bdb77-129">例如，您可以设置限制，以便特定模板只能在特定仓库中用于工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-129">For example, you can set a limitation so that a particular template can be used for work only in a specific warehouse.</span></span> <span data-ttu-id="bdb77-130">或者，您可以根据销售来源，具有创建出站销售订单处理的工作的若干模板。</span><span class="sxs-lookup"><span data-stu-id="bdb77-130">Alternatively, you might have several templates that create work for outbound sales order processing, depending on the sales origin.</span></span> <span data-ttu-id="bdb77-131">系统使用 **序列号** 字段确定可用工作模板在其中评估的订单。</span><span class="sxs-lookup"><span data-stu-id="bdb77-131">The system uses the **Sequence number** field to determine the order that the available work templates are assessed in.</span></span> <span data-ttu-id="bdb77-132">因此，如果您具有特定工作模板的非常详细的查询，应为其指定小序列号。</span><span class="sxs-lookup"><span data-stu-id="bdb77-132">Therefore, if you have a very specific query for a particular work template, you should give it a low sequence number.</span></span> <span data-ttu-id="bdb77-133">然后，该查询在其他更为一般的查询前进行评估。</span><span class="sxs-lookup"><span data-stu-id="bdb77-133">That query will then be evaluated before the other, more general queries.</span></span>

> [!NOTE]
> <span data-ttu-id="bdb77-134">若要防止系统在模板已删除后自动覆盖工作模板 *序列号*，请打开 [功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)中的 *删除时保留工作模板序列号* 功能。</span><span class="sxs-lookup"><span data-stu-id="bdb77-134">To prevent the system from automatically overwriting work template *sequence numbers* after a template has been deleted, turn on the *Preserve work template sequence numbers on delete* feature in [Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md).</span></span>

<span data-ttu-id="bdb77-135">若要停止或暂停工作流程，您可以在工作行使用 **停止工作** 设置。</span><span class="sxs-lookup"><span data-stu-id="bdb77-135">To stop or pause a work process, you can use the **Stop work** setting on the work line.</span></span> <span data-ttu-id="bdb77-136">在这种情况下，执行工作的工作人员将不会被要求执行下一工作行步骤。</span><span class="sxs-lookup"><span data-stu-id="bdb77-136">In that case, the worker who is performing the work won't be asked to perform the next work line step.</span></span> <span data-ttu-id="bdb77-137">若要移至下一个步骤，该工作人员或其他工作人员必须再次选择该工作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-137">To move on to the next step, that worker or another worker must select the work again.</span></span> <span data-ttu-id="bdb77-138">您还可以通过在工作模板行使用不同的 *工作类 ID* 来在一项工作内分离任务。</span><span class="sxs-lookup"><span data-stu-id="bdb77-138">You can also separate the tasks within a piece of work by using a different *work class ID* on the work template lines.</span></span>

## <a name="location-directives"></a><span data-ttu-id="bdb77-139">位置指令</span><span class="sxs-lookup"><span data-stu-id="bdb77-139">Location directives</span></span>

<span data-ttu-id="bdb77-140">库位指令是帮助标识领料和使位置用于库存移动的规则。</span><span class="sxs-lookup"><span data-stu-id="bdb77-140">Location directives are rules that help identify pick and put locations for inventory movement.</span></span> <span data-ttu-id="bdb77-141">例如，在销售订单交易记录中，位置指令决定在何处领物料，及将已领的物料放置在何处。</span><span class="sxs-lookup"><span data-stu-id="bdb77-141">For example, in a sales order transaction, a location directive determines where the items will be picked, and where the picked items will be put.</span></span> <span data-ttu-id="bdb77-142">库位指令包括标题和关联行，您在 **库位指令** 页上创建它们。</span><span class="sxs-lookup"><span data-stu-id="bdb77-142">Location directives consist of a header and associated lines, and you create them on the **Location directives** page.</span></span>

<span data-ttu-id="bdb77-143">在标题上，必须将每个库位指令与指定指令将用于的库存交易记录类型的 *工作订单类型* 关联，如销售订单、补货或原材料领取。</span><span class="sxs-lookup"><span data-stu-id="bdb77-143">On the header, each location directive must be associated with a *work order type* that specifies the type of inventory transaction that the directive will be used for, such as sales orders, replenishment, or raw material picking.</span></span> <span data-ttu-id="bdb77-144">*工作类型* 指定库位指令是否将用于领取或放置工作，或者用于某些其他仓库流程，如盘点或库存状态更改。</span><span class="sxs-lookup"><span data-stu-id="bdb77-144">The *work type* specifies whether the location directive will be used for picking or putting work, or for some other warehouse process, such as counting or inventory status changes.</span></span> <span data-ttu-id="bdb77-145">您还必须指定 *站点* 和 *仓库*。</span><span class="sxs-lookup"><span data-stu-id="bdb77-145">You must also specify a *site* and a *warehouse*.</span></span> <span data-ttu-id="bdb77-146">您在标题上指定的 *指令代码* 可以用于将库位指令与一个或多个工作模板链接。</span><span class="sxs-lookup"><span data-stu-id="bdb77-146">A *directive code* that you specify on the header can be used to link the location directive to one or more work templates.</span></span> 

<span data-ttu-id="bdb77-147">关于工作模板，您可以设置查询以确定什么时候使用特定库位指令。</span><span class="sxs-lookup"><span data-stu-id="bdb77-147">As for work templates, you can set up a query to determine when a particular location directive is used.</span></span> <span data-ttu-id="bdb77-148">例如，您可以指定在电子商务为销售订单的来源时，必须从仓库中的专用区领取库存。</span><span class="sxs-lookup"><span data-stu-id="bdb77-148">For example, you can specify that when e-commerce is the origin of a sales order, the inventory must be picked up from a dedicated area in the warehouse.</span></span> <span data-ttu-id="bdb77-149">系统使用 **序列号** 字段确定可用库位指令在其中评估的订单。</span><span class="sxs-lookup"><span data-stu-id="bdb77-149">The system uses the **Sequence number** field to determine the order that the available location directives are assessed in.</span></span>

<span data-ttu-id="bdb77-150">库位指令行设置对库位查找规则应用的其他限制。</span><span class="sxs-lookup"><span data-stu-id="bdb77-150">The location directive lines set additional restrictions on the application of the location finding rules.</span></span> <span data-ttu-id="bdb77-151">您可以指定该指令应该用于的最小数量和最大数量，并且，您可以指定该指令应该针对特定库存单位。</span><span class="sxs-lookup"><span data-stu-id="bdb77-151">You can specify a minimum quantity and a maximum quantity that the directive should apply to, and you can specify that the directive should be for a specific inventory unit.</span></span> <span data-ttu-id="bdb77-152">例如，如果度量单位为托盘，则可将托盘中的物料放入指定位置中。</span><span class="sxs-lookup"><span data-stu-id="bdb77-152">For example, if the unit of measure is pallets, the items in pallets can be put in a specific location.</span></span> <span data-ttu-id="bdb77-153">您还可以指定数量是否可以跨多个库位拆分。</span><span class="sxs-lookup"><span data-stu-id="bdb77-153">You can also specify whether the quantity can be split across multiple locations.</span></span> <span data-ttu-id="bdb77-154">与库位指令标题相似，每个库位指令具有一个确定在其中评估行的订单的序列号。</span><span class="sxs-lookup"><span data-stu-id="bdb77-154">Like the location directive header, each location directive line has a sequence number that determines the order that the lines are assessed in.</span></span>

<span data-ttu-id="bdb77-155">库位指令有一个附加的详细级别：*库位指令操作*。</span><span class="sxs-lookup"><span data-stu-id="bdb77-155">Location directives have one additional level of detail: *location directive actions*.</span></span> <span data-ttu-id="bdb77-156">您可以为每个行定义多个库位指令操作。</span><span class="sxs-lookup"><span data-stu-id="bdb77-156">You can define multiple location directive actions for each line.</span></span> <span data-ttu-id="bdb77-157">同样，序列号用于确定在其中评估操作的订单。</span><span class="sxs-lookup"><span data-stu-id="bdb77-157">Once again, a sequence number is used to determine the order that the actions are assessed in.</span></span> <span data-ttu-id="bdb77-158">在此级别，您可以设置查询以定义如何找到仓库内的最佳库位。</span><span class="sxs-lookup"><span data-stu-id="bdb77-158">On this level, you can set up a query to define how to find the best location in the warehouse.</span></span> <span data-ttu-id="bdb77-159">您还可以使用预定义的 **策略** 设置查找最佳位置。</span><span class="sxs-lookup"><span data-stu-id="bdb77-159">You can also use predefined **Strategy** settings to find an optimal location.</span></span>

<span data-ttu-id="bdb77-160">有关如何创建和配置位置指令的详细信息，请参阅[创建位置指令](create-location-directive.md)。</span><span class="sxs-lookup"><span data-stu-id="bdb77-160">For more information about how to create and configure location directives, see [Create a location directive](create-location-directive.md).</span></span>

### <a name="how-location-directives-work"></a><span data-ttu-id="bdb77-161">库位指令的工作原理</span><span class="sxs-lookup"><span data-stu-id="bdb77-161">How location directives work</span></span>

<span data-ttu-id="bdb77-162">库位指令确定应在 *哪里* 领取物料以及应将它们存放在 *哪里*。</span><span class="sxs-lookup"><span data-stu-id="bdb77-162">Location directives determine *where* items should be picked and *where* they should be put.</span></span> <span data-ttu-id="bdb77-163">系统针对每个工作行评估库位指令，然后根据工作行详细信息选择一个库位。</span><span class="sxs-lookup"><span data-stu-id="bdb77-163">The system evaluates a location directive against each work line and then selects a location, based on the work line details.</span></span> <span data-ttu-id="bdb77-164">首先，系统查找与特定工作行匹配的所有库位指令（例如，它们适用于正确的仓库并与查询匹配）。</span><span class="sxs-lookup"><span data-stu-id="bdb77-164">The system first finds all location directives that match a particular work line (for example, they are for the correct warehouse and match the query).</span></span> <span data-ttu-id="bdb77-165">然后，它按顺序评估找到的指令。</span><span class="sxs-lookup"><span data-stu-id="bdb77-165">It then sequentially evaluates the directives that it has found.</span></span>

> [!NOTE]
> <span data-ttu-id="bdb77-166">在特殊情况下，会预先选择领料位置或存放位置。</span><span class="sxs-lookup"><span data-stu-id="bdb77-166">There are special cases where the pick location or put location is pre-selected.</span></span> <span data-ttu-id="bdb77-167">例如，在 _采购登记_ 期间，第一个领料始终从进行登记的库位开始。</span><span class="sxs-lookup"><span data-stu-id="bdb77-167">For example, during _purchase registration_, the first pick is always from the location where the registration occurs.</span></span> <span data-ttu-id="bdb77-168">另一个示例是 *通过模板库存变动*，仓库工作人员选择领料库位，并且仅通过库存指令找到存放库存。</span><span class="sxs-lookup"><span data-stu-id="bdb77-168">Another example is *inventory movement by template*, where the warehouse worker selects the pick location, and only the put locations are found through location directives.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="bdb77-169">其他资源</span><span class="sxs-lookup"><span data-stu-id="bdb77-169">Additional resources</span></span>

- <span data-ttu-id="bdb77-170">视频：[仓库管理配置深入探索](https://community.dynamics.com/365/b/techtalks/posts/warehouse-management-configuration-deep-dive-october-14-2020)</span><span class="sxs-lookup"><span data-stu-id="bdb77-170">Video: [Warehouse management configuration deep dive](https://community.dynamics.com/365/b/techtalks/posts/warehouse-management-configuration-deep-dive-october-14-2020)</span></span>
- <span data-ttu-id="bdb77-171">帮助主题：[创建库位指令](create-location-directive.md)</span><span class="sxs-lookup"><span data-stu-id="bdb77-171">Help topic: [Create location directives](create-location-directive.md)</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]