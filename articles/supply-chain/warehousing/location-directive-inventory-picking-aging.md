---
title: 库位指令库存领料帐龄
description: 本主题说明在领料过程中如何使用先进先出 (FIFO) 和后进先出 (LIFO) 位置指令策略。
author: Mirzaab
ms.date: 07/15/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSLocationProfile,WHSWorkTable,WHSWaveTableListPage
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-15
ms.dyn365.ops.version: 10.0.8
ms.openlocfilehash: 229dd0033e3eae4bdd33acca6736b7a9feec8c9b
ms.sourcegitcommit: 9166e531ae5773f5bc3bd02501b67331cf216da4
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/03/2022
ms.locfileid: "8676262"
---
# <a name="location-directive-inventory-picking-aging"></a>库位指令库存领料帐龄

[!include [banner](../includes/banner.md)]

本主题说明在领料过程中如何使用先进先出 (FIFO) 和后进先出 (LIFO) 位置指令策略。 这些策略与为位置记录的帐龄日期结合用来跟踪库存初次进入仓库的时间。 *位置指令库存领料帐龄* 功能使用位置上的日期来确定帐龄。 *仓库位置状态* 功能根据牌照上的日期更新位置上的日期。

您可以使用 FIFO 和 LIFO 策略根据库存进入仓库的日期来装运批量跟踪物料和非批量跟踪物料。 此功能对于无法使用到期日期进行分类的非批量跟踪库存特别有用。

在仓库中初次收到或创建库存时，系统会更新相关牌照，以将当前日期显示为帐龄日期。 然后，位置指令策略会使用此日期来识别仓库中最旧或最新的库存。 如果将库存移动到牌照未跟踪的位置，该位置本身会使用帐龄信息更新，然后此策略将使用此信息。

## <a name="turn-on-the-feature"></a>开启功能

要使此功能可用，请在[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)中按此顺序打开以下功能：

1. 仓库库位状态
1. 库位指令库存领料帐龄

## <a name="feature-requirements"></a>功能要求

要使用此功能，必须将用于存储库存的每个 [位置模板](tasks/create-location-profile.md)的 **启用位置状态** 选项设置为 *是*。 要为位置模板设置此选项，请转到 **仓库管理 \> 设置 \> 仓库 \> 位置模板**，选择位置模板。 您可以在 **常规** 快速选项卡上找到此选项。

## <a name="feature-scenarios"></a>功能方案

本节提供演示如何设置和使用 FIFO 和 LIFO 策略的示例。

> [!TIP]
> 本节提供了两个方案，一种用于 FIFO，一种用于 LIFO。 所提供的过程假定您将按顺序执行这两个方案。 我们建议您两个方案全部执行，这样可以体验两个策略之间的差异。

### <a name="make-sample-data-available"></a>提供示例数据

若要使用此处指定的示例记录和值完成这些场景，使用的系统中必须已安装标准[演示数据](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)。 此外，开始前，还必须选择 **USMF** 法人。

您还可以将这些方案用作在生产系统上使用此功能的指导。 但是，如果是这样，您必须替换这里介绍的每个设置中的自己的值。

### <a name="set-up-the-scenarios"></a><a name="demo-set-up"></a>设置方案

演示数据需要设置并进行库存调整来支持方案。 请按照以下步骤创建演练 FIFO 和 LIFO 方案所需的库存数据。

1. 登录到安装了演示数据的系统，然后选择 **USMF** 法人。
1. 转到 **仓库管理 \> 设置 \> 仓库 \> 货位模板**。
1. 在操作窗格上，选择 **编辑**。
1. 在位置模板列表中，选择 **FLOOR-05**。
1. 在 **常规** 快速选项卡上，将 **启用位置状态** 选项设置为 *是*。
1. 选择 **保存**。
1. 转到 **库存管理 \> 设置 \> 位置指令**。
1. 在位置指令列表中，选择 **63 领料集装化**。
1. 选择 **编辑** 将页面设置为编辑模式。
1. 在 **位置指令操作** 快速选项卡上，找到 **序列号** 字段设置为 *1* 的行，然后执行以下步骤之一：

    - 如果您要设置 FIFO 方案，请将 **策略** 字段的值更改为 *位置帐龄 FIFO*。
    - 如果您要设置 LIFO 方案，请将 **策略** 字段的值更改为 *位置帐龄 LIFO*。

1. 在 **位置指令操作** 快速选项卡上，选择 **编辑查询**。
1. 在查询对话框的 **范围** 选项卡上，选择 **添加** 添加一行，然后设置以下值：

    - **表：** *位置*
    - **派生表**：*货位*
    - **字段：** *区域 ID*
    - **条件**：*场地*

1. 选择 **确定** 应用设置并关闭查询对话框。
1. 选择 **保存** 保存对位置指令的更改。
1. 在移动设备上或 PC 上的 *Dynamics 365 for Finance and Operations - 仓储* 应用中，按照以下步骤从仓库位置删除现有库存以支持方案：

    1. 使用适当的用户 ID 和密码登录到仓库 *63*。
    1. 在主菜单上，选择 **质量**。
    1. 在 **质量管理** 菜单上，选择 **报废**。
    1. 在 **报废** 页面上，选择 **位置/牌照** 字段，然后输入 *63\_1*。
    1. 选择 **Enter** 或 **确定**。
    1. 选择 **Enter** 或 **确定** 确认要 **调出** 的 **报废** 详细信息。

    调整完牌照库存后，您将收到“工作已完成”消息。

    在演示数据中，这些步骤将库存保留在两个位置。 每个位置有不同的帐龄日期。 位置 *FL-001* 的帐龄日期为 2017 年 4 月 15 日，位置 *FL-002* 的帐龄日期为 2017 年 1 月 29 日。 两个位置均包含物料 *A0001*。

    要查看此数据，请转到 **库存管理 \> 查询和报表 \> 现有量列表**，然后筛选仓库 *63* 和物料 *A0001*。 在 **位置** 字段设置为 *FL-001* 或 *FL-002* 的行中，选择 **实际库存** 值为正值的行，然后在“操作窗格”上，选择 **事务**。 **实际日期** 字段将显示与前面提到的帐龄日期之一对应的日期。

### <a name="scenario-1-set-up-and-use-fifo-location-aging"></a><a name="fifo-demo"></a>方案 1：设置和使用 FIFO 位置帐龄

FIFO 策略查找包含最早帐龄日期的位置，然后根据该帐龄日期分配领料。

1. 如果您还未进行此设置，请准备此方案所需的[示例数据](#demo-set-up)。
1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 选择 **新建**。
1. 在 **创建销售订单** 对话框中，设置以下值：

    - 在 **客户** 快速选项卡上，将 **客户帐户** 字段设置为 *US-001*。
    - 在 **常规** 快速选项卡上，将 **仓库** 字段设置为 *63*。

1. 选择 **确定** 创建销售订单，然后关闭对话框。
1. 将打开新销售订单。 它将在 **销售订单行** 快速选项卡上的网格中包含一个新的空行。 对于此订单行，将 **物料编号** 字段设置为 *A0001*，将 **数量** 字段设置为 *1*。
1. 在网格上方的 **库存** 菜单中，选择 **预留**。
1. 在 **预留** 页上，选择 **预留批次** 在选定仓库的库存中预留此物料的订购数量。
1. 关闭 **预留** 页面。
1. 在 **销售订单** 页面上的“操作窗格”上，在 **仓库** 选项卡上的 **操作** 组中，选择 **发放到仓库**。 您将收到信息性消息。 系统将创建一个装运，将其添加到新负荷，然后创建所需工作。
1. 在 **销售订单行** 快速选项卡上，在 **仓库** 菜单上，选择 **工作详细信息** 打开为此销售订单创建的工作。 请注意，**工作类型** 值为 *领料* 的行将显示 **位置** 值 *FL-002*。 此位置包含具有最早帐龄日期 (FIFO) 的牌照。
1. 选择 **仓库 \> 装运详细信息**。
1. 在 **常规** 快速选项卡上，记下波次 ID，以便在方案 2 中使用。

### <a name="scenario-2-set-up-and-use-lifo-location-aging"></a>方案 2：设置和使用 LIFO 位置帐龄

LIFO 策略查找包含最新帐龄日期的位置，然后根据该帐龄日期分配领料。 在方案 2 中，您将编辑方案 1 (FIFO) 的设置，并重用在该方案期间创建的销售订单和波次。

1. 在开始此方案之前，请按照[上一节](#fifo-demo)中所述设置并完成整个 FIFO 方案。 在此方案中，您将重用波次以及为该方案创建的大多数设置。
1. 编辑 **63 领料集装化** 位置指令，使其使用 *位置帐龄 LIFO* 策略，如[设置方案](#demo-set-up)过程的第一部分所述。

    接下来，您将修改在方案 1 中为销售订单创建的波次，使其使用 *位置帐龄 LIFO* 策略。

1. 转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。
1. 选择并打开包含您为 FIFO 方案创建的订单的波次。
1. 在“操作窗格”上的 **工作** 选项卡上，选择 **取消** 取消为 FIFO 方案创建的工作。
1. 在“操作窗格”的 **波次** 选项卡的 **波次** 组中，选择 **处理**。
1. 处理完成后，在“操作窗格”上的 **波次** 选项卡上，在 **相关信息** 组中，选择 **工作** 打开为此波次创建的工作。
1. 在 **工作** 页面上的 **概览** 选项卡上，应该有两行。 选择 **工作状态** 字段设置为 *打开* 的行。
1. 请注意，**工作类型** 值为 *领料* 的行将显示 **位置** 值 *FL-001*。 此位置包含具有最新帐龄日期 (LIFO) 的牌照。

在这些方案中，您已经看到了位置帐龄策略如何根据所选策略，将工作定向到具有最早库存或最新库存的库存位置。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]