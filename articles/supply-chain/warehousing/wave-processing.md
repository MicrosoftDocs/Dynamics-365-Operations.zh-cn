---
title: 波次创建和处理
description: 本主题介绍如何创建、处理和发放波次来创建负荷、装运、生产订单或看板订单的领料工作。
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSWaveTemplateTable, WHSParameters, whswavetablecreatenew, WHSWaveTable, WHSWaveAttributes, WHSKanbanWaveTable, WHSWaveTableListPage, WHSKanbanWaveTableListPage, WHSProdWaveTable
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: 36e1bd7f88a27b2da0672bf9d9ecb1e217fc44d3
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "5813643"
---
# <a name="wave-creation-and-processing"></a>波次创建和处理

[!include [banner](../includes/banner.md)]

本主题介绍如何创建、处理和发放波次来创建负荷、装运、生产订单或看板订单的领料工作。 您可以为以下类型的订单创建波次：

- **销售订单** – 使用装运波次来包括销售订单中的行。 在销售订单发放到仓库时，销售订单行可以包括在波次中。
- **生产订单** – 使用生产波次来包括产品的物料清单 (BOM) 中的行。
- **看板订单** – 看板波次包括看板订单中的领料单行。

对于销售订单和看板订单，在订单发放到仓库前，必须预留库存。 否则，无法在波次中处理物料或分配行。 但是，生产订单稍微更加灵活。 对于生产订单，可以选择以下任意选项：

- 需要预留所有物料，然后才能将订单发放到仓库。
- 尽管无法预留所有物料，仍允许将生产订单发放到仓库。 如果选择此选项，则当附加材料变为可用时必须手动重复对仓库流程的发放。 例如，如果您有开始生产所需的物料，并且可以等待附加物料变为可用，这很有用。

您可以通过使用 **生产控制参数** 页面上的 **物料预留要求** 字段，指定要使用哪些生产订单选项。 但是，您可以根据需要更改每个特定生产订单的设置。 有关详细信息，请参阅[波次处理的仓库参数](wave-warehouse-parameters.md)。

## <a name="create-and-process-a-wave"></a>创建和处理波次

下图显示了如何创建、处理和发放装运波次的流。 这些编号对应于本部分后面的部分。

![创建波次的流程](media/wave-processing-diagram.png "创建波次的流程")

### <a name="prerequisites"></a>先决条件

在开始之前，波次模板必须可用于要创建的波次类型（装运、生产或看板）。 波次模板确定将如何生成和处理波次的许多设置，包括必须手动和自动完成哪些步骤。 有关详细信息，请参阅[波次模板](wave-templates.md)。

### <a name="create-a-wave"></a>创建波次

#### <a name="automatically-create-waves-based-on-warehouse-and-order-type"></a>根据仓库和订单类型自动创建波次

若要自动创建波浪，请设置适用于每个相关订单类型和仓库的[波次模板](wave-templates.md)。 确保每个模板都将 **自动波次创建** 选项设置为 *是*。

#### <a name="manually-create-waves"></a>手动创建波次

若要手动创建波次，请按照下列步骤操作：

1. 确保相关[波次模板](wave-templates.md)没有设置为自动为仓库和订单类型创建波次，因为您希望手动创建。
1. 根据要创建的波次类型，执行以下操作之一：

    - 转到 **仓库管理** \> **通用** \> **波次** \> **装运波次** \> **所有波次**。 在操作窗格上，选择 **波次**。
    - 转到 **仓库管理** \> **通用** \> **波次** \> **生产波次** \> **所有生产波次**。 在操作窗格上，选择 **生产波次**。
    - 转到 **仓库管理** \> **通用** \> **波次** \> **看板波次** \> **所有看板波次**。 在操作窗格上，选择 **创建波次**。

1. 在 **描述** 字段中，输入波次的简短描述。 这应该表明您在波次中处理的内容。

1. 在 **波次模板名称** 字段中，为要创建的波次类型选择波次模板。 波次模板包含执行诸如为波次创建工作等操作的波次方法。 例如，装运波次的波次模板可以包含用于创建负荷、将行分配到波次、补货和为波次创建领料工作的方法。

1. 如果您想要将波次属性用作波次的附加查询条件，请在 **波次属性** 字段中选择属性。

### <a name="specify-what-to-include-in-a-wave"></a>指定要包括在波次中的内容

创建波次后，可以开始向其中添加内容。

> [!NOTE]
> 如果需要，只要尚未发放，即可在处理后向波次添加行。

#### <a name="automatically-specify-what-to-include-in-a-wave"></a>自动指定要包括在波次中的内容

若要自动创建波浪，请设置适用于每个相关订单类型和仓库的[波次模板](wave-templates.md)。 确保每个模板都将 **自动波次创建** 选项设置为 *是*。 另外，如果 **分配给未结波次** 选项设置为 *是*，您的模板可以自动将行分配给任何符合条件的未结波次。

#### <a name="manually-specify-what-to-include-in-a-wave"></a>手动指定要包括在波次中的内容

创建了波次但尚未发布时，您可以手动指定要包括在其中的内容。 若要手动将行添加到波次：

1. 根据要将行添加到的波次类型，执行以下操作之一：

    - 转到 **仓库管理** \> **通用** \> **波次** \> **装运波次** \> **所有波次**。 在操作窗格上，选择 **波次**。
    - 转到 **仓库管理** \> **通用** \> **波次** \> **生产波次** \> **所有生产波次**。 在操作窗格上，选择 **生产波次**。
    - 转到 **仓库管理** \> **通用** \> **波次** \> **看板波次** \> **所有看板波次**。 在操作窗格上，选择 **创建波次**。

1. 选择波次。 在操作窗格上，选择以下项之一：

      - **维护装运**
      - **维护生产**
      - **维护看板作业领料单**

1. 在窗口的上半部分中，选择要添加到波次的行，然后选择 **添加到波次** 。 该行将移动到 **波次行** 快速选项卡。

    针对要添加的每个行重复此步骤。 若要添加所有行，请选择 **全部添加**。

    > [!TIP]
    > 对于装运波次，您可以通过在 **波次筛选器代码** 字段中选择自定义筛选器来快速查找特定订单。 波次筛选器代码包含在 **波次筛选器** 窗体中创建的装运的查询条件。 此字段对生产波次或看板波次不可用。
    > **在波次上** 列中的绿色复选标记指示该装运已添加到波次。

### <a name="process-the-wave-to-create-the-picking-work"></a>处理波次以创建领料工作

在波次已创建并包含所有所需的行之后，您可以处理它以创建相应的领料工作。

#### <a name="automatically-process-a-wave"></a>自动处理波次

若要自动处理波次，请使用所需的自动处理选项设置相关的[波次模板](wave-templates.md)。

#### <a name="manually-process-a-wave"></a>手动处理波次

仅在 **波次状态** 为 *已创建* 时才能处理波次。 处理完波次后，**波次状态** 将更改为 *预留*。

若要手动处理具有所有所需内容的波次，请按照下列步骤操作：

1. 根据要处理的波次类型，执行以下操作之一：

    - 选择 **仓库管理** \> **通用** \> **波次** \> **装运波次** \> **所有波次**。 在操作窗格上，选择 **波次**。
    - 选择 **仓库管理** \> **通用** \> **波次** \> **生产波次** \> **所有生产波次**。 在操作窗格上，选择 **生产波次**。
    - 选择 **仓库管理** \> **通用** \> **波次** \> **看板波次** \> **所有看板波次**。 在操作窗格上，选择 **创建波次**。

1. 选择要处理的波次。 在“操作窗格”上，选择 **流程**。

### <a name="release-the-wave-to-the-warehouse-to-start-picking-and-packing"></a>将波次发放到仓库以开始领料和包装

您必须先处理波次，然后才能发放它。 发放波次后，即可在仓库中进行领料工作。 您可以在发放波次后将其取消，添加更多行，但无法更改行。

#### <a name="automatically-release-a-wave"></a>自动发放波次

若要自动处理波次，请使用所需的自动处理选项设置相关的[波次模板](wave-templates.md)。

#### <a name="manually-release-a-wave"></a>手动发放波次

若要手动发放波次，请按照下列步骤操作：

1. 根据要发放的波次类型，执行以下操作之一：

      - 选择 **仓库管理** \> **通用** \> **波次** \> **装运波次** \> **所有波次**。 在操作窗格上，选择 **波次**。
      - 选择 **仓库管理** \> **通用** \> **波次** \> **生产波次** \> **所有生产波次**。 在操作窗格上，选择 **生产波次**。
      - 选择 **仓库管理** \> **通用** \> **波次** \> **看板波次** \> **所有看板波次**。 在操作窗格上，选择 **创建波次**。

1. 选择要发放的波次。 在操作窗格上，选择 **发放波次**。

## <a name="containerize-a-wave"></a>集装化波次

在处理波次时，自动集装化创建集装箱和装运的领料工作。 有关如何设置的详细信息，请参阅[集装化](wave-containerization.md)。

## <a name="work-with-the-scheduled-work-creation"></a>使用计划工作创建

启用 *计划工作创建* 功能后，波次处理将创建计划工作，其最终将由新工作创建流程使用。 在创建工作期间，将使用 *组织范围内的工作锁定* 功能来阻止工作。 有关详细信息，请参阅[在波次期间计划工作创建](configure-wave-schedule-work-creation.md)。

以下流程图显示了波次处理期间计划工作是如何创建的。

![计划工作创建](media/schedule-work-creation-process.png)

### <a name="planned-work"></a>计划的工作

**计划工作详细信息** 页面（**仓库管理 \> 工作 \> 计划工作详细信息**）显示有关计划工作的信息，此信息最初在波次处理期间创建。 提供以下 **流程状态** 值：

- **已排队** - 计划工作正在等待用于创建工作。
- **已完成** - 计划工作已用于创建工作。
- **失败** – 波次处理失败。 请注意，无论是否有相关的实际工作，计划工作都可能处于 **失败** 状态。 当实际工作创建流程失败时，实际工作保持 *已取消* 状态。

### <a name="batch-job-for-the-work-creation-process"></a>工作创建流程的批处理作业

要查看处理波次的批处理作业，在 **所有波次** 页上的操作窗格中选择 **批处理作业**。

从这里，您可以查看每个批处理作业 ID 的所有批处理任务详细信息。

## <a name="cancel-a-wave"></a>取消波次

如果需要，您可以取消已处理的波次。 若要取消波次和已创建的领料工作，请按照下列步骤操作：

1. 根据要取消的波次类型，执行以下操作之一：

      - 转到 **仓库管理** \> **通用** \> **波次** \> **装运波次** \> **所有波次**。
      - 转到 **仓库管理** \> **通用** \> **波次** \> **生产波次** \> **所有生产波次**。
      - 转到 **仓库管理** \> **通用** \> **波次** \> **看板波次** \> **所有看板波次**。

1. 选择要取消的波次。 在操作窗格上的 **工作** 选项卡上，选择 **取消**。

## <a name="review-wave-batch-job-details"></a>查看波次批处理作业详细信息

使用 **波次批处理作业详细信息** 页面以检查与任何波次关联的批处理作业和相关任务。 这对于解决已失败的波次特别有用。 如果没有此功能，通常只有管理员才能访问批处理作业详细信息。 **波次批处理作业详细信息** 页面可以供非管理员用户使用，并提供批处理作业和相关任务的只读视图。

### <a name="enable-the-wave-batch-job-details-page"></a>启用波次批处理作业详细信息页面

如果您的系统尚未包括 **波次批处理作业详细信息** 页面，转到 [功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)并打开 *波次批处理作业详细信息* 功能。

### <a name="use-the-wave-batch-job-details-page"></a>使用波次批处理作业详细信息页面

**波次批处理作业详细信息** 页面将批处理作业和批处理作业任务相结合，使您可以调查所有波次步骤，无需在单个批处理作业和批处理任务列表之间来回导航。 该页面还提供对批处理日志的访问权限，如果您具有必需的权限，则提供指向 **批处理作业** 页面的链接。

若要打开此页面，请在几个不同的波次页面的任一页面上选择波次，然后从操作窗格中选择 **波次批处理作业详细信息**。

## <a name="review-load-validation-and-error-messages"></a>查看负荷验证和错误消息

在波次处理期间，系统会验证并显示波次中每个负荷行的状态。 如果没有出现警告，则继续下一个波次步骤。 如果确实出现警告，在完成验证整个波次后，将改为显示以下错误：

> 在波次中找到了无效的负荷行。 请删除无效的负荷行。

然后，您可以查看波次中每个负荷行的最终状态，并在再次尝试之前更正所有警告。 这使您可以在重新处理波次之前，立即解决所有警告。 （在以前的版本中，系统在第一个警告之后停止处理波次，因此您一次只能修复一个警告。）

系统显示波次处理状态消息的方式取决于您如何设置 **仓库管理参数** 页面上的 **创建波次处理历史记录日志** 选项。

- 当 **创建波次处理历史记录日志** 设置为 *否* 时，负荷行状态消息显示在 **信息日志** 中。
- 当 **创建波次处理历史记录日志** 设置为 *是* 时，负荷行状态消息显示在 **波次处理历史记录日志** 页面上。 若要查看日志，请转到 **仓库管理 \> 出库波次 \> 波次处理历史记录日志**。

## <a name="additional-resources"></a>其他资源

- [配置波次处理示例](tasks/configure-wave-processing.md)
- [波次模板](wave-templates.md)
- [集装化](wave-containerization.md)