---
title: 波次分配
description: 本主题介绍如何设置波次分配步骤，包括如何对其进行并行处理。
author: Mirzaab
ms.date: 03/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-03-08
ms.dyn365.ops.version: Release 10.0.18
ms.openlocfilehash: b01de3c9f1cbcb24abc2b5a0c91db7f0791020bf
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/11/2021
ms.locfileid: "6018995"
---
# <a name="wave-allocation"></a><span data-ttu-id="a41bd-103">波次分配</span><span class="sxs-lookup"><span data-stu-id="a41bd-103">Wave allocation</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="a41bd-104">波次处理可能很耗时，并且大部分处理时间都花费在分配步骤和工作创建步骤中。</span><span class="sxs-lookup"><span data-stu-id="a41bd-104">Wave processing can be time consuming, and most of the processing time is spent in the allocation step and in the work creation step.</span></span>

<span data-ttu-id="a41bd-105">现在可以并行运行其中每个步骤，这可以提高波次处理的性能，并允许在同一仓库中实现更大的波次吞吐量。</span><span class="sxs-lookup"><span data-stu-id="a41bd-105">It is now possible to run each of these steps in parallel, which can improve the performance of the wave processing, and allow for a larger throughput of waves in the same warehouse.</span></span> <span data-ttu-id="a41bd-106">本主题说明如何设置波次分配方法以并行运行。</span><span class="sxs-lookup"><span data-stu-id="a41bd-106">This topic explains how to set up the wave allocation method to run in parallel.</span></span> <span data-ttu-id="a41bd-107">有关如何设置工作创建以并行运行的详细信息，请参阅[在波次期间计划工作创建](configure-wave-schedule-work-creation.md)。</span><span class="sxs-lookup"><span data-stu-id="a41bd-107">For more information about how to set up work creation to run in parallel, see [Schedule work creation during wave](configure-wave-schedule-work-creation.md).</span></span>

<span data-ttu-id="a41bd-108">以前，一次只能在一个仓库中分配一个波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-108">Previously it was only possible to allocate one wave at a warehouse at a time.</span></span> <span data-ttu-id="a41bd-109">此约束已删除并替换为新约束，即仅锁定在预留层次结构中库位上方的物料和维度。</span><span class="sxs-lookup"><span data-stu-id="a41bd-109">This constraint has been removed and replaced by a new constraint that only locks the item and dimensions that are above location in the reservation hierarchy.</span></span> <span data-ttu-id="a41bd-110">库位上方的维度始终包括产品维度。</span><span class="sxs-lookup"><span data-stu-id="a41bd-110">Dimensions above the location always include product dimensions.</span></span> <span data-ttu-id="a41bd-111">例如，如果使用 *颜色* 配置物料，则可以并行处理 *红*、*蓝* 和 *黄* 的变量。</span><span class="sxs-lookup"><span data-stu-id="a41bd-111">For example, if an item is configured using *Color*, then variants for *Red*, *Blue*, and *Yellow* could each be processed in parallel.</span></span>

<span data-ttu-id="a41bd-112">这意味着，如果按一个波次分配具有库位上方相同维度的同一物料，其他波次将必须等待获取对相同物料和维度的锁定。</span><span class="sxs-lookup"><span data-stu-id="a41bd-112">This means that if the same item with the same dimensions above the location is being allocated by one wave, other waves will have to wait to acquire a lock on the same item and dimensions.</span></span> <span data-ttu-id="a41bd-113">如果无法及时获取锁定，将发生错误，并且波次处理将失败。</span><span class="sxs-lookup"><span data-stu-id="a41bd-113">If the lock can't be acquired in a timely manner, an error will occur and the wave processing will fail.</span></span>

<span data-ttu-id="a41bd-114">为了利用并行处理，必须批量运行波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-114">In order to utilize parallel processing, the wave must run in batch.</span></span>

## <a name="performance-improvements"></a><span data-ttu-id="a41bd-115">性能改进</span><span class="sxs-lookup"><span data-stu-id="a41bd-115">Performance improvements</span></span>

<span data-ttu-id="a41bd-116">并行处理的性能优势可分为两类：</span><span class="sxs-lookup"><span data-stu-id="a41bd-116">Performance benefits of parallel processing fall in two categories:</span></span>

- <span data-ttu-id="a41bd-117">**提高吞吐量** - 即使未配置并行处理，波次的吞吐量通常也会提高，尤其是对于波次中的物料没有重叠的情况。</span><span class="sxs-lookup"><span data-stu-id="a41bd-117">**Improved throughput** - The throughput of waves will typically improve even if parallel processing isn't configured, especially for scenarios where there is no overlap of items within the waves.</span></span>
- <span data-ttu-id="a41bd-118">**改进单个波次的分配** - 在转换为并行分配后，对客户数据的测试表明性能提高了近 50％。</span><span class="sxs-lookup"><span data-stu-id="a41bd-118">**Improvement of the allocation for a single wave** - Testing on customer data has shown a near 50% performance improvement after switching to parallel allocation.</span></span> <span data-ttu-id="a41bd-119">并行处理根据库位上方的物料和维度完成，因此改进取决于波次包含多少个不同的物料、可用的基础结构以及分配的持续时间与工作创建的持续时间。</span><span class="sxs-lookup"><span data-stu-id="a41bd-119">The parallel processing is done per items and dimensions above the location, so the improvements depend on how many different items a wave contains, the infrastructure available, and the duration of the allocation versus the duration of the work creation.</span></span>

## <a name="configure-parallel-allocation"></a><span data-ttu-id="a41bd-120">配置并行分配</span><span class="sxs-lookup"><span data-stu-id="a41bd-120">Configure parallel allocation</span></span>

### <a name="warehouse-management-parameters"></a><span data-ttu-id="a41bd-121">仓库管理参数</span><span class="sxs-lookup"><span data-stu-id="a41bd-121">Warehouse management parameters</span></span>

<span data-ttu-id="a41bd-122">若要使用并行分配处理，请转到 **仓库管理 > 设置 > 仓库管理参数**，打开 **波次处理** 选项卡，然后进行以下设置：</span><span class="sxs-lookup"><span data-stu-id="a41bd-122">To use parallel allocation processing, go to **Warehouse management > Setup > Warehouse management parameters**, open the **Wave processing** tab, and make the following settings:</span></span>

- <span data-ttu-id="a41bd-123">**波次处理批处理组** - 选择波次的初始处理应使用的批处理组。</span><span class="sxs-lookup"><span data-stu-id="a41bd-123">**Wave processing batch group** - Select the batch group that the initial processing of the waves should use.</span></span> <span data-ttu-id="a41bd-124">可以使用不同的批处理组来完成分配的后续处理。</span><span class="sxs-lookup"><span data-stu-id="a41bd-124">The subsequent processing of allocation can be done using different batch groups.</span></span>
- <span data-ttu-id="a41bd-125">**批量处理波次** - 将此设置为 *是* 以使用并行处理。</span><span class="sxs-lookup"><span data-stu-id="a41bd-125">**Process waves in batch** - Set this to *Yes* to use parallel processing.</span></span>
- <span data-ttu-id="a41bd-126">**等待锁定(毫秒)** - 以毫秒为单位输入分配步骤等待由另一分配步骤锁定的系统资源的时间。</span><span class="sxs-lookup"><span data-stu-id="a41bd-126">**Wait for lock (ms)** - Enter the time, in milliseconds, that an allocation step will wait for a system resource that is locked by another allocation step.</span></span> <span data-ttu-id="a41bd-127">当超过该时间，将不处理波次，并且显示错误消息。</span><span class="sxs-lookup"><span data-stu-id="a41bd-127">When this time is exceeded, the wave is not processed and an error message is displayed.</span></span> <span data-ttu-id="a41bd-128">我们建议您至少等待几秒钟，以允许完成一个逻辑单元的分配。</span><span class="sxs-lookup"><span data-stu-id="a41bd-128">We recommend that you allow at least a few seconds to allow for allocation of one logical unit to finish.</span></span>

<span data-ttu-id="a41bd-129">有关这些选项以及 **仓库管理参数** 页面上的其他波次处理选项的信息，请参阅[用于波次处理的仓库参数](wave-warehouse-parameters.md)。</span><span class="sxs-lookup"><span data-stu-id="a41bd-129">For information about these and other wave processing options on the **Warehouse management parameters** page, see [Warehouse parameters for wave processing](wave-warehouse-parameters.md).</span></span>

## <a name="wave-process-methods"></a><span data-ttu-id="a41bd-130">波次处理方法</span><span class="sxs-lookup"><span data-stu-id="a41bd-130">Wave process methods</span></span>

<span data-ttu-id="a41bd-131">若要设置并行处理：</span><span class="sxs-lookup"><span data-stu-id="a41bd-131">To set up parallel processing:</span></span>

1. <span data-ttu-id="a41bd-132">转到 **仓库管理 > 设置 > 波次 > 波次处理方法**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-132">Go to **Warehouse Management > Setup > Waves > Wave process methods**.</span></span>
1. <span data-ttu-id="a41bd-133">在网格中选择 `allocateWave` 方法。</span><span class="sxs-lookup"><span data-stu-id="a41bd-133">Select the `allocateWave` method in the grid.</span></span>
1. <span data-ttu-id="a41bd-134">在操作窗格上，选择 **任务配置**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-134">On the Action Pane, select **Task configuration**.</span></span>
1. <span data-ttu-id="a41bd-135">**波次过帐方法任务配置** 页面将打开。</span><span class="sxs-lookup"><span data-stu-id="a41bd-135">The **Wave post method task configuration** page opens.</span></span> <span data-ttu-id="a41bd-136">该网格列出配置了 `allocateWave` 方法的每个仓库。</span><span class="sxs-lookup"><span data-stu-id="a41bd-136">This grid lists each warehouse where you have configured the `allocateWave` method.</span></span> <span data-ttu-id="a41bd-137">并行处理将仅用于列出的仓库。</span><span class="sxs-lookup"><span data-stu-id="a41bd-137">Parallel processing will only be used for warehouses that are listed.</span></span> <span data-ttu-id="a41bd-138">根据需要使用“操作窗格”按钮从网格中添加或删除仓库。</span><span class="sxs-lookup"><span data-stu-id="a41bd-138">Use the Action Pane buttons to add or remove warehouses from the grid as needed.</span></span> 
1. <span data-ttu-id="a41bd-139">对于每个仓库，进行以下设置：</span><span class="sxs-lookup"><span data-stu-id="a41bd-139">For each warehouse, make the following settings:</span></span>
    - <span data-ttu-id="a41bd-140">**最大批处理任务数** - 指定应该用于为选定仓库分配的批处理任务数。</span><span class="sxs-lookup"><span data-stu-id="a41bd-140">**Maximum number of batch tasks** - Specify the number of batch tasks that should be used for the allocation for the selected warehouse.</span></span> <span data-ttu-id="a41bd-141">批处理任务的最佳数量取决于可用的基础结构以及服务器上正在处理的其他批处理作业。</span><span class="sxs-lookup"><span data-stu-id="a41bd-141">The optimal number of batch tasks depends on the infrastructure available and what other batch jobs are being processed on the server.</span></span> <span data-ttu-id="a41bd-142">在专用于波次处理的四个核心环境上完成的测试表明，使用八个任务可以产生良好的结果。</span><span class="sxs-lookup"><span data-stu-id="a41bd-142">Tests done on a four core environment that was dedicated to wave processing showed that using eight tasks produced good results.</span></span>
    - <span data-ttu-id="a41bd-143">**波次处理批处理组** - 特定的批处理组可用于不同的仓库，以允许按仓库横向扩展分配处理。</span><span class="sxs-lookup"><span data-stu-id="a41bd-143">**Wave processing batch group** - Specific batch groups can be used for different warehouses to allow the allocation processing to scale out per warehouse.</span></span>

## <a name="enable-or-disable-parallelization-across-all-legal-entities"></a><span data-ttu-id="a41bd-144">在所有法人中启用或禁用并行化</span><span class="sxs-lookup"><span data-stu-id="a41bd-144">Enable or disable parallelization across all legal entities</span></span>

<span data-ttu-id="a41bd-145">我们建议您设置 `allocateWave` 方法以在所有法人中并行运行，因为这有助于提高波次处理的性能。</span><span class="sxs-lookup"><span data-stu-id="a41bd-145">We recommend that you set the `allocateWave` method to run in parallel across all legal entities because this helps to improve the performance of the wave processing.</span></span> <span data-ttu-id="a41bd-146">从 Supply Chain Management 版本 10.0.17 开始，在默认情况下，为所有新的和更新的安装启用 *分配波次方法的波次并行化* 功能，并且无法再次关闭该功能。</span><span class="sxs-lookup"><span data-stu-id="a41bd-146">Starting in Supply Chain Management version 10.0.17, the *Wave parallelization for Allocate Wave method* feature is enabled by default for all new and updated installations, and can't be turned off again.</span></span> <span data-ttu-id="a41bd-147">启用此功能后，将发生以下情况：</span><span class="sxs-lookup"><span data-stu-id="a41bd-147">After enabling this feature, the following occurs:</span></span>

- <span data-ttu-id="a41bd-148">将更新 `allocateWave` 方法以包括任务配置设置，该设置使您可以使用 **波次处理方法** 页面定义将同时运行的任务数，这等于并行处理的数量。</span><span class="sxs-lookup"><span data-stu-id="a41bd-148">The `allocateWave` method is updated to include a task configuration setting that lets you use the **Wave process methods** page to define the number of tasks that will run simultaneously, equivalent to the number of parallel processes.</span></span> <span data-ttu-id="a41bd-149">因此，按大约等于任务数的系数减少了在分配波次步骤上使用的时间（通常为总处理时间的 30% 到 60%）。</span><span class="sxs-lookup"><span data-stu-id="a41bd-149">As a result, the time used on the allocate-wave step (which is typically 30% to 60% of the total processing time) is reduced by a factor roughly equivalent to the number of tasks.</span></span> <span data-ttu-id="a41bd-150">也可以选择要分配以处理这些任务的批次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-150">It's also possible to select which batch will be assigned to process these tasks.</span></span> <span data-ttu-id="a41bd-151">请务必注意，将所有法人配置为批量处理波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-151">It's important to note that all of your legal entities will be configured to process waves in batch.</span></span> <span data-ttu-id="a41bd-152">对于已配置为批量处理波次的仓库，以及对于已配置为并行使用 `allocateWave` 方法的仓库，将保留现有配置。</span><span class="sxs-lookup"><span data-stu-id="a41bd-152">For the warehouses that are already configured to process waves in batch, and for the warehouses that are already configured to use the `allocateWave` method in parallel, the existing configuration will be kept.</span></span>
- <span data-ttu-id="a41bd-153">默认情况下，所有新的法人都配置为批量处理波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-153">By default, all the new legal entities are configured to process waves in batch.</span></span> <span data-ttu-id="a41bd-154">启用了 **仓库管理流程** 选项的所有新仓库都将`allocateWave` 方法配置为在默认情况下并行运行。</span><span class="sxs-lookup"><span data-stu-id="a41bd-154">All new warehouses with the **Warehouse management processes** option enabled will have the `allocateWave` method configured to run in parallel by default.</span></span>
- <span data-ttu-id="a41bd-155">在 **仓库管理参数** 页面上，**批量处理波次** 设置为 *是*，**等待锁定(毫秒)** 设置为默认的 15 秒。</span><span class="sxs-lookup"><span data-stu-id="a41bd-155">On the **Warehouse management parameters** page, **Process saves in batch** is set to *Yes* and  **Wait for lock (ms)** set to a default 15 seconds.</span></span> <span data-ttu-id="a41bd-156">这意味着将批量执行所有波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-156">This means that all waves will be executed in batch.</span></span> <span data-ttu-id="a41bd-157">当波次运行时，它会在分配步骤中获取对库位上方的物料和维度的锁定。</span><span class="sxs-lookup"><span data-stu-id="a41bd-157">When a wave is running, it acquires a lock on the item and dimensions above location during the allocation step.</span></span> <span data-ttu-id="a41bd-158">当其他波次处理任务尝试为同一记录获取相同锁定时，它将被阻止，直到完成当前流程。</span><span class="sxs-lookup"><span data-stu-id="a41bd-158">When another wave processing task tries to acquire the same lock for the identical record, it is blocked until the current process is finished.</span></span> <span data-ttu-id="a41bd-159">**等待锁定(毫秒)** 设置确定释放锁定之前系统将等待的最长时间。</span><span class="sxs-lookup"><span data-stu-id="a41bd-159">The **Wait for lock (ms)** settings establishes the maximum time the system will wait before the lock is released.</span></span>

<span data-ttu-id="a41bd-160">并行分配处理需要批量运行波次处理。</span><span class="sxs-lookup"><span data-stu-id="a41bd-160">Parallel allocation processing requires wave processing to run in batch.</span></span> <span data-ttu-id="a41bd-161">因此，如果您关闭 **分批处理波次** 功能，将降低波次处理性能，尤其是在波次处理使用如相关波次方法的任务配置定义的并行处理时。</span><span class="sxs-lookup"><span data-stu-id="a41bd-161">Therefore, you will reduce your wave processing performance if you turn off the **Process saves in batch** setting, especially if wave processing is using a parallel process as defined by the task configuration for the relevant wave methods.</span></span>

<span data-ttu-id="a41bd-162">如有必要，您可以撤销在为您的实例自动启用 *分配波次方法的波次并行化* 功能时默认进行的每个设置。</span><span class="sxs-lookup"><span data-stu-id="a41bd-162">If necessary, you can undo each of the settings made by default when the *Wave parallelization for Allocate Wave method* feature is automatically enabled for your instance.</span></span> <span data-ttu-id="a41bd-163">若要实现此操作：</span><span class="sxs-lookup"><span data-stu-id="a41bd-163">To do this:</span></span>

- <span data-ttu-id="a41bd-164">转到 **仓库管理 \> 设置 \> 仓库管理参数**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-164">Go to **Warehouse management \> Setup \> Warehouse management parameters**.</span></span> <span data-ttu-id="a41bd-165">在 **波次处理** 选项卡上，应用 **分批处理波次** 和 **等待锁定(毫秒)** 的首选值。</span><span class="sxs-lookup"><span data-stu-id="a41bd-165">On the **Wave processing** tab, apply your preferred values for **Process waves in batch** and **Wait for lock (ms)**.</span></span>
- <span data-ttu-id="a41bd-166">转到 **仓库管理 \> 设置 \> 波次 \> 波次处理方法**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-166">Go to **Warehouse management \> Setup \> Waves \> Wave process methods**.</span></span> <span data-ttu-id="a41bd-167">选择 `allocateWave` 方法。</span><span class="sxs-lookup"><span data-stu-id="a41bd-167">Select the `allocateWave` method.</span></span> <span data-ttu-id="a41bd-168">在操作窗格上，选择 **任务配置** 以打开一个页面，其中列出了将方法设置为并行运行的每个仓库。</span><span class="sxs-lookup"><span data-stu-id="a41bd-168">On the Action Pane, select **Task configuration** to open a page that lists each warehouse where the method is set to run in parallel.</span></span> <span data-ttu-id="a41bd-169">根据需要修改或删除每个列出的仓库的批处理任务数和分配的波次组。</span><span class="sxs-lookup"><span data-stu-id="a41bd-169">Modify or delete the number of batch tasks and the assigned wave group for each listed warehouse as needed.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="a41bd-170">疑难解答</span><span class="sxs-lookup"><span data-stu-id="a41bd-170">Troubleshooting</span></span>

### <a name="troubleshoot-using-the-infolog"></a><span data-ttu-id="a41bd-171">使用信息日志进行故障排除</span><span class="sxs-lookup"><span data-stu-id="a41bd-171">Troubleshoot using the Infolog</span></span>

<span data-ttu-id="a41bd-172">因为使用了批处理框架，所以将捕获在波次处理期间发生的错误作为批处理作业信息日志的一部分。</span><span class="sxs-lookup"><span data-stu-id="a41bd-172">Because the batch framework is used, errors that occur during wave processing will be captured as part of the batch jobs Infologs.</span></span> <span data-ttu-id="a41bd-173">若要读取与波次相关的批处理作业：</span><span class="sxs-lookup"><span data-stu-id="a41bd-173">To read the batch jobs related to a wave:</span></span>

1. <span data-ttu-id="a41bd-174">转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-174">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="a41bd-175">选择要检查的波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-175">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="a41bd-176">在操作窗格上，打开 **波次** 选项卡，然后从 **波次** 组中，选择 **批处理作业**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-176">On the Action Pane, open the **Wave** tab and, from the **Wave** group, select **Batch jobs**.</span></span>

<span data-ttu-id="a41bd-177">波次处理将自动更正，因此应该使用信息日志报告在处理期间检测到的所有错误。</span><span class="sxs-lookup"><span data-stu-id="a41bd-177">Wave processing is self-correcting, so any error detected during processing should be reported using the Infolog.</span></span>

<span data-ttu-id="a41bd-178">与并行处理有关的一个典型错误可能是两个波次尝试同时分配相同的物料，一个波次未完成，因此另一个波次无法在指定时间内获取锁定。</span><span class="sxs-lookup"><span data-stu-id="a41bd-178">A typical error related to parallel processing could be that two waves try to allocate the same item at the same time and one does not complete so that the other wave is unable to acquire a lock within the specified time.</span></span> <span data-ttu-id="a41bd-179">如果发生这种情况，批处理作业日志将包含说明无法获取该物料的锁定的信息，在这种情况下，必须再次处理失败的波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-179">If this situation occurs, the batch jobs log will contain information stating that the lock for the item could not be acquired, in which case the wave that failed must be processed again.</span></span>

<span data-ttu-id="a41bd-180">因为并行进行处理，因此必须在不同的表中维护数据以跟踪处理的状态。</span><span class="sxs-lookup"><span data-stu-id="a41bd-180">Because the processing is happening in parallel, data must be maintained in different tables to track the state of the processing.</span></span> <span data-ttu-id="a41bd-181">这意味着批处理作业的日志可能包含错误，例如重复键错误。</span><span class="sxs-lookup"><span data-stu-id="a41bd-181">This means that the logs for the batch jobs might contain errors such as duplicate key errors.</span></span>

<span data-ttu-id="a41bd-182">批处理任务中的错误也是批处理作业日志的一部分。</span><span class="sxs-lookup"><span data-stu-id="a41bd-182">The errors from the batch tasks are also part of the batch jobs log.</span></span> <span data-ttu-id="a41bd-183">最重要的信息通常位于底部。</span><span class="sxs-lookup"><span data-stu-id="a41bd-183">The most important information is typically at the bottom.</span></span>

<span data-ttu-id="a41bd-184">在极少数情况下，例如，如果 SQL 连接结束，则波次处理可能会以不一致的状态结束，在该状态下批处理作业似乎正在运行，但处理已停止。</span><span class="sxs-lookup"><span data-stu-id="a41bd-184">In rare cases, for example if the SQL connection ended, it is possible for the wave processing to end in an inconsistent state where the batch job appears to be running but the processing is stopped.</span></span> <span data-ttu-id="a41bd-185">波次无法处理此类错误，因此在下一个波次运行时尝试完成清理失败的波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-185">The wave can't handle errors like this, so an attempt to clean up failed waves is done when the next wave runs.</span></span> <span data-ttu-id="a41bd-186">或者，如果当前波次处于不一致状态，请执行以下步骤：</span><span class="sxs-lookup"><span data-stu-id="a41bd-186">Alternatively, if the current wave is in an inconsistent state, perform the following steps:</span></span>

1. <span data-ttu-id="a41bd-187">转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-187">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="a41bd-188">选择需要清理的波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-188">Select the wave you need to clean up.</span></span>
1. <span data-ttu-id="a41bd-189">在操作窗格上，打开 **波次** 选项卡，然后在 **波次** 组中，选择 **清理波次数据**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-189">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Cleanup wave data**.</span></span>

### <a name="troubleshoot-using-the-wave-progress-log"></a><span data-ttu-id="a41bd-190">使用波次进度日志进行故障排除</span><span class="sxs-lookup"><span data-stu-id="a41bd-190">Troubleshoot using the wave progress log</span></span>

<span data-ttu-id="a41bd-191">如果在 **仓库管理参数** 页面上启用了 **创建波次进度日志** 选项，则在每次开始和结束分配物料及其维度时创建日志记录。</span><span class="sxs-lookup"><span data-stu-id="a41bd-191">If the **Create wave progress log** option is enabled on the **Warehouse management parameters** page, then a log record is created every time allocation for an item and its dimensions begins and ends.</span></span> <span data-ttu-id="a41bd-192">仅应在需要时（例如，在初始测试或故障排除期间）启用此日志。</span><span class="sxs-lookup"><span data-stu-id="a41bd-192">You should only enable this log when you need it, for example, during initial testing or for troubleshooting.</span></span> <span data-ttu-id="a41bd-193">启用此选项后，可以通过执行以下步骤查看日志：</span><span class="sxs-lookup"><span data-stu-id="a41bd-193">When this option is enabled, you can view the log by taking the following steps:</span></span>

1. <span data-ttu-id="a41bd-194">转到 **仓库管理 \> 出站波次 \> 装运波次 \> 所有波次**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-194">Go to **Warehouse management \> Outbound waves \> Shipment waves \> All waves**.</span></span>
1. <span data-ttu-id="a41bd-195">选择要检查的波次。</span><span class="sxs-lookup"><span data-stu-id="a41bd-195">Select the wave you want to inspect.</span></span>
1. <span data-ttu-id="a41bd-196">在操作窗格上，打开 **波次** 选项卡，然后在 **波次** 组中，选择 **进度**。</span><span class="sxs-lookup"><span data-stu-id="a41bd-196">On the Action Pane, open the **Wave** tab and, in the **Wave** group, select **Progress**.</span></span>
