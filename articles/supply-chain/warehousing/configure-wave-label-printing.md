---
title: 设置和使用波次标签打印
description: 本主题介绍了波次标签打印并解释了如何进行设置。
author: GarmMSFT
manager: PJacobse
ms.date: 05/01/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: WHSWaveLabel, WHSWaveLabelTemplate, WHSWaveLabelLayoutRow, WHSDocumentRouting, WHSWaveTableListPage, WHSPostMethod, WHSMobileDisplayWaveLabelListLookup, WHSWaveLabelType, WHSWaveLabelTemplateGroup, WHSDocumentRoutingLayout
audience: Application User
ms.reviewer: PJacobse
ms.search.region: Global
ms.author: kamaybac
ms.search.validFrom: yyyy-mm-dd
ms.dyn365.ops.version: 10.0.0
ms.openlocfilehash: a08f10c1f5c3ff5b9023f37614c4e113b3a6b30d
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/15/2021
ms.locfileid: "5211758"
---
# <a name="set-up-and-use-wave-label-printing"></a>设置和使用波次标签打印

[!include [banner](../includes/banner.md)]

波次标签打印通过引入新波次步骤方法提供另一种标签打印方法，让您可以在波次执行过程中直接从波次模板创建和打印标签。 因此，在工作人员在移动设备上运行工作订单之前，标签已经可用。 然后，工作人员可以在领料期间而不是领料后附上所需的标签。

波次标签打印使用 Zebra 编程语言 (ZPL) 来创建标签布局。 标签布局分为三个部分（页眉、主体和页脚），以允许具有重复结构的标签。 波次标签模板告诉系统要使用的标签布局。 用户可以指定使用哪台打印机。 他们还可以根据需要同时在多台打印机上打印标签。 **波次标签历史记录** 页面显示使用此设置创建的所有标签的记录。

您可以根据工作标题打印和逐份打印标签，可以为每个工作标题打印中断标签，还可以打印集装箱内容标签、外箱标签和其他类似标签。

> [!NOTE]
> 此功能不会替代基于文档路线的现有标签打印功能。

波次标签打印提供以下增强功能：

- 根据一个工作行上的货箱数量打印标签，无需使用集装化。 （“货箱”是在单位序列组行上指定的单位。）
- 打印几个不同的标签序列（例如，货箱和托盘标签）。
- 加入标签枚举（例如，1/124、2/124 ... 124/124），并定义枚举的范围（例如，工作行、负荷行或装运）。
- 在生成提单之前，在标签上创建和打印提单 ID。
- 为每个货箱创建唯一的系列货运集装箱代码 (SSCC)，并将其加入每个标签。
- 为提单 ID 和 SSCC 创建符合 GS1 的编号规则。
- 重新打印来自移动设备和富客户端的标签。
- 取消标签（例如，在领料短缺情景中），然后重新打印。
- 清除波次标签历史记录。
- 在文档路线布局和波次标签布局之间共享对文档路线布局的改进。 （有关详细信息，请参阅[牌照的文档路线布局](../warehousing/document-routing-layout-for-license-plates.md)）

这些增强功能让在安装货盘前为货箱附加标签更加高效。 它们特别有利于向那些通过分别扫描每个货箱自动确认订单收货的大型零售商发货的公司。

> [!NOTE]
> 您可以根据业务要求单独或组合实现本主题中介绍的配置方案。 您可以设计几个按顺序工作的波次标签模板（如方案 3 所示）。 例如，您可以使用方案 1 打印货箱标签，使用方案 2 打印托盘标签（如果存货的托盘在尺寸和构成方面不同）。

## <a name="turn-on-the-wave-label-printing-feature"></a>开启波次标签打印功能

*波次标签打印* 功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作区检查功能状态和开启功能（如果需要）。 在那里，此功能以以下方式列出：

- **模块**：*仓库管理*
- **功能名称**：*波次标签打印*

## <a name="scenario-1-wave-label-printing-where-a-single-wave-label-is-generated"></a>方案 1：生成单个波次标签的波次标签打印

此方案演示公司如何为通过分别扫描每个货箱来自动确认订单收货的大型零售商打印发货标签。

此方案演示端到端流。

### <a name="make-demo-data-available"></a>提供演示数据

要采取此方案，必须安装演示数据，并且必须选择 **USMF** 法人。

### <a name="make-sure-that-the-wave-label-method-is-available"></a>确保波次标签方法可用

您可能必须重新生成波次处理方法，才能使波次标签打印方法可用。

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次处理方法**。
1. 确认 **waveLabelPrinting** 在列表中。 如果不在，请在操作窗格中选择 **重新生成方法** 添加该方法。

### <a name="configure-a-wave-template"></a>配置波次模板

波次模板使您可以将波次方法的特定实例链接到相应的波次标签模板。

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次模板**。
1. 选择模板，如 **62 装运默认**。
1. 在 **方法** 快速选项卡上，将 **波次标签打印** 方法移至 **选定方法** 列。
1. 在 **选定方法** 列中，选择 **波次标签打印** 方法，并将其 **波次步骤代码** 字段设置为 *PrintLabel*。 有关波次步骤代码的详细信息，请参阅[波次步骤代码](wave-step-codes.md)。

### <a name="create-a-wave-label-layout"></a>创建波次标签布局

标签布局控制在标签上打印什么信息以及如何布置信息。在这里，您输入发送到打印机的 ZPL 代码。

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签布局**。
1. 创建一个具有以下设置的记录：

    - **标签布局 ID**：*Carton*
    - **描述**：*货箱 (SSCC)*

1. 在操作窗格上，选择 **保存**。
1. 在操作窗格上，选择 **波次标签行设置**。

    **波次标签行设置** 页面将出现。 在这里，您可以配置标签的动态部分。

1. 添加具有以下设置的行：

    - **行 ID**：*WaveLabel*
    - **行表名称**：*WHSWaveLabel*
    - **行开始位置**：*0*

        此字段定义行在标签上开始的垂直位置。

    - **行高度**：*0*

        此字段根据 ZPL 标准定义每行的高度（以磅为单位）。 行高度对于水平标签为正，对于垂直标签为负。 在此示例中因为只有一行，所以您可以将此值设置为 *0*（零）。

    - **每页行数**：*1*

        此字段定义可以在每个标签上打印的行数。

        > [!NOTE]
        > 使用此设置，将为波次标签表中的每个记录打印一个单独的 ZPL 标签。

1. 关闭该页面。
1. 在操作窗格上，选择 **编辑查询**。
1. 在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*工作类型*
    - **条件**：*领料*

    此查询可确保在标签上仅打印领料类型的工作行，不打印放置类型的工作行。

1. 如果您希望能够打印提单 ID，请在 **联接** 选项卡上，选择 **工作行** 表，然后将 **装运** 表与其联接。
1. 关闭查询编辑器对话框。
1. **打印机文本布局** 快速选项卡有三个部分，您可以在其中编写打印机代码：**页眉部分**、**主体部分** 和 **页脚部分**。 在 **页眉部分** 的 **标签页眉** 字段中，输入所需页眉的代码。 例如，如果您使用的是 Zebra 打印机，可以使用以下代码。

    ```plaintext
    CT~~CD,~CC^~CT~
    ^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR8,8~SD15^JUS^LRN^CI0^XZ
    ^XA
    ^MMT
    ^PW812
    ^LL1218
    ^LS0
    ^FT85,505^A0N,28,28^FH\^FD$WHSShipmentTable.CustomerReq$^FS
    ^FO1,173^GB809,0,1^FS
    ^FO0,391^GB809,0,1^FS
    ^FO3,599^GB809,0,2^FS
    ^FO420,176^GB0,216,1^FS
    ^FO313,3^GB0,169,1^FS
    ^FO0,807^GB809,0,1^FS
    ^FT529,370^A0N,28,26^FH\^FD$WHSShipmentTable.BillOfLadingId$^FS
    ^BY2,3,132^FT25,344^BCN,,N,N
    ^FD>:(420)>38102>63^FS
    ^FT526,315^A0N,28,28^FH\^FD ^FS
    ^FT437,248^A0N,28,28^FH\^FDCARR: $WHSShipmentTable.SCAC$^FS
    ^FT425,201^A0N,23,24^FH\^FDCARRIER:^FS
    ^FT17,68^A0N,20,19^FH\^FDIntershipping, Inc.^FS
    ^FT15,99^A0N,20,19^FH\^FD1000 Shipping Lane^FS
    ^FT16,158^A0N,20,19^FH\^FD ^FS
    ^FT438,368^A0N,28,28^FH\^FDB/L#^FS
    ^FT15,128^A0N,20,19^FH\^FDShelbyville TN 38102^FS
    ^FT19,203^A0N,23,24^FH\^FD(420) SHIP TO POSTAL CODE^FS
    ^FT331,39^A0N,28,28^FH\^FDShip To:^FS
    ^FT14,39^A0N,28,28^FH\^FDShip From:^FS
    ^FT331,67^A0N,23,24^FH\^FDWAL-MART DC 1111A-ABC DIS^FS
    ^FT330,98^A0N,23,24^FH\^FDDEPT 10^FS
    ^FT329,166^A0N,23,24^FH\^FDSpringfield TN 39021^FS
    ^FT330,134^A0N,23,24^FH\^FD100 Main Street^FS
    ^FT19,504^A0N,28,28^FH\^FDPO#:^FS
    ^FT437,316^A0N,28,28^FH\^FDPRO#^FS
    ^FT105,371^A0N,28,28^FB130,1,0,C^FH\^FD(420)39021^FS
    ```

1. 在 **主体部分** 的 **标签主体** 字段中，输入所需主体的 ZPL 代码。 下面是一个示例。

    ```plaintext
    <Row name="WaveLabel">
    ^FT127,439^A0N,28,28^FH\^FD$WHSWaveLabel.SeqNum$^FS
    ^FT256,439^A0N,28,28^FH\^FD$WHSWaveLabel.NumberOfLabels$^FS
    ^FT17,439^A0N,28,28^FH\^FDCARTON^FS
    ^FT522,422^A0N,23,24^FH\^FDVPN:^FS
    ^FT74,1156^A0N,28,28^FH\^FDSSCC-18^FS
    ^FT21,579^A0N,28,28^FH\^FDItem name:^FS
    ^FT107,580^A0N,28,28^FH\^FD$WHSWaveLabel.LabelItemName$^FS
    ^FT576,423^A0N,23,21^FH\^FD$WHSWaveLabel.LabelItemId$^FS
    ^FT252,1155^A0N,32,31^FH\^FD(00)$WHSWaveLabel.WaveLabelId$^FS
    ^BY4,3,283^FT66,1115^BCN,,N,N
    ^FD>;>800$WHSWaveLabel.WaveLabelId$^FS
    ^FT194,439^A0N,28,28^FH\^FDof^FS
    </Row>
    ```

1. 在 **主体部分** 的 **标签页脚** 字段中，输入所需页脚的 ZPL 代码。 下面是一个示例。

    ```plaintext
    ^PQ1^XZ
    ```

    > [!NOTE]
    > 此设置将打印每个标签的一个副本。 如果需要更多副本（例如，托盘每一面一个副本），请将页脚中 **\^PQn** 部分的 **n** 值设置为所需的副本数。 例如，每个标签要打印四个副本，请指定 **\^PQ4**。

您的标签现在可以使用了。

### <a name="create-a-wave-label-type"></a>创建波次标签类型

波次标签类型用于将波次标签模板链接到单元序列组行上的单元。

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签类型**。
1. 添加具有以下设置的波次标签类型：

    - **标签类型**：*货箱*
    - **描述**：*货箱*

### <a name="set-up-unit-sequence-groups"></a>设置单位序列组

接下来，设置波次标签类型的单位序列组。

1. 转到 **仓库管理 \> 设置 \> 仓库 \> 单位序列组**。
1. 选择 **Ea Box PL** 组。
1. 对于 **箱** 行，将 **波次级别类型** 字段设置为 *货箱*。

### <a name="create-a-wave-label-template"></a>创建波次标签模板

接下来，为波次标签类型创建波次标签模板。

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签模板**。
1. 添加波次级别模板，并在页眉中设置以下值：

    - **标签模板名称**：*货箱标签*
    - **描述**：*货箱标签*
    - **波次步骤代码**：*PrintLabel*
    - **仓库**：*62*

1. 在 **常规** 快速选项卡上，将 **波次标签类型** 字段设置为 *货箱*。
1. 在 **波次标签模板详细信息** 快速选项卡上，添加具有以下设置的新行：

    - **标签布局 ID**：*Carton*
    - **打印机名称：** 选择适当的 ZPL 打印机。
    - **运行查询**：*是*（此设置是可选的，但建议使用此设置以获得最佳性能。）

1. 在操作窗格上，选择 **保存**。
1. 可选：如果要设置客户特定的标签设计，则必须创建查询来查找客户的帐户。 在 **波次标签模板详细信息** 快速选项卡上，选择 **编辑查询**。 然后，在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*装运*
    - **派生表**：*装运*
    - **字段**：*帐号*
    - **条件：** 输入相关的客户帐号。

    完成后，选择 **确定** 关闭查询编辑器对话框。

1. 在操作窗格上，选择 **编辑查询** 打开整个标签模板的查询编辑器对话框。
1. 在查询编辑器对话框的 **排序** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*参考负荷行 ID（记录 ID）*
    - **搜索方向**：*升序*

1. 选择 **确定** 关闭查询编辑器对话框。
1. 一个消息框将提示您确认分组重置操作。 选择 **是** 继续。
1. 在操作窗格上，选择 **波次标签模板组**。
1. 在 **波次标签模板组** 对话框中，选择 **参考字段名称** 字段设置为 *参考负荷行 ID* 的行，然后选择此行的 **标签生成 ID** 复选框。

    > [!NOTE]
    > 无论工作分组设置如何，此设置都会在整个波次中为每个负荷行创建一个标签序列（“货箱 1/X”）。 此标签序列可以打印在标签布局上。

### <a name="configure-number-sequence-extensions"></a>配置编号规则扩展

编号规则扩展控制特定编号规则的 GS1 符合性。 此配置对于当前方案是可选的。 有关详细信息和配置说明，请参阅[配置编号规则扩展](../warehousing/configure-number-sequence-extensions.md)。

### <a name="create-a-sales-order-and-release-it-to-the-warehouse"></a>创建销售订单并将其下达到仓库

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 创建具有以下设置的销售订单：

    - **客户帐户**：*US-001*
    - **仓库**：*62*

1. 添加两个具有以下设置的销售订单行：

    - 销售订单行 1：

        - **物料编号：***A0001*
        - **数量：** *9024*
        - **单位**：*个* (9024 个 = 376 箱 = 47 PL)

    - 销售订单行 2：

        - **物料编号：***A0002*
        - **数量：** *9016*
        - **单位**：*个* (9016 个 = 322 箱 = 46 PL)

    > [!NOTE]
    > 此处提供的物料和数量仅是示例。 它们必须使用您先前定义的单位序列组，必须为它们定义从 *个* 到 *箱* 再到 *PL* 的适当单位转换，并且它们在仓库 *62* 中必须有存货。 有关详细信息，请参阅[度量单位和库存策略](unit-measure-stocking-policies.md)。

1. 选择销售订单行 1。 然后，在 **销售订单行** 部分的 **库存** 菜单中，选择 **预留**。
1. 在 **预留** 页的操作窗格中，选择 **预留批次**，然后关闭页面。
1. 对销售订单行 2 重复步骤 4 和 5。
1. 在“操作窗格”上的 **仓库** 选项卡上，选择 **发放到仓库**。

    将发生以下事件：

    - 系统使用包含标签打印步骤的模板来处理创建的装运。 标签布局将用于定义标签的格式，结果将是在标签模板中选择的打印机上打印的标签。
    - 波次标签将生成并打印。 标签数量将等于货箱数量（在此示例中，行 1 是 376 箱标签，行 2 是 322 箱标签）。
    - 将为装运生成新提单 ID。 如果您配置了数字序列扩展，波次标签 ID 将采用 **SSCC-18** 数字格式。 

您可以从以下页面查看和重新打印波次标签。 在每页的“操作窗格”上的 **装运** 选项卡上，在 **相关信息** 组中，选择 **波次标签**。

- 所有装运 \> 装运详细信息
- 所有负荷 \> 负荷详细信息
- 所有波次
- 波次标签
- 波次标签历史记录

## <a name="scenario-2-wave-label-printing-for-containerization-without-wave-label-records"></a>方案 2：集装化的波次标签打印（不使用波次标签记录）

此方案使您可以在使用集装化自动将物料拆分到货箱时打印波次标签，因此不需要波次标签记录。 在这种情况下，集装箱 ID 充当 SSCC 的占位符。

以下是此方案与方案 1 之间的主要区别：

- **波次标签模板：** 您无需在波次标签模板上选择波次标签类型，也不需要标签生成分组。 另外，您将按照方案 1 中所述的相同方式配置波次标签模板并链接到波次模板。 您必须将波次标签类型保留为空白，以防止生成波次标签。
- **波次标签布局：** 您将为工作行（而不是波次标签记录）配置波次标签布局行设置。 您必须使用 **WHSWorkLine** 表而不是 **WHSWaveLabel** 表来配置标签布局的行设置。 **每页行数** 设置控制主体部分将具有的行数。 

此配置也适用于将多个不同物料包装到一个带标签的箱子或托盘的业务场景，此包装流程可以通过创建工作（例如，按装运分组的工作）定义。

此方案演示端到端流。

### <a name="make-demo-data-available"></a>提供演示数据

要采取此方案，必须安装演示数据，并且必须选择 **USMF** 法人。

### <a name="make-sure-that-the-wave-label-method-is-available"></a>确保波次标签方法可用

您可能必须重新生成波次处理方法，才能使波次标签打印方法可用。

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次处理方法**。
1. 确认 **waveLabelPrinting** 在列表中。 如果不在，请在操作窗格中选择 **重新生成方法** 添加该方法。

### <a name="set-up-a-wave-template"></a>设置波次模板

波次模板使您可以将波次方法的特定实例链接到相应的波次标签模板。

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次模板**。
1. 选择模板，如 **63 集装化**。
1. 在 **方法** 快速选项卡上，将 **波次标签打印** 方法移至 **选定方法** 列。
1. 在 **选定方法** 列中，选择 **波次标签打印** 方法，并将其 **波次步骤代码** 字段设置为 *PrintLabel*。 有关波次步骤代码的详细信息，请参阅[波次步骤代码](wave-step-codes.md)。

### <a name="create-a-wave-label-layout"></a>创建波次标签布局

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签布局**。
1. 创建一个具有以下设置的记录：

    - **标签布局 ID**：*Carton*
    - **描述**：*货箱 (SSCC)*

1. 在操作窗格上，选择 **保存**。
1. 在操作窗格上，选择 **波次标签行设置**。

    **波次标签行设置** 页面将出现。 在这里，您可以配置标签的动态部分。

1. 添加具有以下设置的行：

    - **行 ID**：*WorkLine*
    - **行表名称**：*WHSWorkLine*
    - **行开始位置**：*500*

        此字段定义行在标签上开始的垂直位置。

    - **行高度**：*-50*

        此字段定义每行的高度。 行高度对于水平标签为正，对于垂直标签为负。

    - **每页行数**：*5*

        此字段定义可以在每个标签上打印的行数。

        > [!NOTE]
        > 此设置将为每个工作打印若干 ZPL 标签，每个页面最多可以保留五个工作行。 例如，如果为具有 12 行的集装箱打印标签，将打印三个标签。 如果要为每个领料行打印单独的标签，请将此值设置为 *1*。

1. 关闭该页面。
1. 在操作窗格上，选择 **编辑查询**。
1. 在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*工作类型*
    - **条件**：*领料*

1. 如果您希望能够打印提单 ID，请在 **联接** 选项卡上，选择 **工作行** 表，然后将 **装运** 表与其联接。
1. 关闭查询编辑器对话框。
1. **打印机文本布局** 快速选项卡有三个部分，您可以在其中编写打印机代码：**页眉部分**、**主体部分** 和 **页脚部分**。 在 **页眉部分** 的 **标签页眉** 字段中，输入所需页眉的代码。 例如，如果您使用的是 Zebra 打印机，可以使用以下代码。

    ```plaintext
    CT~~CD,~CC^~CT~
    ^XA
    ^LH10,10
    ^FO0,0 ^AT ^FD$WHSWorkTable.ContainerId$ ^FS
    ^FO0,75 ^AT ^FD$WHSWorkLine.ShipmentId$ ^FS
    ^FO0,150 ^AT ^FD$WHSShipmentTable.BillOfLadingId$ ^FS
    ```

1. 在 **主体部分** 的 **标签主体** 字段中，输入所需主体的 ZPL 代码。 下面是一个示例。

    ```plaintext
    <Row name="WorkLine">
    <Heading>
    //Optional heading for section of rows
    </Heading>
    ^FO0,450 ^AT ^FDItem ^FS
    ^FO200,450 ^AT ^FDQuantity ^FS
    ^FO0,[[YPos]] ^AT ^FD$WHSWorkLine.ItemId$ ^FS
    ^FO200,[[YPos]] ^AT ^FD$WHSWorkLine.QtyWork$ ^FS
    </Row>
    ```

1. 在 **主体部分** 的 **标签页脚** 字段中，输入所需页脚的 ZPL 代码。 下面是一个示例。

    ```plaintext
    ^PQ1^XZ
    ```

    > [!NOTE]
    > 此设置将打印每个标签的一个副本。 如果需要更多副本（例如，托盘每一面一个副本），请将页脚中 **\^PQn** 部分的 **n** 值设置为所需的副本数。 例如，每个标签要打印四个副本，请指定 **\^PQ4**。

您的标签现在可以使用了。

### <a name="create-a-wave-label-template"></a>创建波次标签模板

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签模板**。
1. 添加波次级别模板，并在页眉中设置以下值：

    - **标签模板名称**：*集装箱标签*
    - **描述**：*集装箱标签*
    - **波次步骤代码**：*PrintLabel*
    - **仓库**：*63*

1. 在 **波次标签模板详细信息** 快速选项卡上，添加具有以下设置的行：

    - **标签布局 ID**：*Container*
    - **打印机名称：** 选择适当的 ZPL 打印机。
    - **运行查询**：*是*（此设置是可选的，但建议使用此设置以获得最佳性能。）

1. 在操作窗格上，选择 **保存**。
1. 可选：如果要设置客户特定的标签设计，则必须创建查询来查找客户的帐户。 在 **波次标签模板详细信息** 快速选项卡上，选择 **编辑查询**。 然后，在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*装运*
    - **派生表**：*装运*
    - **字段**：*帐号*
    - **条件：** 输入相关的客户帐号。

    完成后，选择 **确定** 关闭查询编辑器对话框。

### <a name="configure-number-sequence-extensions"></a>配置编号规则扩展

编号规则扩展控制特定编号规则的 GS1 符合性。 此配置对于当前方案是可选的。 有关详细信息和配置说明，请参阅[配置编号规则扩展](../warehousing/configure-number-sequence-extensions.md)。

### <a name="create-a-sales-order-and-release-it-to-the-warehouse"></a>创建销售订单并将其下达到仓库

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 创建具有以下设置的销售订单：

    - **客户帐户**：*US-001*
    - **仓库**：*63*

1. 添加五个销售订单行：

    - 销售订单行 1：

        - **物料编号：***A0001*
        - **数量：** *10*

    - 销售订单行 2：

        - **物料编号：***A0002*
        - **数量：** *20*

    - 销售订单行 3：

        - **物料编号：***L0006*
        - **数量：** *20*

    - 销售订单行 4：

        - **物料编号：***L0100*
        - **数量：** *40*

    - 销售订单行 5：

        - **物料编号：***L0101*
        - **数量：** *50*

    > [!NOTE]
    > 此处提供的物料和数量仅是示例。 它们必须在指定的仓库中有存货。

1. 选择销售订单行 1。 然后，在 **销售订单行** 部分的 **库存** 菜单中，选择 **预留**。
1. 在 **预留** 页的操作窗格中，选择 **预留批次**，然后关闭页面。
1. 对每个其他销售订单行重复步骤 4 和 5。
1. 在“操作窗格”上的 **仓库** 选项卡上，选择 **发放到仓库**。

    将发生以下事件：

    - 系统使用包含标签打印步骤的模板来处理创建的装运。 标签布局将用于定义标签的格式，最终结果将是具有五个行的标签，此标签将在标签模板中选择的打印机上打印。
    - 将为装运生成新提单 ID。 如果您配置了数字序列扩展，波次标签 ID 将采用 **SSCC-18** 数字格式。 

您可以转到 **仓库管理 \> 查询和报表 \> 波次标签历史记录**，重新打印这些波次标签。

## <a name="scenario-3-wave-label-printing-for-multi-tiered-labels"></a>方案 3：为多层标签打印波次标签

此方案展示当仓储流程需要几层运输标签时如何使用波次标签打印功能。 例如，对于货箱和托盘，可能必须打印单独的标签，而对于整个装运，可能必须打印中断标签。 中断标签是一种独立标签，可用作标签卷和集装箱之间的分界，如装运 ID 标签和条形码标签，以便在打印标签后可以轻松进行分类。

此方案的配置与方案 1 的配置之间的主要区别在于，除了启用了中断标签之外，还必须将多个波次标签类型与波次标签模板和单位序列组行关联。 要完成此配置，请为此方案设置以下元素：

- **波次处理方法：** 您将波次标签方法标记为“可重复”，将其两次（或多次）添加到波次模板中，并设置不同的波次步骤代码。
- **波次标签模板：** 您将配置波次标签模板并将其链接到波次模板。 每个波次标签模板都有其自己的波次标签类型。
- **波次标签布局：** 您将创建多个波次标签布局。 标签的每个“层”将有一个单独的标签布局，并且还将有一个中断标签布局。

此方案演示端到端流。

### <a name="make-demo-data-available"></a>提供演示数据

要采取此方案，必须安装演示数据，并且必须选择 **USMF** 法人。

### <a name="set-up-a-wave-process-method"></a>设置波次处理方法

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次处理方法**。
1. 确认 **waveLabelPrinting** 在列表中。 如果不在，请在操作窗格中选择 **重新生成方法** 添加该方法。
1. 对于 **waveLabelPrinting** 方法，选中 **让方法可重复** 复选框。

### <a name="set-up-a-wave-template"></a>设置波次模板

1. 转到 **仓库管理 \> 设置 \> 波次 \> 波次模板**。
2. 选择模板，如 **62 装运默认**。
3. 在 **方法** 快速选项卡上，将 **波次标签打印** 方法移至 **选定方法** 列。
4. 在 **选定方法** 列中，将 **波次步骤代码** 值（如 *Carton*）分配给 **波次标签打印** 方法。 有关波次步骤代码的详细信息，请参阅[波次步骤代码](wave-step-codes.md)。
5. 再次将 **波次标签打印** 方法移至 **选定方法** 列。
6. 在 **选定方法** 列中，将不同 **波次步骤代码** 值（如 *Pallet*）分配给第二个 **波次标签打印** 方法。 有关波次步骤代码的详细信息，请参阅[波次步骤代码](wave-step-codes.md)。

### <a name="create-three-wave-label-layouts"></a>创建三个波次标签布局

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签布局**。
1. 创建一个具有以下设置的记录：

    - **标签布局 ID**：*Carton*
    - **描述**：*货箱 (SSCC)*

1. 在操作窗格上，选择 **保存**。
1. 在操作窗格上，选择 **波次标签行设置**。

    **波次标签行设置** 页面将出现。 在这里，您可以配置标签的动态部分。

1. 添加具有以下设置的行：

    - **行 ID**：*WaveLabel*
    - **行表名称**：*WHSWaveLabel*
    - **行开始位置**：*0*

        此字段定义行在标签上开始的垂直位置。

    - **行高度**：*0*

        此字段根据 ZPL 标准定义每行的高度（以磅为单位）。 行高度对于水平标签为正，对于垂直标签为负。 在此示例中因为只有一行，所以您可以将此值设置为 *0*（零）。

    - **每页行数**：*1*

        此字段定义可以在每个标签上打印的行数。

        > [!NOTE]
        > 使用此设置，将为波次标签表中的每个记录打印一个单独的 ZPL 标签。

1. 关闭该页面。
1. 在操作窗格上，选择 **编辑查询**。
1. 在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*工作类型*
    - **条件**：*领料*

    此查询可确保在标签上仅打印领料类型的工作行，不打印放置类型的工作行。

1. 如果您希望能够打印提单 ID，请在 **联接** 选项卡上，选择 **工作行** 表，然后将 **装运** 表与其联接。 
1. 关闭查询编辑器对话框。
1. **打印机文本布局** 快速选项卡有三个部分，您可以在其中编写打印机代码：**页眉部分**、**主体部分** 和 **页脚部分**。 在 **页眉部分** 的 **标签页眉** 字段中，输入所需页眉的代码。 例如，如果您使用的是 Zebra 打印机，可以使用以下代码。


    ```plaintext
    CT~~CD,~CC^~CT~
    ^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR8,8~SD15^JUS^LRN^CI0^XZ
    ^XA
    ^MMT
    ^PW812
    ^LL1218
    ^LS0
    ^FT85,505^A0N,28,28^FH\^FD$WHSShipmentTable.CustomerReq$^FS
    ^FO1,173^GB809,0,1^FS
    ^FO0,391^GB809,0,1^FS
    ^FO3,599^GB809,0,2^FS
    ^FO420,176^GB0,216,1^FS
    ^FO313,3^GB0,169,1^FS
    ^FO0,807^GB809,0,1^FS
    ^FT529,370^A0N,28,26^FH\^FD$WHSShipmentTable.BillOfLadingId$^FS
    ^BY2,3,132^FT25,344^BCN,,N,N
    ^FD>:(420)>38102>63^FS
    ^FT526,315^A0N,28,28^FH\^FD ^FS
    ^FT437,248^A0N,28,28^FH\^FDCARR: $WHSShipmentTable.SCAC$^FS
    ^FT425,201^A0N,23,24^FH\^FDCARRIER:^FS
    ^FT17,68^A0N,20,19^FH\^FDIntershipping, Inc.^FS
    ^FT15,99^A0N,20,19^FH\^FD1000 Shipping Lane^FS
    ^FT16,158^A0N,20,19^FH\^FD ^FS
    ^FT438,368^A0N,28,28^FH\^FDB/L#^FS
    ^FT15,128^A0N,20,19^FH\^FDShelbyville TN 38102^FS
    ^FT19,203^A0N,23,24^FH\^FD(420) SHIP TO POSTAL CODE^FS
    ^FT331,39^A0N,28,28^FH\^FDShip To:^FS
    ^FT14,39^A0N,28,28^FH\^FDShip From:^FS
    ^FT331,67^A0N,23,24^FH\^FDWAL-MART DC 1111A-ABC DIS^FS
    ^FT330,98^A0N,23,24^FH\^FDDEPT 10^FS
    ^FT329,166^A0N,23,24^FH\^FDSpringfield TN 39021^FS
    ^FT330,134^A0N,23,24^FH\^FD100 Main Street^FS
    ^FT19,504^A0N,28,28^FH\^FDPO#:^FS
    ^FT437,316^A0N,28,28^FH\^FDPRO#^FS
    ^FT105,371^A0N,28,28^FB130,1,0,C^FH\^FD(420)39021^FS
    ```

1. 在 **主体部分** 的 **标签主体** 字段中，输入所需主体的 ZPL 代码。 下面是一个示例。

    ```plaintext
    <Row name="WaveLabel">
    ^FT127,439^A0N,28,28^FH\^FD$WHSWaveLabel.SeqNum$^FS
    ^FT256,439^A0N,28,28^FH\^FD$WHSWaveLabel.NumberOfLabels$^FS
    ^FT17,439^A0N,28,28^FH\^FDCARTON^FS
    ^FT522,422^A0N,23,24^FH\^FDVPN:^FS
    ^FT74,1156^A0N,28,28^FH\^FDSSCC-18^FS
    ^FT21,579^A0N,28,28^FH\^FDItem name:^FS
    ^FT107,580^A0N,28,28^FH\^FD$WHSWaveLabel.LabelItemName$^FS
    ^FT576,423^A0N,23,21^FH\^FD$WHSWaveLabel.LabelItemId$^FS
    ^FT252,1155^A0N,32,31^FH\^FD(00)$WHSWaveLabel.WaveLabelId$^FS
    ^BY4,3,283^FT66,1115^BCN,,N,N
    ^FD>;>800$WHSWaveLabel.WaveLabelId$^FS
    ^FT194,439^A0N,28,28^FH\^FDof^FS
    </Row>
    ```

1. 在 **主体部分** 的 **标签页脚** 字段中，输入所需页脚的 ZPL 代码。 下面是一个示例。

    ```plaintext
    ^PQ1^XZ
    ```

    > [!NOTE]
    > 此设置将打印每个标签的一个副本。 如果需要更多副本（例如，托盘每一面一个副本），请将页脚中 **\^PQn** 部分的 **n** 值设置为所需的副本数。 例如，每个标签要打印四个副本，请指定 **\^PQ4**。

1. 第一个标签现在可以使用了。
1. 创建具有以下设置的第二个布局记录：

    - **标签布局 ID**：*Pallet*
    - **描述**：*托盘*

1. 在操作窗格上，选择 **保存**。
1. 在操作窗格上，选择 **波次标签行设置**。

    **波次标签行设置** 页面将出现。 在这里，您可以配置标签的动态部分。

1. 添加具有以下设置的行：

    - **行 ID**：*WaveLabel*
    - **行表名称**：*WHSWaveLabel*
    - **行开始位置**：*0*

        此字段定义行在标签上开始的垂直位置。

    - **行高度**：*0*

        此字段根据 ZPL 标准定义每行的高度（以磅为单位）。 行高度对于水平标签为正，对于垂直标签为负。 在此示例中因为只有一行，所以您可以将此值设置为 *0*（零）。

    - **每页行数**：*1*

        此字段定义可以在每个标签上打印的行数。

        > [!NOTE]
        > 使用此设置，将为波次标签表中的每个记录打印一个单独的 ZPL 标签。

1. 关闭该页面。
1. 在操作窗格上，选择 **编辑查询**。
1. 在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*工作类型*
    - **条件**：*领料*

    此查询可确保在标签上仅打印领料类型的工作行，不打印放置类型的工作行。

1. 如果您希望能够打印提单 ID，请在 **联接** 选项卡上，选择 **工作行** 表，然后将 **装运** 表与其联接。
1. 关闭查询编辑器对话框。
1. **打印机文本布局** 快速选项卡有三个部分，您可以在其中编写打印机代码：**页眉部分**、**主体部分** 和 **页脚部分**。 在 **页眉部分** 的 **标签页眉** 字段中，输入所需页眉的代码。 例如，如果您使用的是 Zebra 打印机，可以使用以下代码。

    ```plaintext
    CT~~CD,~CC^~CT~
    ^XA
    ^LH10,10
    ^FO0,0 ^AT ^FD$WHSWaveLabel.WaveLabelId$ ^FS
    ^FO0,75 ^AT ^FD$WHSWorkLine.ShipmentId$ ^FS
    ^FO0,150 ^AT ^FD$WHSShipmentTable.BillOfLadingId$ ^FS
    ```

1. 在 **主体部分** 的 **标签主体** 字段中，输入所需主体的 ZPL 代码。 下面是一个示例。

    ```plaintext
    <Row name="WaveLabel">
    ^FO0,450 ^AT ^FDItem ^FS
    ^FO200,450 ^AT ^FDQuantity ^FS
    ^FO0,[[YPos]] ^AT ^FD$WHSWaveLabel.LabelItemId$ ^FS
    ^FO200,[[YPos]] ^AT ^FD$WHSWaveLabel.QtyWork$ ^FS
    </Row>
    ```

1. 在 **主体部分** 的 **标签页脚** 字段中，输入所需页脚的 ZPL 代码。 下面是一个示例。

    ```plaintext
    ^PQ1^XZ
    ```

    > [!NOTE]
    > 此设置将打印每个标签的一个副本。 如果需要更多副本（例如，托盘每一面一个副本），请将页脚中 **\^PQn** 部分的 **n** 值设置为所需的副本数。 例如，每个标签要打印四个副本，请指定 **\^PQ4**。

1. 第二个标签现在可以使用了。
1. 创建具有以下设置的第三个布局记录：

    - **标签布局 ID**：*Break*
    - **描述**：*中断标签*

1. 在操作窗格上，选择 **保存**。
1. **打印机文本布局** 快速选项卡有三个部分，您可以在其中编写打印机代码：**页眉部分**、**主体部分** 和 **页脚部分**。 在 **页眉部分** 的 **标签页眉** 字段中，输入所需页眉的 ZPL 代码。 下面是一个示例。

    ```plaintext
    CT~~CD,~CC^~CT~
    ^XA
    ^LH10,10
    ^FO0,0 ^AT ^FD$WHSWorkLine.ShipmentId$ ^FS
    ```

1. 这次，不需要人工。 因此，只需在 **页脚部分** 部分输入所需文本。 下面是一个示例。

    ```plaintext
    ^XZ
    ```

    第三个标签现在可以使用了。

    > [!NOTE]
    > 第三个标签是中断标签，将用作标签卷之间的分界。

### <a name="create-two-wave-label-types"></a>创建两个波次标签类型

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签类型**。
1. 创建一个具有以下设置的记录：

    - **标签类型**：*货箱*
    - **描述**：*货箱*

1. 创建具有以下设置的第二个记录：

    - **标签类型**：*托盘*
    - **描述**：*托盘*

### <a name="set-up-unit-sequence-groups"></a>设置单位序列组

1. 转到 **仓库管理 \> 设置 \> 仓库 \> 单位序列组**。
1. 选择或创建一个 **Ea Box PL** 组。
1. 对于 **箱** 行，将 **波次级别类型** 字段设置为 *货箱*。
1. 对于 **托盘** 行，将 **波次级别类型** 字段设置为 *托盘*。

### <a name="create-wave-label-templates"></a>创建波次标签模板

1. 转到 **仓库管理 \> 设置 \> 文档路线布局 \> 波次标签模板**。
1. 创建具有以下设置的标签模板：

    - **标签模板名称**：*货箱标签*
    - **描述**：*货箱标签*
    - **波次步骤代码**：*Carton*
    - **仓库**：*62*

1. 在 **常规** 快速选项卡上，在 **波次标签类型** 字段中，选择一个值，如 *货箱*。
1. 在 **波次标签模板详细信息** 快速选项卡上，添加具有以下设置的行：

    - **标签布局 ID**：*Carton*
    - **打印机名称：** 选择适当的 ZPL 打印机。
    - **运行查询**：*是*（此设置是可选的，但建议使用此设置以获得最佳性能。）

1. 在操作窗格上，选择 **保存**。
1. 可选：如果要设置客户特定的标签设计，则必须创建查询来查找客户的帐户。 在 **波次标签模板详细信息** 快速选项卡上，选择 **编辑查询**。 然后，在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*装运*
    - **派生表**：*装运*
    - **字段**：*帐号*
    - **条件：** 输入相关的客户帐号。

    完成后，选择 **确定** 关闭查询编辑器对话框。

1. 在操作窗格上，选择 **编辑查询** 打开整个标签模板的查询编辑器对话框。
1. 在查询编辑器对话框的 **排序** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*参考负荷行 ID（记录 ID）*
    - **搜索方向**：*升序*

1. 再添加一个具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*装运 ID*
    - **搜索方向**：*升序*

1. 选择 **确定** 关闭查询编辑器对话框。
1. 一个消息框将提示您确认分组重置操作。 选择 **是** 继续。
1. 在操作窗格上，选择 **波次标签模板组**。
1. 在 **波次标签模板组** 对话框中，对于 **参考字段名称** 字段设置为 *装运 ID* 的行，设置以下值：

    - **打印中断标签：** 选择此复选框。
    - **标签布局 ID：** 选择一个中断标签。 （例如，选择您在此方案中先前创建的 *中断* 标签布局。）
    - **打印机名称：** 选择中断标签的打印机。 （通常，出于分割标签券的目的，您应该选择在 **波次标签模板详细信息** 上选择的同一台打印机。 但也可能是其他情况。）

1. 对于将 **参考字段名称** 字段设置为 *参考负荷行 ID* 的行，选择 **标签生成 ID** 复选框。

    > [!NOTE]
    > 无论工作分组设置如何，此设置都会在整个波次中为每个负荷行创建一个标签序列（“货箱 1/X”）。 此标签序列可以打印在标签布局上。 此外，不同装运的标签将由选定的中断标签分隔。

1. 选择 **确定** 关闭 **波次标签模板组** 对话框。
1. 再创建一个具有以下设置的标签模板：

    - **标签模板名称**：*托盘标签*
    - **描述**：*托盘标签*
    - **波次步骤代码**：*Pallet*
    - **仓库**：*62*

1. 在 **常规** 快速选项卡上，在 **波次标签类型** 字段中，选择一个值，如 *托盘*。
1. 在 **波次标签模板详细信息** 快速选项卡上，添加具有以下设置的行：

    - **标签布局 ID**：*Pallet*
    - **打印机名称：** 选择适当的 ZPL 打印机。
    - **运行查询**：*是*（此设置是可选的，但建议使用此设置以获得最佳性能。）

1. 在操作窗格上，选择 **保存**。
1. 可选：如果要设置客户特定的标签设计，则必须创建查询来查找客户的帐户。 在 **波次标签模板详细信息** 快速选项卡上，选择 **编辑查询**。 然后，在查询编辑器对话框的 **范围** 选项卡上，添加具有以下设置的行：

    - **表**：*装运*
    - **派生表**：*装运*
    - **字段**：*帐号*
    - **条件：** 输入相关的客户帐号。

    完成后，选择 **确定** 关闭查询编辑器对话框。 

1. 在操作窗格上，选择 **编辑查询** 打开整个标签模板的查询编辑器对话框。
1. 在查询编辑器对话框的 **排序** 选项卡上，添加具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*参考负荷行 ID（记录 ID）*
    - **搜索方向**：*升序*

1. 再添加一个具有以下设置的行：

    - **表**：*工作行*
    - **派生表**：*工作行*
    - **字段**：*装运 ID*
    - **搜索方向**：*升序*

1. 选择 **确定** 关闭查询编辑器对话框。
1. 一个消息框将提示您确认分组重置操作。 选择 **是** 继续。
1. 在操作窗格上，选择 **波次标签模板组**。
1. 在 **波次标签模板组** 对话框中，对于 **参考字段名称** 字段设置为 *装运 ID* 的行，设置以下值：

    - **打印中断标签：** 选择此复选框。
    - **标签布局 ID：** 选择一个中断标签。 （例如，选择您在此方案中先前创建的 *中断* 标签布局。）
    - **打印机名称：** 选择中断标签的打印机。 （通常，出于分割标签券的目的，您应该选择在 **波次标签模板详细信息** 上选择的同一台打印机。 但也可能是其他情况。）

1. 对于将 **参考字段名称** 字段设置为 *参考负荷行 ID* 的行，选择 **标签生成 ID** 复选框。

    > [!NOTE]
    > 无论工作分组设置如何，此设置都会在整个波次中为每个负荷行创建一个标签序列（“货箱 1/X”）。 此标签序列可以打印在标签布局上。 此外，不同装运的标签将由选定的中断标签分隔。

### <a name="configure-number-sequence-extensions"></a>配置编号规则扩展

编号规则扩展控制特定编号规则的 GS1 符合性。 此配置对于当前方案是可选的。 有关详细信息和配置说明，请参阅[配置编号规则扩展](../warehousing/configure-number-sequence-extensions.md)。

### <a name="create-a-sales-order-and-release-it-to-the-warehouse"></a>创建销售订单并将其下达到仓库

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 创建具有以下设置的销售订单：

    - **客户帐户**：*US-001*
    - **仓库**：*62*

1. 添加两个销售订单行：

    - 销售订单行 1：

        - **物料编号：***A0001*
        - **数量：** *9024*
        - **单位**：*个* (9024 个 = 376 箱 = 47 PL)

    - 销售订单行 2：

        - **物料编号：***A0002*
        - **数量：** *9016*
        - **单位**：*个* (9016 个 = 322 箱 = 46 PL)

    > [!NOTE]
    > 此处提供的物料和数量仅是示例。 它们必须使用您先前定义的单位序列组，必须为它们定义从 *个* 到 *箱* 再到 *PL* 的适当单位转换，并且它们在仓库 *62* 中必须有存货。 有关详细信息，请参阅[度量单位和库存策略](unit-measure-stocking-policies.md)。

1. 选择销售订单行 1。 然后，在 **销售订单行** 部分的 **库存** 菜单中，选择 **预留**。
1. 在 **预留** 页的操作窗格中，选择 **预留批次**，然后关闭页面。
1. 对销售订单行 2 重复步骤 4 和 5。
1. 在“操作窗格”上的 **仓库** 选项卡上，选择 **发放到仓库**。

    将发生以下事件： 

    - 系统使用包含标签打印步骤的模板来处理创建的装运。 标签布局将用于定义标签的格式，结果将是在标签模板中选择的打印机上打印的标签。
    - 波次标签将生成并打印。 标签数量将等于货箱数量（在此示例中，行 1 是 376 箱标签，行 2 是 322 箱标签，行 1 是 47 PL 标签，行 2 是 47 PL 标签，以及两个具有装运 ID 的中断标签）。
    - 将为装运生成新提单 ID。 如果您配置了数字序列扩展，波次标签 ID 将采用 **SSCC-18** 数字格式。 

您可以从以下页面查看和重新打印波次标签：

- 所有装运 \> 装运详细信息
- 所有负荷 \> 负荷详细信息
- 所有波次
- 波次标签
- 波次标签历史记录

对于这些页面中的大多数页面，可以通过在“操作窗格”的 **装运** 选项卡上的 **相关信息** 组中选择 **波次标签** 来查找相关功能。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]