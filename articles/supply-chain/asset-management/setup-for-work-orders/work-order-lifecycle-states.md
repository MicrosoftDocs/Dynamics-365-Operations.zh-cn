---
title: 工作订单生命周期状态
description: 本文介绍资产管理中的工作订单生命周期状态。
author: johanhoffmann
ms.date: 08/13/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: EntAssetWorkOrderLifecycleState, EntAssetWorkOrderLifecycleModel
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: johanho
ms.search.validFrom: 2019-08-30
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 9c6a7c204370542353e9b629b78091972f8ce9a1
ms.sourcegitcommit: cfe8fbc202c3eb05d894076fdf99e46704f17365
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/15/2022
ms.locfileid: "9017078"
---
# <a name="work-order-lifecycle-states"></a>工作订单生命周期状态


[!include [banner](../../includes/banner.md)]

 

工作订单生命周期状态定义工作订单经历的状态。 例如，**已创建**、**已计划**、**进行中** 和 **已结束**。 可以手动更新工作订单的工作订单生命周期状态，也可以自动更新（例如，在工作订单计划期间）。

必须在 **项目管理与核算参数** 页（**项目管理与核算** \> **项目管理与核算参数**）将工作订单所需工作订单生命周期状态附加到匹配的项目阶段。 首先在项目管理与核算中设置项目阶段。 然后在资产管理中设置工作订单生命周期状态和工作订单生命周期模型。

下表介绍 **工作订单生命周期状态** 页（**资产管理** \> **设置** \> **工作订单** \> **生命周期状态**）的 **常规** 快速选项卡上 **工作订单** 和 **计划** 部分中的选项。

![工作订单生命周期状态页面。](media/09-setup-for-work-orders.png)

| 选项名称                   | 说明 |
|-------------------------------|-------------|
| 可用                        | 如果工作订单在此生命周期状态时应该有效，请将此选项设置为 **是**。 |
| 添加行                      | 如果可以向处于此生命周期状态的工作订单添加工作订单作业，请将此选项设置为 **是**。 |
| 删除                        | 如果可以删除此生命周期状态的工作订单，请将此选项设置为 **是**。 |
| 删除行                   | 如果可以才能够处于此生命周期状态的工作订单删除工作订单作业，请将此选项设置为 **是**。 |
| 允许计划编制              | 如果可以为此生命周期状态的工作订单排产，请将此选项设置为 **是**。 |
| 设置实际开始时间              | 如果在工作订单更新为此生命周期状态时，应该提示用户为此工作订单选择实际开始日期和时间，请将此选项设置为 **是**。 |
| 设置实际结束时间                | 如果在工作订单更新为此生命周期状态时，应该提示用户为此工作订单选择实际结束日期和时间，请将此选项设置为 **是**。 |
| 日记帐过帐                 | 如果在工作订单更新为此生命周期状态时，应该自动过帐工作订单日记帐，请将此选项设置为 **是**。 如果日记帐过帐期间出错，将显示一条消息，并取消工作订单生命周期状态的更新。 若要查看工作订单的日记帐行，请选择 **资产管理** \> **工作订单** \> **所有工作订单**、**有效工作订单** 或 **我的有效工作订单**，在列表中选择工作订单，然后选择 **日记帐**。 特定生命周期状态时对工作订单日记帐自动过帐的此项设置与在 **工作订单日记帐** 页中选择 **日记帐过帐** 时相同。<p>**注意：** 如果将此选项设置为 **是**，并且未设置任何审核工作流，将自动过帐日记帐。 如果公司使用在 **日记帐审核** 页（**项目管理与核算** \> **设置** \> **日记帐** \> **日记帐审核**）中配置的日记帐审核设置，经理或员工必须验证并过帐消耗登记。</p> |
| 处理维护清单 | 如果在工作订单更新为此生命周期状态时，应该处理所有附加的维护清单，请将此选项设置为 **是**。 在此项处理期间，将过帐在维护清单中创建的所有计数器登记，并评估整个维护清单的结果。 将评估结果为 **通过** 和 **失败** 的维护清单行，并且如果至少一个行失败，将在资产管理中把整个维护清单标记为 **失败**。 |
| 就绪                         | 如果在将工作订单更新为此生命周期状态时，应该将对该工作订单创建的所有工作订单作业的工作订单作业计划状态自动更新为 **就像**，请将此选项设置为 **是**。 |
| 开始日期                         | 如果在将工作订单更新为此生命周期状态时，应该将对该工作订单创建的所有工作订单作业的工作订单作业计划状态自动更新为 **已开始**，请将此选项设置为 **是**。 |
| 结束日期                           | 如果在将工作订单更新为此生命周期状态时，应该将对该工作订单创建的所有工作订单作业的工作订单作业计划状态自动更新为 **已结束**，请将此选项设置为 **是**。 |
| 删除计划行         | 如果在将工作订单更新为此生命周期状态时，应该删除对在已安排的工作订单创建的所有工作订单作业进行的安排，请将此选项设置为 **是**。 换句话说，将删除资产、关联维护工人和关联工具的产能预留。 例如，对名称为 **估计** 的工作订单生命周期状态将此选项设置为 **是**。 然后，如果在因为需要重新安排时将工作订单回滚到了此生命周期状态，则可删除对该工作订单的安排。 |

## <a name="set-up-project-stages-and-work-order-lifecycle-states"></a>设置项目阶段和工作订单生命周期状态

1. 选择 **项目管理与核算** \> **设置** \> **项目管理与核算参数**。
2. 在 **项目阶段** 选项卡上，对于要使用的每个阶段，选中您的工作订单需要的每个项目类型的复选框。 这些项目类型定义有关允许的财务任务的规则。 财务任务示例包括创建预测，创建估计和创建期初余额。

    > [!IMPORTANT]
    > 如果不为项目类型选择项目阶段，但是为工作订单生命周期状态使用项目阶段，则不会按照适当方式更新工作订单项目。

3. 关闭 **项目管理与核算参数** 页。
4. 选择 **资产管理** \> **设置** \> **工作订单** \> **生命周期状态**。
5. 选择 **新建** 以创建新工作订单生命周期状态。
6. 在 **生命周期状态** 字段中，输入生命周期状态的 ID。
7. 在 **名称** 字段中输入名称。

    **详细信息** 快速选项卡上的 **生命周期模型** 字段显示使用此生命周期状态的工作订单生命周期模型的数量。

8. 在 **常规** 快速选项卡上的 **工作订单** 部分中，通过将相关选项设置为 **是**，选择应该可用于此生命周期状态的功能。 有关这些选项的说明，请参见本文前面的表。
9. 在 **项目** 部分的 **阶段** 字段中，选择应该与此生命周期状态关联的项目阶段。
10. 如果在工作订单处于此生命周期状态时，应该自动关闭与每个工作订单作业关联的项目活动，请将 **项目** 部分中的 **关闭活动** 选项设置为 **是**。

    > [!NOTE]
    > 若要查找与工作订单作业关联的项目活动的数量，请选择 **资产管理** \> **工作订单** \> **所有工作订单**、**有效工作订单** 或 **我的有效工作订单**。 打开工作订单，然后选择工作订单作业。 将在 **行详细信息** 快速选项卡的 **常规** 选项卡上 **项目** 部分中的 **活动编号** 字段中显示活动编号。

11. 如果在工作订单处于此生命周期状态时，应该将工作订单项目预测自动复制到工作订单日记帐，请将 **预测** 部分中的 **复制工时预测**、**复制物料预测** 和/或 **复制费用预测** 选项设置为 **是**。
12. 如果在工作订单处于此生命周期状态时，应该更新工作订单作业的计划状态，请将 **激化** 部分中的一个选项设置为 **是**。 有关 **就绪**、**开始**、**结束** 和 **删除计划行** 选项的说明，请参见本文前面的表。

    > [!NOTE]
    > 若要查看与工作订单作业关联的计划行，请选择 **资产管理** \> **工作订单** \> **所有工作订单**、**有效工作订单** 或 **我的有效工作订单**。 打开工作订单，在 **工作订单作业** 快速选项卡上选择工作订单作业，然后在 **行详细信息** 快速选项卡上查看相关信息。 **计划** 选项卡上的 **状态** 字段显示工作订单作业的状态。 可将 **状态** 字段设置为以下值：**已计划**、**就绪**、**已开始**、**已停止** 和 **已结束**。

13. 在 **维护请求** 部分的 **生命周期状态** 字段中，选择应该将关联的维护请求更新到的维护请求生命周期状态。 将自动进行此项更新。 仅当在用于维护请求的维护请求生命周期模型中选择了维护请求生命周期状态，才能执行此操作。
14. 如果在工作订单更新为此生命周期状态时，应该在 **资产 BOM** 页中自动更新工作订单中使用的所有物料，请将 **资产** 部分中的 **更新资产BOM** 选项设置为 **是**。 如果在工作订单生命周期状态将工作订单定义为已完成或已结束之类情况下，此设置可能有关。
15. 如果应该从工作订单池自动删除此生命周期状态的工作订单，请将 **工作订单池** 部分中的 **删除池引用** 选项设置为 **是**。
16. 在 **验证** 快速选项卡上，通过将相关选项设置为 **是**，选择此生命周期状态下应该激活的验证类型。 然后在应该选择的每个验证类型的 **类型** 字段中，选择如果尚未验证与验证类型关联的必填字段时应该显示的消息的类型。 如果选择 **错误**，则更新工作订单的关联必填字段之前，将取消工作订单生命周期状态的更新。

    - 将把 **维护停机时间**、**维护清单**、**故障特征**、**故障成因** 和 **故障补救措施** 选项与 **工作订单类型** 页（**资产管理** \> **设置** \> **工作订单** \> **工作订单类型**）页的 **必需** 部分中的选项关联。 若要激活这些验证，还必须将用于工作订单的工作订单类型的关联选项设置为 **是**。
    - 如果工作订单更新到的生命周期状态的 **维护清单** 选项设置为 **是**，将执行验证以验证标记为 **必需** 的维护清单行是否登记为 **已检查** 或 **不适用**。 如果对必需行未执行其中的任何一种登记，则在将工作订单更新为此生命周期状态时，将显示参考、错误或警告消息。
    - 如果工作订单更新到的生命周期状态的 **承诺成本** 选项设置为 **是**，将计算每个工作订单作业的承诺成本总额（即法人承诺支付的费用总额）。 如果承诺成本金额超过 0（零），将显示一条消息。 在 **项目管理与核算参数** 页（**项目管理与核算参数** \> **设置** \> **项目管理与核算参数**）的 **成本控制** 选项卡上 **成本承诺** 快速选项卡中选择要包含的成本承诺类型。
    - 如果工作订单要更新为的生命周期状态的 **维护停机时间** 选项设置为 **是**，将验证与工作订单关联的资产的维护停机时间。 如果已创建了维护停机时间登记，但是没有 **已结束** 的登记，则在工作订单更新为此生命周期状态时，将显示一条消息。
    - 如果标准项目设置中不包含资产管理设置所需全部阶段，则可在 **项目管理与核算参数** 页的 **项目阶段** 选项卡上设置用户定义的项目阶段。 下图显示 **项目管理与核算参数** 页上的 **项目阶段** 选项卡。

    ![设置各种项目类型的项目阶段页面。](media/10-setup-for-work-orders.png)

> [!NOTE]
> 如果将工作订单更新为的生命周期状态无效，将自动删除与该工作订单关联，但尚未过帐的日记帐。 此行为有助于确保自动清理未使用的数据。 （如果在 **工作订单生命周期状态** 页 **常规** 快速选项卡上将某个生命周期状态的 **有效** 选项设置为 **否**，则该生命周期状态无效。）
>
> 但是，如果手动将工作订单设置为无效，将 **不** 自动删除与该工作订单关联，但尚未过帐的日记帐。 （若要手动停用工作订单，请选择 **资产管理** \> **工作订单** \> **所有工作订单** 或 **有效工作订单**。 打开工作订单，然后切换到 **标题** 视图。 在 **常规** 快速选项卡上，选择 **编辑**，然后将 **有效** 选项设置为 **否**。）

## <a name="relations-among-work-order-lifecycle-models-work-order-types-and-work-order-lifecycle-states"></a>工作订单生命周期模型、工作订单类型和工作订单生命周期状态之间的关联

生命周期模型引用工作流，并按顺序在生命周期模型中选择生命周期状态。 将为工作订单类型设置生命周期模型。 工作订单类型决定工作流和工作流程的规模或范围。 例如，可以将 **维护**（这是标准工作订单类型）与具有大量生命周期状态的工作订单生命周期模型关联。 相比之下，您可能有一个 **纠正** 工作订单类型用于尚未安排的工作订单，或用于因为情况紧急而在创建工作订单之前即已完成了作业的工作订单。 可将此工作订单类型与只有少量生命周期状态的工作订单生命周期模型关联。

使用这些类型的原因是，为工作订单或资产之类定义了类型时，将自动定义关联的工作流程（即生命周期状态）。 有关如何设置工作订单类型的详细信息，请参阅[工作订单类型](../setup-for-work-orders/work-order-types.md)。

> [!NOTE]
> 除了工作订单，生命周期状态、生命周期模型和类型还适用于功能位置、资产和维护请求。

下图显示工作订单类型、生命周期模型和生命周期状态之间的关联。

![与工作订单生命周期模型页面对比的工作订单类型页面。](media/11-setup-for-work-orders.png)

## <a name="work-order-lifecycle-models"></a>工作订单生命周期模型

创建了工作订单所需工作订单生命周期状态之后，可以将其拆分为工作订单生命周期模型。 至少可以创建一个标准生命周期模型。

1. 选择 **资产管理** \> **设置** \> **工作订单** \> **生命周期模型**。
2. 选择 **新建** 以创建新工作订单生命周期模型。
3. 在 **生命周期模型** 字段中，输入生命周期模型的 ID。
4. 在 **名称** 字段中输入名称。

    **详细信息** 快速选项卡上的 **生命周期状态** 字段显示此生命周期模型中选择的生命周期状态的数量。 **工作订单类型** 字段显示使用此生命周期模型的工作订单类型的数量。

5. 在 **生命周期状态** 快速选项卡上，选择生命周期模型中应包含的生命周期状态。

    - 若要在生命周期模型中包括生命周期状态，请在 **其余生命周期状态** 部分中选择它，然后选择向右箭头按钮 ![向右箭头。](media/12-setup-for-work-orders.png) 以将其移到 **所选生命周期状态** 部分。
    - 若要在生命周期模型中包含所有可用生命周期状态，请选择 **选择所有可用阶段** 按钮 ![选择所有可用阶段。](media/13-setup-for-work-orders.png)。 将把所有生命周期状态移到 **所选生命周期状态** 部分。
    - 若要从生命周期模型中删除生命周期状态，请在 **所选生命周期状态** 部分中选择它，然后选择向左箭头按钮 ![向左箭头。](media/14-setup-for-work-orders.png) 以将其移到 **其余生命周期状态** 部分。

6. 要定义可采用所选生命周期状态的生命周期状态，选择 **生命周期状态更新**。
7. 无论工作订单的上一个生命周期状态是什么，均在 **更新** 快速选项卡上的 **计划的状态** 字段中选择始终应该为已经为其完成了工作订单安排的工作订单选择的生命周期状态。
8. 在 **未计划的生命周期状态** 字段中，选择在删除了工作订单安排时，始终应该为工作订单选择的生命周期状态。
9. 保存工作订单生命周期模型。

![工作订单生命周期模型页面。](media/15-setup-for-work-orders.png)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]