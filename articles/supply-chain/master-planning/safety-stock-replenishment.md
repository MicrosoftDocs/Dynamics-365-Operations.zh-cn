---
title: "物料的安全存货履行"
description: "此主题讨论安全存货履行以及如何设置物料的安全存货数量。"
author: roxanadiaconu
manager: AnnBe
ms.date: 11/27/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: ReqSafetyKey, ReqItemTableSetup, ReqItemJournalName, ReqItemTable, EcoResProductDetailsExtended
audience: Application User, IT Pro
ms.reviewer: yuyus
ms.search.scope: Core (Operations, Core)
ms.custom: 
ms.assetid: 
ms.search.region: global
ms.search.industry: 
ms.author: roxanadiaconu
ms.dyn365.ops.intro: 7.3
ms.search.validFrom: 2017-12-31
ms.translationtype: HT
ms.sourcegitcommit: 0ca19ab9ed7a52328c5dd5252c418bb9343bdc2b
ms.openlocfilehash: d6ecb346f7bfa54a4e16307f623c82acb3a86892
ms.contentlocale: zh-cn
ms.lasthandoff: 12/14/2017

---

# <a name="safety-stock-fulfillment-for-items"></a><span data-ttu-id="c34e9-103">物料的安全存货履行</span><span class="sxs-lookup"><span data-stu-id="c34e9-103">Safety stock fulfillment for items</span></span>

[!include[banner](../includes/banner.md)]


<span data-ttu-id="c34e9-104">安全存货是指为了降低物料库存不足的风险，在库存中应该持有该物料的额外数量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-104">Safety stock indicates an additional quantity of an item held in the inventory in order to reduce the risk that the item will be out of stock.</span></span> <span data-ttu-id="c34e9-105">安全存货用于当接到销售订单且供应商无法交付满足客户要求装运日期的额外物料时的缓冲存货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-105">Safety stock is used as a buffer stock in case sales orders come in and the supplier is unable to deliver the additional items to meet the customer's requested ship date.</span></span> <span data-ttu-id="c34e9-106">当使用安全存货履行销售订单时，安全存货将减少。</span><span class="sxs-lookup"><span data-stu-id="c34e9-106">When safety stock is used to fulfill a sales order, the safety stock will be reduced.</span></span> <span data-ttu-id="c34e9-107">您可以使用主计划自动使库存恢复到安全水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-107">You can use Master planning to automatically bring the inventory back to the safety level.</span></span>    

## <a name="set-up-safety-stock-levels-for-items"></a><span data-ttu-id="c34e9-108">设置物料的安全存货水平</span><span class="sxs-lookup"><span data-stu-id="c34e9-108">Set up safety stock levels for items</span></span>

<span data-ttu-id="c34e9-109">安全存货作为物料覆盖范围的一部分在**物料覆盖范围**页的**已发放产品** > **计划** > **覆盖范围**下进行设置。</span><span class="sxs-lookup"><span data-stu-id="c34e9-109">Safety stock is set up as part of item coverage on the **Item coverage** page under **Released products** > **Plan** > **Coverage**.</span></span>

<span data-ttu-id="c34e9-110">在**最小值**字段中，输入您要对该物料维持的安全存货水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-110">In the **Minimum** field, enter the safety stock level that you want to maintain for the item.</span></span> <span data-ttu-id="c34e9-111">该值以库存单位表示。</span><span class="sxs-lookup"><span data-stu-id="c34e9-111">The value is expressed in inventory units.</span></span> <span data-ttu-id="c34e9-112">如果将此字段保留为空，默认值将为零。</span><span class="sxs-lookup"><span data-stu-id="c34e9-112">If you leave the field blank, the default value is zero.</span></span> <span data-ttu-id="c34e9-113">在**覆盖范围代码**列表中选择**期间**、**需求**或**最小值/最大值**后，此字段可用。</span><span class="sxs-lookup"><span data-stu-id="c34e9-113">This field is available when you select **Period**, **Requirement**, or **Min/Max** in the **Coverage code** list.</span></span> <span data-ttu-id="c34e9-114">存货水平限制适用于可用库存，也就是说，在实际数量低于指定的最低水平时，预留和标记可以触发安全存货补货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-114">The stock level limit applies to the available inventory, which means that reservations and markings may trigger safety stock replenishment before the physical quantity goes below the specified minimum level.</span></span>

> [!NOTE]
> <span data-ttu-id="c34e9-115">您必须首先定义所有其他计划的覆盖范围维度，然后才能定义**最小值**字段。</span><span class="sxs-lookup"><span data-stu-id="c34e9-115">You must define all other planned coverage dimensions before you can define the **Minimum** field.</span></span> <span data-ttu-id="c34e9-116">这样可以避免在主计划期间使用无效的记录。</span><span class="sxs-lookup"><span data-stu-id="c34e9-116">This prevents an invalid record from being used during master planning.</span></span> <span data-ttu-id="c34e9-117">例如，如果某一维度组用其他计划的覆盖范围维度扩展，但没有为此维度定义最小和最大库存数量，则可能会发生使用无效记录的情况。</span><span class="sxs-lookup"><span data-stu-id="c34e9-117">This situation can occur if, for example, a dimension group is extended with an additional planned coverage dimension for which the minimum and maximum inventory quantities are not yet defined.</span></span>

<span data-ttu-id="c34e9-118">您可以使用最小键处理需求的季节性变化。</span><span class="sxs-lookup"><span data-stu-id="c34e9-118">You can use minimum keys to handle seasonal fluctuations in demand.</span></span> <span data-ttu-id="c34e9-119">例如，在淡季时可降低物料的最低库存水平，并在其他月份逐渐提高该物料的最低库存水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-119">For example, you can decrease the minimum inventory level for an item in the off-season, and then gradually increase the level during the other months.</span></span> <span data-ttu-id="c34e9-120">转到**主计划** > **设置** > **覆盖范围** > **最小/最大键**可以创建最小键。</span><span class="sxs-lookup"><span data-stu-id="c34e9-120">You create a minimum key by going to **Master planning** > **Setup** > **Coverage** > **Minimum/maximum keys**.</span></span> <span data-ttu-id="c34e9-121">在**物料覆盖范围**页的**最小键**字段中可以指定最小键，以便按季节调整安全存货水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-121">You specify the minimum key to adjust the safety stock level by seasonality in the **Minimum key** field on the **Item coverage** page.</span></span> 

## <a name="example-minimum-key"></a><span data-ttu-id="c34e9-122">示例：最小键</span><span class="sxs-lookup"><span data-stu-id="c34e9-122">Example: Minimum key</span></span>
<span data-ttu-id="c34e9-123">如果您要设置在春季和夏季期间增加季节性需求的最小键，请转到**主计划** > **设置** > **覆盖范围** > **最小/最大键**，并执行以下步骤。</span><span class="sxs-lookup"><span data-stu-id="c34e9-123">If you want to set up a minimum key that accounts for increased seasonal demand during the spring and summer months, go to **Master planning** > **Setup** > **Coverage** > **Minimum/maximum keys** and follow these steps.</span></span>

1. <span data-ttu-id="c34e9-124">创建 12 行，然后在**更改**字段中按从 1 到 12 的顺序给这些行编号。</span><span class="sxs-lookup"><span data-stu-id="c34e9-124">Create 12 lines and assign a number from 1 to 12 to the lines in the **Change** field.</span></span>
2. <span data-ttu-id="c34e9-125">在**单位**字段中，选择**月**。</span><span class="sxs-lookup"><span data-stu-id="c34e9-125">In the **Unit** field, select **Months**.</span></span>
3. <span data-ttu-id="c34e9-126">在**系数**字段中，输入以下表中描述的值。</span><span class="sxs-lookup"><span data-stu-id="c34e9-126">In the **Factor** field, enter the values that are described in the following table.</span></span>

|<span data-ttu-id="c34e9-127">线形</span><span class="sxs-lookup"><span data-stu-id="c34e9-127">Line</span></span>|<span data-ttu-id="c34e9-128">输入此值</span><span class="sxs-lookup"><span data-stu-id="c34e9-128">Enter this value</span></span>|<span data-ttu-id="c34e9-129">结果</span><span class="sxs-lookup"><span data-stu-id="c34e9-129">Result</span></span>|
|---|---|---|
|<span data-ttu-id="c34e9-130">1-3 次</span><span class="sxs-lookup"><span data-stu-id="c34e9-130">1-3</span></span>|<span data-ttu-id="c34e9-131">1</span><span class="sxs-lookup"><span data-stu-id="c34e9-131">1</span></span>|<span data-ttu-id="c34e9-132">最小库存量基于**物料覆盖范围**页上 1 月到 3 月的设置。</span><span class="sxs-lookup"><span data-stu-id="c34e9-132">Minimum inventory is based on the setting for January through March on the **Item coverage** page.</span></span>|
|<span data-ttu-id="c34e9-133">4-5</span><span class="sxs-lookup"><span data-stu-id="c34e9-133">4-5</span></span>|<span data-ttu-id="c34e9-134">2</span><span class="sxs-lookup"><span data-stu-id="c34e9-134">2</span></span>|<span data-ttu-id="c34e9-135">为 4 月到 5 月，将最小库存量乘以系数 2。</span><span class="sxs-lookup"><span data-stu-id="c34e9-135">Minimum inventory is multiplied by a factor of 2 for April through May.</span></span>|
|<span data-ttu-id="c34e9-136">6-8</span><span class="sxs-lookup"><span data-stu-id="c34e9-136">6-8</span></span>|<span data-ttu-id="c34e9-137">2.5</span><span class="sxs-lookup"><span data-stu-id="c34e9-137">2.5</span></span>|<span data-ttu-id="c34e9-138">为 6 月到 8 月，将最小库存量乘以系数 2.5。</span><span class="sxs-lookup"><span data-stu-id="c34e9-138">Minimum inventory is multiplied by a factor of 2.5 for June through August.</span></span>|
|<span data-ttu-id="c34e9-139">9-12</span><span class="sxs-lookup"><span data-stu-id="c34e9-139">9-12</span></span>|<span data-ttu-id="c34e9-140">1</span><span class="sxs-lookup"><span data-stu-id="c34e9-140">1</span></span>|<span data-ttu-id="c34e9-141">为 9 月到 12 月，最小库存量还原为**物料覆盖范围**页上的设置。</span><span class="sxs-lookup"><span data-stu-id="c34e9-141">Minimum inventory reverts to the setting for September through December on the **Item coverage** page.</span></span>|

<span data-ttu-id="c34e9-142">如果覆盖范围代码是**最小值/最大值**，您还可以指定要为物料维持的**最大**库存数量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-142">If the coverage code is **Min/Max**, you can also specify the **Maximum** inventory quantity that you want to maintain for the item.</span></span> <span data-ttu-id="c34e9-143">该值也以库存单位表示。</span><span class="sxs-lookup"><span data-stu-id="c34e9-143">The value is also expressed in inventory units.</span></span> <span data-ttu-id="c34e9-144">如果计划的可用库存低于最小数量，主计划将生成一个计划订单，以履行所有未满足的需求并将可用库存提升到指定的最大数量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-144">If the projected available inventory falls below the minimum quantity, master planning generates a planned order to fulfill all open requirements and brings the available inventory up to the specified maximum quantity.</span></span> <span data-ttu-id="c34e9-145">正如您设置**最小值**一样，必须首先定义所有其他计划的覆盖范围维度，然后才能定义**最大值**字段。</span><span class="sxs-lookup"><span data-stu-id="c34e9-145">Just like you set up **Minimum**, you must define all other planned coverage dimensions before you can define the **Maximum** field.</span></span>

## <a name="example-minmax-coverage-code"></a><span data-ttu-id="c34e9-146">示例：最小值/最大值覆盖范围代码</span><span class="sxs-lookup"><span data-stu-id="c34e9-146">Example: Min/Max coverage code</span></span>
<span data-ttu-id="c34e9-147">最小数量是 10，最大数量是 15。</span><span class="sxs-lookup"><span data-stu-id="c34e9-147">The minimum quantity is 10, and the maximum quantity is 15.</span></span> <span data-ttu-id="c34e9-148">当前的现有库存量为 4。</span><span class="sxs-lookup"><span data-stu-id="c34e9-148">Current on-hand inventory is 4.</span></span> <span data-ttu-id="c34e9-149">这使得最小数量需求为 6。</span><span class="sxs-lookup"><span data-stu-id="c34e9-149">This gives a minimum quantity requirement of 6.</span></span> <span data-ttu-id="c34e9-150">不过，由于最大数量是 15，所以主计划生成的计划订单中的数量将为 11。</span><span class="sxs-lookup"><span data-stu-id="c34e9-150">However, because the maximum quantity is 15, master planning generates a planned order for 11 items.</span></span>

<span data-ttu-id="c34e9-151">对于遵循季节需求的物料，可能需要维持不同的最大值水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-151">For items that follow seasonal demands, you may need to maintain different maximum levels.</span></span> <span data-ttu-id="c34e9-152">为此，需转到**主计划** > **设置** > **覆盖范围** > **最小/最大键**，定义**最大键**。</span><span class="sxs-lookup"><span data-stu-id="c34e9-152">To do that, you need to define **Maximum keys** by going to **Master planning** > **Setup** > **Coverage** > **Minimum/maximum keys**.</span></span> <span data-ttu-id="c34e9-153">填写**物料覆盖范围**页上的**最大键**字段。</span><span class="sxs-lookup"><span data-stu-id="c34e9-153">Fill in the **Maximum key** field on the **Item coverage** page.</span></span> <span data-ttu-id="c34e9-154">您可以查看有关安全存货水平的信息，该水平通过**物料覆盖范围**页上的**最小值/最大值**选项卡上的最小键进行定义。</span><span class="sxs-lookup"><span data-stu-id="c34e9-154">You can view the information about the safety stock levels, defined via minimum keys on the **Min/Max** tab, on the **Item coverage** page.</span></span> <span data-ttu-id="c34e9-155">您需确保在特定期间的最小值和最大值保持同步。</span><span class="sxs-lookup"><span data-stu-id="c34e9-155">You need to make sure that, for a certain period, the minimum and the maximum values are kept in sync.</span></span>

## <a name="safety-stock-fulfillment"></a><span data-ttu-id="c34e9-156">安全存货履行</span><span class="sxs-lookup"><span data-stu-id="c34e9-156">Safety stock fulfillment</span></span> 

<span data-ttu-id="c34e9-157">**最小完成量**参数用于选择库存水平必须满足您在**最小值**字段指定的数量的日期或期间。</span><span class="sxs-lookup"><span data-stu-id="c34e9-157">The **Fulfill minimum** parameter allows you to select the date or the period during which the inventory level must meet the quantity that you specified in the **Minimum** field.</span></span> <span data-ttu-id="c34e9-158">在**覆盖范围代码**列表中选择**期间**、**需求**或**最小值/最大值**后，此字段可用。</span><span class="sxs-lookup"><span data-stu-id="c34e9-158">This field is available when you select **Period**, **Requirement**, or **Min/Max** in the **Coverage code** list.</span></span>

<span data-ttu-id="c34e9-159">如果使用**最小键**，则选择**最小期间**复选框以完成在最小键中设置的所有期间的最低库存水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-159">If **Minimum keys** are used, select the **Minimum periods** check box to fulfill the minimum inventory level for all the periods that are set up in the minimum key.</span></span> <span data-ttu-id="c34e9-160">如果清除该复选框，则仅完成当前期间的最小库存量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-160">If you clear the check box, the minimum inventory is fulfilled for the current period only.</span></span>

<span data-ttu-id="c34e9-161">以下方案演示此参数如何工作以及它的不同值之间的区别。</span><span class="sxs-lookup"><span data-stu-id="c34e9-161">The following scenario shows how this parameter works and what are the differences between its values.</span></span>

> [!NOTE]
> <span data-ttu-id="c34e9-162">在此主题中的所有图示中，x 轴表示库存，y 轴表示天数，条形表示库存水平，箭头表示交易记录，例如销售订单行、采购订单行或计划订单。</span><span class="sxs-lookup"><span data-stu-id="c34e9-162">For all the illustrations in this topic, the x-axis represents inventory, the y-axis represents days, the bars represent the inventory level, the arrows represent transactions, such as sales order lines, purchase order lines, or planned orders.</span></span>

<span data-ttu-id="c34e9-163">[![安全存货履行的常见方案](./media/Scenario1.png)](./media/Scenario1.png)**最小完成量**参数可具有以下值：</span><span class="sxs-lookup"><span data-stu-id="c34e9-163">[![Common scenario for safety stock fulfillment](./media/Scenario1.png)](./media/Scenario1.png) The **Fulfill minimum** parameter can have the following values:</span></span>
### <a name="todays-date"></a><span data-ttu-id="c34e9-164">今天的日期</span><span class="sxs-lookup"><span data-stu-id="c34e9-164">Today's date</span></span> 
<span data-ttu-id="c34e9-165">运行主计划时满足当天的指定最小数量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-165">The specified minimum quantity is met on the date when master planning is run.</span></span> <span data-ttu-id="c34e9-166">系统尝试尽快履行安全存货限制，即使因为提前期的原因而不现实。</span><span class="sxs-lookup"><span data-stu-id="c34e9-166">The system tries to fulfill the safety stock limit as soon as possible, even though it can be unrealistic due to the lead time.</span></span> 
<span data-ttu-id="c34e9-167">[![今日日期的需求](./media/TodayReq.png)](./media/TodayReq.png)针对今天的日期创建计划订单 P1，以便将该日期的可用库存提升到安全存货水平以上。</span><span class="sxs-lookup"><span data-stu-id="c34e9-167">[![Requirement on today's date](./media/TodayReq.png)](./media/TodayReq.png) Planned order P1 is created for today's date to bring the available inventory above the safety stock level on this date.</span></span> <span data-ttu-id="c34e9-168">销售订单行 S1 至 S3 继续降低库存水平。</span><span class="sxs-lookup"><span data-stu-id="c34e9-168">The sales order lines S1 to S3 continue to lower the inventory level.</span></span> <span data-ttu-id="c34e9-169">主计划生成计划订单 P2 至 P4，以便在每个销售订单需求后将库存水平恢复至安全限制。</span><span class="sxs-lookup"><span data-stu-id="c34e9-169">Planned orders P2 to P4 are generated by master planning so that the inventory level is brought back to the safety limit after each sales order requirement.</span></span>
<span data-ttu-id="c34e9-170">使用**需求**覆盖范围代码时，创建多个计划订单。</span><span class="sxs-lookup"><span data-stu-id="c34e9-170">When the **Requirement** coverage code is used, multiple planned orders are created.</span></span> <span data-ttu-id="c34e9-171">针对频繁需求的物料和材料使用**期间**或**最小值/最大值**覆盖范围来绑定补货始终是一个不错的方法。</span><span class="sxs-lookup"><span data-stu-id="c34e9-171">It is always a good idea to use either **Period** or **Min/Max** coverage for items and materials in frequent demand, to bundle the replenishment.</span></span> <span data-ttu-id="c34e9-172">下图显示覆盖范围代码**期间**的一个示例。</span><span class="sxs-lookup"><span data-stu-id="c34e9-172">The following illustration shows an example for coverage code **Period**.</span></span>
<span data-ttu-id="c34e9-173">[![期间。今日日期](./media/TodayPeriod.png)](./media/TodayPeriod.png)下图显示覆盖范围代码**最小值/最大值**的一个示例。</span><span class="sxs-lookup"><span data-stu-id="c34e9-173">[![Period. Today's date](./media/TodayPeriod.png)](./media/TodayPeriod.png) The following illustration shows an example for coverage code **Min/Max**.</span></span>
<span data-ttu-id="c34e9-174">[![MinMax. 今日日期](./media/TodayMinMax.png)](./media/TodayMinMax.png)</span><span class="sxs-lookup"><span data-stu-id="c34e9-174">[![MinMax. Today's date](./media/TodayMinMax.png)](./media/TodayMinMax.png)</span></span>
### <a name="todays-date--procurement-time"></a><span data-ttu-id="c34e9-175">今日日期 + 采购时间</span><span class="sxs-lookup"><span data-stu-id="c34e9-175">Today's date + procurement time</span></span> 
<span data-ttu-id="c34e9-176">在运行主计划的日期满足指定的最小数量，以及采购或生产提前期。</span><span class="sxs-lookup"><span data-stu-id="c34e9-176">The specified minimum quantity is met on the date when master planning is run, plus the purchase or production lead time.</span></span> <span data-ttu-id="c34e9-177">此时间包括任何安全宽限期。</span><span class="sxs-lookup"><span data-stu-id="c34e9-177">This time includes any safety margins.</span></span> <span data-ttu-id="c34e9-178">如果物料实行贸易协议，并且在**主计划参数**页上选择了**查找贸易协议**复选框，将不考虑贸易协议中的交货提前期。</span><span class="sxs-lookup"><span data-stu-id="c34e9-178">If the item carries a trade agreement, and the **Find trade agreements** check box is selected on the **Master planning parameters** page, the delivery lead time from the trade agreement is not considered.</span></span> <span data-ttu-id="c34e9-179">而考虑来自物料覆盖范围设置或物料的提前期。</span><span class="sxs-lookup"><span data-stu-id="c34e9-179">Lead times are taken from the item's coverage settings or from the item.</span></span>
<span data-ttu-id="c34e9-180">该履行模式将创建具有更短延迟和更少计划订单的计划，不考虑在物料上设置的覆盖范围组。</span><span class="sxs-lookup"><span data-stu-id="c34e9-180">This fulfillment mode will create plans with less delays and fewer planned orders regardless of the coverage group set up on the item.</span></span> <span data-ttu-id="c34e9-181">下图显示覆盖范围代码为**需求**或**期间**时的计划结果。</span><span class="sxs-lookup"><span data-stu-id="c34e9-181">The following illustration shows the outcome of the plan if the coverage code is **Requirement** or **Period**.</span></span>  
<span data-ttu-id="c34e9-182">[![需求。期间。今日日期和提前期](./media/TodayPLTReq.png)](./media/TodayPLTReq.png)下图显示覆盖范围代码为**最小值/最大值**时的计划结果。</span><span class="sxs-lookup"><span data-stu-id="c34e9-182">[![Requirement. Period. Today's date and lead time](./media/TodayPLTReq.png)](./media/TodayPLTReq.png) The following illustration shows the outcome of the plan if the coverage code is **Min/Max**.</span></span>  
<span data-ttu-id="c34e9-183">[![MinMax. 今日日期和提前期](./media/TodayPLTMinMax.png)](./media/TodayPLTMinMax.png)</span><span class="sxs-lookup"><span data-stu-id="c34e9-183">[![MinMax. Today's date and lead time](./media/TodayPLTMinMax.png)](./media/TodayPLTMinMax.png)</span></span>
### <a name="first-issue"></a><span data-ttu-id="c34e9-184">第一次发货</span><span class="sxs-lookup"><span data-stu-id="c34e9-184">First issue</span></span> 
<span data-ttu-id="c34e9-185">在可用库存低于最低水平的当天满足指定的最小数量，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="c34e9-185">The specified minimum quantity is met on the date when the available inventory goes below the minimum level, as shown in the following illustration.</span></span> <span data-ttu-id="c34e9-186">在运行主计划的当天，即使可用库存低于最低水平，在下一次需求进入前，**第一次发货**也不会尝试覆盖它。</span><span class="sxs-lookup"><span data-stu-id="c34e9-186">Even if the available inventory is below the minimum level on the date when master planning is run, **First issue** will not attempt to cover it until the next requirement comes in.</span></span>
<span data-ttu-id="c34e9-187">下图显示覆盖范围代码**需求**的一个示例。</span><span class="sxs-lookup"><span data-stu-id="c34e9-187">The following illustration shows an example for coverage code **Requirement**.</span></span>
<span data-ttu-id="c34e9-188">[![使用**需求**覆盖代码和**第一次发货**履行计划物料](./media/FirstIssueReq.png)](./media/FirstIssueReq.png)下图显示覆盖范围代码**期间**的一个示例。</span><span class="sxs-lookup"><span data-stu-id="c34e9-188">[![Planning an item with **Requirement** coverage code and **First issue** fulfillment](./media/FirstIssueReq.png)](./media/FirstIssueReq.png) The following illustration shows an example for coverage code **Period**.</span></span>
<span data-ttu-id="c34e9-189">[![使用**期间**覆盖代码和**第一次发货**履行计划物料](./media/FirstIssuePeriod.png)](./media/FirstIssuePeriod.png)下图显示覆盖范围代码**最小值/最大值**的一个示例。</span><span class="sxs-lookup"><span data-stu-id="c34e9-189">[![Planning an item with **Period** coverage code and **First issue** fulfillment](./media/FirstIssuePeriod.png)](./media/FirstIssuePeriod.png) The following illustration shows an example for coverage code **Min/Max**.</span></span>
<span data-ttu-id="c34e9-190">[![使用 **MinMax** 覆盖代码和**第一次发货**履行计划物料](./media/FirstIssueMinMax.png)](./media/FirstIssueMinMax.png)在运行主计划的当天，如果可用库存已经低于安全存货限制，**今日日期**和**今日日期 + 采购时间**将立即触发补货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-190">[![Planning an item with **MinMax** coverage code and **First issue** fulfillment](./media/FirstIssueMinMax.png)](./media/FirstIssueMinMax.png) On the date when master planning is run, if the available inventory is already under the safety stock limit, **Today's date** and **Today's date + procurement time** will trigger the replenishment immediately.</span></span> <span data-ttu-id="c34e9-191">**第一次发货**将等待，直到出现另一个针对该物料的发货交易记录，例如销售订单和物料清单行需求，之后它将在该交易记录的当天触发补货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-191">**First issue** will wait until there is another issue transaction, such as sales order and BOM line requirement, for the item, and then it will trigger the replenishment on the date of this transaction.</span></span> <span data-ttu-id="c34e9-192">在运行主计划的当天，如果可用库存不低于安全存货限制，**今日日期**和**第一次发货**将提供完全相同的结果，如下图中所示。</span><span class="sxs-lookup"><span data-stu-id="c34e9-192">On the date when master planning is run, if the available inventory is not under the safety stock limit, **Today's date** and **First issue** will provide exactly the same result, as shown in the illustration below.</span></span> 

<span data-ttu-id="c34e9-193">[![NotUnderLimit](./media/ReqFirstIssue.png)](./media/ReqFirstIssue.png) 在运行主计划的当天，如果可用库存不低于安全存货限制，**今日日期 + 采购时间**将提供以下结果，因为它将履行延迟到采购提前期结束时。</span><span class="sxs-lookup"><span data-stu-id="c34e9-193">[![NotUnderLimit](./media/ReqFirstIssue.png)](./media/ReqFirstIssue.png) On the date when master planning is run,if the available inventory is not under the safety stock limit, **Today's date + procurement time** will provide the following result, because it postpones the fulfillment until the end of the procurement lead time.</span></span>
<span data-ttu-id="c34e9-194">![使用**需求**覆盖范围代码和**第一次发货**履行计划物料](./media/ReqTodayLT.png)</span><span class="sxs-lookup"><span data-stu-id="c34e9-194">![Planning an item with **Requirement** coverage code and **First issue** fulfillment](./media/ReqTodayLT.png)</span></span>
### <a name="coverage-time-fence"></a><span data-ttu-id="c34e9-195">覆盖时限</span><span class="sxs-lookup"><span data-stu-id="c34e9-195">Coverage time fence</span></span>
<span data-ttu-id="c34e9-196">在**覆盖时限**字段指定的期间内满足指定的最低数量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-196">The specified minimum quantity is met during the period that is specified in the **Coverage time fence** field.</span></span> <span data-ttu-id="c34e9-197">当主计划不允许将可用库存用于实际订单（例如销售或转移）来试图维持安全水平时，此选项有用。</span><span class="sxs-lookup"><span data-stu-id="c34e9-197">This option is useful when master planning does not allow available inventory to be used for real orders, such as sales or transfers, in the attempt to maintain the safety level.</span></span> <span data-ttu-id="c34e9-198">但在未来的版本中，此补货模式将不再需要，且此选项将被弃用。</span><span class="sxs-lookup"><span data-stu-id="c34e9-198">However, in a future release, this mode of replenishment will no longer be needed, and this option will be deprecated.</span></span>
## <a name="plan-safety-stock-replenishment-for-first-expired-first-out-fefo-items"></a><span data-ttu-id="c34e9-199">为先过期先出 (FEFO) 物料计划安全存货补货</span><span class="sxs-lookup"><span data-stu-id="c34e9-199">Plan safety stock replenishment for First Expired, First Out (FEFO) items</span></span>
<span data-ttu-id="c34e9-200">在任何时间点，具有最新到期日期的库存收货将用于安全存货，以允许按照 FEFO（先过期先出）的顺序履行实际需求，如销售行或物料清单行。</span><span class="sxs-lookup"><span data-stu-id="c34e9-200">At any point in time, the inventory receipt with the latest expiry date will be used for safety stock to allow real demand, such as sale lines or BOM lines, to be fulfilled in the FEFO (First Expired, First Out) order.</span></span>
<span data-ttu-id="c34e9-201">要演示其工作方式，请考虑以下方案。</span><span class="sxs-lookup"><span data-stu-id="c34e9-201">To show how this works, consider the following scenario.</span></span>
<span data-ttu-id="c34e9-202">[![FEFOScenario](./media/FEFOScenario.png)](./media/FEFOScenario.png) 在运行计划时，它将涵盖来自现在的现有库存量的第一个销售订单和一个用于剩余数量的额外采购订单。</span><span class="sxs-lookup"><span data-stu-id="c34e9-202">[![FEFOScenario](./media/FEFOScenario.png)](./media/FEFOScenario.png) When planning is run, it will cover the first sales order from the existing on-hand inventory and an additional purchase order, for the remaining quantity.</span></span>
<span data-ttu-id="c34e9-203">[![FEFO1](./media/FEFO1.png)](./media/FEFO1.png) 创建一个计划订单，以确保可用库存恢复至安全限制。</span><span class="sxs-lookup"><span data-stu-id="c34e9-203">[![FEFO1](./media/FEFO1.png)](./media/FEFO1.png) A planned order is created to make sure that the available inventory is brought back to the safety limit.</span></span>
<span data-ttu-id="c34e9-204">[![FEFO2](./media/FEFO2.png)](./media/FEFO2.png) 在计划第二个销售订单时，使用之前创建的涵盖安全存货的计划订单涵盖此数量。</span><span class="sxs-lookup"><span data-stu-id="c34e9-204">[![FEFO2](./media/FEFO2.png)](./media/FEFO2.png) When the second sales order is planned, the previously created planned order that covers the safety stock is used to cover this quantity.</span></span> <span data-ttu-id="c34e9-205">因此，安全存货在持续滚动。</span><span class="sxs-lookup"><span data-stu-id="c34e9-205">Hence, the safety stock is constantly rolling.</span></span>
<span data-ttu-id="c34e9-206">[![FEFO3](./media/FEFO3.png)](./media/FEFO3.png) 最后创建另一个计划订单以涵盖安全存货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-206">[![FEFO3](./media/FEFO3.png)](./media/FEFO3.png) Finally, another planned order is created to cover the safety stock.</span></span>
<span data-ttu-id="c34e9-207">[![FEFO4](./media/FEFO4.png)](./media/FEFO4.png) 所有批次相应到期，并创建计划订单以便在到期后重填安全存货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-207">[![FEFO4](./media/FEFO4.png)](./media/FEFO4.png) All the batches are expire accordingly, and planned orders are created to refill the safety stock after it has expired.</span></span>

## <a name="how-master-planning-handles-the-safety-stock-constraint"></a><span data-ttu-id="c34e9-208">主计划如何处理安全存货约束</span><span class="sxs-lookup"><span data-stu-id="c34e9-208">How master planning handles the safety stock constraint</span></span>

<span data-ttu-id="c34e9-209">安全存货在系统中作为需求类型进行跟踪，与销售行或物料清单需求类似。</span><span class="sxs-lookup"><span data-stu-id="c34e9-209">Safety stock is tracked in the system as a requirement type, just like sales lines or BOM requirements.</span></span> <span data-ttu-id="c34e9-210">如果您删除**需求类型**列上的默认筛选器，可以看到**净需求**页上的安全存货需求行。</span><span class="sxs-lookup"><span data-stu-id="c34e9-210">You can see the safety stock requirement line on the **Net requirements** page if you remove the default filter on the **Requirement type** column.</span></span>

<span data-ttu-id="c34e9-211">如果系统确定履行安全存货需求交易将导致延迟履行实际需求（例如销售行、物料清单行、转移需求或需求预测行），将降低履行安全存货需求交易的优先级。</span><span class="sxs-lookup"><span data-stu-id="c34e9-211">Fulfilling the safety stock requirement transaction is deprioritized if the system determines that this causes delays in the fulfilment of real demand, such as sales lines, BOM lines, transfer requirements, or demand forecast lines.</span></span> <span data-ttu-id="c34e9-212">否则，确保可用库存高于安全存货数量具有与任何其他需求类型相同的优先级。</span><span class="sxs-lookup"><span data-stu-id="c34e9-212">Otherwise, making sure that the available inventory is above the safety stock quantity has the same priority as any other demand types.</span></span> <span data-ttu-id="c34e9-213">这将确保实际交易不会延迟，且有助于防止安全存货过度补货和过早补货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-213">This ensures no delays for real transactions and helps to prevent over-replenishment and early-replenishment of safety stock.</span></span>

<span data-ttu-id="c34e9-214">在主计划的覆盖范围阶段，不再降低安全存货补货的优先级。</span><span class="sxs-lookup"><span data-stu-id="c34e9-214">During the coverage phase of master planning, safety stock replenishment is no longer deprioritized.</span></span> <span data-ttu-id="c34e9-215">现有库存量可以在任何其他需求类型前使用。</span><span class="sxs-lookup"><span data-stu-id="c34e9-215">On-hand inventory can be used before any other demand types.</span></span> <span data-ttu-id="c34e9-216">在延迟计算过程中，将添加新的逻辑来检查延迟的销售行、物料清单行需求以及所有其他需求类型，以确定在使用安全存货的前提下是否可以按时交付。</span><span class="sxs-lookup"><span data-stu-id="c34e9-216">During the delay calculation, new logic will be added to go over the delayed sales lines, BOM line requirements, and all the other demand types, to determine whether they could be delivered on time, provided that the safety stock is used.</span></span> <span data-ttu-id="c34e9-217">如果系统确定使用安全存货可以最大程度地减少延迟，则销售行或物料清单行将使用安全存货替代其初始覆盖范围，并且系统将改为针对安全存货触发补货。</span><span class="sxs-lookup"><span data-stu-id="c34e9-217">If the system identifies that it can minimize delays by using safety stock, then the sales lines or BOM lines will replace their initial coverage with the safety stock, and the system will trigger the replenishment for the safety stock instead.</span></span>

<span data-ttu-id="c34e9-218">如果没有为延迟计算设置计划或物料，则安全存货约束将具有与任何其他需求类型相同的优先级。</span><span class="sxs-lookup"><span data-stu-id="c34e9-218">If the plan or the item is not set up for delayed calculation, then the safety stock constraint will have the same priority as any other demand types.</span></span> <span data-ttu-id="c34e9-219">这意味着在其他需求类型前存在现有和其他可用库存的预留。</span><span class="sxs-lookup"><span data-stu-id="c34e9-219">This means there is a reserve of on-hand and other available inventory before other demand types.</span></span>

