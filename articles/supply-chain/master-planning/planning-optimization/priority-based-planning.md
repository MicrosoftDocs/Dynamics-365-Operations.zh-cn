---
title: 基于优先级的计划
description: 本文介绍 Microsoft Dynamics 365 Supply Chain Management 的基于优先级的计划功能。
author: t-benebo
ms.date: 10/15/2021
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2021-10-15
ms.dyn365.ops.version: 10.0.23
ms.openlocfilehash: 4997ba123f105f683daaa6b29fe8c5ee72cb47cb
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2022
ms.locfileid: "8873802"
---
# <a name="priority-based-planning"></a>基于优先级的计划

[!include [banner](../../includes/banner.md)]

本文介绍 Microsoft Dynamics 365 Supply Chain Management 的基于优先级的计划功能。 此功能增加了对需求驱动计划的支持，这是需求驱动的物料要求计划 (DDMRP) 的一个步骤。 基于优先级的计划使计划优化能够生成由计划优先级而非要求日期驱动的计划订单。

基于优先级的计划可让您确定补货订单的优先级，以确保紧急需求优先于不太重要的需求。 例如，短缺补货订单将优先于标准重填补货订单。 系统可以自动将较大的订单拆分为单独的小订单，订单行按优先级分组。 然后，它可以首先处理所有高优先级订单。

要快速了解此功能，请观看以下视频：[对 Dynamics 365 Supply Chain Management 中基于优先级的计划的计划优化支持](https://youtu.be/GmMHzFETTQc)。

## <a name="turn-on-priority-based-planning-in-your-system"></a>在系统中打开基于优先级的计划

此功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)设置检查功能状态和开启功能。 在 **功能管理** 工作区中，此功能按照下面的方式列出：

- **模块**：*主计划*
- **功能名称**：*针对计划优化的优先级驱动的 MRP 支持*

## <a name="where-and-how-planning-priorities-are-assigned"></a>在何处以及如何分配计划优先级

有关供应和需求的 *计划优先级* 信息是基于优先级的计划的主干。 计划优先级定义需求或供应行的重要性。 当 **覆盖范围代码** 字段设置为 *优先级* 时，计划优化将使用它。

计划优先级通常是一个 0（零）到 100 之间的数字，其中 0 代表重要性最高。 它在 **计划优先级** 字段中显示和设置。 您可以在以下页面找到此字段：**需求预测行**、**销售订单详细信息**、**采购订单详细信息**、**转移单详细信息** 和 **计划订单详细信息**。

当相关物料或覆盖范围组的 **覆盖范围代码** 字段设置为 *优先级* 时，计划优化在计算计划优先级时将使用需求驱动方法平衡供应与需求，对于每个已发布产品，将考虑为 **物料覆盖范围** 页面上的 **最小值**、**再订购点** 和 **最大值** 字段设置的值。

> [!NOTE]
> *优先级* 值仅在启用了计划优化时可用于 **覆盖范围代码** 字段。

相关的 *计划优先级模型* 控制计划优先级并按优先级范围拆分计划订单。 它们还允许您为每种供应或需求类型设置默认计划优先级值并定义优先级计算方法。

## <a name="types-of-priority-calculation-methods"></a>优先级计算方法的类型

每个计划优先级模型都有 **优先级计算方法** 设置，用于控制主计划如何将优先级应用于计划订单。 可用值为 *最大库存数量的百分比* 和 *优先级范围*。 *优先级范围* 代表 *最大库存数量的百分比* 方法的更高级版本。

### <a name="percent-of-maximum-inventory-quantity"></a>最大库存数量的百分比

在 *最大库存数量的百分比* 计算方法中，供应优先级计算将查找当前的 *可用库存总量*（净流），此值以为物料设置的 **最大库存数量** 值的百分比形式显示。 然后为每个物料和供应商创建一个计划订单（除非使用最大订单数量来强制拆分）。 订单的计划优先级计算为最大值的百分比。

使用以下公式：

*最大值百分比* = (*净流头寸* × 100) ÷ *物料覆盖范围中的最大库存数量值*

在此公式中，*净流头寸* 的计算方式如下：

*净流头寸* = *现有量* + *在单* – *符合资格的需求*

- *在单* 是预期供应。
- *符合资格的需求* 表示在计划时限内具有要求日期的净要求。

在主计划运行期间，当净流头寸小于物料的再订购点数量时，将创建新的计划订单。 计划订单数量是在物料级别设置的 **最大库存数量** 值与净流头寸之间的差值。 计划订单优先级计算为 **最大库存数量** 值的 *净流头寸* 百分比。

> [!NOTE]
> 计算出的优先级不能为负，即使需求超过总供应。 如果需求超过总供应，计算优先级将设置为 0（零）。

### <a name="priority-ranges"></a>优先级范围

*优先级范围* 计算方法比 *最大库存数量的百分比* 方法更先进，在计划优先级模型级别配置。 可以创建多个新的计划供应订单来满足每个物料的需求。 计划供应的优先级遵循 **计划优先级模型** 页面上的 **计划优先级范围** 网格中定义的值。

当 **优先级计算方法** 字段设置为 *优先级范围* 时，以下附加规则将生效：

- 如果计划优先级模型的 **考虑需求优先级** 选项设置为 *是*，在每个需求行上设置的优先级将限制优先级范围桶。 供应的任何新计划订单的优先级都不会低于需求的优先级。 范围的上限值将被视为是与需求的优先级值进行比较的阈值。 如果需求的优先级恰好在两个范围的上限阈值之间，将选择具有最高优先级（即最低优先级值）的范围。
- 如果计划优先级模型的 **计划订单创建** 字段设置为 *具有最重要优先级的单一供应*，将只创建一个供应，然后一直履行到最大值。 优先级将设置为将触发供应的第一个范围的优先级。
- 如果没有现有库存量、没有供应和需求，将使用 **计划优先级范围** 网格中 **起始数量** 字段设置为 *零* 的行。
- 如果有需求，但没有现有库存量或预期供应，将使用 **计划优先级范围** 网格中 **起始数量** 字段设置为 *零或更少* 的行。
- 在评估需求所属的范围时，**考虑需求优先级** 选项的设置仍然有效。

## <a name="differences-between-traditional-timeline-calculations-and-priority-based-planning"></a>传统时间线计算与基于优先级的计划之间的差异

基于优先级的计划在以下方面不同于传统的时间线计算：

- 所有常规的预计划处理器仍然有效。 这些预处理器包括将批准的计划订单与销售需求、采购申请映射和预留逻辑挂钩。 仅处理这些预处理器未履行的需求。
- 在挂钩期间，无论优先级如何，都会考虑所有供应。 此供应包括现有库存量、已发布供应和已批准计划订单的未挂钩部分。
- 在整个覆盖时间内，不能将“负天数”需求与供应挂钩。
- 当供应与需求挂钩时，具有最高优先级（即最低优先级值）的供应会首先被用完。 现有供应被视为优先级值为 0（零）。 因此，它将作为第一个消耗来源。
- 新的计划供应行将根据最小订单量、最大订单量、数量倍数等常规规则创建。

## <a name="planning-priority-models"></a>计划优先级模型

*计划优先级模型* 将被分配给覆盖范围组，控制计划订单的计划优先级。 它们定义确定如何为每个计划订单计算计划优先级值，以及如何将优先级分配给计划订单、供应行和需求行的逻辑。

要使用计划优先级模型，转到 **主计划 \> 设置 \> 计划优先级模型**。 如前所述，模型最重要的设置之一是 **优先级计算方法** 值。 此设置控制主计划为计划订单分配优先级值时使用的计算方法。

> [!NOTE]
> 计划优先级模型跨组织范围的所有法人应用。

### <a name="coverage-group"></a>覆盖范围组

设置您计划用于基于优先级的计划的新覆盖范围组，如[定义物料的覆盖规则](../tasks/define-coverage-rules-items.md)中所述。 创建覆盖范围组后，设置以下其他字段：

- **覆盖范围代码** – 如果覆盖范围组将使用基于优先级的计划，选择 *优先级*。
- **计划优先级模型** – 选择任何组织范围的计划优先级模型。

### <a name="item-coverage"></a>物料覆盖范围

按照[覆盖范围设置](../coverage-settings.md)中的说明设置物料覆盖范围设置。 默认情况下，为覆盖范围组选择的 **覆盖范围代码** 值将被复制到物料覆盖范围设置中。 但是，您可以根据需要替代默认值。 在某些情况下，物料覆盖范围记录的 **覆盖范围代码** 字段设置为 *计划*，但没有为相关覆盖范围组定义计划优先级模型。 在这些情况下，**优先级计算方法** 字段设置为 *最大库存数量的百分比* 以及 **计划订单创建** 字段设置为 *具有最重要优先级的单一供应* 的任何模型默认都将应用。

将 **覆盖范围代码** 字段设置为 *优先级*，让物料覆盖范围设置中的 **再订购点** 字段可用。 在此字段中，输入系统在确定何时下达 **覆盖范围代码** 值为 *优先级* 的计划订单时应使用的再订购点数量。

再订购点数量通常计算为提前期的需求加上最小值（安全存货）。 它必须是 **最小** 和 **最大** 值之间的值。

例如，您可以按以下方式设置字段：

- **最小值**：*10*
- **再订购点**：*45*
- **最大值**：*60*

对于此示例，再订购点数量基于 7 天的提前期和平均每天使用量 5。 因此，提前期总需求量是 35。 然后加上最小值 10（安全存货），得到 45 的再订购点。 在此设置下，当计划的现有量级别低于 45 时，将建议供应。 订单优先级将基于计划优先级设置。

### <a name="manage-planning-priority-models"></a>管理计划优先级模型

要使用计划优先级模型， 请按照下列步骤操作。

1. 转到 **主计划 \> 设置 \> 计划优先级模型**。
1. 在列表窗格中选择一个现有模型，或在操作窗格上选择 **新建** 来创建新模型。
1. 在记录的标头上，设置以下字段：

    - **名称** – 为模型输入名称。 名称在您组织中的所有法人中必须是唯一的。
    - **描述** – 输入模型的描述。
    - **优先级计算方法** – 选择以下值之一：

        - *优先级范围* – 当您选择此值时，**计划优先级范围** 网格将可用。 在那里，您必须建立多个优先级范围来定义计划优先级值。
        - *最大库存数量的百分比* – 根据超过最大库存数量的计划库存级别，以百分比形式计算计划优先级值。

    - **计划订单创建** – 当 **优先级计算方法** 字段设置为 *优先级范围* 时，此字段可用。 选择以下值之一：

        - *具有最重要优先级的单一供应* – 不根据优先级范围拆分计划订单。 计划订单的计划优先级基于最重要的优先级范围（即最低计划优先级值）。
        - *根据优先级范围拆分* – 根据计划优先级范围将需求拆分为多个计划订单。 各个计划订单的计划优先级由相关计划优先级范围的计划优先级定义。

    - **考虑需求优先级** – 将此选项设置为 *是* 可以限制为供应创建的新计划订单的优先级。 （此优先级不会低于相关需求的优先级。）如果您将此选项设置为 *否*，在计算供应订单的优先级时将不考虑需求订单的优先级。

1. 如果将 **优先级计算方法** 字段设置为 *优先级范围*，可以根据需要使用 **计划优先级范围** 快速选项卡工具栏上的 **添加** 和 **删除** 按钮添加或删除优先级范围行。 如果存在多行，并且您插入新行，计划优先级将自动设置为所选行及其上面一行的平均值。 对于每一行，设置以下字段：

    - **计划优先级** – 输入 0.00 到 100.00 之间的任何值。 此值表示用于行的计划优先级。 最低优先级值代表最高优先级。 已分配默认值，但您可以根据需要进行更改。 相同的 **计划优先级** 值不能用于同一个计划优先级模型中的多个计划优先级范围。
    - **描述** – 输入计划优先级范围的描述（如 *再订购点到最大值*）。
    - **起始数量**– 计划优先级范围的下限。 此值是只读的，基于上一个计划优先级范围的 **目标数量** 和 **目标数量的百分比** 值。
    - **目标数量** – 从应用于定义范围上限的物料覆盖范围中选择此字段。 支持以下值，将影响下一个范围的 **起始数量** 值：

        - *零* – 此值表示从负值到零的范围（*零或更少* 到 *零*）。 对于选择了此值的行，**目标数量的百分比** 字段是只读的，始终设置为 *100%*。
        - *最小库存数量* – 此值表示 **物料覆盖范围** 页面上物料的 **最小** 值。 对于选择此值的行，**目标数量的百分比** 字段是可编辑的，用于设置下一个范围的 **起始数量** 值（例如，设置为 *最低库存数量的 80%*）。
        - *再订购点* – 此值表示 **物料覆盖范围** 页面上物料的 **再订购点** 值。 对于选择此值的行，**目标数量的百分比** 字段是可编辑的，用于设置下一个范围的 **起始数量** 值（例如，设置为 *再订购点的 80%*）。
        - *最大库存数量* – 此值表示 **物料覆盖范围** 页面上物料的 **最大** 值。 对于选择此值的行，**目标数量的百分比** 字段是可编辑的，用于设置下一个范围的 **起始数量**（例如，设置为 *最低库存数量的 80%*）。
        - *无限* – 此值表示范围的无限高级别（*无限或更少* 到 *无限*）。 对于选择了此值的行，**目标数量的百分比** 字段是只读的，始终设置为 *100%*。

    - **目标数量的百分比** – 根据在 **目标数量** 字段中选择的值，输入用于计算计划优先级范围上限的百分比值。 例如，如果 **目标数量** 字段设置为 *最小库存数量*，**目标数量的百分比** 字段设置为 *50*，上限将是相关物料覆盖范围内最小库存数量的 50%。

1. 在 **计划优先级默认值** 快速选项卡上，根据需要设置字段，为每种类型的供应或需求行（销售订单、采购订单、转移单或需求预测）定义默认计划优先级。 只能输入正值。

## <a name="view-and-maintain-planning-priority"></a>查看和维护计划优先级

计划优先级在 **计划优先级** 字段中显示和设置。 您可以在下表中列出的页面上找到此字段。 此优先级将设置为 0（零）到 100 之间的数字，其中 0 代表重要性最高。

| 页 | 字段位置 | 值来源 |
|---|---|---|
| 需求预测行 | <p>**物料** 选项卡</p><p>（在上面部分中选择一行，然后选择 **物料** 选项卡。）</p> | 默认值或手动设置的值 |
| 销售订单详细信息 | <p>**行详细信息** 快速选项卡上的 **交货** 选项卡</p><p>（在 **销售订单行** 快速选项卡上选择一行，然后在 **行详细信息** 快速选项卡上，选择 **交货** 选项卡。）</p> | 默认值、来自内部公司的值或手动设置的值 |
| 采购订单详细信息 | <p>**行详细信息** 快速选项卡上的 **交货** 选项卡</p><p>（在 **采购订单行** 快速选项卡上选择一行，然后在 **行详细信息** 快速选项卡上，选择 **交货** 选项卡。）</p> | 确认期间根据计划订单设置的值、来自内部公司的值或手动设置的值 |
| 转移单详细信息 | <p>**行详细信息** 快速选项卡上的 **交货** 选项卡</p><p>（在 **转移单行** 快速选项卡上选择一行，然后在 **行详细信息** 快速选项卡上，选择 **交货** 选项卡。）</p> | 确认期间根据计划订单设置的值或手动设置的值 |
| 计划订单详细信息 | **常规** 快速选项卡 | 主计划期间计算的值或手动设置的值 |

### <a name="intercompany-trade"></a>内部公司交易

内部公司供应和需求行上的 **计划优先级** 值在链接实体之间共享。 任一方的修改将反映在链接订单行上。

下面举了一些示例加以说明：

- 用户将内部公司销售订单行的计划优先级从 20 改为 30。 此更改将反映在链接的内部公司采购订单行上。
- 用户将内部公司采购订单行的计划优先级从 40 改为 50。 此更改将反映在链接的内部公司销售订单行上。
