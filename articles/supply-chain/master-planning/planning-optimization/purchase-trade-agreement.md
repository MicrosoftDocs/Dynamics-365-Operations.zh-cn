---
title: 使用采购贸易协议进行主计划
description: 本主题介绍计划优化如何基于在采购贸易协议中找到的最佳价格或提前期来查找计划订单的供应商和/或提前期。
author: ChristianRytt
ms.date: 06/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ReqCreatePlanWorkspace
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: crytt
ms.search.validFrom: 2020-05-29
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 138bf58e07d4d6df3c2106e4176e02fcdb0a6dba
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "5820410"
---
# <a name="master-planning-with-purchase-trade-agreements"></a>使用采购贸易协议进行主计划

[!include [banner](../../includes/banner.md)]

本主题介绍计划优化如何基于在为给定产品指定的所有采购贸易协议中找到的最佳价格或提前期，来查找计划订单的供应商和/或提前期。

## <a name="turn-on-the-purchase-trade-agreements-for-planning-optimization-feature"></a>打开“用于计划优化的采购贸易协议”功能

此功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作区检查功能状态和开启功能（如果需要）。 在那里，此功能以以下方式列出：

- **模块**：*主计划*
- **功能名称**：*用于计划优化的采购贸易协议*

## <a name="prepare-your-system-to-evaluate-purchase-trade-agreements-during-master-planning"></a>准备系统以在主计划期间评估采购贸易协议

请按照以下步骤将系统配置为应用评估采购贸易协议的计划优化。

1. 转到 **主计划 \> 设置 \> 主计划参数**。 在 **计划订单** 选项卡上，在 **供应商** 部分，设置以下值：

    - **查找贸易协议** – 将此选项设置为 **是** 以在主计划中包括采购贸易协议。
    - **搜索条件** – 选择您希望每个采购贸易协议确定优先级的因素：**最小提前期** 或 **最低单位价格**。

1. 转到 **采购 \> 设置 \> 价格和折扣 \> 启用价格/折扣**，确保 **供应商** 选项设置为 **是**。
1. 转到 **产品信息管理 \> 设置 \> 维度和变型组 \> 存储维度组**，然后选择一个将应用于主计划应评估其采购贸易协议的产品的存储维度组。 确保此组中的每个相关存储维度在 **对于采购价** 列有复选标记。 对其他所有相关的存储维度组重复此步骤。

## <a name="prepare-a-released-product-to-evaluate-purchase-trade-agreements-during-master-planning"></a>准备已发布产品以在主计划期间评估采购贸易协议

如上一节所述准备好系统后，应按照以下步骤操作，以确保正确设置要与此功能一起使用的每个产品。

1. 转到 **产品信息管理 \> 产品 \> 已发布产品**，打开一个目标产品。
1. 在 **采购** 快速选项卡上，确保未在 **供应商** 字段中分配供应商。
1. 在操作窗格上的 **计划** 选项卡中的 **覆盖范围组** 中，选择 **物料覆盖范围** 打开所选产品的 **物料覆盖范围** 页。 验证以下设置：

    - 在 **常规** 选项卡上，您可以设置供应商覆盖。 如果您希望“计划优化”使用采购贸易协议来选择供应商，您应该通过清除 **使用特定设置** 复选框来阻止供应商覆盖。
    - 在 **提前期** 选项卡上，您可以设置提前期覆盖。 如果您希望“计划优化”使用采购贸易协议来选择提前期，则应该阻止提前期覆盖。 清除您希望使用采购贸易协议选择的每个提前期类型的复选框（**采购**、**生产** 和/或 **转移**）。

1. 关闭 **物料覆盖范围** 页面返回到所选产品的详细信息页面。
1. 在操作窗格上，在 **计划** 选项卡上，在 **预测** 组中，选择 **供应预测** 打开 **供应预测** 页。 确保此处显示的行在 **供应商帐户** 列中没有值。
1. 关闭 **供应预测** 页面返回到所选产品的详细信息页面。
1. 在操作窗格上，在 **采购** 选项卡上，在 **贸易协议** 组中，选择 **查看贸易协议**。 确保列出了所有相关的采购贸易协议。 另请确保您希望“计划优化”使用为协议指定的提前期的每个协议的 **忽略提前期** 选项设置为 **否**。
1. 在操作窗格上的 **计划** 选项卡中的 **订单设置** 中，选择 **默认订单设置** 打开所选产品的 **默认订单设置** 页。 在 **采购订单** 快速选项卡上，查看 **采购提前期** 字段的值。 如果未定义任何物料覆盖范围提前期覆盖，“计划优化”在选择 **忽略提前期** 选项设置为 **是** 的贸易协议时将使用此值。 因此，您应该根据需要调整此值。
1. 为每个相关产品重复此过程。

> [!NOTE]
> 采购贸易协议行上的货币必须与所选供应商的货币匹配。 主计划将仅包含货币与供应商的货币匹配的采购贸易协议行中的信息。

## <a name="examples-of-how-planning-optimization-finds-vendor-and-lead-times"></a>“计划优化”如何查找供应商和提前期的示例

下表提供了一些示例，这些示例显示已发布产品的各种设置，及其关联的采购贸易协议如何影响为生成的计划采购订单找到的值。 最右边两列中的 **粗体** 值是“计划优化”选择的值。 其他列中的 **_粗体和斜体_** 值是为每一行生成这些结果值的设置。

| 已发布产品：供应商 | 默认订单设置：提前期 | 物料覆盖范围：覆盖供应商 | 物料覆盖范围：覆盖提前期 | 贸易协议：供应商 | 贸易协议：提前期 | 贸易协议：忽略提前期 | 生成的供应商 | 生成的提前期 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ***US001** _ | _*_1_*_ | 不 | 不 | US003 | 3 | 不 | _ *US001** | **1** |
| US001 | 1 | ***是：US002** _ | _*_是：2_*_ | US003 | 3 | 不 | _ *US002** | **2** |
| *（空白）* | 1 | 不 | 不 | ***US003** _ | _*_3_*_ | 不 | _ *US003** | **3** |
| *（空白）* | ***1** _ | 不 | 不 | _*_US003_*_ | 3 | 是 | _ *US003** | **1** |
| *（空白）* | ***1** _ | _*_是：US002_*_ | 不 | US003 | 3 | 不 | _ *US002** | **1** |
| *（空白）* | ***1** _ | _*_是：US002_*_ | 不 | US003 | 3 | 不 | _ *US002** | **1** |
| *（空白）* | 1 | 不 | 是：2 | ***US003** _ | _*_3_*_ | 不 | _ *US003** | **3** |
| *（空白）* | 1 | 不 | ***是：2** _ | _*_US003_*_ | 3 | 是 | _ *US003** | **2** |

## <a name="additional-resources"></a>其他资源

[采购协议](../../procurement/purchase-agreements.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]