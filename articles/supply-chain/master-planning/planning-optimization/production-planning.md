---
title: 生产计划
description: 本文介绍生产计划，并说明如何使用计划优化来修改计划的生产订单。
author: t-benebo
ms.date: 06/01/2021
ms.topic: article
ms.search.form: ReqCreatePlanWorkspace
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2020-12-15
ms.dyn365.ops.version: 10.0.13
ms.openlocfilehash: 151aa3688c570ea6ec282c297ed18288dd886131
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2022
ms.locfileid: "8873773"
---
# <a name="production-planning"></a>生产计划

[!include [banner](../../includes/banner.md)]

计划优化支持多个生产场景。 如果要从现有的内置主计划引擎迁移，请注意某些变更的行为，这一点很重要。

以下视频简要介绍了本文中讨论的一些概念：[Dynamics 365 Supply Chain Management：计划优化增强](https://youtu.be/u1pcmZuZBTw)。

## <a name="turn-on-this-feature-for-your-system"></a>为您的系统启用此功能

如果您的系统尚未包含本文中所述的功能，请转到 [功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)，打开 *计划优化的计划生产订单* 功能。

## <a name="planned-production-orders"></a>计划生产订单

当主计划创建计划订单以满足要求时，订单类型由 **计划订单类型** 字段的值确定。 如果 **计划订单类型** 字段设置为 *生产*，将创建计划生产订单。 这些计划生产订单包括有关有效物料清单 (BOM) 和来自相关生产设置的工艺路线 ID 的信息。

## <a name="requirements-from-boms"></a>BOM 的要求

主计划过程中会采用 BOM 信息。 计划输出包括材料供应，以满足生产的相关材料需求。

在主计划期间，当前有效的 BOM 用于确定生产所需的材料。 此步骤在与所需生产订单相关的 BOM 结构的所有级别完成。 材料要求通过使用可用的现有库存量、现有的按订购供应和经过审核的计划订单来满足。 如果有任何地方需要其他材料，将创建计划订单来满足需求。

## <a name="scheduling-during-firming"></a>确认期间的计划

计划生产订单包括生产计划所需的工艺路线 ID。 但是，计划运行期间对计划订单的计划支持还未确定。 工艺路线 ID 用于在确认期间对计划生产订单进行计划。 因此，计划生产订单的提前期可能不同于从其生成的相关的已确认计划生产订单的提前期，如下所述：

- **计划生产订单** – 提前期基于已发布产品的静态提前期。
- **已确认生产订单** – 提前期基于使用工艺路线信息和相关资源约束的计划。

有关预期功能可用性的详细信息，请参阅[计划优化适应分析](planning-optimization-fit-analysis.md)。

如果您依赖于计划优化还不可用的生产功能，您可以继续使用内置的主计划引擎。 不需要处理异常。

## <a name="delays"></a>延迟

如果所需材料的提前期长于今天的日期和材料要求日期之间的期间，所需材料的计划订单和相关生产订单将延迟。 对于计划订单，延迟（以天为单位）根据已发布产品的提前期计算。 延迟信息然后传播到 BOM 结构的所有级别。 因此，您可以一直关注延迟原材料对客户销售订单的影响。

## <a name="modifying-planned-orders"></a>修改计划订单

当您更改计划订单的信息时，您会收到以下消息：“请注意，在运行下一个主计划之前，对计划订单的手动更改的影响不会反映在计划的剩余部分中。”

如果要更改计划订单上的信息并查看对相关材料要求的影响，请按照以下步骤操作。

1. 更新计划订单。
2. 审核计划订单。
3. 运行主计划。

运行主计划时，如果包含计划生产订单，则不应使用筛选器。 有关详细信息，请参阅本文后面的[筛选器](#filters)一节。

> [!NOTE]
> 如果计划订单的交货日期更改为以后的日期，可能会根据新计划订单对需求加以限定。 当新供应日期导致限定需求出现延迟，但是根据提前期设置，可以避免这一延迟，这时会发生此行为。

## <a name="explosion-page"></a>分解页

您可以使用 **分解** 页分析特定生产订单或计划生产订单所需的需求、相关的覆盖范围以及限定标准信息。 **分解** 页上的信息在主计划期间更新。 您不能直接从 **分解** 页更新信息。

## <a name="filters"></a><a name="filters"></a>筛选器

若要确保计划优化具有计算正确结果所需的信息，您必须在计划订单的整个 BOM 结构中包括与产品有任何关系的所有产品。 对于包含生产的计划场景，我们建议您不要筛选主计划运行。

虽然使用内置的主计划引擎时会自动检测到依赖子项并将其包括在主计划运行中，但是计划优化当前不会执行此操作。

例如，如果产品 A 的 BOM 结构中的单个螺栓还用于生产产品 B，产品 A 和 B 的 BOM 结构中的所有产品都必须包含在筛选器中。 因为要确保所有产品都是筛选器的一部分可能非常复杂，所以我们建议在涉及生产订单时避免发生筛选后的主计划运行。 否则，主计划将产生不需要的结果。

### <a name="reasons-to-avoid-filtered-master-planning-runs"></a>避免发生筛选后的主计划运行的原因

当您为产品运行筛选的主计划时，计划优化（与内置的主计划引擎不同）不会检测到该产品的 BOM 结构中的所有子产品和原材料，因此不会将它们包括在主计划运行中。 即使计划优化标识产品的 BOM 结构中的第一级，它也不会从数据库加载任何产品设置（例如，默认订单类型或物料范围）。

在计划优化中，运行的数据将预先加载并应用筛选器。 这意味着，如果包含在特定产品中的子产品或原材料不是筛选器的一部分，则不会为运行捕获与之相关的信息。 此外，如果子产品或原材料也包含在另一个产品中，则仅包含原始产品及其组件的筛选后运行将删除为该其他产品创建的现有计划需求。

此逻辑可能会导致筛选后的主计划运行产生意外结果。 以下部分提供了说明可能发生的意外结果的示例。

### <a name="example-1"></a>示例 1

成品 *FG* 由以下组件组成：

- 原材料 *R*
- 子产品 *S1*，由子产品 *S2* 组成

原材料 *R* 具有现有库存，而子产品 *S1* 没有库存。

当您为成品 *FG* 执行筛选后的主计划运行时，您将获得成品 *FG* 的计划生产订单、原材料 *R* 的计划采购订单和子产品 *S1* 的计划采购订单。 这是一个不想要的结果，因为计划优化忽略了需要使用 *S2* 而不是直接订购生产的原材料 *R* 和子产品 *S1* 的现有供应。 发生这种情况是因为计划优化只有成品 *FG* 的组件列表，而没有任何相关信息，例如其组件或其默认订单设置的现有供应。

### <a name="example-2"></a>示例 2

基于前面的示例，一个额外的成品 *FG2* 也使用子产品 *S1*。 成品 *FG2* 存在计划的订单，其所有组件（包括 *S1*）存在计划的需求。

您决定通过将成品 *FG* 的 BOM 结构中的所有子产品和原材料添加到筛选器，然后运行完全重新生成，克服前面示例中筛选后的主计划运行产生的不想要结果。

当您运行完全重新生成时，系统会删除所有包含产品的所有现有结果，然后根据新计算重新创建结果。 这意味着产品 *S1* 的现有计划需求将删除，然后考虑仅重新创建成品 *FG* 需求，而成品 *FG2* 需求将忽略。 发生这种情况是因为当您运行计划优化时，它不包括其他计划生产订单的计划需求&mdash;仅使用运行期间生成的计划需求。

> [!NOTE]
> 如果成品 *FG2* 的现有计划订单处于状态 *已批准* 下，将包括批准的计划需求，即使未将父产品添加到筛选器。

因此，除非您添加成品 *FG*、成品 *FG2* 和这些组件所属的所有其他产品（连同其组件）的所有组件，否则筛选后的主计划运行将提供不想要的结果。

因为要确保所有产品都是筛选器的一部分可能非常复杂，所以我们建议在涉及生产订单时避免发生筛选后的主计划运行。

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
