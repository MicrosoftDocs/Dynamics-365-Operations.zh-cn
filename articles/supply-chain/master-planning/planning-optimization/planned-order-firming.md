---
title: 确定计划订单
description: 本主题说明如何确认计划订单。 确认计划订单后，它们将变为实际的采购订单、转移单或生产订单。
author: ChristianRytt
ms.date: 04/22/2021
ms.search.form: ReqTransPo, ReqTransFirmLog
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: crytt
ms.search.validFrom: 2021-04-22
ms.dyn365.ops.version: 10.0.19
ms.openlocfilehash: e2fc40e3e9874d47dd51e773628ba1ce75b8ebab
ms.sourcegitcommit: 74e47075eab2b0b28f82b0d57f439719847ecb01
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/07/2021
ms.locfileid: "6193873"
---
# <a name="firm-planned-orders"></a><span data-ttu-id="4b637-104">确定计划订单</span><span class="sxs-lookup"><span data-stu-id="4b637-104">Firm planned orders</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="4b637-105">计划订单必须作为主计划流程的一部分进行 *确认*（即下达）。</span><span class="sxs-lookup"><span data-stu-id="4b637-105">Planned orders must be *firmed* (that is, released) as part of the master planning process.</span></span> <span data-ttu-id="4b637-106">确认计划订单后，它们将变为实际的采购订单、转移单或生产订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-106">When planned orders are firmed, they become actual purchase orders, transfer orders, or production orders.</span></span> <span data-ttu-id="4b637-107">这些订单也称为 *已下达订单* 或 *未结订单*。</span><span class="sxs-lookup"><span data-stu-id="4b637-107">These orders are also known as *released orders* or *open orders*.</span></span>

<span data-ttu-id="4b637-108">有三种确认计划订单的方法：</span><span class="sxs-lookup"><span data-stu-id="4b637-108">There are three methods for firming planned orders:</span></span>

- <span data-ttu-id="4b637-109">**手动确认** – 在列表中选择特定计划订单，然后手动启动流程。</span><span class="sxs-lookup"><span data-stu-id="4b637-109">**Manual firming** – Select specific planned orders in a list, and then manually start the process.</span></span>
- <span data-ttu-id="4b637-110">**自动确认** – 为覆盖范围组、单个物料以及物料与主计划的组合定义默认确认时限。</span><span class="sxs-lookup"><span data-stu-id="4b637-110">**Auto-firming** – Define a default firming time fence for coverage groups, individual items, and combinations of items and master plans.</span></span> <span data-ttu-id="4b637-111">然后，在主计划运行期间，如果订单日期在指定的确认时限内，将自动确认计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-111">Then, during master planning runs, planned orders will automatically be firmed if the order date is within the specified time fence for firming.</span></span>
- <span data-ttu-id="4b637-112">**基于查询的确认** – 将查询定义为根据属性选择计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-112">**Query-based firming** – Define a query to select planned orders based on their properties.</span></span> <span data-ttu-id="4b637-113">您可以设置批处理作业来定期运行查询和确认匹配的订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-113">You can set up a batch job to run the query and firm matching orders on a regular schedule.</span></span>

<span data-ttu-id="4b637-114">本主题详细介绍每种方法。</span><span class="sxs-lookup"><span data-stu-id="4b637-114">This topic describes each method in detail.</span></span>

## <a name="enable-the-features-that-are-described-in-this-topic"></a><a name="enable-features"></a><span data-ttu-id="4b637-115">启用本主题中所述的功能</span><span class="sxs-lookup"><span data-stu-id="4b637-115">Enable the features that are described in this topic</span></span>

<span data-ttu-id="4b637-116">大多数计划订单功能在使用计划优化的 Microsoft Dynamics 365 Supply Chain Management 的所有标准安装中都有提供。</span><span class="sxs-lookup"><span data-stu-id="4b637-116">Most planned order features are available in all standard installations of Microsoft Dynamics 365 Supply Chain Management that use Planning Optimization.</span></span> <span data-ttu-id="4b637-117">但是，本主题中所述的一些功能必须先在“功能管理”中打开，然后才能够使用。</span><span class="sxs-lookup"><span data-stu-id="4b637-117">However, a few of the features that are described in this topic must be turned on in Feature management before you can use them.</span></span>

### <a name="enable-parallelized-firming-of-planned-orders"></a><span data-ttu-id="4b637-118">启用并行确认计划订单</span><span class="sxs-lookup"><span data-stu-id="4b637-118">Enable parallelized firming of planned orders</span></span>

<span data-ttu-id="4b637-119">并行确认通过将确认流程在多个线程之间并行化来帮助加快此流程。</span><span class="sxs-lookup"><span data-stu-id="4b637-119">Parallelized firming helps speed up the firming process by parallelizing it across multiple threads.</span></span> <span data-ttu-id="4b637-120">当确认很多计划订单时，此方法会很有用。</span><span class="sxs-lookup"><span data-stu-id="4b637-120">This approach can be useful when many planned orders are firmed.</span></span>

<span data-ttu-id="4b637-121">要使此功能在您的系统中可用，转到 [功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)，打开 *并行确认计划订单* 功能。</span><span class="sxs-lookup"><span data-stu-id="4b637-121">To make this functionality available in your system, go to [Feature management](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Parallel firming of planned orders* feature.</span></span>

### <a name="enable-planned-order-firming-with-filtering"></a><span data-ttu-id="4b637-122">启用通过筛选确认计划订单</span><span class="sxs-lookup"><span data-stu-id="4b637-122">Enable planned order firming with filtering</span></span>

<span data-ttu-id="4b637-123">通过筛选确认计划订单可以让您定义选择要确认的计划订单的逻辑条件。</span><span class="sxs-lookup"><span data-stu-id="4b637-123">Planned order firming with filtering lets you define logical criteria for selecting which planned orders to firm.</span></span> <span data-ttu-id="4b637-124">您还可以预览选择了哪些计划订单，在后台运行流程和/或将其计划为批处理作业。</span><span class="sxs-lookup"><span data-stu-id="4b637-124">You can also preview which planned orders were selected, run the process in the background, and/or schedule it as a batch job.</span></span>

<span data-ttu-id="4b637-125">要使此功能在您的系统中可用，转到 [功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)，打开 *通过筛选确认计划订单* 功能。</span><span class="sxs-lookup"><span data-stu-id="4b637-125">To make this functionality available in your system, go to [Feature management](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Planned order firming with filtering* feature.</span></span>

### <a name="enable-auto-firming-for-planning-optimization"></a><span data-ttu-id="4b637-126">启用计划优化自动确认</span><span class="sxs-lookup"><span data-stu-id="4b637-126">Enable auto-firming for Planning Optimization</span></span>

<span data-ttu-id="4b637-127">自动确认可以让您在确认时限内作为主计划流程的一部分确认计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-127">Automatic firming lets you firm planned orders as part of the master planning process during the time fence for firming.</span></span> <span data-ttu-id="4b637-128">Supply Chain Management 中内置的计划引擎始终支持自动确认。</span><span class="sxs-lookup"><span data-stu-id="4b637-128">Auto-firming is always supported for the planning engine that is built into Supply Chain Management.</span></span> <span data-ttu-id="4b637-129">但是，如果还要将它与计划优化一起使用，则必须打开此功能。</span><span class="sxs-lookup"><span data-stu-id="4b637-129">However, to use it with Planning Optimization too, you must turn on the feature.</span></span>

<span data-ttu-id="4b637-130">要使此功能在您的系统中可用，转到 [功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)，打开 *计划优化自动确认* 功能。</span><span class="sxs-lookup"><span data-stu-id="4b637-130">To make this functionality available in your system, go to [Feature management](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md), and turn on the *Auto-firming for Planning Optimization* feature.</span></span>

## <a name="manually-firm-planned-orders"></a><span data-ttu-id="4b637-131">手动确认计划订单</span><span class="sxs-lookup"><span data-stu-id="4b637-131">Manually firm planned orders</span></span>

<span data-ttu-id="4b637-132">要手动确认计划订单，查找并选择要确认的计划订单，然后手动开始确认流程。</span><span class="sxs-lookup"><span data-stu-id="4b637-132">To manually firm planned orders, you find and select the planned orders that you want to firm, and then you manually start the firming process.</span></span>

1. <span data-ttu-id="4b637-133">[打开任何一个计划订单列表页](approved-planned-order.md#view-planned-orders)。</span><span class="sxs-lookup"><span data-stu-id="4b637-133">[Open any planned orders list page](approved-planned-order.md#view-planned-orders).</span></span>
1. <span data-ttu-id="4b637-134">使用 **筛选器** 字段、**计划** 字段和列标题对列表进行筛选和排序，以便您可以找到所需的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-134">Use the **Filter** field, **Plan** field, and column headings to filter and sort the list so that you can find the planned orders that you're looking for.</span></span>
1. <span data-ttu-id="4b637-135">选择要确认的每个计划订单的复选框。</span><span class="sxs-lookup"><span data-stu-id="4b637-135">Select the check box for each planned order that you want to firm.</span></span> <span data-ttu-id="4b637-136">如果要确认页面上当前列出的所有计划订单（基于您应用的筛选器），请跳过此步骤。</span><span class="sxs-lookup"><span data-stu-id="4b637-136">If you want to firm all the planned orders that are currently listed on the page (based on the filters that you applied), skip this step.</span></span>
1. <span data-ttu-id="4b637-137">在操作窗格上，选择以下按钮之一：</span><span class="sxs-lookup"><span data-stu-id="4b637-137">On the Action Pane, select one of the following buttons:</span></span>

    - <span data-ttu-id="4b637-138">**确认** – 仅确认选定的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-138">**Firm** – Firm only the selected planned orders.</span></span>
    - <span data-ttu-id="4b637-139">**全部确认** – 确认页面上当前列出的所有计划订单（基于您应用的筛选器），无论是否选中了任何复选框。</span><span class="sxs-lookup"><span data-stu-id="4b637-139">**Firm all** – Firm all the planned orders that are currently listed on the page (based on the filters that you applied), regardless of any check boxes that are selected.</span></span> <span data-ttu-id="4b637-140">如果要确认很多计划订单，此选项会非常有用。</span><span class="sxs-lookup"><span data-stu-id="4b637-140">This option can be useful if you're firming many planned orders.</span></span>

1. <span data-ttu-id="4b637-141">在 **确认** 对话框中，在 **参数** 快速选项卡上，设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="4b637-141">In the **Firming** dialog box, on the **Parameters** FastTab, set the following fields.</span></span> <span data-ttu-id="4b637-142">（这些字段中有很多从 **主计划参数** 页上的 **标准更新** 选项卡获取默认值。）</span><span class="sxs-lookup"><span data-stu-id="4b637-142">(Many of these fields take their default values from the **Standard update** tab on the **Master planning parameters** page.)</span></span>

    - <span data-ttu-id="4b637-143">**更新标记** – 选择在确认生产订单时使用的库存标记策略。</span><span class="sxs-lookup"><span data-stu-id="4b637-143">**Update marking** – Select the inventory marking policy to use when planned orders are firmed.</span></span>
    - <span data-ttu-id="4b637-144">**出错时停止确认** – 将此选项设置为 *是*，将在计划订单中有一个发生错误时停止确认所有选定的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-144">**Stop firming if an error occurs** – Set this option to *Yes* to stop firming all selected planned orders if an error occurs in one of them.</span></span> <span data-ttu-id="4b637-145">如果 **并行确认** 选项设置为 *是*，此选项必须设置为 *否*。</span><span class="sxs-lookup"><span data-stu-id="4b637-145">This option must be set to *No* if the **Parallelize firming** option is set to *Yes*.</span></span>
    - <span data-ttu-id="4b637-146">**并行确认** – 仅当系统中启用了 [*计划订单并行确认* 功能](#enable-features)且选择了两个或多个计划订单进行确认时，此选项才可用。</span><span class="sxs-lookup"><span data-stu-id="4b637-146">**Parallelize firming** – This option is available only if the [*Parallel firming of planned orders* feature](#enable-features) is turned on in your system, and if you've selected two or more planned orders for firming.</span></span> <span data-ttu-id="4b637-147">将它设置为 *是* 将并行运行确认流程。</span><span class="sxs-lookup"><span data-stu-id="4b637-147">Set it to *Yes* to run the firming processes in parallel.</span></span> <span data-ttu-id="4b637-148">并行确认可以帮助提高性能。</span><span class="sxs-lookup"><span data-stu-id="4b637-148">Parallel firming can help improve performance.</span></span>
    - <span data-ttu-id="4b637-149">**线程数** – 仅当系统中启用了 [*计划订单并行确认* 功能](#enable-features)且您已将 **并行确认** 选项设置为 *是* 时，此选项才可用。</span><span class="sxs-lookup"><span data-stu-id="4b637-149">**Number of threads** – This option is available only if the [*Parallel firming of planned orders* feature](#enable-features) is turned on in your system, and if you've set the **Parallelize firming** option to *Yes*.</span></span> <span data-ttu-id="4b637-150">输入用于并行确认流程的线程数。</span><span class="sxs-lookup"><span data-stu-id="4b637-150">Enter the number of threads to use to parallelize the firming process.</span></span> <span data-ttu-id="4b637-151">有关如何在主计划中使用此选项的建议，请参阅[改善主计划性能](../master-planning-performance.md#number-of-threads)。</span><span class="sxs-lookup"><span data-stu-id="4b637-151">For advice about how to use this option in master planning, see [Improve master planning performance](../master-planning-performance.md#number-of-threads).</span></span>

        > [!NOTE]
        > <span data-ttu-id="4b637-152">**线程数** 字段的值为 *0*（零）会增加主计划的运行时间。</span><span class="sxs-lookup"><span data-stu-id="4b637-152">A value of *0* (zero) for the **Number of threads** field increases the running time of master planning.</span></span> <span data-ttu-id="4b637-153">因此，我们建议您始终将此字段设置为大于 0 的值。</span><span class="sxs-lookup"><span data-stu-id="4b637-153">Therefore, we recommend that you always set this field to a value that is more than 0.</span></span>

    - <span data-ttu-id="4b637-154">**按供应商进行分组** – 将此选项设置为 *是* 将对计划采购订单进行分组，并在确认期间为每个供应商创建一个采购订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-154">**Group by vendor** – Set this option to *Yes* to group planned purchase orders and create one purchase order per vendor during firming.</span></span> <span data-ttu-id="4b637-155">或者，您可以创建一个每一行对应一个计划订单的采购订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-155">Alternatively, you can create one purchase order that has one line for each planned order.</span></span>
    - <span data-ttu-id="4b637-156">**按采购员组进行分组** – 将此选项设置为 *是* 会将计划采购订单进行分组，并创建一个将供应商和采购员组合并的采购订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-156">**Group by buyer group** – Set this option to *Yes* to group planned purchase orders and create one purchase order that combines the vendor and buyer group.</span></span> <span data-ttu-id="4b637-157">要使用此选项，您还必须将 **按供应商进行分组** 选项设置为 *是*。</span><span class="sxs-lookup"><span data-stu-id="4b637-157">To use this option, you must also set the **Group by vendor** option to *Yes*.</span></span>
    - <span data-ttu-id="4b637-158">**按采购协议分组** – 将此选项设置为 *是* 可以将与现有采购协议具有相同供应商的计划采购订单分组到一起，并为每个采购协议创建一个采购订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-158">**Group by purchase agreement** – Set this option to *Yes* to group planned purchase orders that have the same vendor as existing purchase agreements and create one purchase order per purchase agreement.</span></span> <span data-ttu-id="4b637-159">当启用 **按供应商进行分组** 时，此选项会自动启用。</span><span class="sxs-lookup"><span data-stu-id="4b637-159">This option is automatically enabled when **Group by vendor** is enabled.</span></span> <span data-ttu-id="4b637-160">要使用 **按采购协议分组**，**主计划参数** 页上的 **查找采购协议** 必须设置为 *是*。</span><span class="sxs-lookup"><span data-stu-id="4b637-160">To use **Group by purchase agreement**, **Find purchase agreement** must be set to *Yes* on the **Master planning parameters** page.</span></span>
    - <span data-ttu-id="4b637-161">**按期间进行分组**（在 **采购订单** 部分）– 选择用于分组计划采购订单的期间。</span><span class="sxs-lookup"><span data-stu-id="4b637-161">**Group by period** (in the **Purchase orders** section) – Select the period to group planned purchase orders by.</span></span> <span data-ttu-id="4b637-162">若要使用此选项，还必须选择 **按供应商进行分组** 选项。</span><span class="sxs-lookup"><span data-stu-id="4b637-162">To use this option, you must also select the **Group by vendor** option.</span></span>
    - <span data-ttu-id="4b637-163">**按期间进行分组**（在 **转移** 部分）– 选择用于分组计划转移单的期间。</span><span class="sxs-lookup"><span data-stu-id="4b637-163">**Group by period** (in the **Transfers** section) – Select the period to group planned transfer orders by.</span></span> <span data-ttu-id="4b637-164">订单将基于 **源仓库** 和 **目标仓库** 值进行分组。</span><span class="sxs-lookup"><span data-stu-id="4b637-164">The orders will be grouped based on **From warehouse** and **To warehouse** values.</span></span>

    <span data-ttu-id="4b637-165">![“确认”对话框中的“参数”快速选项卡](./media/manual-firming.png "“确认”对话框中的“参数”快速选项卡")</span><span class="sxs-lookup"><span data-stu-id="4b637-165">![Parameters FastTab in the Firming dialog box](./media/manual-firming.png "Parameters FastTab in the Firming dialog box")</span></span>

1. <span data-ttu-id="4b637-166">在 **在后台运行** 快速选项卡上，设置作业，使其以批处理模式运行。</span><span class="sxs-lookup"><span data-stu-id="4b637-166">On the **Run in the background** FastTab, set up the job so that it runs in batch mode.</span></span> <span data-ttu-id="4b637-167">但是，在进行手动确认时，设置定期计划是没有意义的。</span><span class="sxs-lookup"><span data-stu-id="4b637-167">However, it doesn't make sense to set up a recurrent schedule when you're doing manual firming.</span></span> <span data-ttu-id="4b637-168">这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的[后台作业](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)时一样。</span><span class="sxs-lookup"><span data-stu-id="4b637-168">The fields work just as they work for other types of [background jobs](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) in Supply Chain Management.</span></span> <span data-ttu-id="4b637-169">但是，对于手动确认，批处理作业将仅处理当前选择的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-169">However, for manual firming, the batch job will process only the currently selected planned orders.</span></span> <span data-ttu-id="4b637-170">它不会处理与页面上当前应用的筛选器相符的任何订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-170">It won't process any orders that fit the filters that are currently applied on the page.</span></span>
1. <span data-ttu-id="4b637-171">选择 **确定** 应用设置并生成确认的订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-171">Select **OK** to apply your settings and generate the firmed orders.</span></span>

## <a name="auto-firm-planned-orders"></a><span data-ttu-id="4b637-172">自动确认计划订单</span><span class="sxs-lookup"><span data-stu-id="4b637-172">Auto-firm planned orders</span></span>

<span data-ttu-id="4b637-173">自动确认可以使您作为主计划流程的一部分确认计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-173">Automatic firming lets you firm planned orders as part of the master planning process.</span></span> <span data-ttu-id="4b637-174">您可以为覆盖范围组、单个物料以及物料与主计划的组合定义确认时限。</span><span class="sxs-lookup"><span data-stu-id="4b637-174">You can define a firming time fence for coverage groups, individual items, and combinations of items and master plans.</span></span> <span data-ttu-id="4b637-175">然后，在主计划运行期间，如果订单日期在指定的确认时限内，将自动确认计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-175">Then, during master planning runs, planned orders will automatically be firmed if the order date is within the specified time fence for firming.</span></span> <span data-ttu-id="4b637-176">由计划优化和内置主计划操作生成的计划订单以不同的方式处理订单日期（即开始日期）。</span><span class="sxs-lookup"><span data-stu-id="4b637-176">Planned orders that are generated by Planning Optimization and the built-in master planning operation handle the order date (that is, the start date) differently.</span></span>

> [!NOTE]
> <span data-ttu-id="4b637-177">计划采购订单的自动确认仅适用于与供应商关联的物料。</span><span class="sxs-lookup"><span data-stu-id="4b637-177">Auto-firming of planned purchase orders can occur only for items that are associated with a vendor.</span></span>
> 
> <span data-ttu-id="4b637-178">如果启用了更改跟踪，已确认的派生订单（即分包采购订单）的状态将为 *正在审核*。</span><span class="sxs-lookup"><span data-stu-id="4b637-178">Derived orders (that is, subcontract purchase orders) that are firmed will have a status of *In-review* if change tracking is turned on.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4b637-179">必须先在系统中打开 [*计划优化自动确认* 功能](#enable-features)，才能将本节中所述的功能与计划优化一起使用，如本主题开头所述。</span><span class="sxs-lookup"><span data-stu-id="4b637-179">Before the feature that is described in this section can be used with Planning Optimization, the [*Auto-firming for Planning Optimization* feature](#enable-features) must be turned on in your system, as described at the beginning of this topic.</span></span> <span data-ttu-id="4b637-180">自动确认始终可以与内置的主计划引擎一起使用。</span><span class="sxs-lookup"><span data-stu-id="4b637-180">Auto-firming can always be used with the built-in master planning engine.</span></span>

### <a name="auto-firming-with-planning-optimization-vs-the-built-in-planning-engine"></a><span data-ttu-id="4b637-181">使用计划优化与内置计划引擎进行自动确认</span><span class="sxs-lookup"><span data-stu-id="4b637-181">Auto-firming with Planning Optimization vs. the built-in planning engine</span></span>

<span data-ttu-id="4b637-182">计划优化和内置计划引擎都可以用来自动确认计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-182">Both Planning Optimization and the built-in planning engine can be used to auto-firm planned orders.</span></span> <span data-ttu-id="4b637-183">不过，也存在某些重要差异。</span><span class="sxs-lookup"><span data-stu-id="4b637-183">However, there are some important differences.</span></span> <span data-ttu-id="4b637-184">例如，计划优化使用订单日期（即开始日期）来确定要确认的计划订单，而内置计划引擎则使用要求日期（即结束日期）。</span><span class="sxs-lookup"><span data-stu-id="4b637-184">For example, Planning Optimization uses the order date (that is, the start date) to determine which planned orders to firm, whereas the built-in planning engine uses the requirement date (that is, the end date).</span></span> <span data-ttu-id="4b637-185">下表总结了它们之间的不同。</span><span class="sxs-lookup"><span data-stu-id="4b637-185">The following table summarizes the differences.</span></span>

| <span data-ttu-id="4b637-186">功能</span><span class="sxs-lookup"><span data-stu-id="4b637-186">Feature</span></span> | <span data-ttu-id="4b637-187">计划优化</span><span class="sxs-lookup"><span data-stu-id="4b637-187">Planning Optimization</span></span> | <span data-ttu-id="4b637-188">内置计划引擎</span><span class="sxs-lookup"><span data-stu-id="4b637-188">Built-in planning engine</span></span> |
|---|---|---|
| <span data-ttu-id="4b637-189">**日期基数**</span><span class="sxs-lookup"><span data-stu-id="4b637-189">**Date basis**</span></span> | <span data-ttu-id="4b637-190">自动确认基于订单日期（开始日期）。</span><span class="sxs-lookup"><span data-stu-id="4b637-190">Auto-firming is based on the order date (start date).</span></span> | <span data-ttu-id="4b637-191">自动确认基于需求日期（结束日期）。</span><span class="sxs-lookup"><span data-stu-id="4b637-191">Auto-firming is based on the requirement date (end date).</span></span> |
| <span data-ttu-id="4b637-192">**提前期**</span><span class="sxs-lookup"><span data-stu-id="4b637-192">**Lead time**</span></span> | <span data-ttu-id="4b637-193">由于订单日期（开始日期）触发确认，因此您不必将提前期视为确认时限的一部分。</span><span class="sxs-lookup"><span data-stu-id="4b637-193">Because the order date (start date) triggers the firming, you don't have to consider the lead time as part of the firming time fence.</span></span> | <span data-ttu-id="4b637-194">为了帮助确保及时确认订单，确认时限必须长于提前期。</span><span class="sxs-lookup"><span data-stu-id="4b637-194">To help guarantee that orders are firmed in a timely manner, the firming time fence must be longer than the lead time.</span></span> |
| <span data-ttu-id="4b637-195">**当前一周的订单**</span><span class="sxs-lookup"><span data-stu-id="4b637-195">**Orders for the current week**</span></span> | <span data-ttu-id="4b637-196">要确认必须在当前一周开始的所有订单，则确认时限必须为一周。</span><span class="sxs-lookup"><span data-stu-id="4b637-196">To firm all orders that must start during the current week, the firming time fence must be one week.</span></span> | <span data-ttu-id="4b637-197">要确认必须在当前一周开始的所有订单，则确认时限必须为提前期再加上一周时间。</span><span class="sxs-lookup"><span data-stu-id="4b637-197">To firm all orders that must start during the current week, the firming time fence must be the lead time plus one week.</span></span> |

### <a name="set-up-auto-firming-and-the-firming-time-fence"></a><span data-ttu-id="4b637-198">设置自动确认和确认时限</span><span class="sxs-lookup"><span data-stu-id="4b637-198">Set up auto-firming and the firming time fence</span></span>

<span data-ttu-id="4b637-199">您可以通过为相关的覆盖范围设置分配自动确认时限来启用自动确认，如本节稍后所述。</span><span class="sxs-lookup"><span data-stu-id="4b637-199">You turn on auto-firming by assigning an automated firming time fence to the relevant coverage setup, as described later in this section.</span></span> <span data-ttu-id="4b637-200">如果未为任何覆盖范围设置打开自动确认，或者计划从特定页面开始，如已发布产品的 **净要求** 页，将跳过自动确认流程。</span><span class="sxs-lookup"><span data-stu-id="4b637-200">If auto-firming isn't turned on for any coverage setup, or if planning is started from a specific page, such as the **Net requirements** page for a released product, the auto-firming process is skipped.</span></span>

<span data-ttu-id="4b637-201">用于自动确认的分组和标记选项从 **主计划参数** 页上的 **标准更新** 选项卡获取值。</span><span class="sxs-lookup"><span data-stu-id="4b637-201">Grouping and marking options for auto-firming take their values from the **Standard update** tab on the **Master planning parameters** page.</span></span>

<span data-ttu-id="4b637-202">自动确认时限由您为相关覆盖范围设置输入的天数定义。</span><span class="sxs-lookup"><span data-stu-id="4b637-202">The auto-firming time fence is defined by the number of days that you enter for the relevant coverage setup.</span></span> <span data-ttu-id="4b637-203">您可以通过以下方式启用自动确认和控制确认时限：</span><span class="sxs-lookup"><span data-stu-id="4b637-203">You can turn on auto-firming and control the firming time fence in the following ways:</span></span>

- <span data-ttu-id="4b637-204">要定义覆盖范围组的默认确认时限，转到 **主计划 \> 设置 \> 覆盖范围 \> 覆盖范围组**，并选择一个覆盖范围组。</span><span class="sxs-lookup"><span data-stu-id="4b637-204">To define the default firming time fence for a coverage group, go to **Master planning \> Setup \> Coverage \> Coverage groups**, and select a coverage group.</span></span> <span data-ttu-id="4b637-205">然后，在 **其他** 快速选项卡上的 **自动确认时限(天)** 字段中，输入天数。</span><span class="sxs-lookup"><span data-stu-id="4b637-205">Then, on the **Other** FastTab, in the **Automatic firming time fence (days)** field, enter the number of days.</span></span>
- <span data-ttu-id="4b637-206">要覆盖为特定物料的覆盖范围组定义的确认时限，转到 **产品信息管理 \> 已发布产品**。</span><span class="sxs-lookup"><span data-stu-id="4b637-206">To overwrite the firming time fence that is defined for the coverage group for a specific item, go to **Product information management \> Released products**.</span></span> <span data-ttu-id="4b637-207">在操作窗格上，选择 **计划**，然后选择 **物料覆盖范围**。</span><span class="sxs-lookup"><span data-stu-id="4b637-207">On the Action Pane, select **Plan**, and then select **Item coverage**.</span></span> <span data-ttu-id="4b637-208">在 **常规** 选项卡上，选择 **替代时限**，然后在 **自动确认时限(天)** 字段中输入天数。</span><span class="sxs-lookup"><span data-stu-id="4b637-208">On the **General** tab, select **Override time fence**, and then, in the **Automatic firming time fence (days)** field, enter the number of days.</span></span>
- <span data-ttu-id="4b637-209">要覆盖为特定主计划的覆盖范围组和物料覆盖范围定义的确认时限，转到 **主计划 \> 设置 \> 主计划**，选择一个主计划。</span><span class="sxs-lookup"><span data-stu-id="4b637-209">To overwrite the firming time fence that is defined for the coverage group and item coverage for a specific master plan, go to **Master planning \> Setup \> Master plans**, and select a master plan.</span></span> <span data-ttu-id="4b637-210">然后，在 **时限(天)** 快速选项卡上，将 **确认** 选项设置为 *是*，然后输入天数。</span><span class="sxs-lookup"><span data-stu-id="4b637-210">Then, on the **Time fence in days** FastTab, set the **Firming** option to *Yes*, and enter the number of days.</span></span>

<span data-ttu-id="4b637-211">如果您将前面提到的所有时限都设置为 *0*（零），实际将禁用相关覆盖物料的自动确认。</span><span class="sxs-lookup"><span data-stu-id="4b637-211">If you set all the previously mentioned time fences to *0* (zero), auto-firming is effectively disabled for the relevant covered items.</span></span>

## <a name="firm-planned-orders-by-using-a-query"></a><span data-ttu-id="4b637-212">使用查询确认计划订单</span><span class="sxs-lookup"><span data-stu-id="4b637-212">Firm planned orders by using a query</span></span>

[!INCLUDE [preview-banner-section](../../../includes/preview-banner-section.md)]

<span data-ttu-id="4b637-213">基于查询的确认可让您根据预先定义的条件来计划确认。</span><span class="sxs-lookup"><span data-stu-id="4b637-213">Query-based firming lets you plan firming based on criteria that are defined in advance.</span></span> <span data-ttu-id="4b637-214">与自动确认不同，基于查询的确认允许在不同的时间点自动确认订单的不同子集。</span><span class="sxs-lookup"><span data-stu-id="4b637-214">Unlike auto-firming, query-based firming allows for automated firming of different subsets of orders at different points in time.</span></span> <span data-ttu-id="4b637-215">此外，您还可以使用手动或自动操作来确认不同类型的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-215">Additionally, you can use either manual or automated operations to firm different types of planned orders.</span></span> <span data-ttu-id="4b637-216">您还可以根据您的设置预览选择了哪些确认的订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-216">You can also preview which firmed orders are selected based on your settings.</span></span> <span data-ttu-id="4b637-217">因此，您可以确认所作的选择符合您的预期。</span><span class="sxs-lookup"><span data-stu-id="4b637-217">Therefore, you can confirm that the selection fits your expectations.</span></span>

<span data-ttu-id="4b637-218">您可以将自动确认与基于查询的确认相结合。</span><span class="sxs-lookup"><span data-stu-id="4b637-218">You can combine auto-firming with query-based firming.</span></span> <span data-ttu-id="4b637-219">例如，基于查询的确认作业的向前时限比匹配的自动确认覆盖范围配置的时限长。</span><span class="sxs-lookup"><span data-stu-id="4b637-219">For example, a query-based firming job has a forward time fence that is longer than the time fence for a matching auto-firming coverage configuration.</span></span> <span data-ttu-id="4b637-220">因此，基于查询的确认作业将在自动确认触发之前处理计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-220">Therefore, the query-based firming job will process its planned orders before the auto-firming is triggered.</span></span> <span data-ttu-id="4b637-221">您可以利用此行为，以与计划其他供应商的类似产品的订单所不同的方式，计划特定供应商的订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-221">You can take advantage of this behavior to schedule orders for specific vendors differently than orders for similar products from other vendors.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4b637-222">必须先在系统中打开 [*通过筛选确认计划订单* 功能](#enable-features)，才能使用本节中所述的功能，如本主题开头所述。</span><span class="sxs-lookup"><span data-stu-id="4b637-222">Before the feature that is described in this section can be used, the [*Planned order firming with filtering* feature](#enable-features) must be turned on in your system, as described at the beginning of this topic.</span></span>

<span data-ttu-id="4b637-223">要使用基于查询的确认流程确认计划订单，请按照下列步骤操作。</span><span class="sxs-lookup"><span data-stu-id="4b637-223">To firm a planned order by using the query-based firming process, follow these steps.</span></span>

1. <span data-ttu-id="4b637-224">转到 **主计划 \> 主计划 \> 运行 \> 计划订单确认**。</span><span class="sxs-lookup"><span data-stu-id="4b637-224">Go to **Master-planning \> Master planning \> Run \> Planned order firming**.</span></span>
1. <span data-ttu-id="4b637-225">在 **计划订单确认** 对话框的 **参数** 快速选项卡上，设置基本处理、标记和分组选项。</span><span class="sxs-lookup"><span data-stu-id="4b637-225">In the **Planned order firming** dialog box, on the **Parameters** FastTab, set the basic processing, marking, and grouping options.</span></span> <span data-ttu-id="4b637-226">这些选项的工作方式与它们在 **确认** 对话框中的工作方式相同。</span><span class="sxs-lookup"><span data-stu-id="4b637-226">These options work just as they do in the **Firming** dialog box.</span></span> <span data-ttu-id="4b637-227">（有关说明，请参阅上一节。）然后，在 **计划** 部分，设置 **计划订单确认** 对话框特有的以下字段：</span><span class="sxs-lookup"><span data-stu-id="4b637-227">(See the previous section for descriptions.) Then, in the **Plan** section, set the following fields that are unique to the **Planned order firming** dialog box:</span></span>

    - <span data-ttu-id="4b637-228">**计划** – 选择在确认此查询找到的计划订单期间应该应用的主计划。</span><span class="sxs-lookup"><span data-stu-id="4b637-228">**Plan** – Select the master plan that should be applied during firming of the planned orders that are found by this query.</span></span>
    - <span data-ttu-id="4b637-229">**确认向前时限(天)** – 选择主计划必须计算将来多长时间范围内的各个要求和其他注意事项。</span><span class="sxs-lookup"><span data-stu-id="4b637-229">**Firming time fence days forward** – Select how far in the future the various requirements and other considerations must be calculated by master planning.</span></span>
    - <span data-ttu-id="4b637-230">**确认向后时限(天)** – 选择主计划必须计算过去多长时间范围内的各个要求和其他注意事项。</span><span class="sxs-lookup"><span data-stu-id="4b637-230">**Firming time fence days backward** – Select how far in the past the various requirements and other considerations must be calculated by master planning.</span></span>

    <span data-ttu-id="4b637-231">![“计划订单确认”对话框中的“参数”快速选项卡](./media/planned-order-firming-main-1.png "“计划订单确认”对话框中的“参数”快速选项卡")</span><span class="sxs-lookup"><span data-stu-id="4b637-231">![Parameters FastTab in the Planned order firming dialog box](./media/planned-order-firming-main-1.png "Parameters FastTab in the Planned order firming dialog box")</span></span>

1. <span data-ttu-id="4b637-232">要指定订单中应包含哪些记录，选择 **要包括的记录** 快速选项卡上的 **筛选器** 按钮。</span><span class="sxs-lookup"><span data-stu-id="4b637-232">To specify which records should be included in the order, select the **Filter** button on the **Records to include** FastTab.</span></span> <span data-ttu-id="4b637-233">将出现一个标准查询对话，您可以在其中定义选择条件、排序条件和联接。</span><span class="sxs-lookup"><span data-stu-id="4b637-233">A standard query dialog appears, where you can define selection criteria, sorting criteria, and joins.</span></span> <span data-ttu-id="4b637-234">这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的查询时一样。</span><span class="sxs-lookup"><span data-stu-id="4b637-234">The fields work just as they do for other types of queries in Supply Chain Management.</span></span> <span data-ttu-id="4b637-235">此处的字段是只读的，显示与您的查询相关的值。</span><span class="sxs-lookup"><span data-stu-id="4b637-235">The fields here are read-only and show values that are related to your query.</span></span>

    <span data-ttu-id="4b637-236">![“计划订单确认”对话框上的“要包括的记录”快速选项卡](./media/planned-order-firming-main-2.png "“计划订单确认”对话框上的“要包括的记录”快速选项卡")</span><span class="sxs-lookup"><span data-stu-id="4b637-236">![Records to include FastTab on the Planned order firming dialog box](./media/planned-order-firming-main-2.png "Records to include FastTab on the Planned order firming dialog box")</span></span>

1. <span data-ttu-id="4b637-237">选择 **预览** 根据您到目前为止的设置预览已确认订单的内容。</span><span class="sxs-lookup"><span data-stu-id="4b637-237">Select **Preview** to preview the content of your firmed order, based on your settings so far.</span></span> <span data-ttu-id="4b637-238">将确认的计划订单列表显示为一条消息。</span><span class="sxs-lookup"><span data-stu-id="4b637-238">The list of planned orders that will be firmed is shown as a message.</span></span> <span data-ttu-id="4b637-239">然后，您可以根据需要调整设置，直到预览显示您预期的确认订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-239">You can then adjust your settings as required until the preview shows the firmed order as you intend it.</span></span>

    <span data-ttu-id="4b637-240">![确认订单预览的示例](./media/planned-order-firming-preview.png "确认订单预览的示例")</span><span class="sxs-lookup"><span data-stu-id="4b637-240">![Example of a firmed order preview](./media/planned-order-firming-preview.png "Example of a firmed order preview")</span></span>

    > [!WARNING]
    > <span data-ttu-id="4b637-241">此功能将确认所有符合筛选条件的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-241">This feature will firm all planned orders that match the filter criteria.</span></span> <span data-ttu-id="4b637-242">不加选择地确认计划订单可能会导致产生大量不需要的采购订单、转移单和生产订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-242">Uncritical firming of planned orders can cause massive numbers of unwanted purchase, transfer, and production orders to be created.</span></span> <span data-ttu-id="4b637-243">在继续之前，请始终使用 **预览** 按钮验证要包括的记录。</span><span class="sxs-lookup"><span data-stu-id="4b637-243">Before you continue, always use the **Preview** button to validate the records that will be included.</span></span>

1. <span data-ttu-id="4b637-244">在 **在后台运行** 快速选项卡上，设置作业，使其以批处理模式运行，和/或设置定期计划。</span><span class="sxs-lookup"><span data-stu-id="4b637-244">On the **Run in the background** FastTab, set up the job so that it runs in batch mode, and/or set up a recurrent schedule.</span></span> <span data-ttu-id="4b637-245">这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的[后台作业](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)时一样。</span><span class="sxs-lookup"><span data-stu-id="4b637-245">The fields work just as they do for other types of [background jobs](../../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md) in Supply Chain Management.</span></span>
1. <span data-ttu-id="4b637-246">选择 **确定** 应用设置并生成确认的订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-246">Select **OK** to apply your settings and generate the firmed orders.</span></span>

## <a name="track-firmed-orders"></a><span data-ttu-id="4b637-247">跟踪确认的订单</span><span class="sxs-lookup"><span data-stu-id="4b637-247">Track firmed orders</span></span>

<span data-ttu-id="4b637-248">要跟踪已确认的计划订单，请按照下列步骤操作。</span><span class="sxs-lookup"><span data-stu-id="4b637-248">To track a planned order that was firmed, follow these steps.</span></span>

1. <span data-ttu-id="4b637-249">[打开任何一个计划订单列表页](approved-planned-order.md#view-planned-orders)。</span><span class="sxs-lookup"><span data-stu-id="4b637-249">[Open any planned orders list page](approved-planned-order.md#view-planned-orders).</span></span>
1. <span data-ttu-id="4b637-250">打开或选择要跟踪的计划订单。</span><span class="sxs-lookup"><span data-stu-id="4b637-250">Open or select the planned order that you want to track.</span></span>
1. <span data-ttu-id="4b637-251">在操作窗格的 **视图** 选项卡上，在 **视图** 组中，选择 **确认历史记录**。</span><span class="sxs-lookup"><span data-stu-id="4b637-251">On the Action Pane, on the **View** tab, in the **View** group, select **Firming history**.</span></span>

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
