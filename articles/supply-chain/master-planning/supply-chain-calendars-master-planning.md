---
title: 供应链日历以及如何影响主计划
description: 此主题提供供应链日历及其如何影响主计划的概述。
author: t-benebo
manager: AnnBe
ms.date: 01/15/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: shylaw
ms.search.scope: Core, Operations
ms.search.region: global
ms.search.industry: Manufacturing
ms.author: t-benebo
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: 4edcb6a48f705799041d0e29ab7f1a0e52cba434
ms.sourcegitcommit: 0f530e5f72a40f383868957a6b5cb0e446e4c795
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/29/2019
ms.locfileid: "363629"
---
# <a name="supply-chain-calendars-and-how-they-affect-master-planning"></a>供应链日历以及如何影响主计划

[!include [banner](../includes/banner.md)]

此主题提供供应链日历及其如何影响主计划的概述。  说明了用于主计划引擎的不同日历，包括它们如何影响计划订单中的装运和收货日期。 最后，提供有关日历的分配、使用和更新的建议。

## <a name="definition-of-a-calendar"></a>日历的定义

您可以在**组织管理 > 设置 > 日历 > 日历**中定义要用于页面上的组织的日历。 

日历中的每个日期条目可以是**打开**或**已关闭**或**基本日历**。 这在**工作时间**页的**控制**列中指定。 对于每个日期： 
- **打开** - 指示工作在所选日执行。 将根据工作时间模板更新该日历。
- **已关闭** - 指示工作不在该日执行。 
- **基本日历** - 指示特定日期将从基本日历继承工作时间和打开/已关闭。 因此，当基本日历更新时，选定日历将继承基本日历的工序时间。 

对于所有已关闭日期，将自动分配**停止装货**复选框。 对于打开日期，您可以手动选择**停止装货**选项。 这表示工作在此日期执行，但不执行装运。 

## <a name="calendars-that-affect-master-planning"></a>影响主计划的日历

### <a name="calendar-for-a-coverage-group"></a>覆盖范围组的日历
覆盖范围组指示用于属于指定覆盖范围组的物料补货的一组常用参数。 

若要为覆盖范围组添加日历，转到**主计划 > 设置 > 覆盖范围 > 覆盖范围组**。 找到您要分配到日历的覆盖范围组，然后在**日历**字段中选择它。

覆盖范围组可以在不同页面分配： 
    - 在物料的**已发放产品详细信息**页上。 若要查看物料的覆盖范围组，转到**产品信息管理 > 产品 > 已发放产品**，然后选择该物料转到**已发放产品详细信息**页。 您可以在**计划**快速选项卡下看到该物料覆盖范围组。
    - 在**物料覆盖范围**页上。 在已发放产品详细信息页上，单击**物料覆盖范围**转到物料覆盖范围页。 在概览选项卡中，您可以根据站点、仓库和产品维度查看不同的补货参数。 每个物料的覆盖范围组将继承自**已发放产品详细信息**页的覆盖范围组。 这可以使用**常规**选项卡上的**使用特定设置**或**覆盖组设置**覆盖。
    - 在**主计划参数**页上。 如果物料在之前页面未设置覆盖范围组，则主计划将获取在主计划参数中设置的一般覆盖范围组。 这在**一般覆盖范围组**字段中的**主计划 > 设置 > 主计划参数**中设置。 

### <a name="calendar-for-a-vendor"></a>供应商日历
若要指示供应商的工作天数，您可以在供应商的**采购订单默认值**页将采购日历分配给供应商。 

若要设置供应商的日历，您需要在**组织管理 > 日历 > 日历**中创建日历。 在日历创建后，必须将其分配给供应商。 转到**应付帐款 > 供应商 > 所有供应商**，选择要分配日历的供应商。 然后，在**采购订单默认值**快速选项卡上的供应商页面，使用下拉菜单分配新采购日历。 

供应商的日历指示供应商接受采购订单下单的日期，以及他们可以向您的公司交付订单的日期。 因此，具有采购日历的供应商的采购订单的订单日期将是在日历中定义为打开的日期。 这些订单的交付日期也将是打开日期，因此，将影响所采购物料的提前期。 

#### <a name="define-the-lead-time-for-a-purchased-item"></a>定义已采购物料的提前期

若要指定物料的采购提前期（且如果只应考虑工作日），您需要转到产品的默认订单设置页，位于**产品信息管理 > 产品 > 已发放产品**下，然后选择**默认订单设置**。 

> [!Note]
> 采购提前期下的**工作日**指示供应商的工作日。 例如，提前期为 10 天的仅在星期二交付并选择了工作日复选框的日历，指示交付物料将需要 10 个星期（10 个星期二）。
因此，在大多数情况下，不建议为采购订单提前期选择工作日。

#### <a name="define-lead-times-from-the-trade-agreements-page"></a>从贸易协议页面定义提前期

主计划可以设置为包括供应商的所有贸易协议。 贸易协议是固定价格或折扣协议，其为一个或多个客户或供应商销售或采购单个或多个产品而设置。 在计划时，转至**主计划 > 设置 > 主计划参数**，在**计划订单**选项卡上，选择**查找贸易协议**包含贸易协议。 主计划可以选择具有**最小提前期**或**最低单位价格**的供应商。

### <a name="calendar-for-a-warehouse"></a>仓库日历
您可以将日历分配到仓库以指示收货和装运的打开日期。 如果日历尚未分配到仓库，则假设所有日期均打开。 

> [!Note]
> 将日历分配到中转仓库没有任何影响。 中转仓库用于支持转移单。 适用的订单装运或收货日期由“源”仓库和“目标”仓库内的打开日以及交货方式日历定义。

#### <a name="closed-for-pickup-policy"></a>停止装货政策
若要指示仓库已打开可收货，但不能装货，您可以使用仓库日历中的**停止装货政策**。 这也适用于客户提货。 

### <a name="transport-calendar"></a>运输日历 
若要指示可以装运**源仓库**中的转移单的日期，您可以分配**运输日历**。 您可按交货方式，或按交货方式从仓库设置运输日历。 在**销售和市场营销 > 设置 > 配送 > 交货方式**中设置运输日历。 选择交货方式并单击**运输日历**按钮。

可以为每个仓库和创建交货方式创建一个行，其中的日历在**运输日历**列中添加。 它将指定在使用给定交货方式从仓库装运货物时要应用的运输日历。 若要将运输日历应用于使用指定交货方式的所有装运，可以创建行，而无需指定仓库。  这将影响使用指定交货方式的所有装运，不论是哪个仓库。 

如果未分配运输日历，则假设所有日期均为运输打开。

### <a name="calendar-for-a-customer"></a>客户日历
若要指示客户可以接受交货的日期，您可以将收货日历分配到客户。 如果未将日历分配给客户，则假设客户可以在所有日期接收订单。 这将影响销售订单行上的收货日期。 如果您选择客户日历中未“打开”的销售订单行中的日期，系统将指示收货日期无效。 

请注意，每个客户只能包含一个日历。 如果您需要为客户的每个不同地址包含日历，您可以为每个地址创建一个客户，然后分配其各自的日历。 

销售订单行上的请求收货日期受客户日历和交货日期控制方法的影响。 您可以在[订单承诺](https://docs.microsoft.com/en-us/dynamics365/unified-operations/supply-chain/sales-marketing/delivery-dates-available-promise-calculations)中阅读有关如何计算最早交货日期的详细信息。

### <a name="shipping-calendar-for-a-legal-entity"></a>法人的装运日历
若要指示法人可以装运货物的日期，您可以在**管理组织 > 组织 > 法人**下设置装运日历。 选择法人，然后在**装运日历**字段中的**外贸和物流**选项卡中添加日历。 装运日程将充当法人中所有仓库日历的默认源。 

## <a name="how-calendars-affect-dates-in-planning"></a>日历如何影响计划中的日期

### <a name="order-date-of-a-planned-purchase-order"></a>计划采购订单的订单日期 
计划采购订单上的订单日期指示下达订单的日期。 它在供应商日历和覆盖范围组日历中都将是打开日期。 有时，供应商需要在接收采购订单与可以装运货物的时间之间留有几天宽限期。 这些日期在供应商的宽限期天数中指示。 但是，如果采购的物料分配给具有宽限期天数的覆盖范围组，这些宽限期天数将覆盖供应商的宽限期天数。

### <a name="delivery-date-of-a-planned-purchase-order"></a>计划采购订单的交货日期
采购的收货日期指示将收到货物的日期。 它将是日历中的打开日期。 被考虑用来指示可以接收采购订单的日期的日历如下，按优先级最高到最低的顺序排列： 
    1. 供应商日历
    2. 覆盖范围组日历
    3. 接收仓库的仓库日历

请注意，覆盖范围组日历可以在不同页面设置，按以下顺序排定优先级：
    1. **已发放产品详细信息**页的物料覆盖范围组
    2. **物料覆盖范围**页的物料覆盖范围组
    3. **主计划参数**中的默认物料覆盖范围组

### <a name="shipping-date-of-a-planned-transfer-order"></a>计划转移单的装运日期
在两个仓库之间创建转移单时，装运日期和收货日期以及“源”仓库和“目标”仓库包括在转移单标题中。 这两个日期之间的差值是仓库之间的预期运输时间（天）。

计划转移单的装运日期指示从“源”仓库装运货物的日期。 用于指定可用装运日期的日历按优先级列出： 
    1. “源”仓库的仓库日历
    2. 覆盖范围组日历（参见上方的此日历的回退订单），如果存在设置的仓库日历，装运日期将是日历中的打开日期。 如果没有设置的仓库日历，将获取覆盖范围组日历。 

### <a name="receipt-date-of-a-planned-transfer-order"></a>计划转移单的收货日期
计划转移单的收货日期指示在“目标”仓库中接收货物的日期。

用于指定收货日期的日历按优先级列出： 
    1. 覆盖范围组日历 
    2. “目标”仓库的仓库日历，如果存在设置的覆盖范围日历，收货日期将是日历中的打开日期。 如果没有设置的覆盖范围组日历，将获取仓库日历。 

在查找计划转移的装运和收货日期时，装运和收货用户建立的宽限期也会被考虑到。 

## <a name="using-calendars-in-master-planning"></a>在主计划中使用日历

### <a name="assignment-of-scm-calendars"></a>SCM 日历分配
设置日历以标识公司的工作日非常重要。 最佳实现方法是为具有不同工作日的每个元素设置日历。 换言之，与公司相关的所有外部日历（客户、供应商）和所有内部日历（仓库、覆盖范围组和交货方式）。

### <a name="recommendation-on-warehouse-calendars"></a>有关仓库日历的建议
建议每个仓库使用一个日历来包括仅影响仓库的特定更改。 例如，两个或多个仓库可以有相同的工作日，但有不同的装货政策。 在这种情况下，具有各自的装货政策的每个仓库的日历是系统为计划采购订单、转移单和生产订单包含最佳日期的最佳实现方法。 如果仓库日历没有设置，法人日历可以用作仓库日历的默认源。 

### <a name="recommendation-of-coverage-group-calendars"></a>覆盖范围组日历的建议
对于覆盖范围组日历，考虑在主计划中有关于接收日期的覆盖行为的日历非常重要。 因此，建议谨慎使用它。 特别是当需要在一周的特定日期完成补货时很有用。 

### <a name="updating-scm-related-calendars"></a>更新 SCM 相关日历
虽然所有相关日历在其各自的位置（供应商、客户、仓库、交货方式或覆盖范围组）分配很重要，更新它们以反映更改同样非常重要。 系统将根据已分配日历的组合定义生产、转移、采购和销售订单日期。 最佳实践是澄清谁负责在相应区域分配和更新日历。 如果工作日有分解或任何其他异常更改，根据情况更新日历非常重要。 依赖日历的所有任务（如主计划和生产计划编制）均必须在日历更新时重新运行。 
