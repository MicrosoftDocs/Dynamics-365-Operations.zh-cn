---
title: 按订单生产供应自动化
description: 本文介绍如何设置和使用“按订单生产供应自动化”功能添加的各种增强功能。
author: t-benebo
ms.date: 07/27/2022
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: benebotg
ms.search.validFrom: 2022-07-27
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: d376c2f4d8514a4e6122e2e94455d57a39d2babf
ms.sourcegitcommit: 491ab9ae2b6ed991b4eb0317e396fef542d3a21b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/03/2022
ms.locfileid: "9740186"
---
# <a name="make-to-order-supply-automation"></a>按订单生产供应自动化

[!include [banner](../includes/banner.md)]

*按订单生产供应自动化* 功能会向 Microsoft Dynamics 365 Supply Chain Management 添加多项增强功能。 这些增强功能使您能够执行以下任务：

- 查看用户定义期间的资源产能负荷，因此启用产能负荷长期评估。
- 通过控制每个主计划的延迟容差（负天数）来提高灵活性。
- 通过将最新的可能供应与需求挂钩而不是使用第一个可能的供应，使产品可用于紧急订单并优化现有供应的使用。
- 确认后对生产订单保持组件灵活分配，以便系统可以针对紧急需求变化进行优化。 换句话说，将标记限制为一个级别。
- 控制每个销售订单的履行策略。 客户设置中获取了默认设置。
- 增强内部公司信息流。 更新了采购订单，以便包括交货模式、交货条款和外部物料编号的字段。 此更改可确保详细需求信息可以流向供应公司。

本文介绍了如何设置和使用每个增强功能。

## <a name="turn-on-the-make-to-order-supply-automation-feature"></a>打开“按订单生产供应自动化”功能

在使用本文介绍的功能之前，必须针对系统打开此功能。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作区中，其中此功能按照以下方式列出：

- **模块**：*主计划*
- **功能名称**：*按订单生产供应自动化*

## <a name="set-the-number-of-days-to-show-on-capacity-load-page"></a>设置要在“产能负荷”页上显示的天数

通过 **产能负荷** 页面，您可以查看资源的可用产能。 *按订单生产供应自动化* 功能通过添加 **天数** 字段来增强 **产能负荷** 页面。 您可以使用此字段限制 **概述** 网格显示的天数。 您设置的值保存在内存中。 因此，如果您离开页面，然后稍后返回，则 **概览** 网格仍将显示您上次指定的天数。

若要打开 **产能负荷** 页面，以便您可以查看单个资源的可用产能，请按照以下步骤进行操作。

1. 转到 **组织管理 \> 资源 \> 资源**。
1. 选择要检查的资源。
1. 在操作窗格的 **资源** 选项卡上，在 **视图** 组中，选择 **产能负荷**。
1. 使用 **天数** 筛选器限制 **概述** 网格显示的天数。

若要打开 **产能负荷** 页面，以便您可以查看资源组的可用产能，请按照以下步骤进行操作。

1. 转到 **组织管理 \> 资源 \> 资源组**。
1. 选择要检查的资源组。
1. 在操作窗格的 **资源组** 选项卡上，在 **视图** 组中，选择 **产能负荷**。
1. 使用 **天数** 筛选器限制 **概述** 网格显示的天数。

## <a name="apply-a-single-level-of-marking-when-you-firm-planned-orders"></a>确认计划订单时应用单个标记级别

*标记* 用于链接供应和需求。 它类似于 *限定标准*，指示主计划预计如何满足需求。 但是，标记比限定标准更永久。 *按订单生产供应自动化* 功能增加了在确认计划订单时将库存标记限制为单个级别的功能。 在确认计划订单时，它会将以下新选项添加到 **确认** 对话框中的 **更新标记** 字段：

- *单级别标准* - 使用单级别标记。 单级别标记仅标记主物料，而不是其物料清单（物料清单）组件。 因此，您可以在确认后保持生产订单组件分配灵活。 单级别标记使系统能够针对紧急需求变化进行优化。 在 *标准* 单级别标记中，要求订单将根据其履行订单进行标记，但如果履行订单具有剩余数量，则不会标记它们。
- *单级别已扩展* - 使用单级别标记。 在 *已扩展* 单级别标记中，要求订单将根据其履行订单进行标记，并且无论是否剩余任何数量，都始终标记履行订单。

这些选项在 **主计划参数** 页面的 **标准更新** 选项卡上的 **更新标记** 字段中也可用，您在此页面中定义 **确认** 对话框的默认选择。

有关详细信息，请参阅[库存标记](planning-optimization/marking.md)。

## <a name="set-delay-tolerance-negative-days-at-the-master-plan-level"></a>在主计划级别设置延迟容差（负天数）

*按订单生产供应自动化* 功能添加了在主计划级别配置延迟容差（负天数）的功能。 该设置在物料覆盖范围和覆盖范围组级别也可用。 如果在多个级别分配了负天数，则系统将应用以下层次结构来确定要使用的设置：

- 如果在 **主计划** 页上配置了负天数，则计划运行时该设置将覆盖所有其他负天数设置。
- 如果在 **物料覆盖范围** 页面上配置了负天数，则该设置将覆盖此覆盖范围组设置。
- 仅当尚未为相关物料或主计划配置负天数时，才会应用在 **覆盖范围组** 页面上配置的负天数。

要为主计划设置负天数，请按照以下步骤进行操作。

1. 转到 **主计划 \> 设置 \> 计划 \> 主计划**。
1. 在列表窗格中选择一个主计划，或创建一个新的主计划。
1. 在 **按天计算的时限** 快速选项卡上，将 **负天数** 选项设置为 *是*。
1. 在附近的字段中，输入要允许的负天数。

有关如何使用负天数的详细信息，请参阅[延迟容差（负天数）](planning-optimization/delay-tolerance.md)。

## <a name="control-the-pegging-sequence-used-during-master-planning"></a>控制主计划期间使用的限定标准序列

主计划使用 *限定标准序列* 来确定哪个供应将满足哪个需求。 *按订单生产供应自动化* 功能将添加一个新的 **使用最新可能的供应** 选项，使您能够对限定标准序列进行更多控制。 通过将最新的可能供应与需求挂钩而不是使用第一个可能的供应，此新选项使产品可用于紧急订单并优化现有供应的使用。

您可以在主计划、物料覆盖范围或覆盖范围组级别设置限定标准序列。 如果在多个级别设置了限定标准序列，则系统将应用以下层次结构来确定要使用的设置：

- 如果在 **主计划** 页上设置了限定标准序列，则计划运行时该设置将覆盖所有其他限定标准序列设置。
- 如果在 **物料覆盖范围** 页面上设置了限定标准序列，则该设置将覆盖此覆盖范围组设置。
- 仅当尚未为相关物料或主计划配置限定标准序列设置时，才会应用 **覆盖范围组** 页面上设置的限定标准序列。

若要在覆盖范围组级别设置限定标准，请按照以下步骤执行操作。

1. 转至 **主计划 \> 设置 \> 覆盖范围 \> 覆盖范围组**。
1. 在列表窗格中选择一个组，或创建一个新组。
1. 在 **常规** 快速选项卡上的 **限定标准序列** 部分中，使用 **消耗现有库存量** 和 **使用最新供应** 字段来配置限定标准序列。 本节中后面的表显示了如何组合这些设置以定义您的限定标准序列。

若要在物料覆盖范围级别设置限定标准，请按照以下步骤执行操作。

1. 转到 **产品信息管理 \> 产品 \> 已发布产品**。
1. 在网格中选择一个产品，或创建一个新产品。
1. 在操作窗格上，在 **计划** 选项卡上，选择 **物料覆盖范围**。
1. **物料覆盖范围** 页面提供了一些行，允许您定义适用于每个仓库中的物料的覆盖范围规则。 选择网格中的现有行，或创建一个新行。
1. 在 **常规** 选项卡上，选中 **覆盖限定标准序列** 复选框。
1. 使用 **消耗现有库存量** 和 **使用最新供应** 字段配置限定标准序列。 本节中后面的表显示了如何组合这些设置以定义您的限定标准序列。

若要在主计划级别设置限定标准，请按照以下步骤执行操作。

1. 转到 **主计划 \> 设置 \> 计划 \> 主计划**。
1. 在列表窗格中选择一个主计划，或创建一个新的主计划。
1. 在 **常规** 快速选项卡上，将 **覆盖限定标准序列** 选项设置为 *是*。
1. 使用 **消耗现有库存量** 和 **使用最新供应** 字段配置限定标准序列。 本节中后面的表显示了如何组合这些设置以定义您的限定标准序列。

下表显示了如何组合 **消耗现有库存量** 和 **使用最新供应** 设置来建立限定标准序列。

| | 使用最新供应 = 是 | 使用最新供应 = 否 |
|---|---|---|
| **消耗现有库存量** = *在所有供应之前* | <ol><li>现有量</li><li>可以满足需求日期要求的现有供应</li><li>无法满足需求日期要求但仍在负天数内的现有供应</li><li>创建新供应（计划订单）</li></ol> | <ol><li>现有量</li><li>可以满足需求日期要求的现有供应</li><li>无法满足需求日期要求但仍在负天数内的现有供应</li><li>创建新供应（计划订单）</li></ol> |
| **消耗现有库存量** = *在所有供应之后* | <ol><li>可以满足需求日期要求的现有供应</li><li>现有量</li><li>无法满足需求日期要求但仍在负天数内的现有供应</li><li>创建新供应（计划订单）</li></ol> | <ol><li>可以满足需求日期要求的现有供应</li><li>无法满足需求日期要求但仍在负天数内的现有供应</li><li>现有量</li><li>创建新供应（计划订单）</li></ol> |

## <a name="review-and-set-the-fulfillment-policy-that-applies-to-each-sales-order"></a>查看并设置适用于每个销售订单的履行政策

履行政策控制着将销售订单下达到仓库前必须实际保留的订单总价格或数量的百分比。 您可以设置全局默认履行政策，然后根据需要为特定客户覆盖此政策。 *按订单生产供应自动化* 功能将添加以下功能：查看实际应用于任何订单的默认政策，并根据需要应用特定于订单的覆盖。

- 要为销售订单设置全局履行政策默认值，请转到 **应收帐款 \> 设置 \> 应收帐款参数**。 然后，在 **仓库管理** 选项卡上，将 **销售订单履行政策** 字段设置为要使用的政策的名称。 
- 要为销售订单设置特定于客户的履行政策，请转到 **应收帐款 \> 客户 \> 所有客户**。 然后，在 **仓库** 选项卡上，将 **履行政策** 字段设置为要使用的政策的名称。

若要查看适用于任何订单并应用特定于订单的覆盖的默认政策，请按照以下步骤执行操作。

1. 转到 **销售和营销 \> 销售订单 \> 所有销售订单**。
1. 打开要检查或编辑的销售订单。
1. 选择 **页眉** 视图。
1. 在 **仓库** 快速选项卡上，根据需要查看和编辑以下字段：

    - **订单履行策略** - 选择要用于所选订单的履行政策。 将覆盖默认政策。 若要使用 **默认履行政策** 字段中显示的默认履行政策，请将此字段留空。
    - **默认履行政策** - 此字段显示 **订单履行政策** 字段为空白时应用的默认履行政策。 此字段是只读的。 如果为空白，则未定义特定于客户的履行政策或全局默认履行政策。

    如果 **订单履行政策** 字段和 **默认履行政策** 字段都为空白，则不会应用履行政策。 但是，可能存在其他限制，并且可能需要在下达销售订单之前满足预留条件或其他条件。

## <a name="set-the-delivery-mode-and-terms-on-individual-purchase-order-lines"></a>针对单个采购订单行设置交货模式和条款

所有采购订单在订单标题上都包括 **交货条款** 和 **交货模式** 设置。 *按订单生产供应自动化* 功能会将这些设置添加到每个订单行。 因此，您可以根据需要定义任何或所有订单行的 **交货条款** 和/或 **交货方式** 值的覆盖。 对于未定义覆盖的行，会使用标题中的值。 您可以指定对订单标头上的一个或两个字段的值所做的更改是否也应更新所有行。

要指定用户更改订单标头上的 **交货条款** 和/或 **交货模式** 值时，行设置应该会发生什么情况，请按照以下步骤执行操作。

1. 转至 **采购 \> 设置 \> 采购参数**。
1. 在 **常规** 选项卡上的 **默认值和参数** 快速选项卡上，选择 **更新订单行** 链接。
1. 在 **更新订单行** 对话框内的 **更新交货条款** 和 **更新交货模式** 字段中，选择以下值之一：

    - *从不* - 在订单标头上更改设置后从不更新订单行。
    - *始终* - 在订单标头上更改设置后始终更新所有订单行。
    - *提示* - 如果用户更改订单标头上的一个或两个设置，请打开一个对话机器人，该机器人会询问用户是否要更新所有行，以便它们与对一个或两个设置所做的更改匹配。

若要在采购订单标头上设置交货信息，请按照以下步骤执行操作。

1. 转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 打开要编辑的采购订单。
1. 选择 **页眉** 视图。
1. 在 **交货** 快速选项卡上，根据需要设置 **交货模式** 和 **交货条款** 字段。
1. 根据 **采购参数** 页面上的设置，您可能会被问到是否要将更改应用于所有订单行。

若要针对采购订单行设置交货信息覆盖，请按照以下步骤执行操作。

1. 转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 打开要编辑的采购订单。
1. 选择 **行** 视图。
1. 在 **采购订单行** 快速选项卡上，选择要编辑的行。
1. 在 **行明细** 快速选项卡上，在 **交货** 选项卡上，根据需要设置 **交货模式** 和 **交货条款** 字段。 清除一个或两个字段以在标头上使用匹配设置。

对于内部公司订单，每个采购订单行上的 **交货方式** 和 **交货条款** 字段的值将在采购订单与其相关销售订单之间同步。

## <a name="sync-external-item-ids-and-descriptions-for-intercompany-orders"></a>同步内部公司订单的外部物料 ID 和描述

对于内部公司订单，*按订单生产供应自动化* 功能允许采购订单行上的外部物料 ID 和文本描述与相关的内部公司销售订单行同步，无论采购订单是否用于直接交货。 该功能还会添加在内部公司采购订单上指定最终外部客户帐户的功能。 然后，系统将从外部客户记录中自动获取外部物料 ID 和文本描述，而不是从（内部）内部公司供应商记录中获取。

要设置内部公司供应商以在内部公司采购订单及其相关内部公司销售订单之间同步外部物料 ID 和物料名称，请按照以下步骤执行操作。

1. 转到 **采购 \> 供应商 \> 所有供应商**。
1. 选择您要设置的内部公司供应商。
1. 在“操作”窗格中，在 **常规** 选项卡上，在 **设置** 组中，选择 **内部公司**。
1. 在 **内部公司** 页面的 **采购订单政策** 选项卡上，在 **内部公司采购订单 -\> 内部公司销售订单** 部分中，选中 **外部物料 ID 和物料名称** 复选框。

要针对内部公司采购订单指定最终外部客户帐户，请按照下列步骤操作。 **客户帐户** 字段仅适用于内部公司采购订单。 使用它指定最终将接收货物的客户的帐号。 设置此字段后，采购订单行将从指定的客户帐户中获取外部物料描述和编号，而不是从采购订单上指定的内部公司供应商那里获取。 如果稍后更改了客户帐户，则将更新外部物料描述和 ID，以便它们与新帐户的值匹配。 每个行的外部物料描述和 ID 也将同步到匹配的内部公司销售订单。

1. 转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 打开要设置的采购订单或创建新采购订单。
1. 选择 **页眉** 视图。
1. 在 **参考** 部分中，将 **客户帐户** 字段设置为相关的外部客户帐户。

要为内部公司订单的采购订单行指定外部物料 ID 和文本描述，请按照以下步骤执行操作。 您设置的值将与相关的内部公司销售订单行同步，无论采购订单是否用于直接交货。

1. 转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 打开要设置的采购订单或创建新采购订单。
1. 选择 **行** 视图。
1. 在 **采购订单行** 快速选项卡上，选择要编辑的行。
1. 在 **行明细** 快速选项卡上，在 **常规** 选项卡上 **订单行** 部分内的 **文本** 字段中，提供所选订单行上指定的物料的外部描述。 此值将与相关的内部公司销售订单行同步。
1. 在 **参考** 部分内的 **外部** 字段中，为所选订单行上指定的物料提供外部物料 ID。 此值将与相关的内部公司销售订单行同步。

有关详细信息，请参阅[为外部客户创建内部公司销售订单，并为这些订单开票](../sales-marketing/intercompany-sales-order-for-external-customer.md)。
