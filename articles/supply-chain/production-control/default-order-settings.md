---
title: 维度和产品变型的默认订单设置
description: 默认订单设置定义作为物料采购来源或存储物料的站点和仓库，在贸易或库存管理中将要使用的最低量、最高量、倍数和标准量，提前期，停止标志，以及订单承诺方法。
author: t-benebo
manager: tfehr
ms.date: 09/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: InventItemOrderSetup, InventItemIdLookupByDefaultOrderSetting, EcoResProductReleasedStoppedAllChartPart, UnitTestPartitions
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations, Retail
ms.custom: 223084
ms.assetid: fbfbcd7b-dc75-44ab-bffc-8bad576804a4
ms.search.region: global
ms.search.industry: Manufacturing
ms.author: benebotg
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: 10.0.13
ms.openlocfilehash: c3aa800c1a996a062bcb737afa23f00a9e52bb48
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/13/2020
ms.locfileid: "4423291"
---
# <a name="default-order-settings-for-dimensions-and-product-variants"></a>维度和产品变型的默认订单设置

[!include [banner](../includes/banner.md)]

Dynamics 365 Supply Chain Management 中的默认订单设置定义作为物料采购来源或存储物料的站点和仓库，在贸易或库存管理中将要使用的最低量、最高量、倍数和标准量，提前期，停止标志，以及订单承诺方法。 默认订单设置在创建采购订单、销售订单、转移单、库存日记帐以及用于生成计划订单的主计划中使用。 默认订单设置可以针对特定物料、特定站点、特定产品变型或特定产品维度。

若要定义产品的默认订单设置，请按照下列步骤操作。

1. 转到 **产品信息管理** &gt; **产品** &gt; **已发布产品**。
1. 在网格中选择相关产品。
1. 在操作窗格上，按照以下步骤之一打开所选产品的 **默认订单设置** 页面：

    - 在 **计划** 选项卡上的 **订单设置** 组中，选择 **默认订单设置**。
    - 在 **库存管理** 选项卡上的 **订单设置** 组中，选择 **默认订单设置**。

1. 如本主题其余部分所述配置设置。

## <a name="default-order-settings"></a>默认订单设置

有针对采购、销售和库存的三种默认订单设置类型。 创建以下项时，使用采购的默认订单设置：

- 采购订单行
- 采购协议行
- 询价行
- 采购申请行
- 托运补货行（部分支持，请参见注释）
- 计划采购订单

> [!NOTE]
> 对于托运补货订单行，所应用的 **默认订单设置** 页的 **采购订单** 快速选项卡中的仅有设置是 **默认站点** 字段、**默认仓库** 字段和 **已停止** 复选框。

创建以下项时，使用销售的默认订单设置：

- 销售订单行
- 销售协议行
- 销售报价单行
- 退货单行和物料更换行
- 需求预测行

默认销售订单设置也适用于创建以下项时：

- 项目物料需求
- 服务订单物料需求

创建以下项时，使用库存的默认订单设置：

- 库存日记帐
- 转移单
- 计划转移单

默认库存订单设置也适用于创建以下项时：

- 检验单
- 质检订单
- 生产订单
- 物料清单行
- 计划生产订单

## <a name="full-definition-of-a-released-product"></a>已发布产品的完整定义

创建交易记录时，必须在行上指定已发布产品的完整定义以使 Supply Chain Management 可以尝试识别默认订单设置。 在已发布产品的完整定义中，在交易记录上指定物料编号和所有活动产品维度，如配置、尺寸、样式、版本和颜色。 例如，如果您手动创建一个已发布产品变型的采购订单行，则必须在订单行上默认显示站点、仓库、数量和提前期前指定所有必需的产品维度。 

创建订单或日记帐行时，并非所有的默认订单设置参数都适用。 数量和提前期仅在适当的时候才会默认显示。 例如，盘点日记帐行时，创建行时仅默认显示站点和仓库。 因此，在创建行或过帐日记帐时，不会执行默认数量或倍数和最低量检查。 

创建订单或日记帐行时，系统总是尝试查找默认站点和仓库。 并不总是默认显示订单设置中的站点。 例如，在创建销售订单或采购订单时，在订单行上自动使用来自订单头的站点。 在创建物料清单行时，使用来自物料清单标头的站点。  确定站点后，该站点将用来查找可以作为默认仓库使用的任何特定站点的订单设置。 

默认订单类型、采购和库存提前期可以被 **物料覆盖范围** 页面上的物料覆盖范围规则所覆盖。 尽管默认订单设置不允许在生产和转移提前期之间进行区分，但物料覆盖范围规则允许。 但是，仅在创建计划生产和计划转移单时，才会由主计划 (MRP) 使用物料覆盖范围设置，物料覆盖范围设置不适用于手动创建生产和转移单时。 

## <a name="default-order-settings-rules"></a>默认订单设置规则

您可以定义一般默认订单设置以及仅适用于特定条件的任何数量的默认订单设置，例如站点或特定产品维度或产品维度组合。 您无法定义特定仓库的订单设置。

### <a name="rank-in-default-order-settings"></a>默认订单设置等级。

默认订单设置规则有等级。 等级越高，表示该规则越重要，这意味着它将拥有更高的优先级，将在等级较低的规则前面使用。 一般默认订单设置的等级为零，且无法修改。 只能有一条等级为零的规则。 规则可以有相同的等级，前提是它们适用于不同的维度。 这在特定场所订单设置的建模中有用。 创建新的默认订单设置规则时，订单值、停止标志等的值继承自等级为零的规则，但可以覆盖。

### <a name="default-order-settings-for-released-products"></a>已发布产品的默认订单设置

对于独特的已发布产品，您可以定义一般订单设置或特定站点的订单设置。 一般订单设置的等级始终为零。 如果同时设置新的销售、采购和库存订单设置，我们建议您使用 **默认订单设置** 页面上的 **详细信息视图**。 要切换到详细信息视图，请转至 **选项** &gt; **页面选项** &gt; **更改视图** &gt; **详细信息视图**。

### <a name="site-specific-order-settings"></a>站点特定的订单设置

要创建特定站点的订单设置，选择 **新建**。 在 **详细信息视图** 中，在 **适用于以下对象的设置** 部分的 **站点** 字段中输入站点。 在 **网格视图** 中，在 **站点** 列中输入站点。 系统会自动为新规则分配大于 0（零）的新等级值。 可以根据需要创建任意数量的站点特定规则。 为了表明它们同等重要，您可以为所有站点特定规则分配相同的等级值。

在 **详细信息视图** 中时，无法获取为物料创建的规则的概览。 使用 **显示/隐藏列表** 按钮查看概览信息。 创建任何类型的订单行且未提供站点时，Supply Chain Management 将搜索没有指定站点的规则。 这有助于确定订单行上的默认站点。 然后使用该站点搜索可能已经设置了默认仓库的特定站点规则。 此仓库应用到订单行。

### <a name="specific-order-settings-for-product-dimension"></a>针对产品维度的特定订单设置

您可以为任何活动的产品维度或活动产品维度组合定义订单设置规则。 如果产品维度字段为空，则该规则适用于产品维度的所有值。 

考虑以下示例产品。

|                                                     |                                         |
|-----------------------------------------------------|-----------------------------------------|
| **产品名称**                                    | 光电传感器                    |
| **物料编号**                                     | XW56                                    |
| **配置**（用于照明类型建模） | C1 - 可见红光，C2 - 红外线 |
| **版本** | V1、V2、V3                              |

在此示例中，假设产品通过采购获得，而不是内部生产。 还假设配置 C1 更常用，因此提前期更短。 

创建以下默认订单设置以建模此方案。

| 排名 | 站点 | 配置 | 版本 | 采购 - 覆盖默认设置 | 采购提前期 | 采购 - 已停止 | 销售 - 覆盖默认设置 | 销售 - 已停止 |
|------|------|---------------|-------|--------------------------------------|--------------------|--------------------|-----------------------------------|-----------------|
| 10   |      | C1            |       | 是                                  | 2                  |                    |                                   |                 |
| 0    |      |               |       |                                      | 5                  |                    |                                   |                 |

为物料 XW56、配置 C1 创建采购订单行或计划采购订单时，无论行放置于哪个版本或站点，提前期都将被视为 2。 假设除 V3 以外的所有版本均已停止。

您可以创建以下默认订单设置规则。

| 排名 | 站点 | 配置 | 版本 | 采购 - 覆盖默认设置 | 采购提前期 | 采购 - 已停止 | 销售 - 覆盖默认设置 | 销售 - 已停止 |
|------|------|---------------|-------|--------------------------------------|--------------------|--------------------|-----------------------------------|-----------------|
| 20   |      |               | V2    | 是                                  |                    | 是                | 是                               | 是             |
| 20   |      |               | V1    | 是                                  |                    | 是                | 是                               | 是             |
| 10   |      | C1            |       | 是                                  | 2                  |                    |                                   |                 |
| 0    |      |               |       |                                      | 5                  |                    |                                   |                 |

停止旧版本的两个规则具有相同等级。 因此，它们同等重要。 由于这两个规则的等级都高于配置 C1 的规则，它们因此优先于配置 C1 的规则。 

此示例说明了等级的必要性。 如果不使用等级，在为配置 C1 和版本 V2 创建采购订单时，为 V2 和 C1 定义的两个规则将模棱两可。 为了解决模糊性，Supply Chain Management 将按等级降序顺序搜索规则，并应用第一条适用规则。 在当前示例中，为配置 C1 和版本 V2 创建采购订单行时，用户将收到警告消息，说明物料处于暂停状态，这是由于版本值造成的。 如果配置规则的等级高于版本规则，将为配置 C1 和版本 V2 成功创建采购订单行，用户将不会收到“物料暂停”消息。 

考虑以下默认订单设置规则。

| 排名 | 站点 | 配置 | 版本 | 默认站点 | 默认仓库 | 采购 - 覆盖默认存储维度 | 采购仓库 |
|------|------|---------------|-------|--------------|-------------------|------------------------------------------------|--------------------|
| 20   | 2    |               |       |              |                   | 是                                            | 22                 |
| 10   |      | C1            |  V2   |  2           |  21               |                                                |                    |
| 0    |      |               |       | 1            | 11                |                                                |                    |

系统两次遍历一组规则，以确定站点和仓库。 为配置 C1、版本 V2 创建采购订单行时，基于等级为 10 的规则确定站点。 然后系统搜索站点 2 的规则以确定仓库。 找到规则 20，因为它的等级较高，采购订单行的仓库将为 22，不是 21。

一般而言，特定规则和重要性高于其它维度的规则的等级较高，而更通用的规则的等级较低。 

等级为零的规则用作安全网。 如果没有匹配到其他规则，则将使用规则零的默认订单设置。 

由于等级号很重要，因此在 **默认订单设置** 操作窗格上提供了将规则上移或下移以及对规则重新编号的功能，因此它们的增量始终为 10。 

为已发布产品创建的规则数量可能有很多。 为了更好地了解每个规则所覆盖的内容以及需要规则的原因，我们建议使用 **默认订单设置** 页面上的 **网格视图**。 您可以转到 **选项** &gt; **页面选项** &gt; **更改视图** &gt; **网格视图** 启用网格视图。 网格中显示的列数可能非常重要，尤其是对销售和库存选项卡。 要限制网格中显示的列数，可以使用 **默认订单设置** &gt; **列显示** 菜单上的按钮隐藏或显示列组。

### <a name="specific-order-settings-for-released-product-variant"></a>针对已发布产品变型的特定订单设置

如果默认订单设置的规则系统太麻烦，则可以选择定义各产品变型的默认订单设置。 以下示例显示了如何查找上述产品和案例。

| 排名 | 站点 | 配置 | 版本 | 采购 - 覆盖默认设置 | 采购提前期 | 采购 - 已停止 | 销售 - 覆盖默认设置 | 销售 - 已停止 |
|------|------|---------------|-------|--------------------------------------|--------------------|--------------------|-----------------------------------|-----------------|
| 10   |      | C2            | V3    | 是                                  | 5                  |                    |                                   |                 |
| 10   |      | C2            | V2    | 是                                  | 5                  | 是                | 是                               | 是             |
| 10   |      | C2            | V1    | 是                                  | 5                  | 是                | 是                               | 是             |
| 10   |      | C1            | V3    | 是                                  | 2                  |                    |                                   |                 |
| 10   |      | C1            | V2    | 是                                  | 2                  | 是                | 是                               | 是             |
| 10   |      | C1            | V1    | 是                                  | 2                  | 是                | 是                               | 是             |
| 0    |      |               |       |                                      | 5                  |                    |                                   |                 |

此案例中的等级并不重要，因此您可以选择将其隐藏。 此解决方案可能引起维护问题。 但是，如果您考虑集成产品生命周期管理 (PLM) 系统，您可以希望考虑使用此设置。

## <a name="use-strict-or-standard-validation-of-default-order-quantities"></a>使用默认订单数量的严格或标准验证

您可以选择在验证产品的 **默认订单设置** 中输入的数量时系统应有的严格程度。 使用新的严格选项时，**标准订单数量** 必须始终是为采购订单、库存和销售订单指定的 **倍数** 值的倍数。 如果您使用的是严格验证，将无法保存不符合此要求的默认订单设置（消息栏中将显示错误）。 

严格验证适用于在 **默认订单设置** 页的 **采购订单**、**库存** 和 **销售订单** 快速选项卡上指定的 **标准订单数量** 值。 每个快速选项卡都有自己的 **倍数** 设置，用于验证为该快速选项卡指定的 **标准订单数量** 值。

### <a name="enable-the-strict-validation-option"></a>启用严格验证选项

必须先在系统上启用严格验证选项，然后才能够使用它。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)页面检查功能状态，并在需要时启用。 此功能在此处列出为：

- **模块** - *产品信息管理*
- **功能名称** - *严格验证默认订单数量*

### <a name="set-the-validation-option"></a>设置验证选项

设置验证选项：

1. 转到 **产品信息管理 \> 设置 \> 产品信息管理参数**。
1. 在 **常规** 选项卡上，将 **验证默认订单数量** 设置为以下值之一：
    - **严格** - 选择此选项可以确保所有 **标准订单数量** 值是每个快速选项卡（**采购订单**、**库存** 和 **销售订单**）的 **倍数** 值的倍数。
    - **标准** - 选择此选项可以使用标准验证（与未启用此功能时相同）。
