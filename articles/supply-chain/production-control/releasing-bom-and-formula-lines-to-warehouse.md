---
title: "将物料清单和配方行发放到仓库"
description: "此主题介绍将物料清单行和配方行的原材料发放到仓库的流程。"
author: johanhoffmann
manager: AnnBe
ms.date: 10/30/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: bis
ms.search.scope: Core, Operations
ms.custom: 1705903
ms.search.region: Global
ms.author: johanho
ms.search.validfrom: 2017-12-31
ms.dyn365.ops.version: 7.3
ms.translationtype: HT
ms.sourcegitcommit: ceea24519d641c676521771cee274feb64ca7783
ms.openlocfilehash: 555484e3c54951594f7f8f738bb0e0fd386ee486
ms.contentlocale: zh-cn
ms.lasthandoff: 01/19/2018

---

# <a name="release-bom-and-formula-lines-to-the-warehouse"></a><span data-ttu-id="bee43-103">将物料清单和配方行发放到仓库</span><span class="sxs-lookup"><span data-stu-id="bee43-103">Release BOM and formula lines to the warehouse</span></span>

<span data-ttu-id="bee43-104">此主题介绍将物料清单 (BOM) 行和配方行的原材料发放到仓库的流程。</span><span class="sxs-lookup"><span data-stu-id="bee43-104">This topic describes the process for releasing raw material for bill of materials (BOM) lines and formula lines to the warehouse.</span></span> <span data-ttu-id="bee43-105">在您将物料清单或配方行发放到仓库时，系统将首先确定用于生产流程的物料所在的车间的生产输入库位上是否已经提供该物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-105">When you release a BOM or formula line to the warehouse, the system first determines whether material is already available at the production input location on the shop floor where the material will be consumed for the production process.</span></span>

- <span data-ttu-id="bee43-106">如果在生产输入库位提供该物料，则在发出将该物料发放到仓库的信号后立即从该库位领取该物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-106">If the material is available at the production input location, it's picked from that location immediately after the signal is given for the release of material to the warehouse.</span></span>
- <span data-ttu-id="bee43-107">如果在生产输入库位不提供该物料，则物料发放指示必须将该物料从仓库中的库位移动到生产输入库位。</span><span class="sxs-lookup"><span data-stu-id="bee43-107">If the material isn't available at the production input location, the material release indicates that material must be moved from locations in the warehouse to the production input location.</span></span> <span data-ttu-id="bee43-108">通过仓库移动物料适用于原材料领取。</span><span class="sxs-lookup"><span data-stu-id="bee43-108">The material is moved via warehouse work for raw material picking.</span></span> <span data-ttu-id="bee43-109">因此，必须配置仓库的原材料领取流程。</span><span class="sxs-lookup"><span data-stu-id="bee43-109">Therefore, warehouse processes for raw material picking must be configured.</span></span> <span data-ttu-id="bee43-110">有关详细信息，请参阅[补货](../warehousing/replenishment.md)和[使用工作模板和库位指令控制仓库的工作](../warehousing/control-warehouse-location-directives.md)。</span><span class="sxs-lookup"><span data-stu-id="bee43-110">For more information, see [Replenishment](../warehousing/replenishment.md) and [Control warehouse work by using work templates and location directives](../warehousing/control-warehouse-location-directives.md).</span></span>

## <a name="methods-for-releasing-bom-and-formula-lines"></a><span data-ttu-id="bee43-111">发放物料清单和配方行的方法</span><span class="sxs-lookup"><span data-stu-id="bee43-111">Methods for releasing BOM and formula lines</span></span>

<span data-ttu-id="bee43-112">您可以配置物料清单和配方行的发放，以便在下达生产订单或批次订单时发生。</span><span class="sxs-lookup"><span data-stu-id="bee43-112">You can configure the release of BOM and formula lines so that it occurs as part of the release of a production order or batch order.</span></span> <span data-ttu-id="bee43-113">或者，可以通过批处理作业控制发放或作为手动交互完成发放。</span><span class="sxs-lookup"><span data-stu-id="bee43-113">Alternatively, the release can be controlled by a batch job or done as a manual interaction.</span></span>

<span data-ttu-id="bee43-114">用来发放物料清单和配方行的方法由**生产订单行下达**参数控制。</span><span class="sxs-lookup"><span data-stu-id="bee43-114">The method that is used to release BOM and formula lines is controlled by the **Production line release** parameter.</span></span> <span data-ttu-id="bee43-115">您可以在**生产控制** \> **设置** \> **生产参数**找到此参数。</span><span class="sxs-lookup"><span data-stu-id="bee43-115">You can find this parameter at **Production control** \> **Setup** \> **Production parameters**.</span></span>

- <span data-ttu-id="bee43-116">**作为生产或批次订单下达的一部分发放物料清单和配方行** - 在该方法中，用于生产或批次订单的物料清单和配方行作为下达订单流程的一部分进行发放。</span><span class="sxs-lookup"><span data-stu-id="bee43-116">**Release BOM and formula lines as part of production or batch order release** – In this method, BOM and formula lines for a production or batch order are released as part of the process of releasing the order.</span></span> <span data-ttu-id="bee43-117">通常在下达生产或批次订单的过程中，生产作业发放到车间工作人员，并打印生产单。</span><span class="sxs-lookup"><span data-stu-id="bee43-117">Usually, during the release of a production or batch order, production jobs are released to the shop floor workers, and production papers are printed.</span></span> <span data-ttu-id="bee43-118">在此过程中，订单的状态也更改为**已发放**。</span><span class="sxs-lookup"><span data-stu-id="bee43-118">During this process, the status of the order is also changed to **Released**.</span></span>
- <span data-ttu-id="bee43-119">**通过批处理作业或作为手动交互发放物料清单和配方行** - 在此方法中，物料清单和配方行仅可通过**自动发放物料清单和配方行**批处理作业或作为手动交互进行发放。</span><span class="sxs-lookup"><span data-stu-id="bee43-119">**Release BOM and formula lines via a batch job or as a manual interaction** – In this method, BOM and formula lines can be released only through the **Automatic release of BOM and formula lines** batch job or as a manual interaction.</span></span> <span data-ttu-id="bee43-120">要手动发放物料清单和配方行，在生产订单列表页或生产订单详细信息页的操作窗格上，选择**发放到仓库**。</span><span class="sxs-lookup"><span data-stu-id="bee43-120">To manually release BOM and formula lines, on the production order list page or the production order details page, on the Action Pane, select **Release to warehouse**.</span></span>

## <a name="releasing-the-bom-and-formula-lines-by-using-a-batch-job"></a><span data-ttu-id="bee43-121">使用批处理作业发放物料清单和配方行</span><span class="sxs-lookup"><span data-stu-id="bee43-121">Releasing the BOM and formula lines by using a batch job</span></span>

<span data-ttu-id="bee43-122">**自动发放物料清单和配方行**批处理作业检查包含要发放的剩余数量的选定物料清单和配方行。</span><span class="sxs-lookup"><span data-stu-id="bee43-122">The **Automatic release of BOM and formula lines** batch job goes through selected BOM and formula lines that have a remaining quantity to release.</span></span> <span data-ttu-id="bee43-123">该作业仅考虑状态为**已发放**、**已开始**或**完工入库**的订单。</span><span class="sxs-lookup"><span data-stu-id="bee43-123">The job considers only orders that have a status of **Released**, **Started**, or **Reported as finished**.</span></span> <span data-ttu-id="bee43-124">如果物料清单或配方行包含要发放的剩余数量，该作业最多发放已经实际预留的数量和实际可用的数量可以涵盖的数量。</span><span class="sxs-lookup"><span data-stu-id="bee43-124">If a BOM or formula line has a remaining quantity to release, the job releases up to the quantity that can be covered by the quantity that has already been physically reserved and the quantity that is physically available.</span></span>

### <a name="example-of-a-batch-job-release"></a><span data-ttu-id="bee43-125">批处理作业发放的示例</span><span class="sxs-lookup"><span data-stu-id="bee43-125">Example of a batch job release</span></span>

| <span data-ttu-id="bee43-126">应用场景</span><span class="sxs-lookup"><span data-stu-id="bee43-126">Scenario</span></span> | <span data-ttu-id="bee43-127">要发放的剩余数量</span><span class="sxs-lookup"><span data-stu-id="bee43-127">Remaining quantity to release</span></span> | <span data-ttu-id="bee43-128">实际预留的数量</span><span class="sxs-lookup"><span data-stu-id="bee43-128">Physically reserved quantity</span></span> | <span data-ttu-id="bee43-129">实际可用数量</span><span class="sxs-lookup"><span data-stu-id="bee43-129">Physically available quantity</span></span> | <span data-ttu-id="bee43-130">批处理作业发放的数量</span><span class="sxs-lookup"><span data-stu-id="bee43-130">Quantity released by the batch job</span></span> |
|----------|-------------------------------|------------------------------|-------------------------------|------------------------------------|
| <span data-ttu-id="bee43-131">1</span><span class="sxs-lookup"><span data-stu-id="bee43-131">1</span></span>        | <span data-ttu-id="bee43-132">100</span><span class="sxs-lookup"><span data-stu-id="bee43-132">100</span></span>                           | <span data-ttu-id="bee43-133">20</span><span class="sxs-lookup"><span data-stu-id="bee43-133">20</span></span>                           | <span data-ttu-id="bee43-134">90</span><span class="sxs-lookup"><span data-stu-id="bee43-134">90</span></span>                            | <span data-ttu-id="bee43-135">100</span><span class="sxs-lookup"><span data-stu-id="bee43-135">100</span></span>                                |
| <span data-ttu-id="bee43-136">2</span><span class="sxs-lookup"><span data-stu-id="bee43-136">2</span></span>        | <span data-ttu-id="bee43-137">100</span><span class="sxs-lookup"><span data-stu-id="bee43-137">100</span></span>                           | <span data-ttu-id="bee43-138">20</span><span class="sxs-lookup"><span data-stu-id="bee43-138">20</span></span>                           | <span data-ttu-id="bee43-139">70</span><span class="sxs-lookup"><span data-stu-id="bee43-139">70</span></span>                            | <span data-ttu-id="bee43-140">90</span><span class="sxs-lookup"><span data-stu-id="bee43-140">90</span></span>                                 |
| <span data-ttu-id="bee43-141">3</span><span class="sxs-lookup"><span data-stu-id="bee43-141">3</span></span>        | <span data-ttu-id="bee43-142">100</span><span class="sxs-lookup"><span data-stu-id="bee43-142">100</span></span>                           | <span data-ttu-id="bee43-143">0</span><span class="sxs-lookup"><span data-stu-id="bee43-143">0</span></span>                            | <span data-ttu-id="bee43-144">90</span><span class="sxs-lookup"><span data-stu-id="bee43-144">90</span></span>                            | <span data-ttu-id="bee43-145">90</span><span class="sxs-lookup"><span data-stu-id="bee43-145">90</span></span>                                 |
| <span data-ttu-id="bee43-146">4</span><span class="sxs-lookup"><span data-stu-id="bee43-146">4</span></span>        | <span data-ttu-id="bee43-147">100</span><span class="sxs-lookup"><span data-stu-id="bee43-147">100</span></span>                           | <span data-ttu-id="bee43-148">0</span><span class="sxs-lookup"><span data-stu-id="bee43-148">0</span></span>                            | <span data-ttu-id="bee43-149">110</span><span class="sxs-lookup"><span data-stu-id="bee43-149">110</span></span>                           | <span data-ttu-id="bee43-150">100</span><span class="sxs-lookup"><span data-stu-id="bee43-150">100</span></span>                                |
| <span data-ttu-id="bee43-151">5</span><span class="sxs-lookup"><span data-stu-id="bee43-151">5</span></span>        | <span data-ttu-id="bee43-152">100</span><span class="sxs-lookup"><span data-stu-id="bee43-152">100</span></span>                           | <span data-ttu-id="bee43-153">20</span><span class="sxs-lookup"><span data-stu-id="bee43-153">20</span></span>                           | <span data-ttu-id="bee43-154">0</span><span class="sxs-lookup"><span data-stu-id="bee43-154">0</span></span>                             | <span data-ttu-id="bee43-155">20</span><span class="sxs-lookup"><span data-stu-id="bee43-155">20</span></span>                                 |

### <a name="batch-job-setup"></a><span data-ttu-id="bee43-156">批处理作业设置</span><span class="sxs-lookup"><span data-stu-id="bee43-156">Batch job setup</span></span>

<span data-ttu-id="bee43-157">在**自动发放物料清单和配方行**批处理作业的查询中，可以设置筛选器条件以指定作业应提前多少天查找具有未发放数量的行。</span><span class="sxs-lookup"><span data-stu-id="bee43-157">In the query for the **Automatic release of BOM and formula lines** batch job, you can set up a filter criterion to specify how many days ahead the job should look for lines that have unreleased quantities.</span></span> <span data-ttu-id="bee43-158">在作业查询的**原材料日期**字段，使用 **(LessThanDate())** 函数作为筛选器条件。</span><span class="sxs-lookup"><span data-stu-id="bee43-158">In the query for the job, in the **Raw material date** field, use the **(LessThanDate())** function as a filter criterion.</span></span>

<span data-ttu-id="bee43-159">下图显示包含两个作业（10 和 20）的生产订单，这两个作业涵盖生产订单的装配和包装。</span><span class="sxs-lookup"><span data-stu-id="bee43-159">The following illustration shows a production order that has two jobs, 10 and 20, that cover the assembly and packing for the production order.</span></span> <span data-ttu-id="bee43-160">设置每个作业以使用一定数量的物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-160">Each job is set up to consume a quantity of material.</span></span> <span data-ttu-id="bee43-161">在此图中，时间行下方的绿色箭头指示的发放时限等于在 **(LessThanDate())** 条件中指定的天数。</span><span class="sxs-lookup"><span data-stu-id="bee43-161">In this illustration, the release time fence that is indicated by the green arrow below the time line equals the number of days that has been specified in the **(LessThanDate())** criterion.</span></span> <span data-ttu-id="bee43-162">例如，**(LessThanDate(2))** 表示作业应仅查找两天时限内的未发放数量。</span><span class="sxs-lookup"><span data-stu-id="bee43-162">For example, **(LessThanDate(2))** indicates that the job should look for unreleased quantities only within a time fence of two days.</span></span>

![含有两个批处理作业的生产订单示例](media/bach-job-setup.PNG)

## <a name="releasing-material-per-operation-number-or-in-proportion-to-the-amount-of-finished-goods"></a><span data-ttu-id="bee43-164">按照工序编号或按照成品数量的比例发放物料</span><span class="sxs-lookup"><span data-stu-id="bee43-164">Releasing material per operation number or in proportion to the amount of finished goods</span></span>

<span data-ttu-id="bee43-165">如果使用**生产订单下达时**参数设置发放物料，进行手动下达时，有两个选项可用于控制物料发放：</span><span class="sxs-lookup"><span data-stu-id="bee43-165">If you release materials by using the **On production order release** parameter setting, when you do a manual release, you have two options for controlling the material release:</span></span>

- <span data-ttu-id="bee43-166">按工序编号发放物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-166">Release material per operation number.</span></span>
- <span data-ttu-id="bee43-167">按成品数量的比例发放物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-167">Release material in proportion to the amount of finished goods.</span></span>

### <a name="release-material-per-operation-number"></a><span data-ttu-id="bee43-168">按工序编号发放物料</span><span class="sxs-lookup"><span data-stu-id="bee43-168">Release material per operation number</span></span>

<span data-ttu-id="bee43-169">要控制物料应发放到的工序，请使用**发放到仓库**页。</span><span class="sxs-lookup"><span data-stu-id="bee43-169">To control the operations that material should be released to, use the **Release to warehouse** page.</span></span>

- <span data-ttu-id="bee43-170">选择**生产控制** \> **生产订单** \> **所有生产订单**，选择一个生产订单，然后在**仓库**选项卡选择**发放到仓库**。</span><span class="sxs-lookup"><span data-stu-id="bee43-170">Select **Production control** \> **Production orders** \> **All production orders**, select a production order, and then, on the **Warehouse** tab, select **Release to warehouse**.</span></span> <span data-ttu-id="bee43-171">然后使用**起始工序编号**</span><span class="sxs-lookup"><span data-stu-id="bee43-171">Then use the **From Oper. No.**</span></span> <span data-ttu-id="bee43-172">和**截止工序编号**字段指定工序编号范围。</span><span class="sxs-lookup"><span data-stu-id="bee43-172">and **To Oper. No** fields to specify the range of operation numbers.</span></span>

<span data-ttu-id="bee43-173">下图显示含有两个工序（10 和 20）的生产订单。</span><span class="sxs-lookup"><span data-stu-id="bee43-173">The following illustration shows a production order that has two operations, 10 and 20.</span></span> <span data-ttu-id="bee43-174">在此示例中，您可以限制发放到工序 10，仅发放物料 M9203。</span><span class="sxs-lookup"><span data-stu-id="bee43-174">In this example, if you limit the release to operation 10, only material M9203 will be released.</span></span>

![按工序编号发放物料的示例](media/two-operations.PNG)

### <a name="release-material-in-proportion-to-the-amount-of-finished-goods"></a><span data-ttu-id="bee43-176">按成品数量的比例发放物料</span><span class="sxs-lookup"><span data-stu-id="bee43-176">Release material in proportion to the amount of finished goods</span></span>

<span data-ttu-id="bee43-177">您可以为部分成品数量或以特定的单位发放原材料。</span><span class="sxs-lookup"><span data-stu-id="bee43-177">You can release raw material for a partial quantity of finished goods or in a specific unit.</span></span>

- <span data-ttu-id="bee43-178">要为部分成品数量发放原材料，请选择**生产控制** \> **生产订单** \> **所有生产订单**，选择一个生产订单，然后在**仓库**选项卡上选择**发放到仓库**。</span><span class="sxs-lookup"><span data-stu-id="bee43-178">To release raw material for a partial quantity of finished goods, select **Production control** \> **Production orders** \> **All production orders**, select a production order, and then, on the **Warehouse** tab, select **Release to warehouse**.</span></span> <span data-ttu-id="bee43-179">然后在**数量**字段中输入数量。</span><span class="sxs-lookup"><span data-stu-id="bee43-179">Then enter a quantity in the **Quantity** field.</span></span>

    <span data-ttu-id="bee43-180">例如，为 1,000 件 (pcs.) 物料创建和计划生产订单。</span><span class="sxs-lookup"><span data-stu-id="bee43-180">For example, a production order is created and scheduled for 1,000 pieces (pcs.).</span></span> <span data-ttu-id="bee43-181">车间主管计划下一个班次生产 100 件，</span><span class="sxs-lookup"><span data-stu-id="bee43-181">The shop floor supervisor is planning the production of 100 pcs.</span></span> <span data-ttu-id="bee43-182">而且希望仅向该班次发放物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-182">for the next shift and wants to release materials only for that shift.</span></span> <span data-ttu-id="bee43-183">在这种情况下，该主管可以使用**数量**字段为下一个班次计划的 100 件</span><span class="sxs-lookup"><span data-stu-id="bee43-183">In this case, the supervisor can use the **Quantity** field to release materials for the 100 pcs.</span></span> <span data-ttu-id="bee43-184">发放物料。</span><span class="sxs-lookup"><span data-stu-id="bee43-184">that are planned for the next shift.</span></span>

- <span data-ttu-id="bee43-185">要以特定单位发放原材料，请选择**生产控制** \> **生产订单** \> **所有生产订单**，选择一个生产订单，然后在**仓库**选项卡上选择**发放到仓库**。</span><span class="sxs-lookup"><span data-stu-id="bee43-185">To release raw material in a specific unit, select **Production control** \> **Production orders** \> **All production orders**, select a production order, and then, on the **Warehouse** tab, select **Release to warehouse**.</span></span> <span data-ttu-id="bee43-186">然后使用**单位**字段选择发放物料的成品单位。</span><span class="sxs-lookup"><span data-stu-id="bee43-186">Then use the **Unit** field to select the unit of the finished good to release material in.</span></span>

    <span data-ttu-id="bee43-187">可用单位在成品的“单位序列组 ID”中定义。</span><span class="sxs-lookup"><span data-stu-id="bee43-187">The units that are available are defined in the unit sequence group ID of the finished good.</span></span>

    <span data-ttu-id="bee43-188">例如，成品在单位磅 (lbs.) 和托盘 (PL) 中进行以下转换：1 PL = 100 lbs。</span><span class="sxs-lookup"><span data-stu-id="bee43-188">For example, a finished good has the following unit conversion between pounds (lbs.) and pallet (PL): 1 PL = 100 lbs.</span></span> <span data-ttu-id="bee43-189">要为 10,000 lbs 成品创建一个生产订单，</span><span class="sxs-lookup"><span data-stu-id="bee43-189">To create a production order for 10,000 lbs.</span></span> <span data-ttu-id="bee43-190">可以为计划要生产的托盘数量发放原材料。</span><span class="sxs-lookup"><span data-stu-id="bee43-190">of the finished good, you can release raw materials for the number of pallets that you plan to produce.</span></span> <span data-ttu-id="bee43-191">选择 **PL** 为单位，然后在**数量**字段选择一个相应的数字。</span><span class="sxs-lookup"><span data-stu-id="bee43-191">Select **PL** as the unit, and then select a corresponding number in the **Quantity** field.</span></span>

