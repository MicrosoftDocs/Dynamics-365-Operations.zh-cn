---
title: "将物料清单和配方行发放到仓库"
description: "此主题介绍将物料清单行和配方行的原材料发放到仓库的流程。"
author: johanhoffmann
manager: AnnBe
ms.date: 10/30/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
audience: Application User
ms.reviewer: bis
ms.search.scope: Core, Operations
ms.custom: 1705903
ms.search.region: Global
ms.author: johanho
ms.search.validfrom: 2017-12-31
ms.dyn365.ops.version: 7.3
ms.translationtype: HT
ms.sourcegitcommit: 0ca19ab9ed7a52328c5dd5252c418bb9343bdc2b
ms.openlocfilehash: 6aec3532a36a2c1e67ee0c189e45a352ad7670f6
ms.contentlocale: zh-cn
ms.lasthandoff: 12/14/2017

---

# <a name="release-bom-and-formula-lines-to-the-warehouse"></a>将物料清单和配方行发放到仓库

此主题介绍将物料清单 (BOM) 行和配方行的原材料发放到仓库的流程。 在您将物料清单或配方行发放到仓库时，系统将首先确定用于生产流程的物料所在的车间的生产输入库位上是否已经提供该物料。

- 如果在生产输入库位提供该物料，则在发出将该物料发放到仓库的信号后立即从该库位领取该物料。
- 如果在生产输入库位不提供该物料，则物料发放指示必须将该物料从仓库中的库位移动到生产输入库位。 通过仓库移动物料适用于原材料领取。 因此，必须配置仓库的原材料领取流程。 有关详细信息，请参阅[补货](../warehousing/replenishment.md)和[使用工作模板和库位指令控制仓库的工作](../warehousing/control-warehouse-location-directives.md)。

## <a name="methods-for-releasing-bom-and-formula-lines"></a>发放物料清单和配方行的方法

您可以配置物料清单和配方行的发放，以便在下达生产订单或批次订单时发生。 或者，可以通过批处理作业控制发放或作为手动交互完成发放。

用来发放物料清单和配方行的方法由**生产订单行下达**参数控制。 您可以在**生产控制** \> **设置** \> **生产参数**找到此参数。

- **作为生产或批次订单下达的一部分发放物料清单和配方行** - 在该方法中，用于生产或批次订单的物料清单和配方行作为下达订单流程的一部分进行发放。 通常在下达生产或批次订单的过程中，生产作业发放到车间工作人员，并打印生产单。 在此过程中，订单的状态也更改为**已发放**。
- **通过批处理作业或作为手动交互发放物料清单和配方行** - 在此方法中，物料清单和配方行仅可通过**自动发放物料清单和配方行**批处理作业或作为手动交互进行发放。 要手动发放物料清单和配方行，在生产订单列表页或生产订单详细信息页的操作窗格上，选择**发放到仓库**。

## <a name="releasing-the-bom-and-formula-lines-by-using-a-batch-job"></a>使用批处理作业发放物料清单和配方行

**自动发放物料清单和配方行**批处理作业检查包含要发放的剩余数量的选定物料清单和配方行。 该作业仅考虑状态为**已发放**、**已开始**或**完工入库**的订单。 如果物料清单或配方行包含要发放的剩余数量，该作业最多发放已经实际预留的数量和实际可用的数量可以涵盖的数量。

### <a name="example-of-a-batch-job-release"></a>批处理作业发放的示例

| 应用场景 | 要发放的剩余数量 | 实际预留的数量 | 实际可用数量 | 批处理作业发放的数量 |
|----------|-------------------------------|------------------------------|-------------------------------|------------------------------------|
| 1        | 100                           | 20                           | 90                            | 100                                |
| 2        | 100                           | 20                           | 70                            | 90                                 |
| 3        | 100                           | 0                            | 90                            | 90                                 |
| 4        | 100                           | 0                            | 110                           | 100                                |
| 5        | 100                           | 20                           | 0                             | 20                                 |

### <a name="batch-job-setup"></a>批处理作业设置

在**自动发放物料清单和配方行**批处理作业的查询中，可以设置筛选器条件以指定作业应提前多少天查找具有未发放数量的行。 在作业查询的**原材料日期**字段，使用 **(LessThanDate())** 函数作为筛选器条件。

下图显示包含两个作业（10 和 20）的生产订单，这两个作业涵盖生产订单的装配和包装。 设置每个作业以使用一定数量的物料。 在此图中，时间行下方的绿色箭头指示的发放时限等于在 **(LessThanDate())** 条件中指定的天数。 例如，**(LessThanDate(2))** 表示作业应仅查找两天时限内的未发放数量。

![含有两个批处理作业的生产订单示例](media/bach-job-setup.PNG)

## <a name="releasing-material-per-operation-number-or-in-proportion-to-the-amount-of-finished-goods"></a>按照工序编号或按照成品数量的比例发放物料

如果使用**生产订单下达时**参数设置发放物料，进行手动下达时，有两个选项可用于控制物料发放：

- 按工序编号发放物料。
- 按成品数量的比例发放物料。

### <a name="release-material-per-operation-number"></a>按工序编号发放物料

要控制物料应发放到的工序，请使用**发放到仓库**页。

- 选择**生产控制** \> **生产订单** \> **所有生产订单**，选择一个生产订单，然后在**仓库**选项卡选择**发放到仓库**。 然后使用**起始工序编号** 和**截止工序编号**字段指定工序编号范围。

下图显示含有两个工序（10 和 20）的生产订单。 在此示例中，您可以限制发放到工序 10，仅发放物料 M9203。

![按工序编号发放物料的示例](media/two-operations.PNG)

### <a name="release-material-in-proportion-to-the-amount-of-finished-goods"></a>按成品数量的比例发放物料

您可以为部分成品数量或以特定的单位发放原材料。

- 要为部分成品数量发放原材料，请选择**生产控制** \> **生产订单** \> **所有生产订单**，选择一个生产订单，然后在**仓库**选项卡上选择**发放到仓库**。 然后在**数量**字段中输入数量。

    例如，为 1,000 件 (pcs.) 物料创建和计划生产订单。 车间主管计划下一个班次生产 100 件， 而且希望仅向该班次发放物料。 在这种情况下，该主管可以使用**数量**字段为下一个班次计划的 100 件 发放物料。

- 要以特定单位发放原材料，请选择**生产控制** \> **生产订单** \> **所有生产订单**，选择一个生产订单，然后在**仓库**选项卡上选择**发放到仓库**。 然后使用**单位**字段选择发放物料的成品单位。

    可用单位在成品的“单位序列组 ID”中定义。

    例如，成品在单位磅 (lbs.) 和托盘 (PL) 中进行以下转换：1 PL = 100 lbs。 要为 10,000 lbs 成品创建一个生产订单， 可以为计划要生产的托盘数量发放原材料。 选择 **PL** 为单位，然后在**数量**字段选择一个相应的数字。

