---
title: 工艺路线和工序
description: 本主题提供了有关工艺路线和工序的信息。
author: sorenva
manager: AnnBe
ms.date: 03/18/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: BOMDesigner, BOMDesignerRouteVersion, Route, RouteInventProd, RouteOpr, RouteOprTable
ms.author: sorenand
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 268124
ms.assetid: f78d5836-3e71-42b7-a5d1-41f19228d9d2
ms.search.region: Global
ms.search.industry: Manufacturing
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 961cc6fe5bd1bfbb0f5c9116024415a5d53f569e
ms.sourcegitcommit: 2b890cd7a801055ab0ca24398efc8e4e777d4d8c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2019
ms.locfileid: "1522189"
---
# <a name="routes-and-operations"></a><span data-ttu-id="cf08a-103">工艺路线和工序</span><span class="sxs-lookup"><span data-stu-id="cf08a-103">Routes and operations</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="cf08a-104">本主题提供了有关工艺路线和工序的信息。</span><span class="sxs-lookup"><span data-stu-id="cf08a-104">This topic provides information about routes and operations.</span></span> <span data-ttu-id="cf08a-105">工艺路线定义生产产品或产品变型的流程。</span><span class="sxs-lookup"><span data-stu-id="cf08a-105">A route defines the process for producing a product or product variant.</span></span> <span data-ttu-id="cf08a-106">它描述生产流程中的各步骤（工序）和这些步骤必须遵循的执行顺序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-106">It describes each step (operation) in the production process and the order that these steps must be performed in.</span></span> <span data-ttu-id="cf08a-107">对于每个步骤，工艺路线还定义所需工序资源、所需设置时间和运行时间，以及应如何计算成本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-107">For each step, the route also defines the required operations resources, the required setup time and run time, and how the cost should be calculated.</span></span>

<a name="overview"></a><span data-ttu-id="cf08a-108">概览</span><span class="sxs-lookup"><span data-stu-id="cf08a-108">Overview</span></span>
--------

<span data-ttu-id="cf08a-109">工艺路线描述生产产品或产品变型所需工序顺序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-109">A route describes the order of operations that is required in order to produce a product or product variant.</span></span> <span data-ttu-id="cf08a-110">对于每道工序，工艺路线还定义所需工序资源、设置和执行工序所需时间，以及应如何计算成本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-110">For each operation, the route also defines the operations resources that are required, the time that is required in order to set up and perform the operation, and how the cost should be calculated.</span></span> <span data-ttu-id="cf08a-111">您可以使用相同工艺路线生产多个产品，也可以为每个产品或产品变型定义不同工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-111">You can use the same route to produce multiple products, or you can define a unique route for each product or product variant.</span></span> <span data-ttu-id="cf08a-112">同一个产品甚至可以有多个工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-112">You can even have multiple routes for the same product.</span></span> <span data-ttu-id="cf08a-113">在这种情况下，使用的工艺路线根据必须生产的数量之类因素决定。</span><span class="sxs-lookup"><span data-stu-id="cf08a-113">In this case, the route that is used varies, depending on factors such as the quantity that must be produced.</span></span> <span data-ttu-id="cf08a-114">Microsoft Dynamics 365 for Finance and Operations 中的工艺路线的定义包含四种不同元素，这些元素共同描述生产流程：</span><span class="sxs-lookup"><span data-stu-id="cf08a-114">The definition of a route in Microsoft Dynamics 365 for Finance and Operations consists of four separate elements that, together, describe the production process:</span></span>

-   <span data-ttu-id="cf08a-115">**工艺路线** – 工艺路线定义生产流程的结构。</span><span class="sxs-lookup"><span data-stu-id="cf08a-115">**Route** – A route defines the structure of the production process.</span></span> <span data-ttu-id="cf08a-116">换言之，它定义工序的顺序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-116">In other words, it defines the order of operations.</span></span>
-   <span data-ttu-id="cf08a-117"> *\*工序** – 工序表示工艺路线中带名称的步骤，如*\*装配*\*。</span><span class="sxs-lookup"><span data-stu-id="cf08a-117">**Operation** – An operation identifies a named step in a route, such as **Assembly**.</span></span> <span data-ttu-id="cf08a-118">同一工序可以在多个工艺路线中出现，并且可以有不同的工序编号。</span><span class="sxs-lookup"><span data-stu-id="cf08a-118">The same operation can occur in multiple routes and can have different operation numbers.</span></span>
-   <span data-ttu-id="cf08a-119">**工序关系** – 工序关系定义工序的操作属性，例如设置时间和运行时间、成本类别、消耗量和资源要求。</span><span class="sxs-lookup"><span data-stu-id="cf08a-119">**Operation relation** – An operation relation defines the operational properties of an operation, such as the setup time and run time, cost categories, consumption parameters, and resource requirements.</span></span> <span data-ttu-id="cf08a-120">工序关系让工序的操作属性多种多样，具体取决于工序的所用工艺路线或正在生产的产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-120">The operation relation enables the operational properties of an operation to vary, depending on the route that the operation is used in or the products that are being produced.</span></span>
-   <span data-ttu-id="cf08a-121">**工艺路线版本** – 工艺路线版本定义用于生成产品或产品变型的工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-121">**Route version** – A route version defines the route that is used to produce a product or product variant.</span></span> <span data-ttu-id="cf08a-122">工艺路线版本让工艺路线可以在多个产品中重复使用，或者随着时间的推移而改变。</span><span class="sxs-lookup"><span data-stu-id="cf08a-122">Route versions enable routes to be reused across products or changed over time.</span></span> <span data-ttu-id="cf08a-123">它们还让不同工艺路线可用于生成同一产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-123">They also enable different routes to be used to produce the same product.</span></span> <span data-ttu-id="cf08a-124">在这种情况下，使用的工艺路线取决于位置或必须生产的数量之类因素。</span><span class="sxs-lookup"><span data-stu-id="cf08a-124">In this case, the route that is used depends on factors such as the location or the quantity that must be produced.</span></span>

## <a name="routes"></a><span data-ttu-id="cf08a-125">工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-125">Routes</span></span>
<span data-ttu-id="cf08a-126">工艺路线描述生产产品或产品变型所用工序顺序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-126">A route describes the order of operations that is used to produce a product or product variant.</span></span> <span data-ttu-id="cf08a-127">将为每道工序分配工序编号和后续工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-127">Each operation is assigned an operation number and a successor operation.</span></span> <span data-ttu-id="cf08a-128">工序顺序形成工艺路线网络，而工艺路线网络可通过带有方向且有一个或多个起点，但是只有一个终点的图表表示。</span><span class="sxs-lookup"><span data-stu-id="cf08a-128">The order of operations forms a route network that can be represented by a directed chart that has one or more starting points and a single end point.</span></span> <span data-ttu-id="cf08a-129">在 Finance and Operations 中，根据结构类型区分工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-129">In Finance and Operations, routes are distinguished based on the type of structure.</span></span> <span data-ttu-id="cf08a-130">工艺路线有两种，即简单工艺路线和工艺路线网络。</span><span class="sxs-lookup"><span data-stu-id="cf08a-130">The two types of routes are simple routes and route networks.</span></span> <span data-ttu-id="cf08a-131">在“生产控制参数”中，可以指定是否可以只使用简单的工艺路线，或者是否可以使用更复杂的工艺路线网络。</span><span class="sxs-lookup"><span data-stu-id="cf08a-131">In the Production control parameters, you can specify whether only simple routes can be used, or whether the more complex route networks can be used.</span></span>

### <a name="simple-routes"></a><span data-ttu-id="cf08a-132">简单工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-132">Simple routes</span></span>

<span data-ttu-id="cf08a-133">简单工艺路线具有连续性，并且只有一个起点。</span><span class="sxs-lookup"><span data-stu-id="cf08a-133">A simple route is sequential, and there is only one starting point for the route.</span></span>  

<span data-ttu-id="cf08a-134">[![简单工艺路线](./media/routes-and-operations-1-simple-route.png)](./media/routes-and-operations-1-simple-route.png)</span><span class="sxs-lookup"><span data-stu-id="cf08a-134">[![Simple route](./media/routes-and-operations-1-simple-route.png)](./media/routes-and-operations-1-simple-route.png)</span></span>  

<span data-ttu-id="cf08a-135">如果您在“生产控制参数”中仅启用简单工艺路线，在您定义工艺路线时，Finance and Operations 将自动生成工序编号（10、20、30，依此类推）。</span><span class="sxs-lookup"><span data-stu-id="cf08a-135">If you enable only simple routes in the Production control parameters, Finance and Operations automatically generates the operation numbers (10, 20, 30, and so on) when you define the route.</span></span>

### <a name="route-networks"></a><span data-ttu-id="cf08a-136">工艺路线网络</span><span class="sxs-lookup"><span data-stu-id="cf08a-136">Route networks</span></span>

<span data-ttu-id="cf08a-137">如果您在“生产控制参数”中启用更复杂的工艺路线网络，则可以定义多个起点和工序，并且这些工序可以并行运行。</span><span class="sxs-lookup"><span data-stu-id="cf08a-137">If you enable the more complex route networks in the Production control parameters, you can define routes that have multiple starting points and operations that can be run in parallel.</span></span>  

<span data-ttu-id="cf08a-138">[![工艺路线网络](./media/routes-and-operations-2-route-network.png)](./media/routes-and-operations-2-route-network.png)</span><span class="sxs-lookup"><span data-stu-id="cf08a-138">[![Route network](./media/routes-and-operations-2-route-network.png)](./media/routes-and-operations-2-route-network.png)</span></span>  

> [!NOTE]
> -   <span data-ttu-id="cf08a-139">每道工序只能有一个后续工序，而整个工艺路线只能在一道工序中结束。</span><span class="sxs-lookup"><span data-stu-id="cf08a-139">Each operation can have only one successor operation, and the entire route must end in a single operation.</span></span>
> -   <span data-ttu-id="cf08a-140">这不能确保具有相同后续工序的多道工序（前面的例子中为工序 30 和 40）真正会并行运行。</span><span class="sxs-lookup"><span data-stu-id="cf08a-140">This does not ensure that multiple operations that have the same successor operation (for example, operations 30 and 40 in the preceding illustration) will actually be run in parallel.</span></span> <span data-ttu-id="cf08a-141">资源的可用性和产能可能会限制工序的安排方式。</span><span class="sxs-lookup"><span data-stu-id="cf08a-141">The availability and capacity of resources might put constraints on the way that operations are scheduled.</span></span>
> -   <span data-ttu-id="cf08a-142">不能将 0（零）用作工序编号。</span><span class="sxs-lookup"><span data-stu-id="cf08a-142">You can't use 0 (zero) as the operation number.</span></span> <span data-ttu-id="cf08a-143">该编号已预留，用于指定工艺路线中最后一道工序无后续工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-143">That number is reserved and is used to specify that the last operation in the route has no successor operation.</span></span>

### <a name="parallel-operations"></a><span data-ttu-id="cf08a-144">并行工序</span><span class="sxs-lookup"><span data-stu-id="cf08a-144">Parallel operations</span></span>

<span data-ttu-id="cf08a-145">有时需要组合多个具有不同特征的工序资源，才能执行某道工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-145">Sometimes, a combination of multiple operations resources that have different characteristics is required in order to perform an operation.</span></span> <span data-ttu-id="cf08a-146">例如，装配工序可能要求为每两台机器配备一台机器、一个工具和一位工作人员，以便监督该工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-146">For example, an assembly operation might require a machine, a tool, and one worker for every two machines to oversee the operation.</span></span> <span data-ttu-id="cf08a-147">可通过使用并行工序来建模，其中一道工序被指定为主工序，其他工序被指定为辅助工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-147">This example can be modeled by using parallel operations, where one operation is designated as the primary operation and the others are secondary.</span></span>  

<span data-ttu-id="cf08a-148">[![具有主工序和辅助工序的工艺路线](./media/routes-and-operations-3-parallel-operations.png)](./media/routes-and-operations-3-parallel-operations.png)</span><span class="sxs-lookup"><span data-stu-id="cf08a-148">[![Route that has primary and secondary operations](./media/routes-and-operations-3-parallel-operations.png)](./media/routes-and-operations-3-parallel-operations.png)</span></span>  

<span data-ttu-id="cf08a-149">主工序通常表示瓶颈资源，并指示辅助工序的运行时间。</span><span class="sxs-lookup"><span data-stu-id="cf08a-149">Typically, the primary operation represents the bottleneck resource and dictates the run time for the secondary operations.</span></span> <span data-ttu-id="cf08a-150">但是，涉及有限产能的安排期间，同时为主工序和辅助工序安排的资源必须同时可用且拥有可用产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-150">However, during scheduling that involves finite capacity, the resources that are scheduled for both the primary operation and the secondary operations must be available and have free capacity at the same time.</span></span>  

<span data-ttu-id="cf08a-151">主工序和辅助工序必须有相同的工序编号（前面的例子中为 30）。</span><span class="sxs-lookup"><span data-stu-id="cf08a-151">Both the primary operation and the secondary operations must have the same operation number (30 in the preceding illustration).</span></span>  

<span data-ttu-id="cf08a-152">在前面的示例中，主工序 (30) 的资源需求是机器，而辅助工序（30" 和 30""）的资源要求是工具和工作人员。</span><span class="sxs-lookup"><span data-stu-id="cf08a-152">In the preceding example, the resource requirement for the primary operation (30) is the machine, whereas the resource requirements for the secondary operations (30' and 30'') are the tool and the worker.</span></span> <span data-ttu-id="cf08a-153">50% 的负荷帮助确保安排的工作人员可以同时监督两台机器。</span><span class="sxs-lookup"><span data-stu-id="cf08a-153">A fifty-percent load helps guarantee that the scheduled worker can oversee two machines at the same time.</span></span>

### <a name="approval-of-routes"></a><span data-ttu-id="cf08a-154">工艺路线审核</span><span class="sxs-lookup"><span data-stu-id="cf08a-154">Approval of routes</span></span>

<span data-ttu-id="cf08a-155">工艺路线必须先经过批准，然后才能在计划或制造流程中使用。</span><span class="sxs-lookup"><span data-stu-id="cf08a-155">A route must be approved before it can be used in the planning or manufacturing process.</span></span> <span data-ttu-id="cf08a-156">批准说明工艺路线的设计已完成。</span><span class="sxs-lookup"><span data-stu-id="cf08a-156">Approval indicates that the route design has been completed.</span></span> <span data-ttu-id="cf08a-157">发布的同一产品或产品变型可以具有多个批准的工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-157">The same released product or released product variant can have multiple approved routes.</span></span> <span data-ttu-id="cf08a-158">通常，工艺路线的批准在第一个相关工艺路线版本获得批准时进行。</span><span class="sxs-lookup"><span data-stu-id="cf08a-158">Typically, approval of a route occurs when the first relevant route version is approved.</span></span> <span data-ttu-id="cf08a-159">但是，在某些业务方案中，工艺路线和工艺路线版本的批准是单独的活动，可能涉及不同流程所有者。</span><span class="sxs-lookup"><span data-stu-id="cf08a-159">However, in some business scenarios, the approval of the route and the route version are separate activities that might involve different process owners.</span></span>  

<span data-ttu-id="cf08a-160">每个工艺路线可以单独地获得批准或取消批准。</span><span class="sxs-lookup"><span data-stu-id="cf08a-160">Each route can be approved or unapproved separately.</span></span> <span data-ttu-id="cf08a-161">但是请注意，如果工艺路线未获得批准，所有相关工艺路线版本也将未获得批准。</span><span class="sxs-lookup"><span data-stu-id="cf08a-161">However, note that, when a route is unapproved, all related route versions are also unapproved.</span></span> <span data-ttu-id="cf08a-162">在“生产控制参数”中，可以指定工艺路线是否可以未获得批准，以及是否可更改已批准的工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-162">In the Production control parameters, you can specify whether routes can be unapproved, and whether approved routes can be changed.</span></span>  

<span data-ttu-id="cf08a-163">如果必须保留日志以记录谁批准了每个工艺路线，可能需要电子签名才能批准工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-163">If you must keep a log that records who approves each route, you can require electronic signatures for route approval.</span></span> <span data-ttu-id="cf08a-164">然后，用户必须通过使用[电子签名](../../fin-and-ops/organization-administration/electronic-signature-overview.md)确认其身份。</span><span class="sxs-lookup"><span data-stu-id="cf08a-164">Users will then have to confirm their identity by using an [electronic signature](../../fin-and-ops/organization-administration/electronic-signature-overview.md).</span></span>

## <a name="operations"></a><span data-ttu-id="cf08a-165">Operations</span><span class="sxs-lookup"><span data-stu-id="cf08a-165">Operations</span></span>
<span data-ttu-id="cf08a-166">工序是生产流程中的步骤。</span><span class="sxs-lookup"><span data-stu-id="cf08a-166">An operation is a step in the production process.</span></span> <span data-ttu-id="cf08a-167">在 Finance and Operations 中，每道工序有一个 ID 和一个简单描述。</span><span class="sxs-lookup"><span data-stu-id="cf08a-167">In Finance and Operations, each operation has an ID and a simple description.</span></span> <span data-ttu-id="cf08a-168">下面的表显示机械车间中的典型工序示例。</span><span class="sxs-lookup"><span data-stu-id="cf08a-168">The following tables shows typical examples of operations from a machine shop.</span></span>

| <span data-ttu-id="cf08a-169">工序</span><span class="sxs-lookup"><span data-stu-id="cf08a-169">Operation</span></span>  | <span data-ttu-id="cf08a-170">说明</span><span class="sxs-lookup"><span data-stu-id="cf08a-170">Description</span></span>        |
|------------|--------------------|
| <span data-ttu-id="cf08a-171">PipeCut</span><span class="sxs-lookup"><span data-stu-id="cf08a-171">PipeCut</span></span>    | <span data-ttu-id="cf08a-172">切管道</span><span class="sxs-lookup"><span data-stu-id="cf08a-172">Pipe cutting</span></span>       |
| <span data-ttu-id="cf08a-173">TIGweld</span><span class="sxs-lookup"><span data-stu-id="cf08a-173">TIGweld</span></span>    | <span data-ttu-id="cf08a-174">TIG 焊</span><span class="sxs-lookup"><span data-stu-id="cf08a-174">TIG welding</span></span>        |
| <span data-ttu-id="cf08a-175">JigAssy</span><span class="sxs-lookup"><span data-stu-id="cf08a-175">JigAssy</span></span>    | <span data-ttu-id="cf08a-176">Jig 装配</span><span class="sxs-lookup"><span data-stu-id="cf08a-176">Jig assembly</span></span>       |
| <span data-ttu-id="cf08a-177">检查</span><span class="sxs-lookup"><span data-stu-id="cf08a-177">Inspection</span></span> | <span data-ttu-id="cf08a-178">质量检验</span><span class="sxs-lookup"><span data-stu-id="cf08a-178">Quality inspection</span></span> |

<span data-ttu-id="cf08a-179">工序的操作属性（如设置时间和运行时间、资源要求、成本信息和消耗量计算）在工艺关系中指定。</span><span class="sxs-lookup"><span data-stu-id="cf08a-179">The operational properties of the operation, such as the setup time and run time, resource requirements, costing information, and consumption calculation, are specified on the operation relation.</span></span> <span data-ttu-id="cf08a-180">（有关工序关系的详细信息，请参阅下一个部分。）</span><span class="sxs-lookup"><span data-stu-id="cf08a-180">(For more information about operation relations, see the next section.)</span></span>

## <a name="operation-relations"></a><span data-ttu-id="cf08a-181">工序关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-181">Operation relations</span></span>
<span data-ttu-id="cf08a-182">工序的以下操作属性在工序关系中维护：</span><span class="sxs-lookup"><span data-stu-id="cf08a-182">The following operational properties of an operation are maintained on the operation relation:</span></span>

-   <span data-ttu-id="cf08a-183">成本类别</span><span class="sxs-lookup"><span data-stu-id="cf08a-183">Cost categories</span></span>
-   <span data-ttu-id="cf08a-184">消耗参数</span><span class="sxs-lookup"><span data-stu-id="cf08a-184">Consumption parameters</span></span>
-   <span data-ttu-id="cf08a-185">处理时间</span><span class="sxs-lookup"><span data-stu-id="cf08a-185">Processing times</span></span>
-   <span data-ttu-id="cf08a-186">处理数量</span><span class="sxs-lookup"><span data-stu-id="cf08a-186">Processing quantities</span></span>
-   <span data-ttu-id="cf08a-187">资源要求</span><span class="sxs-lookup"><span data-stu-id="cf08a-187">Resource requirements</span></span>
-   <span data-ttu-id="cf08a-188">注释和说明</span><span class="sxs-lookup"><span data-stu-id="cf08a-188">Notes and instructions</span></span>

<span data-ttu-id="cf08a-189">可以为同一个工序定义多个工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-189">You can define multiple operation relations for the same operation.</span></span> <span data-ttu-id="cf08a-190">但是，每个工序关系特定于一道工序，并且存储特定于工艺路线、发布的产品或与物料组有关的一组产品的属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-190">However, each operation relation is specific to one operation, and stores properties that are specific to a route, a released product, or a set of released products that are related to an item group.</span></span> <span data-ttu-id="cf08a-191">因此，可以在具有不同工艺属性的多个工艺路线中使用同一道工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-191">Therefore, the same operation can be used in multiple routes that have different operational properties.</span></span> <span data-ttu-id="cf08a-192">此外，如果使用具有相同工艺属性的标准工艺，无论使用哪种工序和生产哪种产品，您都还可以轻松维护您的主数据。</span><span class="sxs-lookup"><span data-stu-id="cf08a-192">In addition, you can more easily maintain your master data if you use standard operations that have the same operational properties, regardless of the route that is used and product that is produced.</span></span> <span data-ttu-id="cf08a-193">工序关系的范围通过**物料代码**、**物料关系**、**工艺路线代码**和**工艺路线关系**属性定义，如下表中所示。</span><span class="sxs-lookup"><span data-stu-id="cf08a-193">The scope of the operation relation is defined through the **Item code**, **Item relation**, **Route code** and **Route relation** properties, as shown in the following table.</span></span>

| <span data-ttu-id="cf08a-194">物料代码</span><span class="sxs-lookup"><span data-stu-id="cf08a-194">Item code</span></span> | <span data-ttu-id="cf08a-195">物料关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-195">Item relation</span></span>         | <span data-ttu-id="cf08a-196">工艺路线代码</span><span class="sxs-lookup"><span data-stu-id="cf08a-196">Route code</span></span> | <span data-ttu-id="cf08a-197">工艺路线关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-197">Route relation</span></span>   | <span data-ttu-id="cf08a-198">工序关系的范围</span><span class="sxs-lookup"><span data-stu-id="cf08a-198">Scope of the operation relation</span></span>                                                                                                                                                                                                                                                                              |
|-----------|-----------------------|------------|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cf08a-199">表</span><span class="sxs-lookup"><span data-stu-id="cf08a-199">Table</span></span>     | <span data-ttu-id="cf08a-200">&lt;物料 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-200">&lt;Item ID&gt;</span></span>       | <span data-ttu-id="cf08a-201">工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-201">Route</span></span>      | <span data-ttu-id="cf08a-202">&lt;工艺路线 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-202">&lt;Route ID&gt;</span></span> | <span data-ttu-id="cf08a-203">当工序在**工艺路线编号**=&lt;工艺路线 ID&gt; 以生产**物料编号**=&lt;物料 ID&gt; 的所发布产品的工艺路线中使用时，工序的操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-203">The operational properties of an operation when it's used in the route where **Route number**=&lt;route ID&gt; to produce the released product where **Item number**=&lt;item ID&gt;.</span></span>                                                                                                                        |
| <span data-ttu-id="cf08a-204">表</span><span class="sxs-lookup"><span data-stu-id="cf08a-204">Table</span></span>     | <span data-ttu-id="cf08a-205">&lt;物料 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-205">&lt;Item ID&gt;</span></span>       | <span data-ttu-id="cf08a-206">全部</span><span class="sxs-lookup"><span data-stu-id="cf08a-206">All</span></span>        |                  | <span data-ttu-id="cf08a-207">当工序用于生产**物料编号**=&lt;物料 ID&gt; 的所发布产品的时，工序的默认操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-207">The default operational properties of an operation when it's used to produce the released product where **Item number**=&lt;item ID&gt;.</span></span> <span data-ttu-id="cf08a-208">换言之，发布的产品无工艺路线特定的工序关系时应用这些操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-208">In other words, these operational properties apply when there is no route-specific operation relation for the released product.</span></span>                                     |
| <span data-ttu-id="cf08a-209">组合</span><span class="sxs-lookup"><span data-stu-id="cf08a-209">Group</span></span>     | <span data-ttu-id="cf08a-210">&lt;物料组 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-210">&lt;Item group ID&gt;</span></span> | <span data-ttu-id="cf08a-211">工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-211">Route</span></span>      | <span data-ttu-id="cf08a-212">&lt;工艺路线 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-212">&lt;Route ID&gt;</span></span> | <span data-ttu-id="cf08a-213">除非发布的产品有工艺路线特定的工序关系，否则当工序在**工艺路线编号**=&lt;工艺路线 ID&gt;中使用以生产与物料组&lt;物料组 ID&gt; 关联的所发布产品的工艺路线中使用时，工序的操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-213">The operational properties of an operation when it's used in the route where **Route number**=&lt;route ID&gt; to produce released products that are associated with item group &lt;item group ID&gt;, unless there is a route-specific operation relation for the released product.</span></span>                         |
| <span data-ttu-id="cf08a-214">组合</span><span class="sxs-lookup"><span data-stu-id="cf08a-214">Group</span></span>     | <span data-ttu-id="cf08a-215">&lt;物料组 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-215">&lt;Item group ID&gt;</span></span> | <span data-ttu-id="cf08a-216">全部</span><span class="sxs-lookup"><span data-stu-id="cf08a-216">All</span></span>        |                  | <span data-ttu-id="cf08a-217">除非存在特定的工序关系，否则当工序用于生产与物料组&lt;物料组 ID&gt; 关联的所发布产品时，工序的默认操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-217">The default operational properties of an operation when it's used to produce released products that are associated with item group &lt;item group ID&gt;, unless a more specific operation relation exists.</span></span>                                                                                                  |
| <span data-ttu-id="cf08a-218">全部</span><span class="sxs-lookup"><span data-stu-id="cf08a-218">All</span></span>       |                       | <span data-ttu-id="cf08a-219">工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-219">Route</span></span>      | <span data-ttu-id="cf08a-220">&lt;工艺路线 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-220">&lt;Route ID&gt;</span></span> | <span data-ttu-id="cf08a-221">工序在**工艺路线编号**=&lt;工艺路线 ID&gt; 的工艺路线中使用时，工序的默认操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-221">The default operational properties of the operation when it's used in the route where **Route number**=&lt;route ID&gt;.</span></span> <span data-ttu-id="cf08a-222">换言之，特定于发布的产品或其关联物料组的此工艺路线无工序关系时，应用这些工序属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-222">In other words, these operational properties apply when there is no operation relation for this route that is specific to either the released product or its associated item group.</span></span> |
| <span data-ttu-id="cf08a-223">全部</span><span class="sxs-lookup"><span data-stu-id="cf08a-223">All</span></span>       |                       | <span data-ttu-id="cf08a-224">全部</span><span class="sxs-lookup"><span data-stu-id="cf08a-224">All</span></span>        |                  | <span data-ttu-id="cf08a-225">工序的默认操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-225">The default operational properties of an operation.</span></span> <span data-ttu-id="cf08a-226">不存在更特定的操作关系时，应用这些操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-226">These operational properties apply when a more specific operation relation doesn't exist.</span></span>                                                                                                                                                                |

<span data-ttu-id="cf08a-227">您还可以指定工序关系特定于站点。</span><span class="sxs-lookup"><span data-stu-id="cf08a-227">You can also specify that an operation relation is specific to a site.</span></span> <span data-ttu-id="cf08a-228">通过这种方式，工序的操作属性可根据工序的执行位置（即站点）决定。</span><span class="sxs-lookup"><span data-stu-id="cf08a-228">In this way, the operational properties of an operation can vary, depending on the location (that is, the site) where the operation is performed.</span></span> <span data-ttu-id="cf08a-229">对于配置的产品，还可以为每个产品配置指定不同的操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-229">For configured products, you can also specify different operational properties for each product configuration.</span></span>  

<span data-ttu-id="cf08a-230">工序关系让您在定义工艺路线时可以灵活多变。</span><span class="sxs-lookup"><span data-stu-id="cf08a-230">Operation relations give you lots of flexibility when you define your routes.</span></span> <span data-ttu-id="cf08a-231">此外，由于可以定义默认属性，所以有助于减少必须维护的主数据。</span><span class="sxs-lookup"><span data-stu-id="cf08a-231">Additionally, the ability to define default properties helps reduce the amount of master data that you must maintain.</span></span> <span data-ttu-id="cf08a-232">但是，这种灵活也意味着您必须了解修改工序关系的环境。</span><span class="sxs-lookup"><span data-stu-id="cf08a-232">However, this flexibility also means that you must be aware of the context that you modify an operation relation in.</span></span>  

> [!NOTE]
> <span data-ttu-id="cf08a-233">因为操作属性存储按照每个工艺路线的工序存储在工序关系中，所以同一道工序（如“装配”）的所有发生次数具有相同的设置时间、运行时间、资源要求。</span><span class="sxs-lookup"><span data-stu-id="cf08a-233">Because the operational properties are stored in operation relations per operation for each route, all occurrences of the same operation (for example, Assembly) have the same setup time, run time, and resource requirements.</span></span> <span data-ttu-id="cf08a-234">因此，如果一道工序的两个发生次数必须在同一个工艺路线中发生，但是具有不同的运行时间，您必须创建两个不同的工序，如“装配1”和“装配2”。</span><span class="sxs-lookup"><span data-stu-id="cf08a-234">Therefore, if two occurrences of an operation must occur in the same route but have different run times, you must create two separate operations, such as Assembly1 and Assembly2.</span></span>

### <a name="modifying-product-specific-routes"></a><span data-ttu-id="cf08a-235">修改产品特定的工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-235">Modifying product-specific routes</span></span>

<span data-ttu-id="cf08a-236">在您从**已发布产品详细信息**页打开**工艺路线**时，将显示与所选已发布产品关联的工艺路线版本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-236">When you open the **Route** page from the **Released product details** page, the route versions that are associated with the selected released product are shown.</span></span> <span data-ttu-id="cf08a-237">在此环境中，Finance and Operations 为各工序显示最符合工艺路线版本的工序关系中的操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-237">In this context, for each operation, Finance and Operations shows the operational properties from the operation relation that best matches the route version.</span></span> <span data-ttu-id="cf08a-238">您将注意到工序列表中包含工序关系内的**物料代码**和**工艺路线代码**。</span><span class="sxs-lookup"><span data-stu-id="cf08a-238">You will notice that the list of operations includes the **Item code** and **Route code** properties from the operation relation.</span></span> <span data-ttu-id="cf08a-239">因此，您可以确定显示的是哪个工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-239">Therefore, you can determine which operation relation is shown.</span></span>  

<span data-ttu-id="cf08a-240">在**工艺路线**页中，您可以修改工序的操作属性，如运行时间或成本类别。</span><span class="sxs-lookup"><span data-stu-id="cf08a-240">On the **Route** page, you can modify the operational properties of the operation, such as the run time or the cost categories.</span></span> <span data-ttu-id="cf08a-241">您的更改存储在特定于当前工艺路线版本中引用的工艺路线和发布的产品的工艺关系中。</span><span class="sxs-lookup"><span data-stu-id="cf08a-241">Your changes are stored on the operation relation that is specific to the route and released product that are referenced in the current route version.</span></span> <span data-ttu-id="cf08a-242">如果显示的工序关系不特定于该工艺路线和发布的产品，在存储您的更改之前，系统将创建此工序关系的副本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-242">If the operation relation that is shown isn't specific to the route and the released product, before your changes are stored, the system creates a copy of the operation relation.</span></span> <span data-ttu-id="cf08a-243">此副本*的确*特定于该工艺路线和发布的产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-243">This copy *is* specific to the route and released product.</span></span> <span data-ttu-id="cf08a-244">因此，您的更改不影响其他工艺路线或发布的产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-244">Therefore, your changes won't affect other routes or released products.</span></span> <span data-ttu-id="cf08a-245">若要验证**工艺路线**页中正在修改哪个工序关系，请查看**物料代码**和**工艺路线代码**字段。</span><span class="sxs-lookup"><span data-stu-id="cf08a-245">To verify which operation relation is being modified on the **Route** page, look at the **Item code** and **Route code** fields.</span></span>  

<span data-ttu-id="cf08a-246">还可以通过使用**复制和编辑关系**功能，手动创建特定于某个工艺路线和发布的产品的工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-246">You can also manually create an operation that is specific to a route and released product by using the **Copy and edit relation** function.</span></span>  

> [!NOTE]
> <span data-ttu-id="cf08a-247">如果在**工艺路线**页中向工艺路线添加新工序，将仅为当前发布的产品创建工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-247">If you add a new operation to a route on the **Route** page, an operation relation is created only for the current released product.</span></span> <span data-ttu-id="cf08a-248">因此，如果也将此工艺路线用于生产发布的其他产品，则这些发布的产品无适用的工序关系，并且不再将该工艺路线用于这些发布的产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-248">Therefore, if the route is also used to produce other released products, no applicable operation relation will exist for those released products, and the route can no longer be used for those released products.</span></span>

### <a name="maintaining-operation-relations-per-route"></a><span data-ttu-id="cf08a-249">按工艺路线维护工序关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-249">Maintaining operation relations per route</span></span>

<span data-ttu-id="cf08a-250">在您从**工艺路线**列表页打开**工艺路线详细信息**时，将显示应用于所选工艺路线的所有工序关系的列表。</span><span class="sxs-lookup"><span data-stu-id="cf08a-250">When you open the **Route details** page from the **Routes** list page, a list of all the operation relations that apply to the selected route is shown.</span></span> <span data-ttu-id="cf08a-251">因此，可以轻松验证将哪些操作属性用于了哪些产品。</span><span class="sxs-lookup"><span data-stu-id="cf08a-251">Therefore, you can easily verify which operational properties are used for which products.</span></span> <span data-ttu-id="cf08a-252">可以修改默认属性值和产品特定的属性值。</span><span class="sxs-lookup"><span data-stu-id="cf08a-252">You can modify both default property values and product-specific property values.</span></span>  

<span data-ttu-id="cf08a-253">如果**工艺路线详细信息**页中添加新工序关系，将把**工艺路线代码**字段自动设置为**工艺路线**，将**工艺路线关系**字段设置为当前工艺路线的工艺路线编号。</span><span class="sxs-lookup"><span data-stu-id="cf08a-253">If you add a new operation relation on the **Route details** page, the **Route code** field is automatically set to **Route**, and the **Route relation** field is set to the route number of the current route.</span></span>

### <a name="maintaining-operation-relations-per-operation"></a><span data-ttu-id="cf08a-254">按工序维护工序关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-254">Maintaining operation relations per operation</span></span>

<span data-ttu-id="cf08a-255">可以通过**工序**页打开**工序关系**页。</span><span class="sxs-lookup"><span data-stu-id="cf08a-255">From the **Operations** page, you can open the **Operation relations** page.</span></span> <span data-ttu-id="cf08a-256">可以在该页中修改特定工序的所有工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-256">On this page, you can modify all operation relations for a specific operation.</span></span> <span data-ttu-id="cf08a-257">甚至可以修改包含默认值的工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-257">You can even modify operation relations that contain default values.</span></span>  

<span data-ttu-id="cf08a-258">如果贵企业使用标准工序，并且所有产品和流程之间的操作参数都相同，则可通过**工序关系**页轻松维护这些工序的默认操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-258">If your business uses standard operations, and if the operational parameters are the same across all products and processes, the **Operation relations** page provides a convenient way to maintain the default operational properties of those operations.</span></span>

### <a name="applying-operation-relations"></a><span data-ttu-id="cf08a-259">应用工序关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-259">Applying operation relations</span></span>

<span data-ttu-id="cf08a-260">在某些情况下，Finance and Operations 必须找到某道工序的操作属性。</span><span class="sxs-lookup"><span data-stu-id="cf08a-260">In some cases, Finance and Operations must find the operational properties for an operation.</span></span> <span data-ttu-id="cf08a-261">例如，在创建采购订单时，必须将每道工序的操作属性从工序关系复制到生产工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-261">For example, when a purchase order is created, the operational properties of each operation must be copied from the operation relations to the production route.</span></span> <span data-ttu-id="cf08a-262">在这些情况下，Finance and Operations 搜索从最特定的组合到最不特定的组合一一搜索相关工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-262">In these situations, Finance and Operations searches the relevant operation relations from the most specific combination to the least specific combination.</span></span>  

<span data-ttu-id="cf08a-263">在 Finance and Operations 搜索与发布的产品关系最密切的工序关系时，匹配发布的产品的物料 ID 的工序关系的优先级高过匹配物料组 ID 的工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-263">When Finance and Operations searches for the most relevant operation relation for a released product, an operation relation that matches the item ID of the released product is preferred over an operation relation that matches the item group ID.</span></span> <span data-ttu-id="cf08a-264">同样，匹配物料组 ID 的工序关系优先级高过默认工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-264">In turn, an operation relation that matches the item group ID is preferred over the default operation relation.</span></span> <span data-ttu-id="cf08a-265">搜索按以下顺序进行：</span><span class="sxs-lookup"><span data-stu-id="cf08a-265">The search is done in the following order:</span></span>

1.  <span data-ttu-id="cf08a-266">**物料代码**=**表**和**物料关系**=&lt;物料 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-266">**Item code**=**Table** and **Item relation**=&lt;item ID&gt;</span></span>
2.  <span data-ttu-id="cf08a-267">**物料代码**=**组**和**物料关系**=&lt;物料组 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-267">**Item code**=**Group** and **Item relation**=&lt;item group ID&gt;</span></span>
3.  <span data-ttu-id="cf08a-268">**物料代码**=**全部**</span><span class="sxs-lookup"><span data-stu-id="cf08a-268">**Item code**=**All**</span></span>
4.  <span data-ttu-id="cf08a-269">**工艺路线代码**=**工艺路线**和**工艺路线关系**=&lt;工艺路线 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-269">**Route code**=**Route** and **Route relation**=&lt;route ID&gt;</span></span>
5.  <span data-ttu-id="cf08a-270">**工艺路线代码**=**全部**</span><span class="sxs-lookup"><span data-stu-id="cf08a-270">**Route code**=**All**</span></span>
6.  <span data-ttu-id="cf08a-271">**配置**=&lt;配置 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-271">**Configuration**=&lt;configuration ID&gt;</span></span>
7.  <span data-ttu-id="cf08a-272">**配置**=</span><span class="sxs-lookup"><span data-stu-id="cf08a-272">**Configuration**=</span></span>
8.  <span data-ttu-id="cf08a-273">**站点**=&lt;站点 ID&gt;</span><span class="sxs-lookup"><span data-stu-id="cf08a-273">**Site**=&lt;site ID&gt;</span></span>
9.  <span data-ttu-id="cf08a-274">**站点**=</span><span class="sxs-lookup"><span data-stu-id="cf08a-274">**Site**=</span></span>

<span data-ttu-id="cf08a-275">因此，工序只能为每个工艺路线使用一次。</span><span class="sxs-lookup"><span data-stu-id="cf08a-275">Therefore, an operation should be used only one time for each route.</span></span> <span data-ttu-id="cf08a-276">如果工序在同一个工艺路线中出现多次，则该工序每次出现时都具有相同的工序关系，而您不能为该工序的每次出现设置不同属性（例如，运行时间）。</span><span class="sxs-lookup"><span data-stu-id="cf08a-276">If the operation occurs multiple times in the same route, all occurrences of that operation will have the same operation relation, and you won't be able to have different properties (for example, run times) for each occurrence.</span></span>

## <a name="route-versions"></a><span data-ttu-id="cf08a-277">工艺路线版本</span><span class="sxs-lookup"><span data-stu-id="cf08a-277">Route versions</span></span>
<span data-ttu-id="cf08a-278">工艺路线版本用于容纳生产产品时的各种变数，或使您更好地控制生产流程。</span><span class="sxs-lookup"><span data-stu-id="cf08a-278">Route versions are used to accommodate variations in the production of products or provide greater control over the production process.</span></span> <span data-ttu-id="cf08a-279">它们定义生产特定的已发布产品或已发布产品变型时应使用哪个工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-279">They define which route should be used when a specific released product or released product variant is produced.</span></span> <span data-ttu-id="cf08a-280">您可以使用以下约束来定义将哪个工艺路线用于发布的产品：</span><span class="sxs-lookup"><span data-stu-id="cf08a-280">You can use the following constraints to define which route is used for a released product:</span></span>

-   <span data-ttu-id="cf08a-281">产品维度（尺寸、颜色、样式或配置）</span><span class="sxs-lookup"><span data-stu-id="cf08a-281">Product dimensions (size, color, style, or configuration)</span></span>
-   <span data-ttu-id="cf08a-282">生产数量</span><span class="sxs-lookup"><span data-stu-id="cf08a-282">Production quantity</span></span>
-   <span data-ttu-id="cf08a-283">生产站点</span><span class="sxs-lookup"><span data-stu-id="cf08a-283">Production site</span></span>
-   <span data-ttu-id="cf08a-284">生产日期</span><span class="sxs-lookup"><span data-stu-id="cf08a-284">Production date</span></span>

<span data-ttu-id="cf08a-285">在特定站点以特定数量或特定期间生产产品时，可以将特定工艺路线版本指定为默认工艺路线版本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-285">When you're producing the product at a specific site, in a specific quantity, or in a specific period, you can designate a specific route version as the default route version.</span></span> <span data-ttu-id="cf08a-286">但是请注意，一个给定已发布产品和一组给定约束只能有一个活动的工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-286">However, note that only one active route is allowed for a given released product and a given set of constraints.</span></span>  

<span data-ttu-id="cf08a-287">在“生产控制参数”中，您可以要求始终指定工艺路线版本的有效期。</span><span class="sxs-lookup"><span data-stu-id="cf08a-287">In the Production control parameters, you can require that the validity period of a route version always be specified.</span></span>

### <a name="approval-of-route-versions"></a><span data-ttu-id="cf08a-288">工艺路线版本的批准</span><span class="sxs-lookup"><span data-stu-id="cf08a-288">Approval of route versions</span></span>

<span data-ttu-id="cf08a-289">工艺路线版本必须先经过批准，然后才能在计划或制造流程中使用。</span><span class="sxs-lookup"><span data-stu-id="cf08a-289">Before a route version can be used in the planning or manufacturing process, it must be approved.</span></span> <span data-ttu-id="cf08a-290">批准工艺路线版本时，也将批准相关工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-290">When you approve a route version, you can also approve the related route.</span></span> <span data-ttu-id="cf08a-291">但是请注意，仅当也批准了相关工艺路线，才可以批准工艺路线版本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-291">However, note that a route version can be approved only if the related route is also approved.</span></span>

### <a name="activating-the-default-route-version"></a><span data-ttu-id="cf08a-292">激活默认工艺路线版本</span><span class="sxs-lookup"><span data-stu-id="cf08a-292">Activating the default route version</span></span>

<span data-ttu-id="cf08a-293">在您激活工艺路线版本时，可以将其指定为主计划将使用或将用于创建生产订单的默认工艺路线版本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-293">When you activate a route version, you designate it as the default route version that master planning will use, or that will be used to create production orders.</span></span> <span data-ttu-id="cf08a-294">一组给定约束（如期间、站点或数量）只能有一个活动工艺路线版本。</span><span class="sxs-lookup"><span data-stu-id="cf08a-294">You can have only one active route version for a given set of constraints (for example, period, site, or quantity).</span></span> <span data-ttu-id="cf08a-295">如果正在尝试激活的版本与已处于活动状态的版本冲突，您将收到错误消息。</span><span class="sxs-lookup"><span data-stu-id="cf08a-295">If the version that you’re trying to activate conflicts with a version that is already active, you receive an error message.</span></span> <span data-ttu-id="cf08a-296">为了防止不明确的激活，您随后必须停用冲突的版本或修改工艺路线版本中的版本约束。</span><span class="sxs-lookup"><span data-stu-id="cf08a-296">To prevent an ambiguous activation, you must then either inactivate the conflicting version or modify the constraints (usually the period) on the route version.</span></span>

### <a name="electronic-signatures"></a><span data-ttu-id="cf08a-297">电子签名</span><span class="sxs-lookup"><span data-stu-id="cf08a-297">Electronic signatures</span></span>

<span data-ttu-id="cf08a-298">如果必须保留日志以记录谁批准和激活了每个工艺路线版本，这些任务可能需要电子签名。</span><span class="sxs-lookup"><span data-stu-id="cf08a-298">If you must keep a log that records who approves and activates each route version, you can require electronic signatures for these tasks.</span></span> <span data-ttu-id="cf08a-299">然后，批准和激活工艺路线版本的用户必须通过使用[电子签名](../../fin-and-ops/organization-administration/electronic-signature-overview.md)确认自己的身份。</span><span class="sxs-lookup"><span data-stu-id="cf08a-299">Users who approve and activate route versions will then have to confirm their identity by using an [electronic signature](../../fin-and-ops/organization-administration/electronic-signature-overview.md).</span></span>

### <a name="product-change-that-uses-case-management"></a><span data-ttu-id="cf08a-300">使用案例管理的产品变更</span><span class="sxs-lookup"><span data-stu-id="cf08a-300">Product change that uses case management</span></span>

<span data-ttu-id="cf08a-301">适用于新的或已更改的工艺路线和工艺路线版本的产品变更案例提供了一个查看工艺路线版本约束的简单方法。</span><span class="sxs-lookup"><span data-stu-id="cf08a-301">The product change case for the approval and activation of new or changed routes and route versions gives you an easy way to see an overview of the route version constraints.</span></span> <span data-ttu-id="cf08a-302">您也可以批准和激活与一道工序中的特定更改有关的所有工艺路线，并将结果记录到产品变更案例中。</span><span class="sxs-lookup"><span data-stu-id="cf08a-302">You can also approve and activate all routes that are related to a specific change in one operation and document the results in the product change case.</span></span>

## <a name="maintaining-routes"></a><span data-ttu-id="cf08a-303">维护工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-303">Maintaining routes</span></span>
<span data-ttu-id="cf08a-304">根据您的业务要求，您可能可以减少维护流程定义所需的工作量。</span><span class="sxs-lookup"><span data-stu-id="cf08a-304">Depending on your business requirements, you might be able to reduce the effort that is required in order to maintain your process definitions.</span></span>

### <a name="making-routes-independent-of-resources"></a><span data-ttu-id="cf08a-305">使工艺路线独立于资源</span><span class="sxs-lookup"><span data-stu-id="cf08a-305">Making routes independent of resources</span></span>

<span data-ttu-id="cf08a-306">在许多系统中，必须在工艺路线中指定应执行工序的工序资源或资源组。</span><span class="sxs-lookup"><span data-stu-id="cf08a-306">In many systems, the operations resource or resource group that should perform an operation must be specified in the route.</span></span> <span data-ttu-id="cf08a-307">但是在 Finance and Operations 中，可以定义一组要求，工序资源必须满足这组要求才能适用于工序。</span><span class="sxs-lookup"><span data-stu-id="cf08a-307">However, in Finance and Operations, you can define a set of requirements that an operations resource must meet to be applicable for the operation.</span></span> <span data-ttu-id="cf08a-308">因此，在真正安排工序之前，不必确定应使用的特定工序资源或资源组。</span><span class="sxs-lookup"><span data-stu-id="cf08a-308">Therefore, the specific operations resource or resource group that should be used doesn't have to be determined until the operation is actually scheduled.</span></span> <span data-ttu-id="cf08a-309">在您有大量工作人员或机器可以执行同一道工序时，此功能特别有用。</span><span class="sxs-lookup"><span data-stu-id="cf08a-309">This functionality is especially useful when you have many workers or machines that can perform the same operation.</span></span>  

<span data-ttu-id="cf08a-310">例如，您指定某道工序需要有**冲压**能力为 20 吨的**机器**类型的工序资源。</span><span class="sxs-lookup"><span data-stu-id="cf08a-310">For example, you specify that an operation requires an operations resource of the **Machine** type that has a **Stamping** capability of 20 tons.</span></span> <span data-ttu-id="cf08a-311">安排此工序时，调度引擎将把这些要求解析为特定工序资源或资源组。</span><span class="sxs-lookup"><span data-stu-id="cf08a-311">The scheduling engine will then resolve these requirements to a specific operations resource or resource group when the operation is scheduled.</span></span> <span data-ttu-id="cf08a-312">因为您可以仅指定这些要求，而不是将工序绑定到特定机器，所以您的灵活性更高。</span><span class="sxs-lookup"><span data-stu-id="cf08a-312">Because you can just specify these requirements instead of binding the operation to a specific machine, you have much more flexibility.</span></span> <span data-ttu-id="cf08a-313">此外，移动资源或添加新资源时，更容易维护。</span><span class="sxs-lookup"><span data-stu-id="cf08a-313">Additionally, maintenance is easier when resources are moved or new resources are added.</span></span>  

<span data-ttu-id="cf08a-314">有关各种资源要求及其使用方法的详细信息，请参阅“工序资源要求”和[资源产能](resource-capabilities.md)。</span><span class="sxs-lookup"><span data-stu-id="cf08a-314">For more information about the various types of resource requirements and how to use them, see Operations resource requirements and [Resource capabilities](resource-capabilities.md).</span></span>

### <a name="sharing-routes-across-sites"></a><span data-ttu-id="cf08a-315">跨站点共享工艺路线</span><span class="sxs-lookup"><span data-stu-id="cf08a-315">Sharing routes across sites</span></span>

<span data-ttu-id="cf08a-316">如果您在多个生产站点生产同一个产品，并且该产品的生产步骤在所有站点都相同，通常可以设计跨所有生产站点使用的工序工艺路线。</span><span class="sxs-lookup"><span data-stu-id="cf08a-316">If you produce the same product at more than one production site, and if the steps for producing the product are the same at all sites, you can often design a shared route that is used across all production sites.</span></span> <span data-ttu-id="cf08a-317">要创建共享工艺路线，请勿在工艺路线本身中指定站点。</span><span class="sxs-lookup"><span data-stu-id="cf08a-317">To create a shared route, don't specify a site on the route itself.</span></span> <span data-ttu-id="cf08a-318"> 不过，您仍必须创建一个工艺路线版本，用于在各站点将共享工艺路线与该产品关联。</span><span class="sxs-lookup"><span data-stu-id="cf08a-318">However, you must still create a route version that associates the shared route with the product at each site.</span></span>  

<span data-ttu-id="cf08a-319">还必须确保该工艺路线中各工序的资源要求不需要特定工序资源或资源组，而是以所需资源的特征的形式表达。</span><span class="sxs-lookup"><span data-stu-id="cf08a-319">You must also make sure that the resource requirements for each operation in the route don't call for specific operations resources or resource groups, but are instead expressed in terms of the characteristics of the required resources.</span></span> <span data-ttu-id="cf08a-320">然后，调度引擎可以从安排了生产的站点分配相应的工序资源。</span><span class="sxs-lookup"><span data-stu-id="cf08a-320">The scheduling engine will then be able to assign the appropriate operations resources from the site that the production is scheduled on.</span></span> <span data-ttu-id="cf08a-321">例如，如果运行时间稍有不同，或者特定工序的设置时间特定于站点，您可以通过为该站点再添加一个工序关系来指定此信息。</span><span class="sxs-lookup"><span data-stu-id="cf08a-321">For example, if there are small differences in the run time, or if the setup time for a certain operation is site-specific, you can specify this information by adding an additional operation relation for that site.</span></span>  

<span data-ttu-id="cf08a-322">若要充分利用共享工艺路线，还应使用相应物料清单 (BOM) 中的资源消耗量。</span><span class="sxs-lookup"><span data-stu-id="cf08a-322">To take full advantage of the benefits of shared routes, you should also use resource consumption on the corresponding bill of materials (BOM).</span></span> <span data-ttu-id="cf08a-323">在您为物料清单行中的资源消耗量设置标志时原材料、消耗的原材料的来源仓库和位置将通过为工序安排的工序资源推断出来。</span><span class="sxs-lookup"><span data-stu-id="cf08a-323">When you set the flag for resource consumption on the BOM line, the warehouse and location that raw materials should be consumed from is inferred from the operations resource that the operation is scheduled on.</span></span> <span data-ttu-id="cf08a-324">因此，真正安排生产之前，不必确定仓库和位置。</span><span class="sxs-lookup"><span data-stu-id="cf08a-324">Therefore, the warehouse and location don't have to be determined until the production is actually scheduled.</span></span> <span data-ttu-id="cf08a-325">这样，您就可以让物料清单和工艺路线都独立于生产产品的实际位置。</span><span class="sxs-lookup"><span data-stu-id="cf08a-325">In this way, you can make both the BOM and the route independent of the physical location where the product is produced.</span></span>

### <a name="standard-operation-relations"></a><span data-ttu-id="cf08a-326">标准工序关系</span><span class="sxs-lookup"><span data-stu-id="cf08a-326">Standard operation relations</span></span>

<span data-ttu-id="cf08a-327">如果贵企业在整个生产过程中均使用标准化工序，并且设置时间、运行时间、消耗量计算、成本计算等的变动很小或没有变动，您可以受益于为所有工序创建默认工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-327">If your business uses standardized operations throughout production, and if there is little or no variation in the setup time, run time, consumption calculation, cost calculation, and so on, you might benefit from creating default operation relations for all operations.</span></span> <span data-ttu-id="cf08a-328">在这种情况下，请避免创建特定于任何工艺路线或发布的产品的工序关系。</span><span class="sxs-lookup"><span data-stu-id="cf08a-328">In this case, avoid creating operation relations that are specific to any route or released product.</span></span>  

<span data-ttu-id="cf08a-329">如果您还以技能和产能的形式表示资源需求，并让您的工艺路线独立于站点，则可以帮助让业务流程的持续维护保持在最低水平。</span><span class="sxs-lookup"><span data-stu-id="cf08a-329">If you also express resource requirements in terms of skills and capabilities, and make your routes site-independent, you can help keep the ongoing maintenance of your business processes to a minimum.</span></span>  

<span data-ttu-id="cf08a-330">在使用此方法时，**工序关系**页变为用于维护运行时间和其他属性的主要场所。</span><span class="sxs-lookup"><span data-stu-id="cf08a-330">When you use this approach, the **Operation relations** page becomes your primary destination for maintaining run times and other properties.</span></span>

### <a name="resource-specific-process-times"></a><span data-ttu-id="cf08a-331">资源特定的处理时间</span><span class="sxs-lookup"><span data-stu-id="cf08a-331">Resource-specific process times</span></span>

<span data-ttu-id="cf08a-332">如果不为工序的资源要求指定工序资源或资源组，则适用的资源可能以不同速度操作。</span><span class="sxs-lookup"><span data-stu-id="cf08a-332">If you don't specify an operations resource or resource group as part of the resource requirements for an operation, the applicable resources might operate at different speeds.</span></span> <span data-ttu-id="cf08a-333">因此，处理工序所需时间可能会有所不同。</span><span class="sxs-lookup"><span data-stu-id="cf08a-333">Therefore, the time that is required in order to process an operation might vary.</span></span> <span data-ttu-id="cf08a-334">为了解决此问题，您可以使用工序关系中的**公式**字段指定处理时间的计算方法。</span><span class="sxs-lookup"><span data-stu-id="cf08a-334">To resolve this issue, you can use the **Formula** field on the operation relation to specify how the process time is calculated.</span></span> <span data-ttu-id="cf08a-335">选项如下：</span><span class="sxs-lookup"><span data-stu-id="cf08a-335">The following options are available:</span></span>

-   <span data-ttu-id="cf08a-336">**标准** -（默认选项）计算仅使用工序关系中的字段，并将指定的运行时间乘以订单数量。</span><span class="sxs-lookup"><span data-stu-id="cf08a-336">**Standard** – (Default option) The calculation uses only the fields from the operation relation and multiplies the specified run time by the order quantity.</span></span>
-   <span data-ttu-id="cf08a-337">**产能** – 计算包括工序资源中的**产能**字段。</span><span class="sxs-lookup"><span data-stu-id="cf08a-337">**Capacity** – The calculation includes the **Capacity** field from the operations resource.</span></span> <span data-ttu-id="cf08a-338">因此，时间与资源相关。</span><span class="sxs-lookup"><span data-stu-id="cf08a-338">Therefore, the time is resource-dependent.</span></span> <span data-ttu-id="cf08a-339">在工序资源中指定的值是每小时的产能。</span><span class="sxs-lookup"><span data-stu-id="cf08a-339">The value that is specified on the operations resource is capacity per hour.</span></span> <span data-ttu-id="cf08a-340">此值乘以订单数量和工序关系中的**系数**值。</span><span class="sxs-lookup"><span data-stu-id="cf08a-340">This value is multiplied by the order quantity and the **Factor** value from the operation relation.</span></span>
-   <span data-ttu-id="cf08a-341">**批次** – 批次产能通过使用工序关系中的信息来计算。</span><span class="sxs-lookup"><span data-stu-id="cf08a-341">**Batch** – A batch capacity is calculated by using information from the operation relation.</span></span> <span data-ttu-id="cf08a-342">所以可以根据订单数量计算批次的数量和处理时间。</span><span class="sxs-lookup"><span data-stu-id="cf08a-342">The number of batches and, therefore, the process time can then be calculated based on the order quantity.</span></span>
-   <span data-ttu-id="cf08a-343">**资源批次** – 此选项基本与**批次**选项相同。</span><span class="sxs-lookup"><span data-stu-id="cf08a-343">**Resource batch** – This option is basically the same as the **Batch** option.</span></span> <span data-ttu-id="cf08a-344">但是，计算中包含工序资源中的**批次产能**。</span><span class="sxs-lookup"><span data-stu-id="cf08a-344">However, the calculation includes the **Batch capacity** field from the operations resource.</span></span> <span data-ttu-id="cf08a-345">因此，时间与资源相关。</span><span class="sxs-lookup"><span data-stu-id="cf08a-345">Therefore, the time is resource dependent.</span></span>

### <a name="set-up-route-groups"></a><span data-ttu-id="cf08a-346">设置工艺路线组</span><span class="sxs-lookup"><span data-stu-id="cf08a-346">Set up route groups</span></span>

<span data-ttu-id="cf08a-347">可以在**生产控制 > 设置 > 工艺路线 > 工艺路线组**下为其工艺路线或作业类型定义工艺路线组和设置。</span><span class="sxs-lookup"><span data-stu-id="cf08a-347">You can define the route groups and the setup for its route or job types under **Production control > Setup > Routes > Route groups**.</span></span> <span data-ttu-id="cf08a-348">对于工艺路线组中的工艺路线/作业类型，可以选择或清除以下选项：</span><span class="sxs-lookup"><span data-stu-id="cf08a-348">For each Route/job type in the route group, you can select or clear the following options:</span></span>

- <span data-ttu-id="cf08a-349">**激活** - 选择此选项可为所选作业类型启用计算和计划，并在您运行作业级排产时接收作业反馈。</span><span class="sxs-lookup"><span data-stu-id="cf08a-349">**Activation** - Select this option to enable calculations and scheduling for the selected job type, and to receive job feedback when you run job scheduling.</span></span> <span data-ttu-id="cf08a-350">需要选择此选项以启用作业类型，然后选择该作业类型的其他选项。</span><span class="sxs-lookup"><span data-stu-id="cf08a-350">You need to select this option to enable the job type and then, select the rest of the options for that job type.</span></span> <span data-ttu-id="cf08a-351">如果不选择激活，将不启用该作业类型，无论是否选择其他选项。</span><span class="sxs-lookup"><span data-stu-id="cf08a-351">If the activation is not selected, that job type will not be enabled, regardless of the selection of the other options.</span></span> 
- <span data-ttu-id="cf08a-352">**作业管理** - 选择此选项可在运行作业级排产时在作业管理中包含作业类型。</span><span class="sxs-lookup"><span data-stu-id="cf08a-352">**Job management** - Select this option to include the job type in job management when you run job scheduling.</span></span> 
- <span data-ttu-id="cf08a-353">**工作时间** - 选择此选项可根据为工序资源定义的工作日历计划作业类型，否则使用公历。</span><span class="sxs-lookup"><span data-stu-id="cf08a-353">**Working time** Select this option to schedule the job type according to the working time calendar that is defined for the operations resource, otherwise the Gregorian calendar is used.</span></span> <span data-ttu-id="cf08a-354">可以根据阳历或定义的工作时间日历来安排工作时间。</span><span class="sxs-lookup"><span data-stu-id="cf08a-354">Working time can be scheduled either according to the Gregorian calendar or the defined working calendar.</span></span> <span data-ttu-id="cf08a-355">如果选择此选项，则计划基于定义的工作日历。</span><span class="sxs-lookup"><span data-stu-id="cf08a-355">If you select this option, scheduling is based on the defined working time calendar.</span></span> <span data-ttu-id="cf08a-356">此外，作业类型的作业从定义为作业的开始日期的日期的午夜进行计划。</span><span class="sxs-lookup"><span data-stu-id="cf08a-356">Additionally, the job of the job type is scheduled from midnight on the date that is defined as the job's starting date.</span></span>
- <span data-ttu-id="cf08a-357">**产能** - 选择此选项可在运行作业级排产时为作业类型预留产能。</span><span class="sxs-lookup"><span data-stu-id="cf08a-357">**Capacity** - Select this option to reserve capacity for the job type when you run job scheduling.</span></span> <span data-ttu-id="cf08a-358">如果您选择此选项，会在运行计划时为所选作业类型预留产能。</span><span class="sxs-lookup"><span data-stu-id="cf08a-358">If you select this option, capacity is reserved when scheduling is run for the selected job type.</span></span> <span data-ttu-id="cf08a-359">这可为您提供每个工艺路线组中的哪些作业类型使用工序资源的概览。</span><span class="sxs-lookup"><span data-stu-id="cf08a-359">This gives you an overview of which job types in each route group use the operations resources.</span></span> <span data-ttu-id="cf08a-360">例如，在烘干滚筒等烘干资源（如干燥滚筒）是瓶颈资源的情况下，必须将这些资源指定为瓶颈。</span><span class="sxs-lookup"><span data-stu-id="cf08a-360">For example, in a situation where drying resources are bottleneck resources, these resources must be specified as bottlenecks.</span></span> <span data-ttu-id="cf08a-361">分配给排队时间作业类型的烘干工序将预留烘干资源。</span><span class="sxs-lookup"><span data-stu-id="cf08a-361">Drying operations that are assigned to queue time job types will reserve drying resources.</span></span> 

<span data-ttu-id="cf08a-362">对于每种作业类型，首先需要将其激活或停用。</span><span class="sxs-lookup"><span data-stu-id="cf08a-362">For each of the job types, you first need to activate or de-activate it.</span></span> <span data-ttu-id="cf08a-363">如果停用，则不考虑任何其他设置（作业管理、工作时间、产能），因为该作业类型未处于活动状态。</span><span class="sxs-lookup"><span data-stu-id="cf08a-363">When de-activated, none of the other setup (Job management, working time, and capacity) will be considered, as the job type will not be active.</span></span> 

<span data-ttu-id="cf08a-364">作业类型中包含“重叠”。</span><span class="sxs-lookup"><span data-stu-id="cf08a-364">Among the job types you can find Overlap.</span></span> <span data-ttu-id="cf08a-365">重叠允许同时执行不同作业。</span><span class="sxs-lookup"><span data-stu-id="cf08a-365">Overlap allows different jobs to be performed at the same time.</span></span> <span data-ttu-id="cf08a-366">作业重叠时，资源可以使用，但不能为特定作业保留。</span><span class="sxs-lookup"><span data-stu-id="cf08a-366">When jobs are overlapping, the resources can be used but cannot be reserved for the specific jobs.</span></span>
<span data-ttu-id="cf08a-367">因此，如果“激活”选择“重叠”，其余设置（作业管理、工作时间和产能）在工艺路线组中不会产生任何影响。</span><span class="sxs-lookup"><span data-stu-id="cf08a-367">Therefore, when Activation is selected for Overlap, the rest of the settings (Job management, Working time, and Capacity) do not make any impact in the route group.</span></span> 

> [!NOTE]
> <span data-ttu-id="cf08a-368">升级安保时，可能遇到以下错误：**调用计划编制引擎时出现 CLR 错误**。</span><span class="sxs-lookup"><span data-stu-id="cf08a-368">When you upgrade versions, you might encounter the following error: **"CRL Error occurred while invoking the scheduling engine"**.</span></span> <span data-ttu-id="cf08a-369">如果遇到此错误，请转到**工艺路线组**页面，然后清除激活了**重叠**的所有工艺路线的**作业管理**、**工作时间**和**产能**选项。</span><span class="sxs-lookup"><span data-stu-id="cf08a-369">If you receive this error, go to the **Route groups** page and for all the routes where you have activated **Overlap**, clear the **Job management**, **Working time**, and **Capacity** options.</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="cf08a-370">其他资源</span><span class="sxs-lookup"><span data-stu-id="cf08a-370">Additional resources</span></span>

- [<span data-ttu-id="cf08a-371">物料清单和配方</span><span class="sxs-lookup"><span data-stu-id="cf08a-371">Bills of materials and formulas</span></span>](bill-of-material-bom.md)

- [<span data-ttu-id="cf08a-372">在生产工艺路线中使用的成本类别</span><span class="sxs-lookup"><span data-stu-id="cf08a-372">Cost categories used in production routing</span></span>](../cost-management/cost-categories-used-production-routings.md)

- [<span data-ttu-id="cf08a-373">资源功能</span><span class="sxs-lookup"><span data-stu-id="cf08a-373">Resource capabilities</span></span>](resource-capabilities.md)

- [<span data-ttu-id="cf08a-374">电子签名概览</span><span class="sxs-lookup"><span data-stu-id="cf08a-374">Electronic signature overview</span></span>](../../fin-and-ops/organization-administration/electronic-signature-overview.md)



