---
title: 转包
description: 此主题帮助您在 Dynamics 365 Supply Chain Management 中的制造内构建转包演练。
author: christophernread
manager: tfehr
ms.date: 09/28/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: ''
ms.search.region: Global
ms.author: josaw
ms.search.validFrom: 2018-09-30
ms.dyn365.ops.version: ''
ms.openlocfilehash: 1cc1040393d843f39ca8c741a7c51435c7169c00
ms.sourcegitcommit: edb46dce498df42b09e8f5ad6de00f86c8022dfa
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/03/2020
ms.locfileid: "3346414"
---
# <a name="subcontracting"></a>转包

[!include [banner](../includes/banner.md)]

此主题帮助您在 Microsoft Dynamics 365 Supply Chain Management 中的制造内构建转包演练。 本主题的第一部分介绍如何设置数据。 第二部分引导您完成演练中的步骤。

## <a name="target-audience"></a>目标对象

在本主题中，将学习如何在制造中设置转包。 将使用 HQUS 法人中的现有数据对转包活动流进行基本设置。 HQUS 法人中的演示数据包括预设的设置参数，用于为演练中的步骤提供支持。 接管演练针对各种角色面临的关键痛点和挑战，仍然可以由系统管理员完成。

## <a name="demo-scenario"></a>演示方案

HQUS 法人制造高端扬声器。 在制造过程中，扬声器要经过三道工序。

- **预装配** – 装配扬声器机箱。 机箱的材料在此工序开始前于材料仓库领料。
- –**涂层** – 装配扬声器机箱之后，必须为其涂层。 此工序由供应商（即转包商）完成。 预装配后的扬声器机箱和两种材料一起发给涂层转包商。
- **完工** – 预装配后的扬声器机箱由转包商涂层之后，将发回 HQUS 法人，以便完成扬声器的最终装配。

下图显示这三道工序及其使用的材料。

![预装配、涂层和完工工序及其使用的材料](./media/subcontract01_operations-materials.png)

## <a name="setup"></a>设置

开始此演练之前，必须设置数据。

### <a name="set-up-the-finished-product"></a>设置成品

此过程引导您设置已发布产品 D8100，即“涂层机箱”。

1. 选择**产品信息管理 \> 产品 \> 已发布产品**打开**已发布产品详细信息**页。
2. 在快速筛选器字段中，输入 **D8100** 查找现有的已发布产品。

    ![在“已发布产品详细信息”页中筛选已发布产品 D8100](./media/subcontract02_filtering-released-products.png)

3. 在操作窗格上的**设计**选项卡中，选择**工艺路线**打开**工艺路线**页。

    **工艺路线**页显示已发放产品 D8100 的八个工艺路线版本。 这八个工艺路线版本拆分为站点 1 和 站点 5 中的四个工艺路线。 工艺路线 000400 用于计算成本，工艺路线 00041 在涂层工序为内部工序时使用，工艺路线 00042 在涂层工序为外部工序时使用。

    ![“工艺路线”页上的八个工艺路线版本](./media/subcontract03_route-page.png)

4. 在上窗格的**版本**网格中，为站点 **5** 选择工艺路线版本 **00042**。
5. 在下窗格的**概览**选项卡中的网格内，选择工序 **20** (**Cbnt CtSc**)。

    ![已为站点 5 的工艺路线版本 00042 选择了工序 20](./media/subcontract04_route-version-operation.png)

6. 选择**常规**选项卡。

    请注意，**工艺路线类型**字段设置为**供应商**。 该值指示工序 20 (Cbnt CtSc) 是转包工序。

    ![“常规”选项卡上的“工艺路线类型”字段设置为“供应商”](./media/subcontract05_general-tab.png)

7. 选择**资源要求**选项卡。

    计划生产期间，将使用产能查找适合的资源。 请注意，对于工序 20 (Cbnt CtSc)，需要有两种产能（即**涂层**和**涂层机箱**）的资源。

    ![“资源要求”选项卡上的“涂层”和“涂层机箱”产能](./media/subcontract06_resource-requirements-tab.png)

8. 选择**适用的资源**打开**适用的资源**对话框。

    将找到三种符合该工序的资源要求的资源。 请注意，资源 8851 和 8852 的类型为**供应商**。

    ![“适用的资源”对话框中有三种适合的资源。](./media/subcontract07_applicable-resources-dialog.png)

9. 选择**确定**关闭**适合的资源**对话框并返回到**工艺路线**页。
10. 关闭**工艺路线**页返回到**已发布产品详细信息**页。

    ![“已发布产品详细信息”页](./media/subcontract08_released-product-details-page.png)

11. 在操作窗格上的**设计**选项卡中，选择**物料清单版本**打开**物料清单版本**页。

    **物料清单版本**页显示已发布产品 D8100 的四个物料清单 (BOM) 版本。 物料清单 000040 用于涂层和规划，BOM 000041 在涂层工序在内部进行时使用，物料清单 000042 和 000043 在涂层工序转包时使用。

    请注意，物料 S8050 的物料类型为**服务**产品。 此物料代表转包的工作。

    ![“物料清单版本”页上的四个物料清单版本](./media/subcontract09_bom-versions-page.png)

12. 在**物料清单行**快速选项卡上，选择**编辑**打开**编辑物料清单行**对话框。

    创建生产订单并针对已发布产品 D8100 进行估计折后价，将为物料 S8050 自动生成一个采购订单。 此采购订单将链接到生产订单。 要自动生成采购订单，必须将**行类型**字段设置为**供应商**，并且必须为转包商选择供应商帐户。 在此示例中，供应商帐户为 US-801。

    请注意，物料清单行通过工序编号（此示例中为 20）连接到涂层工序。

    ![“编辑物料清单行”对话框](./media/subcontract10_edit-bom-line-dialog.png)

### <a name="create-a-password-for-warehouse-workers"></a>为仓库工作人员创建密码

必须为使用手持设备的仓库工作人员定义密码。

1. 选择**仓库管理 \> 设置 \> 工作人员**打开**工作用户**页。
2. 在**用户**快速选项卡上，选择用户 **51** 的行。

    ![“工作用户”页](./media/subcontract11_work-users-page.png)

3. 选择**重置密码**。
4. 在**密码**和**确认密码**字段中，输入 **1**。
5. 选择**设置密码**。

## <a name="step-by-step-walkthrough"></a>分步演练

**方案和背景**

为产品 D8100（即“涂层机箱”）创建 10 件的生产订单。 为机箱涂层是由供应商 US-801（即 Perfect Coating Solutions）完成的转包工序。 此生产订单中包含三道工序。 在第一道工序中，机箱以内部工序的形式进行预装配。 将下达预装配的材料以便在原材料仓库中领料。 预装配完成之后，将把预装配的机箱和涂层工序所需的两种材料一起发给 Perfect Coating Solutions。 收到供应商发回的涂层机箱之后，需要先进行内部最终装配工序才能将其报告为成品。

1. 选择**生产控制 \> 生产订单 \> 所有生产订单**打开**所有生产订单**页。
2. 在操作窗格上，选择**新建生产订单**打开**创建生产订单**对话框。

    ![“创建生产订单”对话框](./media/subcontract12_create-production-order-dialog.png)

3. 在**物料编号**字段中，选择 **D8100**。
4. 选择物料编号之后，将显示库存维度的字段。 在**颜色**字段中，选择**铬**。

    将显示一个消息框，询问是否应插入物料清单和工艺路线的当前版本。

    ![消息框](./media/subcontract13_message-box.png)

5. 选择**是**。 

    在**创建生产订单**对话框的**物料清单编号**和**工艺路线编号**字段中，将自动为产品 D8100 分别选择物料清单和工艺路线的当前版本。 在此示例中，将选择物料清单 **000040** 和工艺路线 **000040**。
    
    > [!NOTE]
    > 对于物料清单和工艺路线，将为成本计算和规划使用版本 000040。

6. 在**站点**字段中，选择 **5**。
7. 在**仓库**字段中，选择 **51**。
8. 在**物料清单编号**和**工艺路线编号**字段中，将已自动选择的值更改为 **000042**。

    > [!NOTE]
    > 对于物料清单和工艺路线，将使用版本 000042 把机箱涂层转包给供应商 US-801。

    ![“创建生产订单”对话框中已设置值](./media/subcontract14_create-production-order-dialog-set.png)

9. 选择**创建**以创建生产订单并返回到**所有生产订单**页。

    ![“所有生产订单”页中的新生产订单](./media/subcontract15_new-production-order.png)

10. 在操作窗格上的**生产订单**选项卡中，选择**估计**打开**估计**对话框。

    ![“估计”对话框](./media/subcontract16_estimate-dialog.png)

11. 选择**确定**确认估计并返回到**所有生产订单**页。

    > [!NOTE]
    > 估计生产订单之后，将为供应商 US-801 生成服务物料 S8050 的采购订单。

12. 在操作窗格上的**生产订单**选项卡中，选择**物料清单**打开**物料清单**页，可在此处查看生产订单的物料清单行。

    请注意，对于服务项 S8050，将引用估计生产订单时生成的采购订单。

    ![“物料清单”页上的生产订单物料行](./media/subcontract17_production-order-bom-lines.png)

13. 关闭**物料清单**页返回到**所有生产订单**页。
14. 在操作窗格上的**计划**选项卡中，选择**计划作业**打开**作业计划**对话框。
15. 指定以下值：

    - 在**计划的方向**字段中，选择**从明天开始**。
    - 将**有限产能**选项设置为**是**。

    ![“作业计划”对话框](./media/subcontract18_job-scheduling-dialog.png)

16. 选择**确定**关闭**作业计划**对话框并返回到**所有生产订单**页。
17. 在操作窗格上的**计划** 选项卡中，选择**甘特图**打开**甘特图 - 资源视图**页。

    此甘特图提供如何为资源计划生产作业的视觉概览。 请注意，外部涂层工序包含三个作业：处理作业、运输作业和排队时间作业。

    ![“甘特图 - 资源视图”页中的甘特图](./media/subcontract19_gantt-chart.png)

18. 关闭**甘特图 - 资源视图**页返回到**所有生产订单**页。
19. 在操作窗格上的**生产订单**选项卡中，选择**发放**打开**发放**对话框。

    ![“发放”对话框](./media/subcontract20_release-dialog.png)

20. 单击**确定**以关闭**发放**对话框。
21. 选择**生产控制 \> 定期任务 \> 发放到仓库 \> 自动发放物料清单和配方行**以打开**自动发放物料清单和配方行**对话框。

    ![“自动发放物料清单和配方行”对话框](./media/subcontract21_auto-release-bom-formula-lines-dialog.png)

22. 选择**确定**以运行“自动发放物料清单和配方行”作业。

    此作业将原材料的领料工作发放给仓库。

23. 选择**生产控制 \> 生产订单 \> 所有生产订单**打开**所有生产订单**页。
24. 可使用快速筛选器字段选择已在处理的生产订单。
25. 在操作窗格上的**仓库**选项卡中，选择**工作详细信息**打开**工作**页。

    请注意，此页显示两组原材料领料工作。 第一组工作针对材料 M8100 和 M8101。 这些材料供工序 10 使用。 第二组工作针对材料 M8202 和 M8250。 这些物料供工序 20（这是转包工序）使用。

    ![“工作”页中的两组原材料领料工作](./media/subcontract22_work-page.png)

26. 启动仓库应用程序处理工序 10 的仓库工作。

    <!-- TBD – screen shots for processing pick work for the materials. -->

27. 选择**生产控制 \> 生产订单 \> 所有生产订单**打开**所有生产订单**页。
28. 可使用快速筛选器字段选择已在处理的生产订单。
29. 在操作窗格上的**生产订单**选项卡中，选择**开始**打开**开始**对话框。
30. 在**常规**选项卡上，指定以下值：

    - 在**开始工序编号** 字段中，选择 **10**。
    - 在**截止工序编号** 字段中，选择 **10**。

    ![“常规”选项卡中设置的值](./media/subcontract23_start-dialog.png)

31. 选择**确定**关闭**开始**对话框并返回到**所有生产订单**页。

    请注意，生产订单的状态现在是**已开始**。 工序 10 的材料供领料单日记帐自动过帐使用。 工序 10 所用时间由工艺卡日记帐自动过帐计算。

32. 启动仓库应用程序处理工序 20 的仓库工作。

    <!-- TBD – screen shots for processing pick work for the materials. -->

33. 在操作窗格上的**生产订单**选项卡中，选择**开始**打开**开始**对话框。
34. 在**常规**选项卡上，指定以下值：

    - 在**开始工序编号** 字段中，选择 **20**。
    - 在**截止工序编号** 字段中，选择 **20**。
    - 在**数量**字段中，输入 **10**。
    - 将**立即将领料单过帐**选项设置为**否**。

    ![“常规”选项卡中设置的值](./media/subcontract24_general-tab.png)

35. 选择**确定**关闭**开始**对话框并返回到**所有生产订单**页。

    将为用于涂层工序和服务项的材料创建领料单。 服务项提供转包工序的成本。

36. 在操作窗格上的**视图** 选项卡中，选择**领料单**打开**领料单**页。
37. 选择未过帐的领料单，然后选择日记帐编号以显示日记帐行。

    ![“领料单”页中的日记帐行](./media/subcontract25_picking-list.png)

38. 在操作窗格上，选择**打印** \> **领料单报告**以打开**领料单报告**对话框。
39. 将**使用交货通知板式**选项设置为**是**。

    ![“领料单报告”对话框](./media/subcontract26_picking-list-report-dialog.png)

40. 选择**确定**以生成**领料单**报告。

    在此示例中，将从生产领料单日记帐打印供应商交货通知。 交货通知指定发给将进行涂层工序的供应商的材料。

    ![领料单报表](./media/subcontract27_picking-list-report.png)

41. 关闭**领料单**报告以返回到**领料单**页。
42. 在操作窗格上，选择**过帐**以打开**过帐日记帐**对话框。

    ![“过帐日记帐”对话框](./media/subcontract28_post-journal-dialog.png)

43. 单击**确定**以关闭**过帐日记帐**对话框。
44. 打开采购订单。

    ![“采购订单”页](./media/subcontract29_purchase-order-page.png)

45. 在操作窗格上的**采购**选项卡上，选择**确认**。
46. 单击**过帐**以打开**过帐日记帐**对话框。
47. 选择**确定**关闭**过帐日记帐**对话框并返回到**采购订单**页。
48. 将单价从 **33** 更改为 **40**。

    ![“采购订单”页中已更改的单价](./media/subcontract30_unit-price.png)

49. 再次确认采购订单。
50. 产品收据。

    ![“过帐的产品收据”对话框](./media/subcontract31_posting-product-receipt-dialog.png)

51. 采购发票。
52. 更新匹配状态。

    ![“供应商发票”页](./media/subcontract32_vendor-invoice-page.png)

53. 完工入库。

    ![“完工入库”对话框](./media/subcontract33_report-as-finished-dialog.png)

54. 结束。

    ![“结束”对话框](./media/subcontract34_end-dialog.png)

55. 成本比较。

    ![“成本比较”图](./media/subcontract35_cost-comparison-charts.png)

数据缺少设置。
