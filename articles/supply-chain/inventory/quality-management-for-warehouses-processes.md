---
title: 仓库流程质量管理
description: 本主题提供有关仓库流程质量管理功能的信息。 此功能扩展了质量管理功能，并允许用户使用高级仓库管理将物料抽样控制集成到仓库接收流程中。
author: Henrikan
manager: tfehr
ms.date: 04/02/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: henrikan
ms.search.validFrom: 2020-04-02
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: 0f39bd2ffda492fce9b3fe51feafcbc8fd32391c
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/13/2020
ms.locfileid: "4423274"
---
# <a name="quality-management-for-warehouse-processes"></a>仓库流程质量管理

_仓库流程质量管理_ 功能允许您使用高级仓库管理将物料抽样控制集成到仓库接收流程中。 可以自动生成仓库工作，以根据百分比或固定数量或每隔 *n* 个牌照将库存移至质量控制位置。 质检订单完成后，可以根据质量结果自动生成工作，以将库存移至流程中的下一个位置。

_仓库流程质量管理_ 功能扩展了基本质量管理功能的能力。 它提供了为发送到质量控制位置的库存创建质检订单的选项，但并非总是需要质检订单。 因此，它允许基于仓库工作的轻型质量控制流程。

## <a name="turn-on-the-quality-management-for-warehouse-processes-feature"></a>打开“仓库流程质量管理”功能

此功能只有在系统中开启之后才能使用。 管理员可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)设置检查功能状态和开启功能。 在 **功能管理** 工作区中，此功能按照下面的方式列出：

- **模块**：*仓库管理*
- **功能名称：** *仓库流程质量管理*

## <a name="key-benefits"></a>主要优点

_仓库流程质量管理_ 功能会作为接收流程的一部分自动生成工作，以将质量控制所需的库存数量移到质量控制位置。 如果收到的数量超过质量控制所需的数量（根据物料抽样设置），多余数量将移至位置指令设置中定义的入库位置。 验证质检订单后，将基于验证结果和位置指令设置自动生成工作，以将质检订单的数量移到新的入库或退货位置。 仅具有必须移到和移出质量控制的数量的工作自动生成提供集成的流程体验。

> [!NOTE]
> 启用 _仓库流程质量管理_ 功能后，您仍然可以利用手动流程。 在手动流程中，库存移动和按模板移动用于让仓库工作人员触发仓库工作的创建，来将库存从质量控制位置移到新位置。 您另外仍然可以设置入库位置指令，将库存整体从接收位置移动到质量控制位置，而不考虑物料抽样设置。

## <a name="quality-management-and-the-quality-management-for-warehouse-processes-feature"></a>质量管理与“仓库流程质量管理”功能

启用 _仓库流程质量管理_ 功能后，它将更改关键仓库管理和质量管理实体的设置。 下图提供了为仓库流程启用质检订单的实体的概览。 括号中的文本指示在启用 _仓库管理流程质量管理_ 功能之前应用质量管理的建议操作。

![质量管理实体](media/quality-management-entity-diagram.png "质量管理实体")

## <a name="enablers-the-quality-item-sampling-and-quality-order-work-order-types"></a>促成因素：质检物料抽样和质检订单工作订单类型

_仓库流程质量管理_ 功能引入了两种工作订单类型，这些类型都可以支持工作创建流程：

- **质检物料抽样** – 此工作订单类型用于创建将已登记库存移至质量控制的工作。
- **质检订单** – 此工作订单类型用于根据位置指令设置创建将库存从质量控制移至新位置的工作。

### <a name="work-classes-location-directives-and-work-templates"></a>工作类、位置指令和工作模板

_质检物料抽样_ 和 _质检订单_ 工作订单类型由位置指令、工作类和工作模板使用。

您必须先按照以下步骤设置系统，然后才能够自动生成仓库工作来将库存移到质量控制。

1. 为 _质检物料抽样_ 和 _质检订单_ 工作订单类型创建单独的工作类。 这样，您可以确保可以基于两种工作订单类型自动生成适当的工作，然后此工作可以使用仓库应用来运行。
1. 设置每个工作订单类型的工作模板：

    - 设置一个工作模板，其使用 _质检物料抽样_ 工作订单类型将登记的库存自动移动到质量控制位置。
    - 设置一个工作模板，其使用 _质检订单_ 工作订单类型在质量控制完成后，从质量控制位置移动库存。

1. 对于每种工作订单类型，设置应用库存应该移到的正确质量控制位置的位置指令。 质量控制完成后，_质检订单_ 工作订单类型的位置指令可确保选择新的目标位置，以使库存可以移出质量控制位置。
1. 设置相关的移动设备菜单项，以支持将收到的库存移到质量控制位置，以及将通过或未通过质量控制的库存从质量控制位置移到新位置。

有关显示如何完成此设置的分步示例，请参阅本主题末尾的[示例方案](#example-scenario)。

## <a name="enable-a-warehouse-for-quality-management"></a>为仓库启用质量管理

要为特定仓库应用 _仓库流程质量管理_ 功能之前，您必须先执行以下步骤让此功能可用于该仓库。

1. 转到 **仓库管理 \> 设置 \> 仓库 \> 仓库**。
1. 选择要启用质量管理的仓库。
1. 在 **仓库** 快速选项卡上，将 **启用仓库流程质检订单** 选项设置为 _是_。 （请注意，仅对于使用仓库管理流程的仓库，可以将此选项设置为 _是_。）

将 **启用仓库流程质检订单** 选项设置为 _是_ 时，质量关联设置将控制所选仓库是否实际应用 _仓库流程质量管理_ 功能。 您可以随时将选项的设置更改为 _否_。 在这种情况下，无论质量关联设置如何，仓库都将不再应用此功能。

## <a name="quality-control"></a>质量控制

_仓库流程质量管理_ 功能控制质量关联和物料抽样的几个关键设置。

### <a name="quality-associations"></a>质量关联

每个[质量关联记录](enable-quality-management.md)定义测试组、可接受质量级别 (AQL) 和应用于生成的质检订单的抽样计划。 若要设置质量关联记录，请执行以下步骤。

1. 转到 **库存管理 \> 设置 \> 质量控制 \> 质量关联**。
1. 为您正在处理的物料或组或所有物料创建或选择质量关联条目。
1. 在 **条件** 快速选项卡上，将 **适用仓库类型** 字段设置为以下值之一：

    - **仅仓库流程质量管理** – 启用 _仓库流程质量管理_ 功能。 仅当引用类型为 *采购* 或 *生产* 时，才可以选择此值。
    - **所有** – 禁用 _仓库流程质量管理_ 功能。 对于 *采购* 和 *生产* 以外的所有引用类型，选择此值。

> [!NOTE]
> 仅当原始凭证行上的物料使用高级仓库管理流程，并且对于原始凭证行上的仓库，**启用仓库流程质检订单** 选项设置为 _是_ 时，_仓库流程质量管理_ 功能才有效。

当每个物料都被登记（或报告为已完工入库）时，系统将确定对其应用哪些质量关联。

启用 _仓库流程质量管理_ 功能后，逻辑上将适用的仓库类型插入质量关联搜索层次结构的第四个搜索组中。 下表提供了搜索层次结构的逻辑表示。

| 搜索组 | 说明 |
|---|---|
| 组 1 | 对于每个质量关联，请针对物料检查 **引用类型**、**事件类型** 和 **执行匹配** 值。 如果与原始凭证行匹配，请进入组 2。 |
| 组 2 | 对于每个质量关联，请针对物料检查 **物料代码** 值（_表_、_组_ 或 _所有_）。 _表_ 比 _组_ 更具体，而 _组_ 比 _所有_ 更具体。 如果有 _表_ 的匹配项（某个特定物料），请进入组 3。 如果 _表_ 没有匹配项，则搜索 _组_ 的匹配项。 如果 _组_ 没有匹配项，则 _所有_ 适用。 如果有匹配项，请进入组 3。 |
| 组 3 | 对于每个质量关联，请针对物料检查 **帐户代码** 和 **资源代码** 值。 所应用的逻辑类似于应用于 **物料代码** 值的逻辑。 |
| 组 4 | 对于每个质量关联，请针对物料检查 **适用仓库类型** 值（_仅仓库流程质量管理_ 或 _所有_）。 如果将原始凭证上的仓库的 **启用仓库流程质检订单** 选项设置为 _是_，并且原始凭证行上的物料设置为 _使用仓库管理流程_，则 _仅仓库流程质量管理_ 有匹配项的关联和 _所有_ 有匹配项的关联将可以并行应用（如果两者都存在）。 如果原始凭证行上仓库的 **启用仓库流程质检订单** 选项设置为 _否_，原始凭证行上的物料设置为 _使用仓库管理流程_，将仅可应用质量管理。 |

例如，您已经定义了一个仓库，其 **启用仓库流程质检订单** 选项设置为 _是_，并且您为 *采购* 引用类型定义了两个质量关联：所有物料一个，*登记* 事件类型一个。 两个质量关联之间的唯一区别是 **适用仓库类型** 值：一个质量关联设置为 _所有_，另一个设置为 _仅仓库流程质量管理_。 在这种情况下，两个质量关联同等具体，并且都适用。

质量关联的 **测试组** 字段的值也是一个因素。 此字段定义必须应用的测试过程。 如果两个关联的 **测试组** 值相同，则对于 **适用仓库类型** 值为 _仅仓库流程质量管理_ 的质量关联，将仅创建一个质检订单。 如果两个关联的 **测试组** 值不相同，则会创建两个质检订单。 第一个质检订单为 **适用仓库类型** 值为 _仅仓库流程质量管理_ 的质量关联创建。 第二个质检订单为 **适用仓库类型** 值为 _所有_ 的质量关联创建。

> [!NOTE]
> 当组 1 和 2 的质量关联条件相同且测试组相同时，_仅仓库流程质量管理_ 值被视为比 _所有_ 更具体。 仅当测试组不同时，才会创建两个质检订单。

#### <a name="reference-types"></a>参考类型

当 **引用类型** 值为 _采购_，并且 **适用仓库类型** 值为 _仅仓库流程质量管理_ 时，**流程** 快速选项卡上的 **事件类型** 字段必须设置为 _登记_。 当您使用 _仓库流程质量管理_ 功能时，_登记_ 是 _采购_ 引用类型唯一的支持事件类型。

#### <a name="quality-processing-policy"></a>质量处理政策

_仓库流程质量管理_ 功能支持工作仅基于物料抽样创建。 因此，它允许轻型流程。 创建工作的库存取决于与质量关联相关联的物料抽样。 使用轻型流程时，在工作人员将数量放入质量控制位置后，如果需要质检订单，质量部门可以手动创建质检订单。

**质检订单流程** 快速选项卡上的 **质量处理策略** 字段，控制在创建工作以将物料移至质量控制位置时是否还创建质检订单。 此字段可以设置为 _创建质检订单_ 或 _仅创建工作_。 默认值为 _创建质检订单_。

> [!NOTE]
> 无论您是手动还是自动创建质检订单，当质检订单标记为已验证时，系统都会自动生成工作以将物料移出质量控制位置。

质检订单工作的创建与质量关联设置无关。 如果所存在工作模板的 **工作订单类型** 值为 *质检订单*，并且满足该工作模板的查询条件，则验证质检订单将触发创建质检订单工作。

#### <a name="referenced-item-sampling"></a>引用物料抽样

每个质量关联都必须引用物料抽样。 物料抽样定义将为质量控制发送的数量。 可以将其设置为仅应用于 **适用仓库类型** 值为 _仅仓库流程质量管理_ 的质量关联。 如果物料抽样的 **抽样范围** 值为 _负荷_ 或 _装运_，或者 **数量规范** 值为 _完全牌照_，则该物料抽样只能由 **适用仓库类型** 值为 _仅仓库流程质量管理_ 的质量关联引用。

如果您定义使用 _仅仓库流程质量管理_ 适用仓库类型的物料抽样，在尝试从不使用 _仓库流程质量管理_ 功能的质量关联引用它时，您将收到错误。

> [!NOTE]
> **适用仓库类型** 字段设置为 _仅仓库流程质量管理_ 的质量关联不支持使用完全锁定的物料抽样。

### <a name="item-sampling"></a>物料抽样

物料抽样控制多久发送一次物料以进行质量控制。 _仓库流程质量管理_ 功能引入了 _物料抽样范围_ 概念。 系统在评估是否以及应如何创建质检订单和/或质检物料抽样工作以及质检订单工作时使用物料抽样范围。

要设置物料抽样，请转到 **库存管理 \> 设置 \> 质量控制 \> 物料抽样**，然后将 **抽样范围** 字段设置为以下值之一：

- **订单** – 原始凭证行将是评估是否以及如何创建质检订单和/或质检物料抽样工作以及质检订单工作的基础。 此值是默认值，选择此值后，系统的工作方式与未启用 _仓库流程质量管理_ 功能时的工作方式相同。
- **负荷** – 负荷将用作评估是否以及如何创建质检订单和/或工作的基础。 仅在启用 _仓库流程质量管理_ 功能时，此值才可用。
- **装运** – 装运将用作评估是否以及如何创建质检订单和/或工作的基础。 仅在启用 _仓库流程质量管理_ 功能时，此值才可用。

> [!NOTE]
> 当 **抽样范围** 字段设置为 *负荷* 或 *装运* 时，将使用负荷实体和装运实体（如果可用）。 如果它们不可用，将使用订单实体。

_仓库流程质量管理_ 功能还为 **数量规范** 字段引入了 *完全牌照* 值。 此值支持基于牌照创建质检订单工作和质检物料抽样工作。 选择此值时，将发生以下更改：

- **流程** 快速选项卡上的 **休息按物料计算** 选项和 **每隔 n 个牌照** 字段将可用。
- **抽样数量** 快速选项卡上的 **值** 字段将不可用。
- **按更新数量**、**位置** 和 **牌照** 选项均设置为 *是*，并且设置无法更改。

**休息按物料计算** 选项控制牌照计数是按抽样范围中的每个物料还是跨所有物料评估。 产品变型被视为同一物料。 此选项还控制是否为每个物料重置牌照计数。

**每隔 n 个牌照** 字段的值控制针对已登记物料的数量创建质检订单的频率。 例如，值 *3* 将从第一个物料开始，每隔两个物料项发送一次进行质量控制。 值必须大于 0（零）。

当工作人员使用仓库应用接收物料时，系统将验证是否为每个传入物料设置了质量关联。 如果设置了质量关联，系统将使用为该质量关联配置的物料抽样记录，来确定它将如何创建质检订单、质检物料抽样工作和采购订单工作。

> [!NOTE]
> 当在 Web 客户端中完成收货登记时（通过使用小的登记页面或采购订单行的物料到达日记帐），无论设置如何，都不会创建质检物料抽样工作或采购订单工作。 而是，对于与质量关联匹配的物料，将仅使用引用的物料抽样来控制质检订单的创建。

## <a name="examples-of-automatic-generation-of-quality-orders"></a>自动生成质检订单示例

以下示例显示了当 **适用仓库类型** 字段设置为 _仅仓库流程质量管理_ 时，质量关联和关联物料抽样的设置如何影响质量订单的生成。

当 **数量规范** 值为 _完全牌照_ 时，**每隔 n 个牌照** 字段将控制为哪个牌照创建质检物料抽样工作。 第一个牌照始终要进行质量控制，然后此字段的值指定该牌照之后每隔 *n* 个牌照也应该进行。

以下示例的 **引用类型** 值为 _采购_，**事件类型** 值为 *登记*。

| 抽样范围 | 数量说明 | 按照更新的数量 | 按照存储维度 | 按物料的分解计数 | 每 n 个牌照 | 结果 |
|---|---|---|---|---|---|---|
| 订单 | 完全牌照 | 是 _（锁定/不可编辑）_ | <p>位置：是</p><p>牌照：是 _（锁定/不可编辑）_</p> | 无 | 3 | <p>**订单行数量：100 EA**</p><ol><li>在仓库应用中登记 20 EA、LP1 的收货<p>20 EA 的质检物料抽样工作</p><p>20 EA 的质检订单 1</p></li><li>在仓库应用中登记 20 EA、LP2 的收货<p>20 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 20 EA、LP3 的收货<p>20 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 20 EA、LP4 的收货<p>20 EA 的质检物料抽样工作</p></li><li>在仓库应用中登记 20 EA、LP5 的收货<p>20 EA 的采购订单工作（储存）</p></li></ol> |
| 订单 | 固定数量 = 1 | 是 | <p>位置：是</p><p>牌照：是</p> | 无 | 不适用 | <p>**订单行数量：100**</p><ol><li>在仓库应用中登记 20 EA、LP1 的收货<p>1 EA 的质检物料抽样工作</p><p>1 EA 的质检订单 1</p><p>19 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 20 EA、LP2 的收货<p>1 EA 的质检物料抽样工作</p><p>1 EA 的质检订单 1</p><p>19 的采购订单工作（储存）</p></li><li>在仓库应用中登记 20 EA、LP3 的收货<p>1 EA 的质检物料抽样工作</p><p>1 EA 的质检订单 1</p><p>19 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 20 EA、LP4 的收货<p>1 EA 的质检物料抽样工作</p><p>1 EA 的质检订单 1</p><p>19 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 20 EA、LP5 的收货<p>1 EA 的质检物料抽样工作</p><p>1 EA 的质检订单 1</p><p>19 EA 的采购订单工作（储存）</p></li></ol> |
| 订单 | 百分比 = 10 | 无 | <p>位置：否</p><p>牌照：否</p> | 无 | 不适用 | <p>**订单行数量：100 EA**</p><ol><li>在仓库应用中登记 50 EA、LP1 的收货<p>10 EA 的质检物料抽样工作</p><p>10 EA 的质检订单 1</p><p>40 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 50 EA、LP2 的收货<p>50 EA 的采购订单工作（储存）</p></li></ol> |
| 装入 | 百分比 = 5 | 是 _（锁定/不可编辑）_ | <p>位置：否</p><p>牌照：否</p> | 无 | 不适用 | <p>**订单行数量：500 EA**</p><p>**两个负荷：第一个负荷 200 EA，第二个负荷 300 EA**</p><ol><li>在仓库应用中登记 100 EA 的第一个负荷的收货<p>5 EA 的质检物料抽样工作</p><p>5 EA 的质检订单 1</p><p>95 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 100 EA 的第一个负荷的收货<p>5 EA 的质检物料抽样工作</p><p>5 EA 的质检订单 1</p><p>95 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 300 EA 的第二个负荷的收货<p>15 EA 的质检物料抽样工作</p><p>15 EA 的质检订单 1</p><p>285 EA 的采购订单工作（储存）</p></li></ol> |
| 订单 | 百分比 = 10 | 无 | <p>位置：是</p><p>牌照：是</p> | 无 | 不适用 | <p>**订单行数量：100**</p><ol><li>在仓库应用中登记 50 EA、LP1 的收货<p>5 EA 的质检物料抽样工作</p><p>5 EA 的质检订单 1</p><p>45 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 50 EA、LP2 的收货<p>5 EA 的质检物料抽样工作</p><p>5 EA 的质检订单 1</p><p>45 的采购订单工作（储存）</p></li></ol> |
| 装入 | 完全牌照 | 是 _（锁定/不可编辑）_ | <p>位置：是</p><p>牌照：是 _（锁定/不可编辑）_</p> | 无 | 3 | <p>**两种物料：**</p><ul><li>**物料 A 的订单行数量：120 EA（4 个托盘）**</li><li>**物料 B 的订单行数量：90 EA（3 个托盘）**</li></ul><p>**一个负荷，每个订单行两个负荷行**</p><ol><li>在仓库应用中登记物料 A、30 EA、LP1 的收货<p>30 EA 的质检物料抽样工作</p><p>30 EA 的质检订单 1</p></li><li>在仓库应用中登记物料 A、30 EA、LP2 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 A、30 EA、LP3 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 A、30 EA、LP4 的收货<p>30 EA 的质检物料抽样工作</p><p>30 EA 的质检订单 1</p></li><li>在仓库应用中登记物料 B、30 EA、LP5 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 B、30 EA、LP6 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 A、30 EA、LP7 的收货<p>30 EA 的质检物料抽样工作</p><p>30 EA 的质检订单 1</p></li></ol> |
| 装入 | 完全牌照 | 是 _（锁定/不可编辑）_ | <p>位置：是</p><p>牌照：是 _（锁定/不可编辑）_</p> | 是 | 3 | <p>**两种物料：**</p><ul><li>**物料 A 的订单行数量：120 EA（4 个托盘）**</li><li>**物料 B 的订单行数量：90 EA（3 个托盘）**</li></ul><p>**一个负荷，每个订单行两个负荷行**</p><ol><li>在仓库应用中登记物料 A、30 EA、LP1 的收货<p>30 EA 的质检物料抽样工作</p><p>30 EA 的质检订单 1</p></li><li>在仓库应用中登记物料 A、30 EA、LP2 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 A、30 EA、LP3 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 A、30 EA、LP4 的收货<p>30 EA 的质检物料抽样工作</p><p>30 EA 的质检订单 1</p></li><li>在仓库应用中登记物料 B、30 EA、LP5 的收货<p>30 EA 的质检物料抽样工作</p><p>30 EA 的质检订单 1</p></li><li>在仓库应用中登记物料 B、30 EA、LP6 的收货<p>30 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记物料 A、30 EA、LP7 的收货<p>30 EA 的采购订单工作（储存）</p></li></ol> |
| 装入 | 百分比 = 10 | 是 _（锁定/不可编辑）_ | <p>位置：否</p><p>牌照：否</p> | 无 | 不适用 | <p>**订单行数量：100 EA**</p><p>**未创建负荷。应用订单范围。**</p><ol><li>在仓库应用中登记 50 EA、LP1 的收货<p>5 EA 的质检物料抽样工作</p><p>5 EA 的质检订单 1</p><p>45 EA 的采购订单工作（储存）</p></li><li>在仓库应用中登记 50 EA、LP2 的收货<p>5 EA 的质检物料抽样工作</p><p>5 EA 的质检订单 1</p><p>45 EA 的采购订单工作（储存）</p></li></ol> |

当工作人员验证上表中显示的质检订单之一时，系统会自动生成质检订单工作，以将库存从质量控制位置移到 _质检订单_ 工作订单类型的位置指令中定义的位置。 您可以为此目的设置任何位置，如退货或存储位置，具体取决于质检订单的测试结果。 有关此设置的示例，请参阅本主题末尾的[示例方案](#example-scenario)。

您可以重新打开已经验证的质检订单，前提是与将库存从质量控制位置移出相关的质检订单工作的 **工作状态** 值为 *已关闭* 或 *进行中*。

## <a name="process-insights-when-multiple-quality-associations-coexist"></a>多个质量关联共存时的流程见解

可以为同一原始凭证行定义并应用多个质量关联，并且可以将其中一些质量关联的 **适用仓库类型** 字段设置为 _仅仓库流程质量管理_，另一些则设置为 _所有_。

在以下示例中，**引用类型** 值是 _采购_。

1. 第一个质量关联按以下方式设置：

    - **适用仓库类型：** *仅仓库流程质量管理*
    - **物料代码：** *A0001*
    - **帐户代码：** *所有*
    - **测试组：** *机箱*
    - **物料抽样：** *5 件*

1. 第二个质量关联按以下方式设置：

    - **适用仓库类型：** *所有*
    - **物料代码：** *所有*
    - **帐户代码：** *所有*
    - **测试组：** *机箱*
    - **物料抽样：** *1 件*

1. 第三个质量关联按以下方式设置：

    - **适用仓库类型：** *仅仓库流程质量管理*
    - **物料代码：** *所有*
    - **帐户代码** *104*
    - **测试组：** *阻抗*
    - **物料抽样：** *每隔两个牌照*（此设置意味着收到的第一个、第三个、第五个(以此类推)牌照将创建质检订单。）

1. 第四个质量关联按以下方式设置：

    - **适用仓库类型：** *所有*
    - **物料代码：** *所有*
    - **帐户代码：** *所有*
    - **测试组：** *阻抗*
    - **物料抽样：** *5 件*

1. 第五个质量关联按以下方式设置：

    - **适用仓库类型：** *所有*
    - **物料代码：** *所有*
    - **帐户代码：** *所有*
    - **测试组：** *锥体*
    - **物料抽样：** *10%*

现在为供应商 104 创建了数量为 10 的物料 A0001 的采购订单。 然后，使用仓库应用将数量为 10 的采购订单行登记为已在一个牌照上接收。 结果如下：

- *机箱* 测试组的第一个质量关联有一个质检订单。 数量为 5。 没有来自第二个质量关联的质检订单，因为相对于 *机箱* 测试组，第一个质量关联的条件更加具体。
- *阻抗* 测试组的第三个质量关联有一个质检订单。 数量为 10。 没有来自第四个质量关联的质检订单，因为相对于 *阻抗* 测试组，第一个质量关联的条件更加具体。
- *锥体* 测试组的第五个质量关联有一个质检订单。 数量为 1。

与为三个质量关联中的每个质量关联创建一个质检订单相关联，还创建了质检物料抽样工作。 登记数量仅为 10。 但是，由于物料抽样设置，为 *仅仓库流程质量管理* 适用仓库类型创建的质检订单数量的总和为 16，超过了实际登记数量 10。 因此，将不会为全部质检订单数量 (16) 创建工作，因为实际上只有 10 个可移到质量控制位置。 用于创建质检物料抽样工作的优先级遵循质检订单创建顺序：

- **第一个质检订单（数量 = 5）：** 为 5 个订单创建了质检物料抽样工作。 现在数量还剩 5（10 – 5）个可以在后来创建质检物料抽样工作。
- **第二个质检订单（数量 = 10）：** 为 5 个订单创建了质检物料抽样工作。 现在数量还剩 0（零）个可以在后来创建质检物料抽样工作。
- **第三个质检订单（数量 = 1）：** 未创建质检物料抽样工作。

作为创建质检订单流程的一部分，将创建数量为 10 的库存锁定。 此库存锁定针对三个质检订单中的每个质检订单引用。 质检订单数量的总和为 16。

验证质检订单后，系统将尝试为每个已验证的质检订单创建质检订单工作。 由于质检订单数量之和超过了实际锁定的数量，因此可以创建工作，但无法为全部质检订单数量创建质检订单工作，如此处所示。 （此示例继续上一个示例。）

1. **验证创建的第二个质检订单（数量 = 10）。为数量 4 创建了质检订单工作。**

    质检订单工作的创建是由库存锁定数量的变化触发的。 因为质检订单数量的总和为 16，所以验证数量为 10 会使要验证的剩余质检订单数量等于 6。 库存锁定数量从 10 个减少至 6 个。 减少的数量 4 分配给质检订单工作创建。

2. **验证创建的第一个质检订单（数量 = 5）。为数量 5 创建了质检订单工作。**

    质检订单工作的创建是由库存锁定数量的变化触发的。 因为质检订单数量的总和为 6，所以验证数量为 5 会使要验证的剩余质检订单数量等于 1。 库存锁定数量从 6 个减少至 1 个。 减少的数量 5 分配给质检订单工作创建。

3. **验证创建的第三个质检订单（数量 = 1）。为数量 1 创建了质检订单工作。**

    质检订单工作的创建是由库存锁定数量的变化触发的。 因为质检订单数量的总和为 1，所以验证数量为 1 会使要验证的剩余质检订单数量等于 0（零）。 库存锁定被删除（即，库存锁定数量从 1 减少到 0）。 减少的数量 1 分配给质检订单工作创建。

> [!NOTE]
> 质检订单工作的创建取决于对一个或多个质检订单引用的库存锁定数量。 如果质检订单数量的总和超过引用的库存锁定数量，则已验证质检订单的订单将确定质检订单工作的创建。

## <a name="canceling-quality-item-sampling-work"></a>取消质检物料抽样工作

您可以取消为质检物料抽样创建的工作。 若要控制取消此工作时发生什么，请按照下列步骤操作。

1. 转到 **仓库管理 \> 设置 \> 仓库管理参数**。
1. 在 **常规** 选项卡上，在 **工作** 快速选项卡上，将 **取消工作时取消收货登记** 选项设置为以下值之一：

    - **是** – 取消质检物料抽样工作时，将删除关联的质检订单，库存将取消登记。
    - **否** – 取消质检物料抽样工作时，不删除关联的质检订单，库存不取消登记。

## <a name="cross-docking"></a>越库配送

您可以使用创建物料抽样工作的质量关联设置。 但是，当越库配送与创建质检物料抽样工作的质量关联同时存在时，如果只有足够的数量满足越库配送，则仅创建物料抽样工作。 如果接收仓库的 **启用仓库流程质检订单** 选项设置为 _是_，并且质量关联的 **适用仓库类型** 字段设置为 _仅仓库流程质量管理_，质检物料抽样工作的创建将优先于越库配送工作的创建。 如果数量超过越库配送的要求，系统仍将仅创建物料抽样工作。

## <a name="destructive-testing"></a>破坏性测试

您可以定义一个执行破坏性测试的测试组。 在执行破坏性测试的情况下，假设是无论测试结果如何，作为测试的一部分，被测物料的数量都会被销毁。 _仓库流程质量管理_ 功能支持破坏性测试的方式，类似于未启用该功能时质量管理支持此测试的方式。 质量控制者必须先指定已销毁数量的领料位置，然后质检订单才可以验证。 您可以通过在操作窗格中选择 **库存\>领料**，从质检订单页面登记领料。 质检订单数量的领料登记后，可以完成验证。

## <a name="example-scenario"></a>示例场景

### <a name="prepare-the-scenario"></a>准备方案

要整个完成此方案，必须按照以下方式准备您的系统：

- 确保系统上已安装演示数据，然后选择 **USMF** 法人。
- 开启 [功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)中的 _仓库流程质量管理_ 功能。
- 通过执行以下步骤，将仓库 51 配置为使用 _仓库流程质量管理_ 功能：

    1. 转到 **仓库管理 \> 设置 \> 仓库 \> 仓库**。
    1. 选择“仓库 51”。
    1. 在 **仓库** 快速选项卡上，将 **启用仓库流程质量订单** 选项设置为 *是*。

### <a name="quality-in-setup--move-to-the-quality-control-location"></a>质量输入设置 – 移到质量控制位置

现在，您必须准备一个基本设置，来使您的系统为仓库 51 支持 _仓库流程质量管理_ 功能。 （演示数据定义质量管理位置，命名为 *QMS*。 在此方案中，该位置被多次引用。）您将准备以下元素，如本节的各子节所述：

- 工作类
- 工作模板
- 位置指令
- 物料抽样
- 质量关联
- 移动设备菜单项

#### <a name="work-class-for-quality-in"></a>质量输入工作类

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作类**。
1. 创建一个工作类，并设置以下值：

    - **工作类 ID：**_QualityIn_
    - **描述：**_质检物料抽样_
    - **工作订单类型：**_质检物料抽样_

#### <a name="work-template"></a>工作模板

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作模板**。
1. 将 **工作订单类型** 字段设置为 _质检物料抽样_。
1. 创建一个工作模板，并设置以下值：

    - **工作模板：**_51 质量_
    - **工作模板描述：**_51 质量_

1. 在工作模板中添加一行，并设置以下值：

    - **工作类型：**_领料_
    - **工作类 ID：**_QualityIn_

1. 在工作模板中添加第二行，并设置以下值：

    - **工作类型：**_放入_
    - **工作类 ID：**_QualityIn_

#### <a name="location-directive"></a>位置指令

1. 转到 **库存管理 \> 设置 \> 位置指令**。
1. 将 **工作订单类型** 字段设置为 _质检物料抽样_。
1. 创建一个位置指令，并设置以下值：

    - **名称：**_51 到质量_
    - **工作类型：**_放入_
    - **站点：** 5
    - **仓库：**_51_

1. 为位置指令添加一行，并设置以下值：

    - **起始数量：**_1_
    - **目标数量：**_1000000_

1. 创建一个位置指令操作，并设置以下值：

    - **名称：**_质量_

1. 对于新的位置指令操作，请选择 **编辑查询**，并指定一个具有以下值的 **范围** 记录：

    - **表：** *位置*
    - **字段：**_位置模板 ID_
    - **条件：** *QMS*

1. 选择 **确定** 保存查询，并保存新的位置指令。

接下来，您必须更改仓库 51 的现有采购订单位置指令的顺序。 演示数据包括两个位置指令，它们的 **工作订单类型** 值为 _采购_：一个名为 _51 QMS_，另一个名为 _51 PO Direct_。 为确保仓库 51 应用 *仓库流程质量管理* 功能，您必须确保不应用 _51 QMS_ 位置指令。 但是，不必删除该位置指令（因为将来可能要使用它），只需更改顺序即可。

1. 转到 **库存管理 \> 设置 \> 位置指令**。
1. qf **工作订单类型** 字段设置为 _采购订单_。
1. 在序列列表中，为 _51 PO Direct_ 位置指令选择序列号 5。
1. 将所选序列上移到序列号 4。
1. 确认 _51 QMS_ 位置指令的序列号现在至少为 5。

#### <a name="item-sampling"></a>物料抽样

_仓库流程质量管理_ 功能增加了一些新的物料抽样功能。 **抽样范围** 值现在可以是 _订单_、_装运_ 或 _负荷_，**抽样数量** 值现在可以是 _完整牌照_。

1. 转到 **库存管理 \> 设置 \> 质量控制 \> 物料抽样**。
1. 创建物料抽样记录，并设置以下值：

    - **物料抽样：**_第 3 个 LP_
    - **描述：**_每隔三个牌照_
    - **抽样范围：**_订单_

1. 在 **抽样数量** 快速选项卡上，将 **数量规范** 字段设置为 _完整牌照_。
1. 在 **流程** 快速选项卡上，将 **每隔 n 个牌照** 字段设置为 _3_。
1. 在 **每个存储维度** 部分，启用 **仓库** 和 **库存状态**。

#### <a name="quality-associations"></a>质量关联

创建将使用新物料抽样的质量关联。

1. 转到 **库存管理 \> 设置 \> 质量控制 \> 质量关联**。
1. 创建质量关联记录，并设置以下值：

    - **引用类型：**_采购_
    - **物料代码：**_表_
    - **物料：**_M9201_
    - **站点：**_5_

1. 在 **流程** 快速选项卡上，将 **事件类型** 字段设置为 *登记*。
1. 在 **条件** 快速选项卡上，将 **适用仓库类型** 字段设置为 *仅仓库流程质量管理*。
1. 在 **质检订单流程** 快速选项卡上，将 **质量处理策略** 字段设置为 _创建质检订单_。
1. 在 **规范** 快速选项卡上，右键单击 **测试组** 字段，然后选择 **查看详细信息** 打开 **测试组** 页面。
1. 在 **测试组** 页面，在上部网格的 **概览** 选项卡上，创建一个测试组，并设置以下值：

    - **测试组：**_QMS_
    - **描述：**_QMS 测试_
    - **可接受数量：**_100_
    - **物料抽样：**_第 3 个 LP_（选择）

1. 在下部网格的 **概览** 选项卡上，为一个测试添加一条记录，并设置以下值：

    - **序列：** *1*
    - **测试：** *机箱测量*

1. 在下部网格的 **测试** 选项卡上，设置以下值：

    - **测试变量：** *Pass/Fail*
    - **默认结果：** *Pass*

1. 保存新测试组，然后关闭 **测试组** 页面。
1. 返回 **质量关联** 页面，在 **测试组** 字段中，选择 **QMS**。
1. 保存该记录。

#### <a name="mobile-device-menu-items-for-quality-in"></a>质量输入的移动设备菜单项

要完成将商品移到质量控制位置的设置，必须从移动设备菜单项提供质检物料抽样工作。

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单项**。
1. 选择 **采购储存** 移动设备菜单项。
1. 在 **工作类** 快速选项卡上，添加 *质量输入* 工作类 ID。

#### <a name="summary-your-setup-to-move-goods-to-quality-control"></a>摘要：将商品移到质量控制的设置

现在，您已经定义了一个质量关联，其使用 *仓库流程质量管理* 功能来触发质检订单的创建。 您已经设置了仓库 51 的工作和位置数据，以确保在为物料 M9201 完成采购登记时创建特定工作。 此设置可确保每隔三个登记牌照之后的牌照移到质检位置（_QMS_），然后为牌照数量创建质检订单。 其他所有项将移到储存位置，而不是质量控制位置。

### <a name="process-quality-management-work"></a>处理质量管理工作

1. 转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 创建一个采购订单，并设置以下值：

    - **指定供应商帐户：** *104*
    - **仓库：** *51*

1. 添加一个采购订单行，并设置以下值：

    - **物料：** *M9201*
    - **数量：** *20*
    - **度量单位：** *ea*
    - **仓库：** *51*

1. 写下采购订单号，以便以后使用。
1. 转到运行仓库应用的移动设备或仿真器，使用 *51* 作为用户 ID、*1* 作为密码登录到仓库 51。
1. 转到 **收货 \> 采购接收**，然后输入以下值：

    - **PONum：** 您刚刚创建的采购订单的编号
    - **数量：** *5*
    - **单位：** *ea*

1. 继续为行接收，一次 *5 ea*，直到该行完全接收。 （总计将创建四个牌照。）
1. 注销仓库应用。
1. 在 Web 客户端中返回，转到 **采购 \> 采购订单 \> 所有采购订单**。
1. 查找并打开您的采购订单。
1. 在 **采购订单行** 部分，选择物料编号 *M9201* 的行，然后选择 **采购订单行 \> 工作详细信息**。
1. 请注意，创建的第二个和第三个工作标题是常规储存工作，而第一个和第四个工作标题是质检物料抽样工作。 此结果与物料抽样设置一致，配置为每隔三个牌照抽样一次。

#### <a name="move-to-the-quality-control-location"></a>移到质量控制位置

现在，您将牌照移到其指定位置。 第一和第四个牌照将到达质量控制位置，而第二和第三个牌照将直接进入存储。

1. 转到运行仓库应用的移动设备或仿真器，使用 *51* 作为用户 ID、*1* 作为密码登录到仓库 51。
1. 转到 **收货 \> 采购储存**，然后储存上一个过程中的每个牌照，直到结束所有工作。

#### <a name="summary-process-quality-management-work"></a>摘要：处理质量管理工作

现在，您已经通过将第一个和第四个牌照移到质量控制位置，对它们运行了质检物料抽样工作。 您还储存了第二个和第三个牌照。 下一步是进行质检订单测试和控制。

### <a name="quality-out-setup-move-from-the-quality-control-location-to-storage-or-return"></a>质量输出设置：从质量控制位置移到存储或退货

当工作人员报告质检订单结果时，系统会自动生成工作。

现在，您将继续进行工作类、工作模板和位置指令的必需基本设置，以启用仓库流程质量管理，以便可以创建所需工作来将质检订单数量从质量控制位置移到指定的仓货位置。

#### <a name="work-class-for-quality-out"></a>质量输出工作类

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作类**。
1. 创建一个工作类，并设置以下值：

    - **工作类 ID：** *QualityOut*
    - **描述：** *质量输出*
    - **工作单类型：** *质检订单*

#### <a name="work-templates"></a>工作模板

1. 转到 **仓库管理 \> 设置 \> 工作 \> 工作模板**。
1. 将 **工作订单类型** 更改为 *质检订单*。
1. 创建一个工作模板，并设置以下值：

    - **工作模板：** *51 质量输出*
    - **工作模板描述：** *51 质量输出*

1. 添加一行，并设置以下值：

    - **工作类型：** *领料*
    - **工作类 ID：** **QualityOut**

1. 添加第二行，并设置以下值：

    - **工作类型：** *放入*
    - **工作类 ID：** *QualityOut*

#### <a name="location-directives"></a>位置指令

1. 转到 **库存管理 \> 设置 \> 位置指令**。
1. 将 **工作订单类型** 更改为 *质检订单*。
1. 创建一个位置指令，并设置以下值：

    - **名称：** *51 通过*
    - **工作类型：** *放入*
    - **站点：** *5*
    - **仓库：** *51*

1. 在操作窗格上，选择 **编辑查询** 打开查询编辑器对话框。
1. 在 **范围** 选项卡上，设置以下值：

    - **表：** *质检订单*
    - **字段：** *状态*
    - **条件：** *通过*

1. 选择 **确定** 保存查询并关闭对话框。
1. 在 **行** 快速选项卡上，添加一行，并设置以下值：

    - **起始数量：** *1*
    - **目标数量：** *1000000*

1. 在 **位置指令操作** 快速选项卡上，添加一行，并设置以下值：

    - **名称：** *通过*

1. 在 **位置指令操作** 快速选项卡上，选择 **编辑查询** 打开查询编辑器对话框。
1. 在 **范围** 选项卡上，设置以下值：

    - **表：** *位置*
    - **字段：** *区域 ID*
    - **条件：** *散装*

1. 选择 **确定** 保存查询并关闭对话框。
1. 在操作窗格上，选择 **保存** 以保存新的位置指令。
1. 创建第二个位置指令，并设置以下值：

    - **名称：** *51 失败*
    - **工作类型：** *放入*
    - **站点：** *5*
    - **仓库：** *51*

1. 在操作窗格上，选择 **编辑查询** 打开查询编辑器对话框。
1. 在 **范围** 选项卡上，设置以下值：

    - **表：** *质检订单*
    - **字段：** *状态*
    - **条件：** *失败*

1. 选择 **确定** 保存查询并关闭对话框。
1. 在 **行** 快速选项卡上，添加一行，并设置以下值：

    - **起始数量：** *1*
    - **目标数量：** *1000000*

1. 在 **位置指令操作** 快速选项卡上，添加一行，并设置以下值：

    - **名称：** *失败*

1. 在 **位置指令操作** 快速选项卡上，选择 **编辑查询** 打开查询编辑器对话框。
1. 在 **范围** 选项卡上，设置以下值：

    - **表：** *位置*
    - **字段：** *区域 ID*
    - **条件：** *退货*

1. 选择 **确定** 保存查询并关闭对话框。
1. 在操作窗格上，选择 **保存** 以保存新的位置指令。

#### <a name="mobile-device-menu-items-for-quality-out"></a>质量输出的移动设备菜单项

1. 转到 **仓库管理 \> 设置 \> 移动设备 \> 移动设备菜单项**。
1. 选择 **QMS 储存** 移动设备菜单项。
1. 在 **工作类** 快速选项卡上，添加 *质量输出* 工作类 ID。

仓库工作人员现在可以使用 **QMS 储存** 菜单项来选取质检订单工作。 质量控制失败的商品可以放在退货位置，通过的商品可以放在散装 001 位置。

#### <a name="summary-your-setup-to-move-goods-from-quality-control"></a>摘要：将商品从质量控制移出的设置

您已经设置了仓库 51 的工作和位置数据，以确保在质检订单完成时自动创建工作。 此设置可确保将每个接受质量控制的牌照移到散装位置或退货位置。

### <a name="process-quality-management-work"></a>处理质量管理工作

1. 转到 **库存管理 \> 定期任务 \> 质量管理 \> 质检订单**。
1. 选择已登记数量的第一个质检订单。
1. 选择 **验证**。 测试的状态更新为 *失败*。
1. 转到 **仓库管理 \> 所有工作**。
1. 打开您刚刚创建的工作，并注意 **工作订单类型** 值为 *质检订单*。 此工作包括放置位置为 *退货*、状态为 *失败* 的行。 （如果质检订单的状态为 *通过*，放置位置将为 *散装*。）
1. 返回到 **库存管理 \> 定期任务 \> 质量管理 \> 质检订单**。
1. 选择已登记物料的第二个质检订单。
1. 选择下部网格上方的 **结果**。 将 **结果数量** 值更新为 *5*，并确认 **测试结果** 值已更改为复选标记。
1. 选择 **验证**，然后关闭页面。
1. 返回 **质检订单** 页面，选择 **验证**，然后进行验证。 状态将更新为 *通过*。

    > [!NOTE]
    > 验证事件触发质检订单工作的创建，以将数量从质量控制位置移到新位置。

1. 转到 **仓库管理 \> 所有工作**。
1. 选择刚刚创建的工作，并注意已创建第二个质检订单工作标题，其放置位置为 *散装-001*。
1. 转到运行仓库应用的移动设备或仿真器，使用 *51* 作为用户 ID、*1* 作为密码登录到仓库 51。
1. 转到 **质量 \> 从 QMS 储存**，处理与两个工作相关的两个牌照中的每个牌照，以使所有工作都结束。

> [!NOTE]
> 考虑将质量输出条目添加到活动代码为 *显示未结工作列表* 的移动设备菜单项中。 有关示例，请参阅演示数据中名为 **工作列表** 的移动设备菜单项。 首先将 *质检订单* 工作类添加到用户导向的菜单项中，因为要在工作列表中显示工作，此工作类是必需的。 然后将 *质检订单* 工作类添加到 **工作列表** 菜单项中。 有权访问工作列表的用户之后将能够选取和处理质检订单验证自动生成的工作。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]