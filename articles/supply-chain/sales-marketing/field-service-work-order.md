---
title: 将 Field Service 中的工作订单同步到 Supply Chain Management 中的销售订单
description: 本主题讨论用于将 Field Service 中的工作订单同步到 Supply Chain Management 中的销售订单的模板和基础任务。
author: ChristianRytt
manager: AnnBe
ms.date: 04/09/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: 2aa37ada18120e3b2a6e6b309c7d7b7ca9d9158f
ms.sourcegitcommit: 2460d0da812c45fce67a061386db52e0ae46b0f3
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/30/2019
ms.locfileid: "2249811"
---
# <a name="synchronize-work-orders-in-field-service-to-sales-orders-in-supply-chain-management"></a><span data-ttu-id="bc67f-103">将 Field Service 中的工作订单同步到 Supply Chain Management 中的销售订单</span><span class="sxs-lookup"><span data-stu-id="bc67f-103">Synchronize work orders in Field Service to sales orders in Supply Chain Management</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="bc67f-104">本主题讨论用于将 Dynamics 365 Field Service 中的工作订单同步到 Dynamics 365 Supply Chain Management 中的销售订单的模板和基础任务。</span><span class="sxs-lookup"><span data-stu-id="bc67f-104">This topic discusses the templates and underlying tasks that are used to synchronize work orders in Dynamics 365 Field Service to sales order in Dynamics 365 Supply Chain Management.</span></span>

<span data-ttu-id="bc67f-105">[![Supply Chain Management 与 Field Service 之间的业务流程同步](./media/field-service-integration.png)](./media/field-service-integration.png)</span><span class="sxs-lookup"><span data-stu-id="bc67f-105">[![Synchronization of business processes between Supply Chain Management and Field Service](./media/field-service-integration.png)](./media/field-service-integration.png)</span></span>


## <a name="templates-and-tasks"></a><span data-ttu-id="bc67f-106">模板和任务</span><span class="sxs-lookup"><span data-stu-id="bc67f-106">Templates and tasks</span></span>

<span data-ttu-id="bc67f-107">以下模板和基础任务用于运行 Field Service 中的工作订单到 Supply Chain Management 中的销售订单的同步。</span><span class="sxs-lookup"><span data-stu-id="bc67f-107">The following templates and underlying tasks are used to run the synchronization of work orders in Field Service to sales orders in Supply Chain Management.</span></span>

### <a name="names-of-the-templates-in-data-integration"></a><span data-ttu-id="bc67f-108">数据集成中的模板名称</span><span class="sxs-lookup"><span data-stu-id="bc67f-108">Names of the templates in Data integration</span></span>

<span data-ttu-id="bc67f-109">**工作订单到销售订单（Field Service 到 Supply Chain Management）** 模板用于运行同步。</span><span class="sxs-lookup"><span data-stu-id="bc67f-109">The **Work orders to Sales orders (Field Service to Supply Chain Management)** template is used to run synchronization.</span></span>

### <a name="names-of-the-tasks-in-the-data-integration-project"></a><span data-ttu-id="bc67f-110">数据集成项目中的任务名称</span><span class="sxs-lookup"><span data-stu-id="bc67f-110">Names of the tasks in the Data integration project</span></span>

- <span data-ttu-id="bc67f-111">WorkOrderHeader</span><span class="sxs-lookup"><span data-stu-id="bc67f-111">WorkOrderHeader</span></span>
- <span data-ttu-id="bc67f-112">WorkOrderServiceLineEstimate</span><span class="sxs-lookup"><span data-stu-id="bc67f-112">WorkOrderServiceLineEstimate</span></span>
- <span data-ttu-id="bc67f-113">WorkOrderServiceLineUsed</span><span class="sxs-lookup"><span data-stu-id="bc67f-113">WorkOrderServiceLineUsed</span></span>
- <span data-ttu-id="bc67f-114">WorkOrderProductLineEstimate</span><span class="sxs-lookup"><span data-stu-id="bc67f-114">WorkOrderProductLineEstimate</span></span>
- <span data-ttu-id="bc67f-115">WorkOrderProductLineUsed</span><span class="sxs-lookup"><span data-stu-id="bc67f-115">WorkOrderProductLineUsed</span></span>

<span data-ttu-id="bc67f-116">在发生销售订单标头和行同步前，需要执行以下同步任务：</span><span class="sxs-lookup"><span data-stu-id="bc67f-116">The following synchronization tasks are required before synchronization of sales order headers and lines can occur:</span></span>

- <span data-ttu-id="bc67f-117">Field Service 产品（Supply Chain Management 到 Field Service）</span><span class="sxs-lookup"><span data-stu-id="bc67f-117">Field Service Products (Supply Chain Management to Field Service)</span></span>
- <span data-ttu-id="bc67f-118">科目（Sales 到 Supply Chain Management）- 直接</span><span class="sxs-lookup"><span data-stu-id="bc67f-118">Accounts (Sales to Supply Chain Management) – Direct</span></span>

## <a name="entity-set"></a><span data-ttu-id="bc67f-119">实体集</span><span class="sxs-lookup"><span data-stu-id="bc67f-119">Entity set</span></span>

| <span data-ttu-id="bc67f-120">**Field Service**</span><span class="sxs-lookup"><span data-stu-id="bc67f-120">**Field Service**</span></span> | <span data-ttu-id="bc67f-121">**供应链管理**</span><span class="sxs-lookup"><span data-stu-id="bc67f-121">**Supply Chain Management**</span></span> |
|-------------------------|-------------------------|
| <span data-ttu-id="bc67f-122">msdyn_workorders</span><span class="sxs-lookup"><span data-stu-id="bc67f-122">msdyn_workorders</span></span>        | <span data-ttu-id="bc67f-123">CDS 销售订单标题</span><span class="sxs-lookup"><span data-stu-id="bc67f-123">CDS sales order headers</span></span> |
| <span data-ttu-id="bc67f-124">msdyn_workorderservices</span><span class="sxs-lookup"><span data-stu-id="bc67f-124">msdyn_workorderservices</span></span> | <span data-ttu-id="bc67f-125">CDS 销售订单行</span><span class="sxs-lookup"><span data-stu-id="bc67f-125">CDS sales order lines</span></span>   |
| <span data-ttu-id="bc67f-126">msdyn_workorderproducts</span><span class="sxs-lookup"><span data-stu-id="bc67f-126">msdyn_workorderproducts</span></span> | <span data-ttu-id="bc67f-127">CDS 销售订单行</span><span class="sxs-lookup"><span data-stu-id="bc67f-127">CDS sales order lines</span></span>   |

## <a name="entity-flow"></a><span data-ttu-id="bc67f-128">实体流</span><span class="sxs-lookup"><span data-stu-id="bc67f-128">Entity flow</span></span>

<span data-ttu-id="bc67f-129">工作订单在 Field Service 中创建。</span><span class="sxs-lookup"><span data-stu-id="bc67f-129">Work orders are created in Field Service.</span></span> <span data-ttu-id="bc67f-130">如果工作订单中仅包含外部维护的产品，并且**工作订单状态**值与**打开 - 未计划**和**已关闭 – 已取消**不同，则可通过 Common Data Service 数据集成项目将工作订单同步到 Supply Chain Management。</span><span class="sxs-lookup"><span data-stu-id="bc67f-130">If the work orders include only externally maintained products, and if the **Work order status** value differs from **Open-Unscheduled** and **Closed – Cancelled**, the work orders can be synchronized to Supply Chain Management via a Common Data Service Data integration project.</span></span> <span data-ttu-id="bc67f-131">对工作订单的更新将在 Supply Chain Management 中作为销售订单同步。</span><span class="sxs-lookup"><span data-stu-id="bc67f-131">Updates on the work orders will be synchronized as sales orders in Supply Chain Management.</span></span> <span data-ttu-id="bc67f-132">这些更新中包含有关原始类型和状态的信息。</span><span class="sxs-lookup"><span data-stu-id="bc67f-132">These updates include the information about the origin type and status.</span></span>

## <a name="estimated-versus-used"></a><span data-ttu-id="bc67f-133">估计与已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-133">Estimated versus Used</span></span>

<span data-ttu-id="bc67f-134">在 Field Service 中，工作订单内的产品和服务的数量和金额都有**估计**值和**已使用**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-134">In Field Service, products and services on work orders have both **Estimated** values and **Used** values for quantities and amounts.</span></span> <span data-ttu-id="bc67f-135">但是在 Supply Chain Management 中，销售订单没有相同的**估计**和**已使用**值概念。</span><span class="sxs-lookup"><span data-stu-id="bc67f-135">However, in Supply Chain Management, sales orders don't have the same concept of **Estimated** and **Used** values.</span></span> <span data-ttu-id="bc67f-136">若要在 Supply Chain Management 中为对销售订单使用预期数量的产品分配提供支持，但保留应消耗和开票的已使用数量，则需要通过两组任务同步工作订单中的产品和服务。</span><span class="sxs-lookup"><span data-stu-id="bc67f-136">To support product allocation that uses the expected quantity on the sales order in Supply Chain Management, but to keep the used quantity that should be consumed and invoiced, two sets of tasks synchronize the products and services on the work order.</span></span> <span data-ttu-id="bc67f-137">一组任务针对**估计**值，另一组任务针对**已使用**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-137">One set of tasks is for **Estimated** values, and the other set of tasks is for **Used** values.</span></span>

<span data-ttu-id="bc67f-138">此行为支持以下场景：估计值在 Supply Chain Management 中用于分配或保留，而已使用值则用于消耗和开票。</span><span class="sxs-lookup"><span data-stu-id="bc67f-138">This behavior enables scenarios where estimated values are used for allocation or reservation in Supply Chain Management, whereas used values are used for consumption and invoicing.</span></span>

### <a name="estimated"></a><span data-ttu-id="bc67f-139">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-139">Estimated</span></span>

<span data-ttu-id="bc67f-140">要同步产品行，则在**行状态**值为**估计**，**已分配**选项设置为**是**且**系统状态**值不是**已关闭 – 已过帐**时，使用**估计**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-140">For synchronization of product lines, the **Estimated** values are used when the **Line Status** value is **Estimated**, the **Allocated** option is set to **Yes**, and **System Status** value isn't **Closed – Posted**.</span></span>

<span data-ttu-id="bc67f-141">要同步服务行，则在**行状态**值为**估计**且**系统状态**值不是**已关闭 – 已过帐**时，使用**估计**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-141">For synchronization of service lines, the **Estimated** values are used when the **Line Status** value is **Estimated** and the **System Status** value isn't **Closed – Posted**.</span></span>

### <a name="used"></a><span data-ttu-id="bc67f-142">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-142">Used</span></span>

<span data-ttu-id="bc67f-143">**已使用**值用于消耗和开票。</span><span class="sxs-lookup"><span data-stu-id="bc67f-143">The **Used** values are used for consumption and invoicing.</span></span> <span data-ttu-id="bc67f-144">在这些情况下，将同步**已使用**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-144">In these cases, the **Used** values are synchronized.</span></span>

<span data-ttu-id="bc67f-145">下表概述各种产品行组合。</span><span class="sxs-lookup"><span data-stu-id="bc67f-145">The following table provides an overview of the various combinations for product lines.</span></span>

| <span data-ttu-id="bc67f-146">系统状态</span><span class="sxs-lookup"><span data-stu-id="bc67f-146">System Status</span></span> <br><span data-ttu-id="bc67f-147">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="bc67f-147">(Field Service)</span></span> | <span data-ttu-id="bc67f-148">行状态</span><span class="sxs-lookup"><span data-stu-id="bc67f-148">Line Status</span></span> <br><span data-ttu-id="bc67f-149">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="bc67f-149">(Field Service)</span></span> | <span data-ttu-id="bc67f-150">已分配</span><span class="sxs-lookup"><span data-stu-id="bc67f-150">Allocated</span></span> <br><span data-ttu-id="bc67f-151">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="bc67f-151">(Field Service)</span></span> |<span data-ttu-id="bc67f-152">同步的值</span><span class="sxs-lookup"><span data-stu-id="bc67f-152">Synchronized value</span></span> <br><span data-ttu-id="bc67f-153">(Supply Chain Management)</span><span class="sxs-lookup"><span data-stu-id="bc67f-153">(Supply Chain Management)</span></span> |
|--------------------|-------------|-----------|---------------------------------|
| <span data-ttu-id="bc67f-154">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-154">Open - Scheduled</span></span>   | <span data-ttu-id="bc67f-155">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-155">Estimated</span></span>   | <span data-ttu-id="bc67f-156">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-156">Yes</span></span>       | <span data-ttu-id="bc67f-157">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-157">Estimated</span></span>                       |
| <span data-ttu-id="bc67f-158">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-158">Open - Scheduled</span></span>   | <span data-ttu-id="bc67f-159">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-159">Estimated</span></span>   | <span data-ttu-id="bc67f-160">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-160">No</span></span>        | <span data-ttu-id="bc67f-161">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-161">Used</span></span>                            |
| <span data-ttu-id="bc67f-162">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-162">Open - Scheduled</span></span>   | <span data-ttu-id="bc67f-163">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-163">Used</span></span>        | <span data-ttu-id="bc67f-164">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-164">Yes</span></span>       | <span data-ttu-id="bc67f-165">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-165">Used</span></span>                            |
| <span data-ttu-id="bc67f-166">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-166">Open - Scheduled</span></span>   | <span data-ttu-id="bc67f-167">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-167">Used</span></span>        | <span data-ttu-id="bc67f-168">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-168">No</span></span>        | <span data-ttu-id="bc67f-169">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-169">Used</span></span>                            |
| <span data-ttu-id="bc67f-170">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-170">Open - In Progress</span></span> | <span data-ttu-id="bc67f-171">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-171">Estimated</span></span>   | <span data-ttu-id="bc67f-172">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-172">Yes</span></span>       | <span data-ttu-id="bc67f-173">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-173">Estimated</span></span>                       |
| <span data-ttu-id="bc67f-174">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-174">Open - In Progress</span></span> | <span data-ttu-id="bc67f-175">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-175">Estimated</span></span>   | <span data-ttu-id="bc67f-176">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-176">No</span></span>        | <span data-ttu-id="bc67f-177">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-177">Used</span></span>                            |
| <span data-ttu-id="bc67f-178">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-178">Open - In Progress</span></span> | <span data-ttu-id="bc67f-179">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-179">Used</span></span>        | <span data-ttu-id="bc67f-180">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-180">Yes</span></span>       | <span data-ttu-id="bc67f-181">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-181">Used</span></span>                            |
| <span data-ttu-id="bc67f-182">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-182">Open - In Progress</span></span> | <span data-ttu-id="bc67f-183">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-183">Used</span></span>        | <span data-ttu-id="bc67f-184">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-184">No</span></span>        | <span data-ttu-id="bc67f-185">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-185">Used</span></span>                            |
| <span data-ttu-id="bc67f-186">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-186">Open - Completed</span></span>   | <span data-ttu-id="bc67f-187">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-187">Estimated</span></span>   | <span data-ttu-id="bc67f-188">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-188">Yes</span></span>       | <span data-ttu-id="bc67f-189">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-189">Estimated</span></span>                       |
| <span data-ttu-id="bc67f-190">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-190">Open - Completed</span></span>   | <span data-ttu-id="bc67f-191">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-191">Estimated</span></span>   | <span data-ttu-id="bc67f-192">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-192">No</span></span>        | <span data-ttu-id="bc67f-193">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-193">Used</span></span>                            |
| <span data-ttu-id="bc67f-194">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-194">Open - Completed</span></span>   | <span data-ttu-id="bc67f-195">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-195">Used</span></span>        | <span data-ttu-id="bc67f-196">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-196">Yes</span></span>       | <span data-ttu-id="bc67f-197">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-197">Used</span></span>                            |
| <span data-ttu-id="bc67f-198">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-198">Open - Completed</span></span>   | <span data-ttu-id="bc67f-199">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-199">Used</span></span>        | <span data-ttu-id="bc67f-200">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-200">No</span></span>        | <span data-ttu-id="bc67f-201">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-201">Used</span></span>                            |
| <span data-ttu-id="bc67f-202">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-202">Closed - Posted</span></span>    | <span data-ttu-id="bc67f-203">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-203">Estimated</span></span>   | <span data-ttu-id="bc67f-204">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-204">Yes</span></span>       | <span data-ttu-id="bc67f-205">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-205">Used</span></span>                            |
| <span data-ttu-id="bc67f-206">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-206">Closed - Posted</span></span>    | <span data-ttu-id="bc67f-207">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-207">Estimated</span></span>   | <span data-ttu-id="bc67f-208">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-208">No</span></span>        | <span data-ttu-id="bc67f-209">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-209">Used</span></span>                            |
| <span data-ttu-id="bc67f-210">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-210">Closed - Posted</span></span>    | <span data-ttu-id="bc67f-211">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-211">Used</span></span>        | <span data-ttu-id="bc67f-212">是</span><span class="sxs-lookup"><span data-stu-id="bc67f-212">Yes</span></span>       | <span data-ttu-id="bc67f-213">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-213">Used</span></span>                            |
| <span data-ttu-id="bc67f-214">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-214">Closed - Posted</span></span>    | <span data-ttu-id="bc67f-215">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-215">Used</span></span>        | <span data-ttu-id="bc67f-216">无</span><span class="sxs-lookup"><span data-stu-id="bc67f-216">No</span></span>        | <span data-ttu-id="bc67f-217">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-217">Used</span></span>                            |

<span data-ttu-id="bc67f-218">下表概述各种服务行组合。</span><span class="sxs-lookup"><span data-stu-id="bc67f-218">The following table provides an overview of the various combinations for service lines.</span></span>

| <span data-ttu-id="bc67f-219">系统状态</span><span class="sxs-lookup"><span data-stu-id="bc67f-219">System Status</span></span> <br><span data-ttu-id="bc67f-220">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="bc67f-220">(Field Service)</span></span> | <span data-ttu-id="bc67f-221">行状态</span><span class="sxs-lookup"><span data-stu-id="bc67f-221">Line Status</span></span> <br><span data-ttu-id="bc67f-222">(Field Service)</span><span class="sxs-lookup"><span data-stu-id="bc67f-222">(Field Service)</span></span> | <span data-ttu-id="bc67f-223">同步的值</span><span class="sxs-lookup"><span data-stu-id="bc67f-223">Synchronized value</span></span> <br><span data-ttu-id="bc67f-224">(Supply Chain Management)</span><span class="sxs-lookup"><span data-stu-id="bc67f-224">(Supply Chain Management)</span></span> |
|--------------------|-------------|-----------|
| <span data-ttu-id="bc67f-225">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-225">Open - Scheduled</span></span>   | <span data-ttu-id="bc67f-226">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-226">Estimated</span></span>   | <span data-ttu-id="bc67f-227">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-227">Estimated</span></span> |
| <span data-ttu-id="bc67f-228">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-228">Open - Scheduled</span></span>   | <span data-ttu-id="bc67f-229">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-229">Used</span></span>        | <span data-ttu-id="bc67f-230">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-230">Used</span></span>      |
| <span data-ttu-id="bc67f-231">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-231">Open - In Progress</span></span> | <span data-ttu-id="bc67f-232">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-232">Estimated</span></span>   | <span data-ttu-id="bc67f-233">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-233">Estimated</span></span> |
| <span data-ttu-id="bc67f-234">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-234">Open - In Progress</span></span> | <span data-ttu-id="bc67f-235">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-235">Used</span></span>        | <span data-ttu-id="bc67f-236">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-236">Used</span></span>      |
| <span data-ttu-id="bc67f-237">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-237">Open - Completed</span></span>   | <span data-ttu-id="bc67f-238">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-238">Estimated</span></span>   | <span data-ttu-id="bc67f-239">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-239">Estimated</span></span> |
| <span data-ttu-id="bc67f-240">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-240">Open - Completed</span></span>   | <span data-ttu-id="bc67f-241">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-241">Used</span></span>        | <span data-ttu-id="bc67f-242">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-242">Used</span></span>      |
| <span data-ttu-id="bc67f-243">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-243">Closed - Posted</span></span>    | <span data-ttu-id="bc67f-244">估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-244">Estimated</span></span>   | <span data-ttu-id="bc67f-245">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-245">Used</span></span>      |
| <span data-ttu-id="bc67f-246">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-246">Closed - Posted</span></span>    | <span data-ttu-id="bc67f-247">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-247">Used</span></span>        | <span data-ttu-id="bc67f-248">已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-248">Used</span></span>      |

<span data-ttu-id="bc67f-249">可通过两组任务管理产品行和服务行的**估计**值与**已使用**值同步。</span><span class="sxs-lookup"><span data-stu-id="bc67f-249">Synchronization of **Estimated** values versus **Used** values is managed through the two sets of tasks for product lines and service lines.</span></span> <span data-ttu-id="bc67f-250">预定义的筛选器将触发正确的任务，而基础映射则帮助确保同步正确的**预期**值与**已使用**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-250">Predefined filters trigger the correct task, and the underlying mapping helps guarantee that the correct values for **Expected** versus **Used** are synchronized.</span></span>

### <a name="example"></a><span data-ttu-id="bc67f-251">示例</span><span class="sxs-lookup"><span data-stu-id="bc67f-251">Example</span></span>

1. <span data-ttu-id="bc67f-252">在 Field Service 中创建并计划工作订单。</span><span class="sxs-lookup"><span data-stu-id="bc67f-252">A work order is created and scheduled in Field Service.</span></span>

    <span data-ttu-id="bc67f-253">**系统状态**值为**打开 – 已计划**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-253">The **System Status** value is **Open – Scheduled**.</span></span>

    - <span data-ttu-id="bc67f-254">**产品行：** 估计数量 = 5ea，已使用数量 = 0ea，行状态 = 估计，已分配 = 否</span><span class="sxs-lookup"><span data-stu-id="bc67f-254">**Product line:** Estimated Qty = 5ea, Used Qty = 0ea, Line Status = Estimated, Allocated = No</span></span>
    - <span data-ttu-id="bc67f-255">**服务行：** 估计数量 = 2h，已使用数量 = 0h，行状态 = 估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-255">**Service line:** Estimated Qty = 2h, Used Qty = 0h, Line Status = Estimated</span></span>

    <span data-ttu-id="bc67f-256">在此示例中，将把产品的**已使用数量**值 **0**（零）和服务的**估计数量**值 **2h** 同步到 Supply Chain Management。</span><span class="sxs-lookup"><span data-stu-id="bc67f-256">In this example, the product's **Used Qty** value of **0** (zero) and the service's **Estimated Qty** value of **2h** are synchronized to Supply Chain Management.</span></span>

2. <span data-ttu-id="bc67f-257">将在 Field Service 中分配产品。</span><span class="sxs-lookup"><span data-stu-id="bc67f-257">Products are allocated in Field Service.</span></span>

    <span data-ttu-id="bc67f-258">**系统状态**值为**打开 – 已计划**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-258">The **System Status** value is **Open – Scheduled**.</span></span>

    - <span data-ttu-id="bc67f-259">**产品行：** 估计数量 = 5ea，已使用数量 = 0ea，行状态 = 估计，已分配 = 是</span><span class="sxs-lookup"><span data-stu-id="bc67f-259">**Product line:** Estimated Qty = 5ea, Used Qty = 0ea, Line Status = Estimated, Allocated = Yes</span></span>
    - <span data-ttu-id="bc67f-260">**服务行：** 估计数量 = 2h，已使用数量 = 0h，行状态 = 估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-260">**Service line:** Estimated Qty = 2h, Used Qty = 0h, Line Status = Estimated</span></span>

    <span data-ttu-id="bc67f-261">在此示例中，将把产品的**估计数量**值 **5ea** 和服务的**估计数量**值 **2h** 同步到 Supply Chain Management。</span><span class="sxs-lookup"><span data-stu-id="bc67f-261">In this example, the product's **Estimated Qty** value of **5ea** and the service's **Estimated Qty** value of **2h** are synchronized to Supply Chain Management.</span></span>

3. <span data-ttu-id="bc67f-262">服务技术人员开始处理工作订单，并登记材料用量 6。</span><span class="sxs-lookup"><span data-stu-id="bc67f-262">The service technician starts to work on the work order and registers material usage of 6.</span></span>

    <span data-ttu-id="bc67f-263">**系统状态**值为**打开 – 正在进行**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-263">The **System Status** value is **Open – In Progress**.</span></span>

    - <span data-ttu-id="bc67f-264">**产品行：** 估计数量 = 5ea，已使用数量 = 6ea，行状态 = 已使用，已分配 = 是</span><span class="sxs-lookup"><span data-stu-id="bc67f-264">**Product line:** Estimated Qty = 5ea, Used Qty = 6ea, Line Status = Used, Allocated = Yes</span></span>
    - <span data-ttu-id="bc67f-265">**服务行：** 估计数量 = 2h，已使用数量 = 0h，行状态 = 估计</span><span class="sxs-lookup"><span data-stu-id="bc67f-265">**Service line:** Estimated Qty = 2h, Used Qty = 0h, Line Status = Estimated</span></span>

    <span data-ttu-id="bc67f-266">在此示例中，将把产品的**已使用数量**值 **6**和服务的**估计数量**值 **2h** 同步到 Supply Chain Management。</span><span class="sxs-lookup"><span data-stu-id="bc67f-266">In this example, the product's **Used Qty** value of **6** and the service's **Estimated Qty** value of **2h** are synchronized to Supply Chain Management.</span></span>

4. <span data-ttu-id="bc67f-267">服务技术人员将完成工作订单，并登记1.5 小时的已使用时间 。</span><span class="sxs-lookup"><span data-stu-id="bc67f-267">The service technician completes the work order and registers used time of 1.5 hours.</span></span>

    <span data-ttu-id="bc67f-268">**系统状态**值为**打开 – 已完成**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-268">The **System Status** value is **Open – Completed**.</span></span>

    - <span data-ttu-id="bc67f-269">**产品行：** 估计数量 = 5ea，已使用数量 = 6ea，行状态 = 已使用，已分配 = 是</span><span class="sxs-lookup"><span data-stu-id="bc67f-269">**Product line:** Estimated Qty = 5ea, Used Qty = 6ea, Line Status = Used, Allocated = Yes</span></span>
    - <span data-ttu-id="bc67f-270">**服务行：** 估计数量 = 2h，已使用数量 = 1.5h，行状态 = 已使用</span><span class="sxs-lookup"><span data-stu-id="bc67f-270">**Service line:** Estimated Qty = 2h, Used Qty = 1.5h, Line Status = Used</span></span>

    <span data-ttu-id="bc67f-271">在此示例中，将把产品的**已使用数量**值 **6** 和服务的**已使用数量**值 **1.5h** 同步到 Supply Chain Management。</span><span class="sxs-lookup"><span data-stu-id="bc67f-271">In this example, the product's **Used Qty** value of **6** and the service's **Used Qty** of **1.5h** are synchronized to Supply Chain Management.</span></span>

## <a name="sales-order-origin-and-status"></a><span data-ttu-id="bc67f-272">销售订单来源和状态</span><span class="sxs-lookup"><span data-stu-id="bc67f-272">Sales order origin and status</span></span>

### <a name="sales-origin"></a><span data-ttu-id="bc67f-273">销售订单来源</span><span class="sxs-lookup"><span data-stu-id="bc67f-273">Sales origin</span></span>

<span data-ttu-id="bc67f-274">要跟踪源自工作订单的销售订单，可创建销售订单来源，其中的**来源类型分配**选项设置为**是**，**销售订单来源类型**字段设置为**工作订单集成**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-274">To keep track of sales orders that originate from work orders, you can create a sales origin where the **Origin type assignment** option is set to **Yes** and the **Sales origin type** field is set to **Work order integration**.</span></span>

<span data-ttu-id="bc67f-275">默认情况下，映射为通过工作订单创建的所有销售订单选择**工作订单集成**销售订单来源类型的销售订单来源。</span><span class="sxs-lookup"><span data-stu-id="bc67f-275">By default, the mapping selects the sales origin for the **Work order integration** sales origin type for all sales orders that are created from work orders.</span></span> <span data-ttu-id="bc67f-276">在 Supply Chain Management 中处理销售订单时，此行为可能非常有用。</span><span class="sxs-lookup"><span data-stu-id="bc67f-276">This behavior can be useful when you work with the sales order in Supply Chain Management.</span></span> <span data-ttu-id="bc67f-277">必须确保不将源自工作订单的销售订单作为工作订单同步回 Field Service。</span><span class="sxs-lookup"><span data-stu-id="bc67f-277">You must make sure that sales orders that originate from work orders aren't synchronized back to Field Service as work orders.</span></span>

<span data-ttu-id="bc67f-278">有关如何在 Supply Chain Management 中创建正确的销售订单来源设置的详细信息，请参阅本主题中的“先决条件和映射设置”部分。</span><span class="sxs-lookup"><span data-stu-id="bc67f-278">For details about how to create the correct sales origin setup in Supply Chain Management, see the "Preconditions and mapping setup" section of this topic.</span></span>

### <a name="status"></a><span data-ttu-id="bc67f-279">状态</span><span class="sxs-lookup"><span data-stu-id="bc67f-279">Status</span></span>

<span data-ttu-id="bc67f-280">如果销售订单源自工作订单，则销售订单头的**设置**选项卡上将显示**外部工作订单状态**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-280">When the sales order originates from a work order, the **External work order status** field appears on the **Setup** tab on the sales order header.</span></span> <span data-ttu-id="bc67f-281">此字段显示 Field Service 中的工作订单的系统状态，帮助跟踪 Supply Chain Management 中销售订单的同步后工作订单状态。</span><span class="sxs-lookup"><span data-stu-id="bc67f-281">This field shows the system status from the work order in Field Service, to help track the synchronized work order status of sales orders in the Supply Chain Management.</span></span> <span data-ttu-id="bc67f-282">此字段还帮助用户确定应何时为销售订单发货或开票。</span><span class="sxs-lookup"><span data-stu-id="bc67f-282">This field can also help the user determine when the sales order should be shipped or invoiced.</span></span>

<span data-ttu-id="bc67f-283">**外部工作订单状态**字段可具有以下值：</span><span class="sxs-lookup"><span data-stu-id="bc67f-283">The **External work order status** field can have the following values:</span></span>

- <span data-ttu-id="bc67f-284">打开 - 已计划</span><span class="sxs-lookup"><span data-stu-id="bc67f-284">Open - Scheduled</span></span>
- <span data-ttu-id="bc67f-285">打开 - 正在进行</span><span class="sxs-lookup"><span data-stu-id="bc67f-285">Open - In Progress</span></span>
- <span data-ttu-id="bc67f-286">打开 - 已完成</span><span class="sxs-lookup"><span data-stu-id="bc67f-286">Open - Completed</span></span>
- <span data-ttu-id="bc67f-287">已关闭 - 已过帐</span><span class="sxs-lookup"><span data-stu-id="bc67f-287">Closed - Posted</span></span>

## <a name="field-service-crm-solution"></a><span data-ttu-id="bc67f-288">Field Service CRM 解决方案</span><span class="sxs-lookup"><span data-stu-id="bc67f-288">Field Service CRM solution</span></span>

<span data-ttu-id="bc67f-289">若要为 Field Service 与 Supply Chain Management 之间的同步提供支持，需要 Field Service CRM 解决方案的更多功能。</span><span class="sxs-lookup"><span data-stu-id="bc67f-289">To support the integration between Field Service and Supply Chain Management, additional functionality from the Field Service CRM solution is required.</span></span> <span data-ttu-id="bc67f-290">此解决方案中包含以下更改。</span><span class="sxs-lookup"><span data-stu-id="bc67f-290">The solution includes the following changes.</span></span>

### <a name="work-order-entity"></a><span data-ttu-id="bc67f-291">工作订单实体</span><span class="sxs-lookup"><span data-stu-id="bc67f-291">Work Order entity</span></span>

<span data-ttu-id="bc67f-292">**仅具有外部维护的产品**字段已添加到**工作订单**实体并在页面中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-292">The **Has Externally Maintained Products Only** field has been added to the **Work Order** entity and appears on the page.</span></span> <span data-ttu-id="bc67f-293">用于持续跟踪工作订单是否完全由外部维护的产品构成。</span><span class="sxs-lookup"><span data-stu-id="bc67f-293">It's used to consistently track whether a work order consists entirely of externally maintained products.</span></span> <span data-ttu-id="bc67f-294">如果所有相关产品在 Supply Chain Management 中进行维护，则工作订单完全由外部维护的产品构成。</span><span class="sxs-lookup"><span data-stu-id="bc67f-294">A work order consists entirely of externally maintained products when all the related products are maintained in Supply Chain Management.</span></span> <span data-ttu-id="bc67f-295">此字段有助于保障用户不同步具有未知产品的工作订单。</span><span class="sxs-lookup"><span data-stu-id="bc67f-295">This field helps guarantee that users don't synchronize work orders that have products that are unknown.</span></span>

### <a name="work-order-product-entity"></a><span data-ttu-id="bc67f-296">工作订单产品实体</span><span class="sxs-lookup"><span data-stu-id="bc67f-296">Work Order Product entity</span></span>

- <span data-ttu-id="bc67f-297">**订单仅具有外部维护的产品**字段已添加到**工作订单产品**实体并在页面中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-297">The **Order Has Externally Maintained Products Only** field has been added to the **Work Order Product** entity and appears on the page.</span></span> <span data-ttu-id="bc67f-298">用于持续跟踪工作订单产品是否在 Supply Chain Management 中维护。</span><span class="sxs-lookup"><span data-stu-id="bc67f-298">It's used to consistently track whether the work order product is maintained in Supply Chain Management.</span></span> <span data-ttu-id="bc67f-299">此字段有助于保障用户不同步 Supply Chain Management 不认识的工作订单产品。</span><span class="sxs-lookup"><span data-stu-id="bc67f-299">This field helps guarantee that users don't synchronize work order products that are unknown to Supply Chain Management.</span></span>
- <span data-ttu-id="bc67f-300">**标头系统状态**字段已添加到**工作订单产品**实体并在页面中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-300">The **Header System Status** field has been added to the **Work Order Product** entity and appears on the page.</span></span> <span data-ttu-id="bc67f-301">用于持续跟踪工作订单的系统状态，并在将工作订单产品同步到 Supply Chain Management 时帮助确保正确筛选。</span><span class="sxs-lookup"><span data-stu-id="bc67f-301">It's used to consistently track the system status of the work order and helps guarantee correct filtering when work order products are synchronized to Supply Chain Management.</span></span> <span data-ttu-id="bc67f-302">如果为集成任务设置了筛选器，还将使用**标头系统状态**信息确定应该同步估计值还是已使用值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-302">When filters are set on the integration tasks, **Header System Status** information is also used to determine whether the estimated or used values should be synchronized.</span></span>
- <span data-ttu-id="bc67f-303">**开票单位金额**字段显示按所用实际单位开票的金额。</span><span class="sxs-lookup"><span data-stu-id="bc67f-303">The **Invoiced Unit Amount** field shows the amount that is invoiced per actual unit that is used.</span></span> <span data-ttu-id="bc67f-304">该值的计算方法是**总金额**值除以**实际数量**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-304">The value is calculated as the **Total Amount** value divided by the **Actual Quantity** value.</span></span> <span data-ttu-id="bc67f-305">此字段用于与不支持已使用数量和开单数量使用不同值的系统集成。</span><span class="sxs-lookup"><span data-stu-id="bc67f-305">The field is used for integration to systems that don't support different values for the used quantity and the billed quantity.</span></span> <span data-ttu-id="bc67f-306">用户界面 (UI) 中不显示此字段。</span><span class="sxs-lookup"><span data-stu-id="bc67f-306">This field doesn't appear in the user interface (UI).</span></span> 
- <span data-ttu-id="bc67f-307">**开票折扣金额**字段的计算方法是**折扣金额**值加上**开票单位金额**值计算的化整结果。</span><span class="sxs-lookup"><span data-stu-id="bc67f-307">The **Invoiced Discount Amount** field is calculated as the **Discount Amount** value plus the rounding from the calculation of the **Invoiced Unit Amount** value.</span></span> <span data-ttu-id="bc67f-308">此字段用于集成，不在 UI 中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-308">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="bc67f-309">**小数数量**字段将**数量**字段的值作为小数存储。</span><span class="sxs-lookup"><span data-stu-id="bc67f-309">The **Decimal Quantity** field stores the value from the **Quantity** field as a decimal number.</span></span> <span data-ttu-id="bc67f-310">此字段用于集成，不在 UI 中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-310">This field is used for integration and doesn't appear in the UI.</span></span> 
- <span data-ttu-id="bc67f-311">如果工作订单产品的**行状态**值从**已使用**更改为**估计**，**已使用**字段中的值将重置为 **0**（零）。</span><span class="sxs-lookup"><span data-stu-id="bc67f-311">The value in **Used** fields is reset to **0** (zero) if the **Line Status** value of the work order product is changed from **Used** to **Estimated**.</span></span> <span data-ttu-id="bc67f-312">此项更改有助于防止出现下面的情况：**行状态**值为**估计**且**已分配**选项设置为**否**时，使用误输入的已使用数量进行同步。</span><span class="sxs-lookup"><span data-stu-id="bc67f-312">This change helps prevent situations where a used quantity that is mistakenly entered is used for synchronization when the **Line Status** value is **Estimated** and the **Allocated** option is set to **No**.</span></span>

### <a name="work-order-service-entity"></a><span data-ttu-id="bc67f-313">工作订单服务实体</span><span class="sxs-lookup"><span data-stu-id="bc67f-313">Work Order Service entity</span></span>

- <span data-ttu-id="bc67f-314">**订单仅具有外部维护的产品**字段已添加到**工作订单服务**实体并在页面中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-314">The **Order Has Externally Maintained Products Only** field has been added to the **Work Order Service** entity and appears on the page.</span></span> <span data-ttu-id="bc67f-315">用于持续跟踪工作订单服务是否在 Supply Chain Management 中维护。</span><span class="sxs-lookup"><span data-stu-id="bc67f-315">It's used to consistently track whether the work order service is maintained in Supply Chain Management.</span></span> <span data-ttu-id="bc67f-316">此字段有助于保障用户不同步 Supply Chain Management 不认识的工作订单服务。</span><span class="sxs-lookup"><span data-stu-id="bc67f-316">This field helps guarantee that users don't synchronize work order services that are unknown to Supply Chain Management.</span></span>
- <span data-ttu-id="bc67f-317">**标头系统状态**字段已添加到**工作订单服务**实体并在页面中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-317">The **Header System Status** field has been added to the **Work Order Service** entity and appears on the page.</span></span> <span data-ttu-id="bc67f-318">用于持续跟踪工作订单的系统状态，并在将工作订单服务同步到 Supply Chain Management 时帮助确保正确筛选。</span><span class="sxs-lookup"><span data-stu-id="bc67f-318">It's used to consistently track the system status of the work order and helps guarantee correct filtering when work order services are synchronized to Supply Chain Management.</span></span> <span data-ttu-id="bc67f-319">如果为集成任务设置了筛选器，还将使用**标头系统状态**信息确定应该同步估计值还是已使用值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-319">When filters are set on the integration tasks, **Header System Status** information is also used to determine whether the estimated or used values should be synchronized.</span></span>
- <span data-ttu-id="bc67f-320">**持续时间(小时)** 字段中存储**持续时间**字段的值从分钟转换为小时后的值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-320">The **Duration In Hours** field stores the value from the **Duration** field after that value is converted from minutes to hours.</span></span> <span data-ttu-id="bc67f-321">此字段用于集成，不在 UI 中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-321">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="bc67f-322">**估计的持续时间(小时)** 字段中存储**估计的持续时间**字段的值从分钟转换为小时后的值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-322">The **Estimated Duration In Hours** field stores the value from the **Estimated Duration** field after that value is converted from minutes to hours.</span></span> <span data-ttu-id="bc67f-323">此字段用于集成，不在 UI 中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-323">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="bc67f-324">**开票单位金额**字段中存储按所用实际单位开票的金额。</span><span class="sxs-lookup"><span data-stu-id="bc67f-324">The **Invoiced Unit Amount** field stores the amount that is invoiced per actual unit that is used.</span></span> <span data-ttu-id="bc67f-325">该值的计算方法是**总金额**值除以**实际数量**值。</span><span class="sxs-lookup"><span data-stu-id="bc67f-325">The value is calculated as the **Total Amount** value divided by the **Actual Quantity** value.</span></span> <span data-ttu-id="bc67f-326">此字段用于与不支持已使用数量和开单数量使用不同值的系统集成。</span><span class="sxs-lookup"><span data-stu-id="bc67f-326">This field is used for integration to systems that don't support different values for the used quantity and the billed quantity.</span></span> <span data-ttu-id="bc67f-327">UI 中不显示此字段。</span><span class="sxs-lookup"><span data-stu-id="bc67f-327">The field doesn't appear in the UI.</span></span>
- <span data-ttu-id="bc67f-328">**开票折扣金额**字段的计算方法是**折扣金额**值加上**开票单位金额**值计算的化整结果。</span><span class="sxs-lookup"><span data-stu-id="bc67f-328">The **Invoiced Discount Amount** field is calculated as the **Discount Amount** value plus the rounding from the calculation of the **Invoiced Unit Amount** value.</span></span> <span data-ttu-id="bc67f-329">此字段用于集成，不在 UI 中显示。</span><span class="sxs-lookup"><span data-stu-id="bc67f-329">This field is used for integration and doesn't appear in the UI.</span></span>
- <span data-ttu-id="bc67f-330">**外部行订单**字段是计算出的负行订单编号，可在组合使用工作订单产品和服务行的外部系统中使用。</span><span class="sxs-lookup"><span data-stu-id="bc67f-330">The **External Line Order** field is a calculated negative line order number that can be used in external systems where work order product and service lines are combined.</span></span> <span data-ttu-id="bc67f-331">此字段让插入的工作订单产品可以有正行号，让工作订单服务可以有负行号。</span><span class="sxs-lookup"><span data-stu-id="bc67f-331">This field enables work order products that are inserted to have positive line numbers and work order services to have negative line numbers.</span></span> <span data-ttu-id="bc67f-332">此字段的值的计算方法是**行订单**值乘以 -1。</span><span class="sxs-lookup"><span data-stu-id="bc67f-332">The value of this this field is calculated as the **Line Order** value multiplied by -1.</span></span> <span data-ttu-id="bc67f-333">UI 中不显示此字段。</span><span class="sxs-lookup"><span data-stu-id="bc67f-333">This field doesn't appear in the UI.</span></span>
- <span data-ttu-id="bc67f-334">如果因为某个原因导致工作订单服务的**行状态**值从**已使用**更改为**估计**，**已使用**字段中的值将重置为 **0**（零）。</span><span class="sxs-lookup"><span data-stu-id="bc67f-334">The value in **Used** fields is reset to **0** (zero) if the **Line Status** value of the work order service is changed from **Used** to **Estimated** for some reason.</span></span> <span data-ttu-id="bc67f-335">此项更改有助于防止出现下面的情况：**行状态**值为**估计**且**标头系统状态**值为**已关闭 - 已过帐**时，使用误输入的已使用数量进行同步。</span><span class="sxs-lookup"><span data-stu-id="bc67f-335">This change helps prevent situations where a used quantity that is mistakenly entered is used for synchronization when the **Line Status** value is **Estimated** and the **Header System Status** value is **Closed – Posted**.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="bc67f-336">先决条件和映射设置</span><span class="sxs-lookup"><span data-stu-id="bc67f-336">Preconditions and mapping setup</span></span>

<span data-ttu-id="bc67f-337">在同步工作订单前，更新系统中的下列设置十分重要。</span><span class="sxs-lookup"><span data-stu-id="bc67f-337">Before you synchronize work orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-field-service"></a><span data-ttu-id="bc67f-338">Field Service 中的设置</span><span class="sxs-lookup"><span data-stu-id="bc67f-338">Setup in Field Service</span></span>

- <span data-ttu-id="bc67f-339">确保 Field Service 中用于工作订单的编号系列不与 Supply Chain Management 中用于销售订单的编号规则重合。</span><span class="sxs-lookup"><span data-stu-id="bc67f-339">Make sure that the number series that is used for work orders in Field Service doesn't overlap the number sequence that is used for sales orders in Supply Chain Management.</span></span> <span data-ttu-id="bc67f-340">否则，可能会在 Field Service 或 Supply Chain Management 中错误地更新现有销售订单。</span><span class="sxs-lookup"><span data-stu-id="bc67f-340">Otherwise, existing sales orders can be incorrectly updated in Field Service or Supply Chain Management.</span></span>
- <span data-ttu-id="bc67f-341">必须将**工作订单发票创建**字段设置为**从不**，因为将从 Supply Chain Management 执行开票。</span><span class="sxs-lookup"><span data-stu-id="bc67f-341">The **Work Order Invoice Creation** field must be set to **Never**, because the invoicing will be done from Supply Chain Management.</span></span> <span data-ttu-id="bc67f-342">转至 **Field Service** \> **设置** \> **管理** \> **Field Service 设置**，确保**工作订单发票创建**字段设置为**从不**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-342">Go to **Field Service** \> **Settings** \> **Administration** \> **Field Service Settings**, and make sure that the **Work Order Invoice Creation** field is set to **Never**.</span></span>

### <a name="setup-in-supply-chain-management"></a><span data-ttu-id="bc67f-343">Supply Chain Management 中的设置</span><span class="sxs-lookup"><span data-stu-id="bc67f-343">Setup in Supply Chain Management</span></span>

<span data-ttu-id="bc67f-344">工作订单集成需要您设置销售订单来源。</span><span class="sxs-lookup"><span data-stu-id="bc67f-344">Work order integration requires that you set up the sales origin.</span></span> <span data-ttu-id="bc67f-345">销售订单来源用于分辨 Supply Chain Management 中创建自 Field Service 中的工作订单的销售订单。</span><span class="sxs-lookup"><span data-stu-id="bc67f-345">The sales origin is used to distinguish sales orders in Supply Chain Management that were created from work orders in Field Service.</span></span> <span data-ttu-id="bc67f-346">如果销售订单的销售订单来源类型为**工作订单集成**，则销售订单头中将显示**外部工作订单状态**字段。</span><span class="sxs-lookup"><span data-stu-id="bc67f-346">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="bc67f-347">此外，销售订单来源有助于确保将销售订单从 Supply Chain Management 同步到 Field Service 期间过滤掉创建自 Field Service 中的工作订单的销售订单。</span><span class="sxs-lookup"><span data-stu-id="bc67f-347">Additionally, the sales origin helps guarantee that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Supply Chain Management to Field Service.</span></span>

1. <span data-ttu-id="bc67f-348">转到**销售和市场营销** \> **设置** \> **销售订单** \> **销售订单来源**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-348">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="bc67f-349">选择**新建**创建新的销售订单来源。</span><span class="sxs-lookup"><span data-stu-id="bc67f-349">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="bc67f-350">在**销售订单来源**字段中，输入销售订单来源的名称，如**WorkOrder**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-350">In the **Sales origin** field, enter a name for the sales origin, such as **WorkOrder**.</span></span>
4. <span data-ttu-id="bc67f-351">在**描述**字段中，输入描述，如 **Field Service 工作订单**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-351">In the **Description** field, enter a description, such as **Field Service Work Order**.</span></span>
5. <span data-ttu-id="bc67f-352">选中**来源类型分配**复选框。</span><span class="sxs-lookup"><span data-stu-id="bc67f-352">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="bc67f-353">将**销售订单来源类型**字段设置为**工作订单集成**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-353">Set the **Sales origin type** field to **Work order integration**.</span></span>
7. <span data-ttu-id="bc67f-354">选择**保存**。</span><span class="sxs-lookup"><span data-stu-id="bc67f-354">Select **Save**.</span></span>


### <a name="setup-in-data-integration"></a><span data-ttu-id="bc67f-355">数据集成中的设置</span><span class="sxs-lookup"><span data-stu-id="bc67f-355">Setup in Data integration</span></span>

<span data-ttu-id="bc67f-356">确保有 **msdyn_workorders** 的**集成键**</span><span class="sxs-lookup"><span data-stu-id="bc67f-356">Ensure the **Integration key** exist for **msdyn_workorders**</span></span>
1. <span data-ttu-id="bc67f-357">转至“数据集成”</span><span class="sxs-lookup"><span data-stu-id="bc67f-357">Go to Data Integration</span></span>
2. <span data-ttu-id="bc67f-358">选择**连接集** 选项卡</span><span class="sxs-lookup"><span data-stu-id="bc67f-358">Select **Connection Set** tab</span></span>
3. <span data-ttu-id="bc67f-359">选择用于工作订单同步的连接集</span><span class="sxs-lookup"><span data-stu-id="bc67f-359">Select the Connection set used for Work order synchronization</span></span>
4. <span data-ttu-id="bc67f-360">选择**集成键**选项卡</span><span class="sxs-lookup"><span data-stu-id="bc67f-360">Select **Integration key** tab</span></span>
5. <span data-ttu-id="bc67f-361">找到 msdyn_workorders 并检查是否添加了 **msdyn_name (Work Order Number)** 键。</span><span class="sxs-lookup"><span data-stu-id="bc67f-361">Find msdyn_workorders and check that the key **msdyn_name (Work Order Number)** is added.</span></span> <span data-ttu-id="bc67f-362">如果不显示，请通过单击页面顶部的**添加键**，然后单击**保存**添加。</span><span class="sxs-lookup"><span data-stu-id="bc67f-362">If it is not shown, add it by click **Add key** and click **Save** in the top of the page</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="bc67f-363">数据集成中的模板映射</span><span class="sxs-lookup"><span data-stu-id="bc67f-363">Template mapping in Data integration</span></span>

<span data-ttu-id="bc67f-364">下图显示了数据集成中的模板映射。</span><span class="sxs-lookup"><span data-stu-id="bc67f-364">The following illustrations show the template mapping in Data integration.</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderheader"></a><span data-ttu-id="bc67f-365">工作订单到销售订单（Field Service 到 Supply Chain Management）：WorkOrderHeader</span><span class="sxs-lookup"><span data-stu-id="bc67f-365">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderHeader</span></span>

<span data-ttu-id="bc67f-366">筛选器：(msdyn_systemstatus ne 690970005) 和 (msdyn_systemstatus ne 690970000) 与 (msdynce_hasexternallymaintainedproductsonly eq true)</span><span class="sxs-lookup"><span data-stu-id="bc67f-366">Filter: (msdyn_systemstatus ne 690970005) and (msdyn_systemstatus ne 690970000) and (msdynce_hasexternallymaintainedproductsonly eq true)</span></span>

<span data-ttu-id="bc67f-367">[![数据集成中的模板映射](./media/FSWorkOrder1.png )](./media/FSWorkOrder1.png)</span><span class="sxs-lookup"><span data-stu-id="bc67f-367">[![Template mapping in Data integration](./media/FSWorkOrder1.png )](./media/FSWorkOrder1.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderservicelineestimate"></a><span data-ttu-id="bc67f-368">工作订单到销售订单（Field Service 到 Supply Chain Management）：WorkOrderServiceLineEstimate</span><span class="sxs-lookup"><span data-stu-id="bc67f-368">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderServiceLineEstimate</span></span>

<span data-ttu-id="bc67f-369">筛选器：(msdynce_headersystemstatus ne 690970005) 和 (msdynce_headersystemstatus ne 690970000) 及 (msdynce_orderhasexternalmaintainedproductsonly eq true) 与 (msdyn_linestatus eq 690970000) 和 (msdynce_headersystemstatus ne 690970004)</span><span class="sxs-lookup"><span data-stu-id="bc67f-369">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and (msdyn_linestatus eq 690970000) and (msdynce_headersystemstatus ne 690970004)</span></span>

<span data-ttu-id="bc67f-370">[![数据集成中的模板映射](./media/FSWorkOrder2.png )](./media/FSWorkOrder2.png)</span><span class="sxs-lookup"><span data-stu-id="bc67f-370">[![Template mapping in Data integration](./media/FSWorkOrder2.png )](./media/FSWorkOrder2.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderservicelineused"></a><span data-ttu-id="bc67f-371">工作订单到销售订单（Field Service 到 Supply Chain Management）：WorkOrderServiceLineUsed</span><span class="sxs-lookup"><span data-stu-id="bc67f-371">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderServiceLineUsed</span></span>

<span data-ttu-id="bc67f-372">筛选器：(msdynce_headersystemstatus ne 690970005) 和 (msdynce_headersystemstatus ne 690970000) 及 (msdynce_orderhasexternalmaintainedproductsonly eq true) 与（(msdyn_linestatus eq 690970001) 或 (msdynce_headersystemstatus eq 690970004)）</span><span class="sxs-lookup"><span data-stu-id="bc67f-372">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and ((msdyn_linestatus eq 690970001) or (msdynce_headersystemstatus eq 690970004))</span></span>

<span data-ttu-id="bc67f-373">[![数据集成中的模板映射](./media/FSWorkOrder3.png )](./media/FSWorkOrder3.png)</span><span class="sxs-lookup"><span data-stu-id="bc67f-373">[![Template mapping in Data integration](./media/FSWorkOrder3.png )](./media/FSWorkOrder3.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderproductlineestimate"></a><span data-ttu-id="bc67f-374">工作订单到销售订单（Field Service 到 Supply Chain Management）：WorkOrderProductLineEstimate</span><span class="sxs-lookup"><span data-stu-id="bc67f-374">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderProductLineEstimate</span></span>

<span data-ttu-id="bc67f-375">筛选器：(msdynce_headersystemstatus ne 690970005) 和 (msdynce_headersystemstatus ne 690970000) 及 (msdynce_orderhasexternalmaintainedproductsonly eq true) 与 (msdyn_linestatus eq 690970000) 和 (msdynce_headersystemstatus ne 690970004) 及 (msdyn_allocated eq true)</span><span class="sxs-lookup"><span data-stu-id="bc67f-375">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and (msdyn_linestatus eq 690970000) and (msdynce_headersystemstatus ne 690970004) and (msdyn_allocated eq true)</span></span>

<span data-ttu-id="bc67f-376">[![数据集成中的模板映射](./media/FSWorkOrder4.png )](./media/FSWorkOrder4.png)</span><span class="sxs-lookup"><span data-stu-id="bc67f-376">[![Template mapping in Data integration](./media/FSWorkOrder4.png )](./media/FSWorkOrder4.png)</span></span>

### <a name="work-orders-to-sales-orders-field-service-to-supply-chain-management-workorderproductlineused"></a><span data-ttu-id="bc67f-377">工作订单到销售订单（Field Service 到 Supply Chain Management）：WorkOrderProductLineUsed</span><span class="sxs-lookup"><span data-stu-id="bc67f-377">Work orders to Sales orders (Field Service to Supply Chain Management): WorkOrderProductLineUsed</span></span>

<span data-ttu-id="bc67f-378">筛选器：(msdynce_headersystemstatus ne 690970005) 和 (msdynce_headersystemstatus ne 690970000) 及 (msdynce_orderhasexternalmaintainedproductsonly eq true) 和（(msdyn_linestatus eq 690970001) 或 (msdynce_headersystemstatus eq 690970004) 或 (msdyn_allocated ne true)）</span><span class="sxs-lookup"><span data-stu-id="bc67f-378">Filter: (msdynce_headersystemstatus ne 690970005) and (msdynce_headersystemstatus ne 690970000) and (msdynce_orderhasexternalmaintainedproductsonly eq true) and ((msdyn_linestatus eq 690970001) or (msdynce_headersystemstatus eq 690970004) or (msdyn_allocated ne true))</span></span>

<span data-ttu-id="bc67f-379">[![数据集成中的模板映射](./media/FSWorkOrder5.png )](./media/FSWorkOrder5.png)</span><span class="sxs-lookup"><span data-stu-id="bc67f-379">[![Template mapping in Data integration](./media/FSWorkOrder5.png )](./media/FSWorkOrder5.png)</span></span>
