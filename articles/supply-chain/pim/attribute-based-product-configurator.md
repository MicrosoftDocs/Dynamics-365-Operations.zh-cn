---
title: 基于约束的产品配置的基于属性的销售价
description: 本主题描述了如何使用基于组件和属性，而不是物理物料清单和工艺路线的销售价构建销售价模型。
author: sorenva
manager: tfehr
ms.date: 10/2/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: sorenand
ms.search.validFrom: 2020-08-17
ms.dyn365.ops.version: Release 10.0.15
ms.openlocfilehash: cba4b1eac33ae53e214297728c1cdf2710ebd9d9
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/15/2021
ms.locfileid: "5007908"
---
# <a name="attribute-based-sales-prices-for-constraint-based-product-configuration"></a>基于约束的产品配置的基于属性的销售价

本主题描述了如何使用基于组件和属性，而不是物理物料清单和工艺路线的销售价构建销售价模型。 您可以为每个产品配置模型构建多个销售价模型。

## <a name="set-relevant-product-information-management-parameters"></a>设置相关的产品信息管理参数

在开始构建价格模型之前，您必须定义一个默认货币，以供在构建销售价模型时使用。 您还可以选择是否附加一个 Microsoft Excel 文件，其中包含所有订单或报价行的价格明细。 价格明细使您能够与客户共享有关如何达成配置产品的特定销售价的详细信息。

若要设置默认货币：

1. 转到 **产品信息管理 \> 设置 \> 产品信息管理参数**。
1. 打开 **基于约束的产品配置模型** 选项卡。
1. 打开 **默认货币** 下拉列表，然后选择您的货币。

    ![为基于约束的产品配置设置默认货币](media/prod-config-currency.png "为基于约束的产品配置设置默认货币")

1. 如果您想附加一个包含所有订单或报价行的价格明细的 Excel 文件，请在 **价格模型** 部分中，将 **附加** 设置为 *是*。

## <a name="build-your-sales-price-models"></a><a name="build-price-model"></a>构建您的销售价模型

若要构建销售价模型：

1. 转到 **产品信息管理 \> 产品 \> 产品配置模型**。
1. 选择目标产品配置模型。
1. 在“操作”窗格上，打开 **模型** 选项卡，然后从 **设置** 组中，选择 **价格模型**。
1. **价格模型** 页面将打开。
1. 选择一个价格模型或向网格中添加一个新模型。
1. 选择 **编辑** 以打开所选模型的编辑页面，该页面将提供以下功能：
    - 表格的标题显示默认货币，您可以在价格设置中添加新货币。
    - 左侧窗格显示了产品模型的所有组件和用户要求。 产品模型树中的每个节点都可以具有一个基价表达式和可选数量的表达式规则。 表达式规则由条件和表达式组成，每个表达式规则都包含一个有助于控制产品价格的产品选项。
    - 当您构建条件和表达式时，可以使用与产品模型中的计算相同的运算符。 表达式编辑器还支持条件和表达式。
1. 在左列中选择一个节点，然后使用上一步中描述的功能为其建立定价规则（另请参阅此过程之后提供的示例）。 根据需要为每个节点重复此步骤。

下面的示例显示基价为 899.95 欧元的静态数字，可以根据客户选择的配置，通过以下五个表达式规则中的一个或多个对其进行修改：

- 对于白色机箱饰面，减去 59.95 欧元。
- 对于转角保护，增加 35.95 欧元。
- 对于正面金属格栅，增加 89.95 欧元。
- 对于红木机箱饰面，增加 119.95 欧元。
- 对于每单元扬声器高度，增加 12.95 欧元。

![价格模型示例](media/prod-config-rules-example.png "价格模型示例")

## <a name="add-support-for-multiple-currencies"></a>添加对多种货币的支持

当销售可配置产品时，系统检查是否已明确以客户的货币设置价格。 如果是，则使用显式值。 如果不是，系统将使用为销售公司建立的货币汇率，将默认货币值转换为客户的货币。

若要使用其他货币添加显式价格：

1. 打开价格模型的编辑页面，如[构建您的销售价模型](#build-price-model)中所述。
1. 选择价格模型标题中的 **添加** 按钮以打开 **货币** 下拉对话框，其中列出了可用的货币。
1. 在 **货币** 下拉对话框中选择要添加的货币，然后选择 **确定**。
1. 现在，**当前货币** 下拉列表中包括您刚刚添加的货币，以及之前可能已添加的任何其他货币。 选择您的新货币，并注意 **表达式规则** 部分中的网格现在包括两个表达式字段：
    - **表达式** - 显示用于使用当前在 **当前货币** 中选择的货币查找价格的表达式（或常数值）。
    - **默认表达式** - 显示用于使用当前的默认货币（显示在 **默认货币** 字段中）查找价格的表示式（或常数值）。

    > [!NOTE]
    > 表达式规则的 **条件** 字段“只适用于”默认货币，这意味着您无法修改其他货币的条件。 当选择默认货币以外的货币作为 **当前货币** 时，也无法添加新的表达式规则。
1. 针对当前货币，根据需要在 **表达式** 列中编辑值。

在下面的示例中，_欧元_ 是默认货币，_美元_ 已添加为其他货币。

![具有多种货币的模型示例](media/prod-config-rules-currency-example.png "具有多种货币的模型示例")

> [!NOTE]
> 您不能添加唯一用于非默认货币的表达式规则。 若要创建仅与默认货币以外的其他货币相关的表达式规则，请将默认货币的价格表达式设置为零。 然后，为非默认货币设置适当的表达式。

## <a name="test-your-price-model"></a>测试您的价格模型

若要测试销售价在配置会话中的工作方式，请打开价格模型的编辑页面（如 [构建您的销售价模型](#build-price-model)中所述），然后在“操作”窗格中选择 **测试**。 **测试产品模型** 对话框将打开，您可以在其中执行以下操作：

- 使用此处提供的配置设置选择产品选项，然后查看它们如何影响 **价格和装运日期** 中显示的值。
- 选择 **查看价格明细** 以下载一个 Excel 文档，该文档显示了有关如何计算价格的完整详细信息。

![测试您的产品模型](media/prod-config-test.png "测试您的产品模型")

下载的电子表格将每个有效价格元素的绝对值和贡献都显示为百分比。 如果在 **产品信息管理参数** 页面上设置 **附加** 价格模型选项，此 Excel 工作表将附加到订单或报价行。

![显示价格明细的 Excel 电子表格](media/prod-config-excel-example.png "显示价格明细的 Excel 电子表格")

## <a name="set-up-selection-criteria-for-price-models"></a>设置价格模型的选择标准

在价格模型完成设置后，当配置报价或订单时，必须建立至少一个选择标准以选择价格模型。 您可以通过设置一个或多个查询来实现此操作。 通过与匹配的销售价模型相结合，这些查询在针对特定客户、地区、期间和其他标准确定销售价时提供了极大的灵活性。

若要设置价格模型的选择标准：

1. 转到 **产品信息管理 \> 产品 \> 产品配置模型**。
1. 选择目标产品配置模型。
1. 在“操作”窗格上，打开 **模型** 选项卡，然后从 **设置** 组中，选择 **价格模型标准**。 **价格模型标准** 页面将打开。
1. 如果所需的查询行还不存在，请在“操作”窗格上选择 **新建**，将新行添加到网格并为其进行以下设置：
    - **名称** - 为此行输入名称。
    - **描述** - 简要描述查询及其用途。
    - **价格模型** - 选择一个将在触发时应用查询的[价格模型](#build-price-model)（从当前的配置模型中）。
    - **订单类型** - 选择将应用查询的订单类型。
    - **生效日期** - 指定将应用查询的第一天。
    - **到期日期** - 指定将应用查询的最后日期。

    ![价格模型条件](media/prod-config-price-model-criteria.png "价格模型条件")

1. 选择要定义的查询的行，然后在 **操作窗格** 上选择 **编辑**。 查询设计器对话框将打开。 它的工作方式与 Supply Chain Management 中的大多数查询设计器一样。 使用它来定义应用所选行的价格模型的条件。

1. 针对您需要的每个查询重复步骤 4-5。
    > [!TIP]
    > 您可以通过复制与需要添加的新行类似的现有行来节省时间。 若要实现此操作，请选择目标行，然后在“操作”窗格上选择 **重复**。

1. 完成设置条件后，请在 **价格模型标准** 列表中按正确顺序排列它们。 若要重新定位一个行，请选择该行，然后在“操作”窗格中选择 **向上** 或 **向下**。

    > [!IMPORTANT]
    > 在配置时，系统从列表顶部开始搜索，并使用与报价或订单行上的数据匹配的第一个查询。 因此，您必须将最具体的查询放在首位。 如果将常规查询放在列表的顶部，即使在列表的最下方可能有针对配置的确切客户或目标客户的查询，也将使用该查询。

## <a name="set-attribute-based-sales-prices-for-the-product-model-version"></a>为产品模型版本设置基于属性的销售价

最后一步是为产品模型版本指定基于属性的销售价。 若要实现此操作：

1. 转到 **产品信息管理 \> 产品 \> 产品配置模型**。
1. 选择目标产品配置模型。
1. 在“操作”窗格上，打开 **模型** 选项卡，然后从 **产品模型详细信息** 组中，选择 **版本**。
1. **版本** 页面将打开。 确保将 **定价方法** 设置为 **基于属性**。
    ![将定价方法设置为基于属性](media/prod-config-versions.png "将定价方法设置为基于属性")
