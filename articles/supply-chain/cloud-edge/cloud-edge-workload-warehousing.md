---
title: Cloud Scale Unit 和 Edge Scale Unit 的仓库管理工作负荷
description: 本主题提供有关使缩放单元能够从仓库管理工作负荷运行选定流程的功能的信息。
author: perlynne
ms.date: 09/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: PurchTable, SysSecRolesEditUsers, SysWorkloadDuplicateRecord
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: SCM
ms.author: perlynne
ms.search.validFrom: 2020-10-06
ms.dyn365.ops.version: 10.0.22
ms.openlocfilehash: 2c2d2604dc1948d067311a12d00422ef074ac61a
ms.sourcegitcommit: 42bd701179e664947b6eafcd1804c83a5e64abcb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/13/2021
ms.locfileid: "7641152"
---
# <a name="warehouse-management-workloads-for-cloud-and-edge-scale-units"></a>云和边缘缩放单元的仓库管理工作负载

[!include [banner](../includes/banner.md)]

> [!WARNING]
> 并非所有仓库管理业务功能对于在缩放单元上运行工作负荷的仓库都完全支持。 确保仅使用本主题明确描述为受支持的流程。

## <a name="warehouse-execution-on-scale-units"></a>缩放单元上的仓库执行

仓库管理工作负载让云和边缘缩放单元可以从仓库管理工作运行所选流程。

## <a name="prerequisites"></a>先决条件

您必须有 Dynamics 365 Supply Chain Management 中心和已使用仓库管理工作负荷部署的缩放单元。 有关架构和部署流程的详细信息，请参阅[分布式混合拓扑中的缩放单元](cloud-edge-landing-page.md)。

## <a name="how-the-warehouse-execution-workload-works-on-scale-units"></a>仓库执行工作负荷在缩放单元上的工作原理

对于仓库管理工作负荷中的流程，数据在中心和缩放单元之间同步。

缩放单元仅维护它拥有的数据。 缩放单元的数据所有权概念有助于防止多主数据库冲突。 因此，了解中心和缩放单元分别拥有哪些流程数据很重要。

相同数据记录可以更改中心与缩放单元之间的所有权，具体取决于业务流程。 以下部分中提供了此方案的示例。

> [!IMPORTANT]
> 可以同时在中心和缩放单元上创建某些数据。 示例包括 **牌照** 和 **批次编号**。 提供了专门的冲突处理，以防同一个同步周期内同时在中心和缩放单元中创建同一条唯一记录。 如果发生这种情况，下次同步将失败，而您必须转到 **系统管理 > 查询 > 工作负载查询 > 重复记录**，可在此处查看和合并数据。

## <a name="outbound-process-flow"></a>出库处理流

出站数据所有权流程取决于您是否正在使用装载计划流程。 在所有情况下，中心负责 *原始单据*（如销售订单和转移单），以及订单分配流程和相关订单交易记录数据。 但是，当您使用装载计划流程时，将在中心中创建负荷，因此最初由中心负责。 在 *发放到仓库* 流程中，将把负荷数据的所有权转移到专用缩放单元部署，从而成为后续 *装运波次处理*（如工作分配、补货工作和需求工作创建）的负责人。 因此，仓库工作人员只能使用与运行特定缩放单元工作负荷的部署相连的 Warehouse Management 移动应用处理出站销售订单工作和出站转移单工作。

一旦最终工作流程将库存放到最终装运位置（货架门），缩放单元就会向中心发出信号，指示将源单据库存交易更新为 *已领料*。 直到此流程运行并同步回去，才会在仓库级别实际预留缩放单元工作负荷中的现有库存，而您则可以立即处理出站装运确认，无需等待此同步完成。 将在中心中处理负荷的后续销售装箱单和开票或转移单装运。

下图显示出站流，并指示执行单个业务流程的位置。 （选择此图将其放大。）

[![出站处理流。](media/wes_outbound_warehouse_processes-small.png "出站处理流")](media/wes_outbound_warehouse_processes.png)

### <a name="outbound-processing-with-load-planning"></a>带装载计划的出站处理

在使用装载计划流程时，将在中心中创建负荷和装运，并在 *发放到仓库* 流程中将数据的所有权转移给缩放单元，如下图中所示。

![带装载计划的出站处理](./media/wes_outbound_processing_with_load_planning.png "带装载计划的出站处理")

### <a name="outbound-processing-without-load-planning"></a>不带装载计划的出站处理

如果不使用装载计划流程，将在缩放单元中创建装运。 也将在波次流程期间在缩放单元中创建负荷。

![不带装载计划的出站处理。](./media/wes_outbound_processing_without_load_planning.png "不带装载计划的出站处理")

## <a name="inbound-process-flow"></a>入站流程流

中心拥有以下数据：

- 所有原始单据，例如采购订单和生产订单
- 入库装载处理
- 所有成本和财务更新

> [!NOTE]
> 入库采购订单流在概念上与出库流不同。 您可以根据是否已将采购订单发放到仓库，在缩放单元或中心对同一个仓库进行操作。 将订单发放到仓库后，您只能在登录到缩放单元时处理该订单。
>
> 如果您使用 *发放到仓库* 流程，创建 [*仓库订单*](cloud-edge-warehouse-order.md)，并将相关接收流的所有权分配给缩放单元。 中心将无法登记入库接收。

您必须在中心登录才能使用 *发放到仓库* 流程。 对于采购订单处理，请转到以下页面之一运行或计划此流程：

- **采购 > 采购订单 > 所有采购订单 > 仓库 > 操作 > 发放到仓库**。
- **仓库管理 > 发放到仓库 > 自动下达采购订单**

使用 **自动下达采购订单** 时，您可以根据查询选择特定的采购订单行。 一个典型的方案是设置一个重复批处理作业，来发放所有预期在第二天到达的已确认采购订单行。

工作人员可以使用连接到缩放单元的仓库管理移动应用运行接收流程。 然后，数据由缩放单元记录并针对入库仓库订单进行报告。 后续储存的创建和处理也将由缩放单元处理。

如果您由于不使用 *发放到仓库* 流程而不使用 *仓库订单*，中心可以独立于缩放单元处理仓库接收和工作处理。

![入站流程流。](./media/wes-inbound-ga.png "入站流程流")

当工作人员使用 Warehouse Management 移动应用接收流程对缩放单元进行入站登记时，将根据存储在缩放单元中的相关仓库订单记录收据。 然后，缩放单元工作负荷将指示中心将相关采购订单行交易记录更新为 *已登记*。 完成后，您即可以在中心运行采购订单产品收货。

下图显示入站流，并指示执行单个业务流程的位置。 （选择此图将其放大。）

[![入站处理流](media/wes_inbound_warehouse_processes-small.png "入站处理流")](media/wes_inbound_warehouse_processes.png)

## <a name="supported-processes-and-roles"></a>支持的流程和角色

并非所有仓库管理流程都在缩放单元上的仓库执行工作负荷中受支持。 因此，我们建议您分配与适用于每个用户的功能匹配的角色。

为了促进此流程，在 **系统管理 \> 安全性 \> 安全配置** 上将名为 *工作负荷上的仓库经理* 的示例角色包含在演示数据中。 该角色的目的是使仓库经理能够访问缩放单元上的仓库执行工作负荷。 该角色授予对在缩放单元上托管的工作负荷上下文中相关的页面的访问权限。

缩放单元上的用户角色作为从中心到缩放单元的初始数据同步进行分配。

若要修改分配给用户的角色，转到 **系统管理 \> 安全 \> 将用户分配给角色**。 仅在缩放单元上充当仓库经理的用户应仅分配 *工作负荷上的仓库经理* 角色。 此方法将确保这些用户只能访问支持的功能。 删除分配给这些用户的任何其他角色。

在中心和缩放单元上充当仓库经理的用户应分配现有 *仓库工作人员* 角色。 请注意，此角色向仓库工作人员分配对用户界面 (UI) 中显示的功能（如转移单接收处理）的访问权限，但这些功能当前在缩放单元上不受支持。

### <a name="supported-warehouse-execution-processes"></a>支持的仓库执行流程

可以为缩放单元上的仓库执行工作负荷启用以下仓库执行流程：

- 选定的销售订单和转移单的波次方法（验证、创建负荷、分配、需求补货、集装化、工作创建和波次标签打印）

- 使用仓库应用处理销售订单和转移单仓库工作（包括补货工作）
- 使用仓库应用查询现有库存
- 使用仓库应用创建和运行库存变动
- 使用仓库应用创建和处理周期盘点工作
- 使用仓库应用进行库存调整
- 使用仓库应用登记采购订单并进行储存工作

可在缩放单元中创建以下类型的工作，从而可以在仓库管理工作负荷中处理这些工作：

- **库存变动** – 手动变动和通过模板工作变动。
- **周期盘点** – 包括作为盘点操作一部分的差异批准/拒绝流程。
- **采购订单** – 当采购订单与负荷不关联时，通过仓库订单执行储存工作。
- **销售订单** – 简单的领料和装载。
- **转移问发货** – 简单的领料和装载。
- **补货** – 不包括生产原材料。
- **成品存储** – 在完工入库生产流程之后。
- **联产品和副产品存储** – 在完工入库生产流程之后。

缩放单元当前不支持其他类型的原始单据处理或仓库工作。 例如，对于缩放单元上的仓库执行工作负荷，您无法执行转移单接收流程（转移收货）；这必须由中心实例处理。

> [!NOTE]
> 当连接到缩放单元部署时，_仓库管理移动应用_ 中不显示不支持的功能的移动设备菜单项和按钮。
> 
> 当您在缩放单元上运行工作负荷时，无法运行中心上该特定仓库的不受支持的流程。 本主题后面提供的表记录了受支持的功能。
>
> 选定的仓库工作类型可以在中心和缩放单元上创建，但只能由负责的中心或缩放单元（创建数据的部署）维护。
>
> 即使某个特定流程受缩放单元支持，也要注意，所有需要的数据可能没有从中心同步到缩放单元，或者从缩放单元同步到中心，这可能导致意外的系统处理。 此方案的示例包括：
> 
> - 如果您使用联接仅在中心部署存在的数据表记录的位置指令查询。
> - 如果您使用位置状态和/或位置容量负荷功能。 此数据不会在部署之间同步，因此将仅在更新其中一个部署的位置现有库存时发挥作用。

缩放单元工作负荷当前不支持以下仓库管理功能：

- 分配到负荷的采购订单行的入库处理。
- 项目采购订单的入库处理。
- 管理登陆成本、使用航程与跟踪在途货物。
- 具有有效跟踪维度 **负责人** 和/或 **序列号** 的物料的入库和出库处理。
- 具有锁定状态值的库存的处理。
- 在任何工作变动流程期间更改库存状态。
- 订单承诺灵活仓库级维度预留。
- 使用 *仓库位置状态* 功能（数据在部署之间不同步）。
- 使用 *位置牌照定位* 功能。
- 使用 *产品筛选器* 和 *产品筛选器组*，包括 **混合批次的天数** 设置。
- 与质量管理集成。
- 实际称重物料的处理。
- 仅启用了运输管理 (TMS) 的物料的处理。
- 现有负库存的处理。
- 装运注释的仓库工作处理。
- 材料处理/仓库自动化的仓库工作处理。
- 产品主数据图像（例如，在 Warehouse Management 移动应用上）。
- 产品的跨公司数据共享。

> [!WARNING]
> 有些仓库功能对在缩放单元上运行仓库管理工作负荷的仓库不可用，在中心或缩放单元工作负荷中也不受支持。
> 
> 其他功能在这两处都可以进行处理，但在某些情况下需要谨慎使用，如由于异步数据更新流程而使中心和缩放单元上同一个仓库的现有库存都进行了更新。
> 
> 中心和缩放单元都支持的特定功能（如 *锁定工作*）仅支持数据所有者使用。

### <a name="outbound-supported-only-for-sales-and-transfer-orders"></a>出库（仅支持用于销售订单和转移单）

下表显示支持哪些出库功能、在哪些位置受支持，何时在 Cloud Scale Unit 和 Edge Scale Unit 中使用仓库管理工作负荷。

| 加工                                                      | 中心 | 缩放单元上的仓库执行工作负荷 |
|--------------------------------------------------------------|-----|------------------------------|
| 原始凭证处理                                   | 是 | 无 |
| 负荷和运输管理处理                | 是，但只有装载计划流程。 不支持运输管理处理  | 无 |
| 发放到仓库                                         | 是 | 无 |
| 计划越库配送                                        | 无  | 无 |
| 装运合并                                       | 是，在使用装载计划时 | 是 |
| 装运波次处理                                     | 无  |是，除 **装载计划和排序** 外 |
| 维护波次装运                                  | 无  | 是|
| 仓库工作处理（包括牌照打印）        | 无  | 是，但仅针对上述支持的功能 |
| 群集领料                                              | 无  | 是|
| 手动装箱处理，包括“已装箱的集装箱领料”工作处理 | 不 <P>某些处理可以在由缩放单元处理的初始领料流程之后进行，但是由于后续的锁定操作不建议使用。</p>  | 不 |
| 从组中删除集装箱                                  | 不  | 不 |
| 出库排序处理                                  | 无  | 无 |
| 打印负荷相关的凭证                           | 是 | 是|
| 提单和 ASN 生成                            | 无  | 是|
| 装运确认                                             | 无  | 是|
| 使用“确认并转移”的装运确认            | 无  | 无 |
| 装箱单和开票处理                        | 是 | 无 |
| 领料短缺（销售订单和转移单）                    | 无  | 是，不删除原始单据的预留|
| 领料过量（销售订单和转移单）                     | 无  | 是|
| 更改工作位置（销售订单和转移单）         | 无  | 是|
| 完成工作（销售订单和转移单）                    | 无  | 是|
| 打印工作报告                                            | 是 | 是|
| 波次标签                                                   | 无  | 是|
| 工作拆分                                                   | 无  | 是|
| 工作处理 - 由“运输装载”导向            | 不  | 不 |
| 减少领料数量                                       | 无  | 无 |
| 冲销工作                                                 | 无  | 无 |
| 冲销装运确认                                | 无  | 是|

### <a name="inbound"></a>传入

下表显示支持哪些入库功能、在哪些位置受支持，何时在 Cloud Scale Unit 和 Edge Scale Unit 中使用仓库管理工作负荷。

| 加工                                                          | 中心 | 缩放单元上的仓库执行工作负荷<BR>*（标记为“是”的物料仅适用于仓库订单）* |
|------------------------------------------------------------------|-----|----------------------------------------------------------------------------------|
| 原始&nbsp;凭证&nbsp;处理                             | 是 | 否 |
| 负荷和运输管理处理                    | 是 | 否 |
| 登陆成本与在途货物接收                       | 是 | 否 |
| 入站装运确认                                    | 是 | 否 |
| 采购订单发放到仓库（仓库订单处理） | 是 | 不 |
| 取消仓库订单行<p>请注意，仅在未对行进行登记，才支持此功能</p> | 是 | 不 |
| 采购订单物料接收和储存                       | <p>是，&nbsp;当&nbsp;没有&nbsp;仓库订单时</p><p>否，当有仓库订单时</p> | <p>是，当采购订单不是<i>负荷</i>的一部分时</p> |
| 采购订单行接收和储存                       | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | <p>是，当采购订单不是<i>负荷</i>的一部分时</p></p> |
| 退货单接收和储存                              | 是 | 不 |
| 混合牌照接收和储存                       | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 是 |
| 加载物料接收                                              | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 牌照接收和储存                             | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 转移单物料接收和储存                       | 是 | 不 |
| 转移订单行接收和储存                       | 是 | 不 |
| 取消工作（入站）                                            | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | <p>是，但仅在<b>取消工作时取消收货登记</b>选项（在<b>仓库管理参数</b>页上）清除时</p> |
| 采购订单产品收据处理                        | 是 | 不 |
| 包含欠交的采购订单接收                      | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 是，但只能通过从中心发起取消请求来进行 |
| 包含超交的采购订单接收                       | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 是  |
| 接收并创建 *越库配送* 工作                 | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 接收并创建 *质检订单* 工作                  | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 接收并创建 *质检物料抽样* 工作          | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 接收并创建 *质量检查质量* 工作       | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 接收并创建质检订单                            | <p>是，当没有仓库订单时</p><p>否，当有仓库订单时</p> | 不 |
| 工作处理 - 由 *群集储存* 导向                 | 是 | 不 |
| 包含 *领料短缺* 的工作处理                               | 是 | 无 |
| 牌照加载                                           | 是 | 是 |

### <a name="warehouse-operations-and-exception-handing"></a>仓库工序和异常处理

下表显示支持哪些仓库工序和异常处理功能、在哪些位置受支持，何时在 Cloud Scale Unit 和 Edge Scale Unit 中使用仓库管理工作负荷。

| 加工                                            | 中心 | 缩放单元上的仓库执行工作负荷 |
|----------------------------------------------------|-----|------------------------------|
| 牌照查询                              | 是 | 是                          |
| 物料查询                                       | 是 | 是                          |
| 位置查询                                   | 是 | 是                          |
| 更改仓库                                   | 是 | 是                          |
| 变动                                           | 是 | 是                          |
| 根据模板变动                               | 是 | 是                          |
| 仓库转移                                 | 是 | 不                           |
| 从仓库应用创建转移单           | 是 | 无                           |
| 调整（调入/调出）                                | 是 | 是，但不适用于必须使用库存调整类型上的 **删除预留** 设置删除库存预留的调出场景</p>                           |
| 库存状态更改                            | 是 | 无                           |
| 周期盘点和盘点差异处理 | 是 | 是                           |
| 重新打印标签（牌照打印）             | 是 | 是                          |
| 牌照生成                                | 是 | 不                           |
| 牌照分隔符                                | 是 | 不                           |
| 打包到嵌套的牌照                                | 是 | 不                           |
| 驾驶员签入                                    | 是 | 不                           |
| 驾驶员签出                                   | 是 | 不                           |
| 更改批处置代码                      | 是 | 是                          |
| 显示未结工作列表                             | 是 | 是                          |
| 合并牌照                         | 是 | 不                           |
| 最小/最大和区域阈值补货处理| 是 <p>建议不要在查询中包括相同位置</p>| 是                          |
| 时隙补货处理                  | 是  | 是<p>请注意，必须在缩放单元上完成设置</p>                           |
| 锁定和解锁工作                             | 是 | 是                          |
| 更改用户                                        | 是 | 是                          |
| 更改工作的工作池                           | 是 | 是                          |
| 取消工作                                        | 是 | 是                          |

### <a name="production"></a>生产

下面总结了在缩放单元工作负荷上目前支持哪些仓库管理生产方案。

| 加工 | 中心 | 缩放单元上的仓库执行工作负荷 |
|---------|-----|------------------------------|
| 报告为完工入库和成品储存 | 是 | 是 |
| 联产品和副产品储存 | 是 | 是 |
| <p>与生产相关的所有其他仓库管理流程，包括：</p><li>发放到仓库</li><li>生产波次处理</li><li>原材料领取</li><li>看板储存</li><li>看板领料</li><li>开始生产订单</li><li>生产废料</li><li>最后一个生产托盘</li><li>登记物料消耗量</li><li>空看板</li></ul> | 是 | 无 |
| 原材料补货 | 无 | 无 |

## <a name="maintaining-scale-units-for-warehouse-execution"></a>为仓库执行维护缩放单元

在中心和缩放单元上运行的几个批处理作业。

在中心部署上，您可以手动维护批处理作业。 您可以在 **仓库管理 \> 定期任务 \> 后台工作负荷管理** 管理以下批处理作业：

- 缩放单元到中心消息处理程序
- 登记源订单收货
- 完成仓库订单

在缩放单元中的工作负荷上，您可以在 **仓库管理 \> 定期任务 \> 工作负荷管理** 管理以下批处理作业：

- 处理波次表记录
- 仓库中心到缩放单元消息处理器
- 处理仓库订单行的数量更新请求

[!INCLUDE [cloud-edge-privacy-notice](../../includes/cloud-edge-privacy-notice.md)]

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
