---
title: 具有实际成本和标记的后进先出日期
description: 后进先出日期（LIFO 日期）是一种基于 LIFO 原则的库存模型。 基于库存交易记录的日期，按照最后入库的收货结算库存发货。 使用 LIFO 日期时，如果在发货前没有收货，则根据在发货日期后发生的任何收货结算该发货。 同一日期上的若干发货将按照最后发货、最后收货的顺序结算。
author: JennySong-SH
ms.date: 02/21/2022
ms.topic: article
ms.search.form: InventJournalLossProfit, InventMarking, InventModelGroup, SalesTable
audience: Application User
ms.reviewer: kamaybac
ms.custom: 51592
ms.search.region: Global
ms.author: yanansong
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 8ca344e6ca81814e787046f6ece97625d035346d
ms.sourcegitcommit: 9166e531ae5773f5bc3bd02501b67331cf216da4
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/03/2022
ms.locfileid: "8671441"
---
# <a name="lifo-date-with-physical-value-and-marking"></a>具有实际成本和标记的后进先出日期

[!include [banner](../includes/banner.md)]

后进先出日期（LIFO 日期）是一种库存管理和评估方法，此方法先销售、使用或处置后生产或采购的库存。 在 Microsoft Dynamics 365 Supply Chain Management 中的库存结转流程中，系统将创建结算，其中最后一个收货与每个给定日期的第一个发货进行匹配，从最早的日期开始，依此类推。 在使用后进先出（LIFO 日期）库存模型时，如果在发货前没有收货，则根据在发货日期后发生的任何收货结算该发货。 结算和匹配原则基于库存交易记录的财务日期。 同一日期有多个发货时，按最后发货、最后收货的顺序结算。 结算和调整的初步评估可通过运行库存重新计算流程来执行。

您可以通过标记库存交易记录来替代 LIFO 日期原则，以针对特定发货结算特定物料收货。 当您使用 LIFO 库存模型根据 LIFO 日期原则创建结算和调整发货值时，需要进行定期库存结转。 在运行库存结转流程之前，当发生实际和财务更新时，发货交易记录将按移动平均值进行评估。 除非您正在使用标记，否则在执行实际更新或财务更新时将计算移动平均值。

我们建议在您使用 LIFO 日期库存模型时进行定期库存结转。

以下示例通过三个不同的配置说明了使用 LIFO 日期的影响：

- 没有 **包括实际成本** 选项的 LIFO 日期
- 具有 **包括实际成本** 选项的 LIFO 日期
- 具有标记的 LIFO 日期

## <a name="lifo-date-without-the-include-physical-value-option"></a>没有包括实际成本选项的 LIFO 日期

在此示例中，将不标记物料模型组以包括实际成本。 随后的插图说明了这些交易记录：

- 1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
- 1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
- 2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
- 2b. 数量 1（单件成本为 USD 22.00）的库存财务收货。
- 3a. 数量 1（单件成本价为 USD 16.00）的库存实际发货（财务过帐的交易记录的移动平均）。
- 3b. 数量 1（单件成本价为 USD 16.00）的库存财务发货（财务过帐的交易记录的移动平均）。
- 4a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
- 5a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
- 5b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
- 6a. 数量 1（单件成本价为 USD 23.00）的库存实际发货（财务过帐的交易记录的移动平均）
- 7\. 执行库存结转。 根据 LIFO 日期方法，第一个财务更新的发货将根据从第一个日期开始的最后一个财务更新的收货进行结算，依此类推。 在此示例中，在 3b 和 2b 之间创建了一个结算。 将对 3b 进行 USD 6.00 的调整，所产生的最终成本将为 USD 22.00。

下图说明了在不使用 **包括实际成本** 选项时，LIFO 日期库存模型的影响。

![没有包括实际成本选项的 LIFO 日期。](media/lifo-date-without-include-physical-value.png)

**图形要点**

- 库存交易记录用垂直箭头表示。
- 实际交易记录由较短的浅灰色箭头表示。
- 财务交易记录由较长的黑色箭头表示。
- 入库用坐标轴上的垂直箭头表示。
- 出库用坐标轴下的垂直箭头表示。
- 每个新的收货或发货交易记录都用一个新标签标明。
- 每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
- 图表中的每个日期由一条细黑垂直线分隔。 日期在图表底部注明。
- 库存结转用红色的垂直虚线表示。
- 由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。

## <a name="lifo-date-with-the-include-physical-value-option"></a>具有“包括实际成本”选项的 LIFO 日期

如果为 **物料模型组** 页面上的物料选中 **包括实际成本** 复选框，此系统将使用实际收货交易记录和财务收货交易记录来计算移动平均成本价。 如果适用，系统将对实际更新的发货交易记录进行调整。 在清除 **包括实际成本** 复选框时，使用 LIFO 日期库存模型的库存结转将只对财务更新的交易记录进行结算。

在此示例中，将标记物料模型组以包括实际成本。 

随后的插图说明了这些交易记录：

- 1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
- 1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
- 2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
- 2b. 数量 1（单件成本为 USD 22.00）的库存财务收货。
- 3a. 数量 1（单件成本价为 USD 16.00）的库存实际发货（实际和财务过帐的交易记录的移动平均）。
- 3b. 数量 1（单件成本价为 USD 16.00）的库存财务发货（实际和财务过帐的交易记录的移动平均）。
- 4a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
- 5a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
- 5b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
- 6a. 数量 1（单件成本价为 USD 23.67）的库存实际发货（实际和财务过帐的交易记录的移动平均）。
- 7\. 执行库存结转。 根据 LIFO 日期方法，第一个财务更新的发货将根据从第一个日期开始每个日期的最后一个财务更新的收货进行结算，依此类推。 在此示例中，在 2b 和 3b 之间创建了一个结算。 将对 3b 进行 USD 6.00 的调整，所产生的最终成本将为 USD 22.00。 此外，交易记录 6a 将调整为 5b 的收货交易记录成本。 此系统将不会结算这些交易记录，因为在实际上更新该收货，并不在财务上更新。 只有 USD 6.33 的调整将过帐到实际发货交易记录，调整后产生的成本将为 USD 30.00。

下图说明了在使用 **包括实际成本** 选项时，后进先出库存模型的影响。

![具有“包括实际成本”选项的 LIFO 日期。](media/lifo-date-with-include-physical-value.png)

**图形要点**

- 库存交易记录用垂直箭头表示。
- 实际交易记录由较短的浅灰色箭头表示。
- 财务交易记录由较长的黑色箭头表示。
- 入库用坐标轴上的垂直箭头表示。
- 出库用坐标轴下的垂直箭头表示。
- 每个新的收货或发货交易记录都用一个新标签标明。
- 每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
- 图表中的每个日期由一条细黑垂直线分隔。 日期在图表底部注明。
- 库存结转用红色的垂直虚线表示。
- 由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。

## <a name="lifo-date-with-marking"></a>具有标记的 LIFO 日期

标记是一个过程，您可以将某一发货交易记录链接到（或标记到）某一收货交易记录。 标记可以在过帐交易记录之前或之后发生。 如果您想要在过帐交易记录时或执行库存结转时确保库存的准确成本，则可以使用标记。 例如，客户服务部接受了来自重要客户的一个紧急订单。 由于这是一份紧急订单，因此您必须为物料支付更多成本才能满足客户的请求。

您必须确保库存物料的成本反映在销售订单发票的毛利中或所售货物成本 (COGS) 中。 在过帐采购订单时，按 USD 120.00 的成本入库。 如果在过帐装箱单或发票前此销售订单单据标记到采购订单，则 COGS 将是 USD 120.00，而不是该物料的当前移动平均成本。 如果在发生标记前过帐销售订单装箱单或发票，则将按移动平均成本价过帐 COGS。

在执行库存结转前，仍可以彼此标记这两个交易记录。

在过账交易记录前，您可以将某一发货交易记录标记到某一收货交易记录。 您可以从 **销售订单详细信息** 页面的销售订单行，通过在 **销售订单行** 快速选项卡上选择 **库存 \> 标记** 来执行此标记。 您可以在 **标记** 页上查看未结收货交易记录。

在过帐交易记录后，您还可以将某一发货交易记录标记到某一收货交易记录。 您可以匹配或标记已过帐库存调整日记帐的清查过物料的未结收货交易记录的发货交易记录。

随后的插图说明了这些交易记录：

- 1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
- 1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
- 2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
- 2b. 数量 1（单件成本为 USD 22.00）的库存财务收货。
- 3a. 数量 1（单件成本价为 USD 16.00）的库存实际发货（财务过帐的交易记录的移动平均）。
- 3b. 数量 1（单件成本价为 USD 16.00）的库存财务发货（财务过帐的交易记录的移动平均）。
- 3c. 3b 的库存财务发货将被标记为 1b 的库存财务发货。
- 4a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
- 5a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
- 5b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
- 6a. 数量 1（单件成本价为 USD 23.00）的库存实际发货（财务过帐的交易记录的移动平均）
- 7\. 执行库存结转。 基于使用 LIFO 日期方法的标记原则，标记的交易记录将相互结算。 在此示例中，3b 针对 1b 进行结算，将 USD -6.00 的调整过帐到 3b 以使值达到 USD 10.00。 在此示例中，没有进行其他结算，因为结转仅为财务更新的交易记录创建结算。

下图显示在使用了在发货和收货之间标记时，LIFO 日期库存模型的影响。 

![具有标记的 LIFO 日期。](media/lifo-date-with-marking.png)

**图形要点**

- 库存交易记录用垂直箭头表示。
- 实际交易记录由较短的浅灰色箭头表示。
- 财务交易记录由较长的黑色箭头表示。
- 入库用坐标轴上的垂直箭头表示。
- 出库用坐标轴下的垂直箭头表示。
- 每个新的收货或发货交易记录都用一个新标签标明。
- 每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
- 图表中的每个日期由一条细黑垂直线分隔。 日期在图表底部注明。
- 库存结转用红色的垂直虚线表示。
- 由库存结转执行的结算和标记用红色对角箭头（从收货指向发货）表示。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
