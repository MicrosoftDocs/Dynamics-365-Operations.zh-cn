---
title: "具有实际成本和标记的后进先出日期"
description: "后进先出日期（LIFO 日期）是一种基于 LIFO 原则的库存模型。 基于库存交易记录的日期，按照最后入库的收货结算库存发货。 使用 LIFO 日期时，如果在发货前没有收货，则根据在发货日期后发生的任何收货结算该发货。 同一日期上的若干发货将按照最后发货、最后收货的顺序结算。"
author: AndersGirke
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: InventJournalLossProfit, InventMarking, InventModelGroup, SalesTable
audience: Application User
ms.reviewer: yuyus
ms.search.scope: Core, Operations, Retail
ms.custom: 51592
ms.assetid: d9f13274-3268-444f-85c8-b686fd39286d
ms.search.region: Global
ms.search.industry: Retail
ms.author: yuyus
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: 2771a31b5a4d418a27de0ebe1945d1fed2d8d6d6
ms.openlocfilehash: 0b94d3f23c929c45a67894bd08706144c9226491
ms.contentlocale: zh-cn
ms.lasthandoff: 11/03/2017

---

# <a name="lifo-date-with-physical-value-and-marking"></a>具有实际成本和标记的后进先出日期

[!include[banner](../includes/banner.md)]

[!include[retail name](../includes/retail-name.md)]


后进先出日期（LIFO 日期）是一种基于 LIFO 原则的库存模型。 基于库存交易记录的日期，按照最后入库的收货结算库存发货。 使用 LIFO 日期时，如果在发货前没有收货，则根据在发货日期后发生的任何收货结算该发货。 同一日期上的若干发货将按照最后发货、最后收货的顺序结算。 

在使用后进先出（LIFO 日期）库存模型时，如果在发货前没有收货，则根据在发货日期后发生的任何收货结算该发货。 同一日期上的若干发货可按照最后发货、最后收货的顺序结算。 在使用后进先出日期时，无需使用后进先出日期规则。 相反，您可以标记库存交易记录，以便根据指定发货结算指定物料收货。 

我们建议在您使用 LIFO 日期库存模型时进行定期库存结转。 

以下示例通过三个不同的配置说明了使用后进先出日期的影响：

-   没有**包括实际成本**选项的后进先出日期
-   具有**包括实际成本**选项的后进先出日期
-   具有标记的后进先出日期

## <a name="lifo-date-without-the-include-physical-value-option"></a>没有“包括实际成本”选项的后进先出日期
在此示例中，将不标记物料模型组以包括实际成本。 随后的插图说明了这些交易记录：

-   1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
-   1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
-   2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
-   2b. 数量 1（单件成本为 USD 20.00）的库存财务收货。
-   3a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
-   4a. 数量 1（单件成本价为 USD 15.00）的库存实际发货（财务更新的交易记录的移动平均）。
-   4b. 数量 1（单件成本价为 USD 15.00）的库存财务发货（财务更新的交易记录的移动平均）。
-   5a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
-   5b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
-   6. 执行库存结转。 基于后进先出日期方法，最后财务更新的发货将按日期根据最后财务更新的收货结算。 将对发货交易记录执行 USD 5.00 的调整。 这些交易记录将彼此结算。

新的移动平均成本价按 USD 15.00 反映财务更新的交易记录的平均值。 

下图说明了在不使用**包括实际成本**选项时，后进先出日期库存模型的影响。 ![具有“包括实际成本”的后进先出日期](./media/lifodatewithoutincludephysicalvalue.gif) 

**图形要点**

-   库存交易记录用垂直箭头表示。
-   入库用时间线上的垂直箭头表示。
-   出库用时间线下的垂直箭头表示。
-   在每一垂直箭头之上（或之下），以 Quantity@Unitprice 格式指定库存交易记录的值。
-   用括号括起来的库存交易记录值指示该库存交易记录实际过帐到库存中。
-   未用括号括起来的库存交易记录值指示该库存交易记录财务过帐到库存中。
-   每个新的收货或发货交易记录都用一个新标签标明。
-   每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
-   库存结转用红色的垂直虚线以及*“库存结转”*标签表示。
-   由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。

## <a name="lifo-date-with-the-include-physical-value-option"></a>具有“包括实际成本”选项的后进先出日期
您可以在**物料模型组**页为物料选择**包括实际成本**复选框。 在此情况下，此系统使用实际和财务收货交易记录计算移动平均成本价。 如果适用，系统将对实际更新的发货交易记录进行调整。 在清除**包括实际成本**复选框时，使用后进先出日期库存模型的库存结转将只对财务更新的交易记录进行结算。 

在此示例中，将标记物料模型组以包括实际成本。 

随后的插图说明了这些交易记录：

-   1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
-   1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
-   2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
-   2b. 数量 1（单件成本为 USD 20.00）的库存财务收货。
-   3a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
-   4a. 数量 1（单件成本价为 USD 18.33）的库存实际发货（财务更新的交易记录的移动平均）。
-   4b. 数量 1（单件成本价为 USD 18.33）的库存财务发货（财务更新的交易记录的移动平均）。
-   5a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
-   5b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
-   6. 执行库存结转。 基于后进先出日期方法，最后更新的发货将按日期对照最后更新的收货调整或结算。 这些交易记录将不彼此结算，因为财务收货交易记录将调整到物理更新交易记录。 而是将只对此发货交易记录执行 USD 6.67 的调整。

新的移动平均成本价按 USD 20.00 反映财务更新的交易记录的平均值。 

下图说明了在使用**包括实际成本**选项时，后进先出库存模型的影响。 ![具有“包括实际成本”的后进先出日期](./media/lifodatewithincludephysicalvalue.gif) 

**图形要点**

-   库存交易记录用垂直箭头表示。
-   入库用时间线上的垂直箭头表示。
-   出库用时间线下的垂直箭头表示。
-   在每一垂直箭头之上（或之下），以 Quantity@Unitprice 格式指定库存交易记录的值。
-   用括号括起来的库存交易记录值指示该库存交易记录实际过帐到库存中。
-   未用括号括起来的库存交易记录值指示该库存交易记录财务过帐到库存中。
-   每个新的收货或发货交易记录都用一个新标签标明。
-   每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
-   库存结转用红色的垂直虚线以及*“库存结转”*标签表示。
-   由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。

## <a name="lifo-date-with-marking"></a>具有标记的后进先出日期
标记是一个过程，您可以将某一发货交易记录链接到（或标记到）某一收货交易记录。 标记可以在过帐交易记录之前或之后发生。 如果您想要在过帐交易记录时或执行库存结转时确保库存的准确成本，则可以使用标记。 

例如，客户服务部接受了来自重要客户的一个紧急订单。 因为此订单是紧急订单，所以，您将需要为此物料支付更多成本以满足您的客户的请求。 您必须确保此库存物料的成本反映在此销售订单发票的毛利中或所售货物成本 (COGS) 中。 

在过帐采购订单时，按 USD 120.00 的成本入库。 如果在过帐装箱单或发票前此销售订单单据标记到采购订单，则 COGS 将是 USD 120.00，而不是该物料的当前移动平均成本。 如果在发生标记前过帐销售订单装箱单或发票，则将按移动平均成本价过帐 COGS。 

在执行库存结转前，仍可以彼此标记这两个交易记录。 

例如，收货交易记录为发货交易记录标记。 这种情况下，将不考虑在物料的物料模型组中定义的评估方法，并且此系统将彼此结算这些交易记录。 

在过帐交易记录前，您可以将某一发货交易记录标记到某一收货交易记录。 您可以从**“销售订单详细信息”**页上的销售订单行执行此操作。 您可以在**“标记”**页上查看未结收货交易记录。 

在过帐交易记录后，您还可以将某一发货交易记录标记到某一收货交易记录。 您可以匹配或标记已过帐库存调整日记帐的清查过物料的未结收货交易记录的发货交易记录。 

随后的插图说明了这些交易记录：

-   1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
-   1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
-   2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
-   2b. 数量 1（单件成本为 USD 20.00）的库存财务收货。
-   3a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
-   4a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
-   4b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
-   5a. 数量 1（单件成本价为 USD 21.25）的库存实际发货（财务和实际更新的交易记录的移动平均）。
-   5b. 在过帐交易记录前将数量为 1 的库存财务发货标记为库存收货 2b。 此交易记录按 USD 20.00 的单件成本价过帐。
-   6a. 数量 1（单件成本价为 USD 21.25）的库存实际发货。
-   7. 执行库存结转。 因为财务更新的先进先出 (FIFO) 交易记录标记为现有收货，所以将彼此结算这些交易记录并且不进行调整。

新的移动平均成本价反映按 USD 27.50 的财务和实际更新的交易记录的平均价。 

下图显示在使用了在发货和收货之间标记时，后进先出库存模型的影响。 ![具有标记的后进先出日期](./media/lifodatewithmarking.gif) 

**图形要点**

-   库存交易记录用垂直箭头表示。
-   入库用时间线上的垂直箭头表示。
-   出库用时间线下的垂直箭头表示。
-   在每一垂直箭头之上（或之下），以 Quantity@Unitprice 格式指定库存交易记录的值。
-   用括号括起来的库存交易记录值指示该库存交易记录实际过帐到库存中。
-   未用括号括起来的库存交易记录值指示该库存交易记录财务过帐到库存中。
-   每个新的收货或发货交易记录都用一个新标签标明。
-   每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
-   库存结转用红色的垂直虚线以及*“库存结转”*标签表示。
-   由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。





