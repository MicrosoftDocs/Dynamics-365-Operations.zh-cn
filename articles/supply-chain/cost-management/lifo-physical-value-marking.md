---
title: "具有实际成本和标记的先进先出"
description: "后进先出 (LIFO) 是一种库存模型，其中，最后（最新）的收货将最先发货。 基于库存交易记录的日期，按照最后入库的收货结算库存发货。"
author: AndersGirke
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-ax-applications
ms.technology: 
ms.search.form: InventJournalLossProfit, InventMarking, InventModelGroup, SalesTable
audience: Application User
ms.reviewer: yuyus
ms.search.scope: Core, Operations, Retail
ms.custom: 55021
ms.assetid: 49c492b0-b018-44e0-928f-9671e54eee20
ms.search.region: Global
ms.search.industry: Retail
ms.author: yuyus
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.translationtype: HT
ms.sourcegitcommit: 2771a31b5a4d418a27de0ebe1945d1fed2d8d6d6
ms.openlocfilehash: db6d04a64821b3b02679056f787092dc40ef4423
ms.contentlocale: zh-cn
ms.lasthandoff: 11/03/2017

---

# <a name="lifo-with-physical-value-and-marking"></a>具有实际成本和标记的先进先出

[!INCLUDE [banner](../includes/banner.md)]

[!INCLUDE [retail name](../includes/retail-name.md)]

后进先出 (LIFO) 是一种库存模型，其中，最后（最新）的收货将最先发货。 基于库存交易记录的日期，按照最后入库的收货结算库存发货。 

在后进先出 (LIFO) 库存模型中，最后（最新）的收货最先发货。 基于库存交易记录的日期，按照最后入库的收货结算库存发货。 在使用先进先出时，无需使用先进先出规则。 相反，您可以标记库存交易记录，以便根据指定收货结算指定物料发货。 我们建议在您使用 LIFO 库存模型时定期进行库存结转。 

以下示例通过三个不同的配置说明了使用先进先出的影响：

-   没有**包括实际成本**选项的先进先出
-   具有**包括实际成本**选项的先进先出
-   具有标记的后进先出

## <a name="lifo-without-the-include-physical-value-option"></a>没有“包括实际成本”选项的后进先出
在此示例中，将不标记物料模型组以包括实际成本。 随后的插图说明了这些交易记录：

-   1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
-   1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
-   2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
-   2b. 数量 1（单件成本为 USD 20.00）的库存财务收货。
-   3a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
-   4a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
-   4b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
-   5a. 数量 1（单件成本价为 USD 20.00）的库存实际发货（财务更新的交易记录的移动平均）。
-   5b. 数量 1（单件成本价为 USD 20.00）的库存财务发货（财务更新的交易记录的移动平均）。
-   6. 执行库存结转。 基于后进先出方法，最后财务更新的发货将对照最后财务更新的收货结算。 将对发货交易记录执行 USD 10.00 的调整。

新的移动平均成本价按 USD 15.00 反映财务更新的交易记录的平均值。 下图说明了在未使用**包括实际成本**选项时，先进先出库存模型对此系列的交易记录的影响。 ![不具有“包括实际成本”的后进先出](./media/lifowithoutincludephysicalvalue.gif) 

**图形要点**

- 库存交易记录用垂直箭头表示。
- 入库用时间线上的垂直箭头表示。
- 出库用时间线下的垂直箭头表示。
- 在每一垂直箭头之上（或之下），以 Quantity@Unit price 格式指定库存交易记录的值。
- 用括号括起来的库存交易记录值指示该库存交易记录实际过帐到库存中。
- 未用括号括起来的库存交易记录值指示该库存交易记录财务过帐到库存中。
- 每个新的收货或发货交易记录都用一个新标签标明。
- 每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
- 库存结转用红色的垂直虚线以及*“库存结转”*标签表示。
- 由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。

## <a name="lifo-with-the-include-physical-value-option"></a>具有“包括实际成本”选项的后进先出
如果为**物料模型组**页面上的物料选中**包括实际成本**复选框，此系统将使用实际收货交易记录和财务收货交易记录来计算移动平均成本价。 如果适用，系统将对实际更新的发货交易记录进行调整。 在清除**包括实际成本**复选框时，具有先进先出库存模型的库存结转将只对财务更新的交易记录进行结算。 

随后的插图说明了这些交易记录：

-   1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
-   1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
-   2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
-   2b. 数量 1（单件成本为 USD 20.00）的库存财务收货。
-   3a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
-   4a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
-   4b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
-   5a. 数量 1（单件成本价为 USD 21.25）的库存实际发货（财务和实际更新的交易记录的移动平均）。
-   5b. 数量 1（单件成本价为 USD 21.25）的库存财务发货（财务和实际更新的交易记录的移动平均）。
-   6a. 数量 1（单件成本价为 USD 21.25）的库存实际发货。
-   7. 执行库存结转。 基于后进先出方法，最后财务发货交易记录将对照最后更新的收货调整或结算。

交易记录 6a 将调整到收货交易记录 4b。 此系统将不会结算这些交易记录，因为在实际上更新该收货，并不在财务上更新。 而是只将 USD 8.75 的调整过帐到实际发货交易记录。 交易记录 5b 将调整到实际收货交易记录 3a。 系统将不会结算这些交易记录，因为它们都没有在财务上更新。 而是只对此发货交易记录执行 USD –3.75 的调整。 新的移动平均成本价反映按 USD 20.00 的财务和实际更新的交易记录的平均价。 

下图说明了在使用**包括实际成本**选项时，先进先出库存模型对此系列的交易记录的影响。 ![具有“包括实际成本”的后进先出](./media/lifowithincludephysicalvalue.gif) 

**图形要点**

- 库存交易记录用垂直箭头表示。
- 入库用时间线上的垂直箭头表示。
- 出库用时间线下的垂直箭头表示。
- 在每一垂直箭头之上（或之下），以 Quantity@Unit price 格式指定库存交易记录的值。
- 用括号括起来的库存交易记录值指示该库存交易记录实际过帐到库存中。
- 未用括号括起来的库存交易记录值指示该库存交易记录财务过帐到库存中。
- 每个新的收货或发货交易记录都用一个新标签标明。
- 每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
- 库存结转用红色的垂直虚线以及*“库存结转”*标签表示。
- 由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。

## <a name="lifo-with-marking"></a>具有标记的后进先出
标记是一个过程，您可以将某一发货交易记录链接到（或标记到）某一收货交易记录。 标记可以在过帐交易记录之前或之后发生。 如果您想要在过帐交易记录时或执行库存结转时确保库存的准确成本，则可以使用标记。 例如，客户服务部接受了来自重要客户的一个紧急订单。 由于这是一份紧急订单，因此您必须为此物料支付更多成本才能满足您客户的请求。 

您必须确保此库存物料的成本反映在此销售订单发票的毛利中或所售货物成本 (COGS) 中。 在过帐采购订单时，按 USD 120.00 的成本入库。 如果在过帐装箱单或发票前此销售订单单据标记到采购订单，则 COGS 将是 USD 120.00，而不是该物料的当前移动平均成本。 如果在发生标记前过帐销售订单装箱单或发票，则将按移动平均成本价过帐 COGS。 

在执行库存结转前，仍可以彼此标记这两个交易记录。 

在过账交易记录前，您可以将某一发货交易记录标记到某一收货交易记录。 您可以从**“销售订单详细信息”**页上的销售订单行执行此操作。 您可以在**“标记”**页上查看未结收货交易记录。 

在过帐交易记录后，您还可以将某一发货交易记录标记到某一收货交易记录。 您可以匹配或标记已过帐库存调整日记帐的清查过物料的未结收货交易记录的发货交易记录。 

随后的插图说明了这些交易记录：

-   1a. 数量 1（单件成本为 USD 10.00）的库存实际收货。
-   1b. 数量 1（单件成本为 USD 10.00）的库存财务收货。
-   2a. 数量 1（单件成本为 USD 20.00）的库存实际收货。
-   2b. 数量 1（单件成本为 USD 20.00）的库存财务收货。
-   3a. 数量 1（单件成本为 USD 25.00）的库存实际收货。
-   4a. 数量 1（单件成本为 USD 30.00）的库存实际收货。
-   4b. 数量 1（单件成本为 USD 30.00）的库存财务收货。
-   5a. 数量 1（单件成本价为 USD 21.25）的库存实际发货（财务和实际更新的交易记录的移动平均）。
-   5b. 在过帐交易记录前将数量为 1 的库存财务发货标记为库存收货 2b。 此交易记录按 USD 20.00 的单件成本价过帐。
-   6a. 数量 1（单件成本价为 USD 21.25）的库存实际发货。
-   7. 执行库存结转。 由于财务更新的先进先出交易记录标记为现有收货，因此将彼此结算这些交易记录并且不进行调整。

新的移动平均成本价反映按 USD 27.50 的财务和实际更新的交易记录的平均价。 

下图说明在使用发货和收货之间的标记时，先进先出库存模型对此系列的交易记录的影响。 ![具有标记的后进先出](./media/lifowithmarking.gif) 

**图形要点**

- 库存交易记录用垂直箭头表示。
- 入库用时间线上的垂直箭头表示。
- 出库用时间线下的垂直箭头表示。
- 在每一垂直箭头之上（或之下），以 Quantity@Unit price 格式指定库存交易记录的值。
- 用括号括起来的库存交易记录值指示该库存交易记录实际过帐到库存中。
- 未用括号括起来的库存交易记录值指示该库存交易记录财务过帐到库存中。
- 每个新的收货或发货交易记录都用一个新标签标明。
- 每个垂直箭头用连续标识符标记，例如 *1a*。 这些标识符指示时间线中库存交易记录过帐的顺序。
- 库存结转用红色的垂直虚线以及*“库存结转”*标签表示。
- 由库存结转执行的结算用红色对角箭头（从收货指向发货）表示。





