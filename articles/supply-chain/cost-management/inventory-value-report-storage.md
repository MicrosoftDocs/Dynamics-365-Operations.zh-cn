---
title: 库存值报表
description: 本主题说明如何设置、生成和使用库存值报表。 这些报表提供有关您的库存实际和财务数量和金额的详细信息。
author: banluo-ms
ms.date: 10/19/2021
ms.topic: article
ms.search.form: InventValueProcess, InventValueReportSetup
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: banluo
ms.search.validFrom: 2021-10-19
ms.dyn365.ops.version: 10.0.9
ms.openlocfilehash: d78cde26d238d18744adde9a576552588736e619
ms.sourcegitcommit: 2e554371f5005ef26f8131ac27eb171f0bb57b4e
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/04/2022
ms.locfileid: "8384687"
---
# <a name="inventory-value-reports"></a>库存值报表

[!include [banner](../includes/banner.md)]

库存值报表提供有关您的库存实际和财务数量和金额的详细信息。 您可以通过多种不同方式查看报表。 例如，您可以显示总计或交易，或按物料或时间范围筛选。 您可以查看所售货物成本 (COGS) 值或在制品 (WIP) 值，并设置其他选项。

库存值报表允许您执行以下任务：

- 在总帐和库存之间进行对帐。
- 查阅特定期间的现有库存量和值。
- 创建针对特定目的定制的报表配置。
- 保存报表配置，以便可以多次使用。
- 添加范围以在运行报表时筛选数据。

## <a name="types-of-inventory-value-report"></a>库存值报表的类型

库存值报表有两种类型：**库存值**（标准报表）和 **库存值报表存储**。

### <a name="standard-inventory-value-report"></a>标准库存值报表

标准 **库存值** 报表是一个简单报表，您可以选择包含的信息，然后在屏幕上显示该信息。 它不保存结果。 也不提供用于筛选、向下钻取、浏览或导出的交互功能。 出于这些原因，我们建议您在大多数情况下改用 **库存值报表存储** 报表。

### <a name="inventory-value-report-storage-report"></a>库存值报表存储报表

**库存值报表存储** 报表作为 Microsoft Dynamics 365 Supply Chain Management 中的交互式页面或多种格式中一种格式的导出文档提供输出。

在浏览器中查看此报表时，将根据您已配置的布局动态调整列和聚合余额。 可以对结果排序，进行过滤，以及向下钻取到数据中，等等。

报告结果存储在 **库存值** 数据实体中。 因此，您可以筛选结果并将其导出为逗号分隔值 (CSV) 或 Microsoft Excel 格式等格式。

当输出包含许多行时，**库存值报表存储** 报表会很有用。 例如，您有 50,000 件商品，并且已创建 300 家商店作为仓库。 在这种情况下，如果您按物料、站点和仓库请求库存期末余额，输出将包含许多行。

> [!NOTE]
> **库存值报表存储** 报表不包括报表布局中定义的小计。 也不包括总帐余额，即使这些余额已在报表布局中定义。 总帐对帐必须使用试算平衡表进行。 但是，标准的 **库存值** 报表包括这些小计和余额。

## <a name="turn-the-inventory-value-report-storage-feature-on-or-off"></a>打开或关闭库存值报表存储功能

从 Supply Chain Management 版本 10.0.25 开始，此功能默认开启。 管理员可以通过在 [功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作区搜索 *库存值报表存储* 功能来打开或关闭此功能。

## <a name="define-inventory-value-report-configurations"></a><a name="report-configuration"></a>定义库存值报表配置

使用 **库存值报表** 页面设置不同类型的库存值报表中包含的内容。 您可以定义任意数量的报表类型。 每次生成任一类型的库存值报表时，您将选择一种报表类型。

1. 转到 **成本管理 \> 库存会计政策设置 \> 库存值报表**。
1. 按以下步骤之一：

    - 要编辑现有报表，在列表窗格中选择它，然后在操作窗格上选择 **编辑**。
    - 要创建新报表，在操作窗格中选择 **新建**。

1. 在新报表或选定报表的标头上，设置以下字段：

    - **ID** – 为报表输入一个简短的标识符。 此值在所有库存值报表配置中必须是唯一的。 保存新配置后无法再进行编辑。
    - **名称** – 为报表输入描述性名称。

1. 如果您要创建新的报表配置，在操作窗格中选择 **保存** 以使其余字段可用。
1. 在 **常规** 快速选项卡上，设置以下字段：

    - **日期间隔** – 选择预先定义的日期间隔。 运行报表时，您可以替代此日期间隔。
    - **范围** – 选择 *发布日期* 或 *交易时间*，具体取决于检索报表记录时应使用的日期和时间。
    - **维度集** – 选择要为其运行数据的维度集。 （维度在总帐中定义。）例如，您可以为 *主科目* 或 *主科目 + 业务单位* 运行数据。 您选择的维度集不能超过两个维度。 有关详细信息，请参阅[财务维度集](../../finance/general-ledger/financial-dimension-sets.md)。

1. 在 **列** 快速选项卡上，设置以下字段。 这些字段控制您的报表包含的列以及这些列包含的数据类型。

    - **库存** – 将此选项设置为 *是* 将显示库存值。 然后，您可以将这些值与总帐科目余额进行对帐。
    - **WIP** – 将此选项设置为 *是* 将显示 WIP 值。 然后，您可以将这些值与总帐中的 WIP 科目余额进行对帐。 当您将此选项设置为 *是* 时，报表将仅显示具有 WIP 状态的库存的实际数量和金额。 具有 WIP 状态的生产订单已领料或已完工入库，但尚未结束。
    - **延期 COGS** – 将此选项设置为 *是* 将显示一列，其中显示延期 COGS 的库存的实际数量和金额。 延期 COGS 使用实际数量和金额显示，因为它抵消装箱单数量和金额。
    - **COGS** – 将此选项设置为 *是* 将显示一列，其中显示 COGS 的财务数量和金额。 COGS 使用财务数量和金额显示，因为它抵消发票数量和金额。
    - **损益** – 将此选项设置为 *是* 将显示一列，其中显示已过帐到库存损益科目的财务金额。
    - **打印累计科目值进行对比** – 将此选项设置为 *是* 将显示一列，显示总帐科目余额。 这样，您将不必检查线索余额。 此选项仅适用于标准 **库存值** 报表，不适用于 **库存值报表存储** 报表。 将此选项设置为 *是* 后，您必须使用以下字段指定要列出的每个总帐科目，具体取决于您已启用的 **财务状况** 选项。

        > [!NOTE]
        > 如果您为这些字段中的任何一个选择了 *总计* 科目，将显示总计科目中包含的每个库存科目的金额和总计科目的金额。

        - **库存科目** – 指定要为其显示库存信息的总帐科目。 （**库存** 选项和 **打印累计科目值进行对比** 选项都必须设置为 *是*。）
        - **WIP 科目** – 指定要为其显示 WIP 信息的总帐科目。 （**WIP** 选项和 **打印累计科目值进行对比** 选项都必须设置为 *是*。）
        - **延期 COGS 科目** – 指定要为其显示延期 COGS 信息的总帐科目。 （**延期 COGS** 选项和 **打印累计科目值进行对比** 选项都必须设置为 *是*。）
        - **COGS 科目** – 指定要为其显示 COGS 信息的总帐科目。 （**COGS** 选项和 **打印累计科目值进行对比** 选项都必须设置为 *是*。）

    - **汇总实际和财务值** – 将此选项设置为 *是* 将显示一列，其中显示库存总数量和库存总金额（实际和财务库存值的汇总）。 如果此选项设置为 *否*，报表将同时显示实际和财务库存值。
    - **包括未过帐到分类帐** 将此选项设置为 *是* 将显示一列，其中显示从未过帐到总帐的交易。 以下类型的物料的交易可能不会过帐到总帐：

        - 当为相关物料模型组清除 **过帐实际库存** 选项时，已收货但尚未开票的物料。
        - 当 **应付帐款参数** 页面（**应付帐款 \> 设置 \> 应付帐款参数**）**常规** 选项卡上 **产品收货** 快速选项卡上的 **在分类帐中对产品收货过帐** 选项被清除时，已收货但尚未开票的物料。

    - **计算平均单位成本** – 将此选项设置为 *是* 将显示一列，显示平均单位成本。 平均单位成本是总金额除以总数量得出的值。
    - **总数量和值** – 将此选项设置为 *是* 将显示其中显示实际库存总数量（和财务数量）和实际库存总金额（和财务金额）的列。 仅当 **汇总实际和财务值** 选项设置为 *否*，才能将此选项设置为 *是*。
    - **库存维度** – 在此网格中，为要在报表中显示的每个维度选中 **查看** 复选框。 只有启用了 **财务库存** 选项的维度才会在报表中显示值。 其他维度仅显示空白列。 对于您选择显示的那些维度，您可以选中 **总计** 复选框以同时包含总计。
    - **资源 ID** – 将 **查看** 选项设置为 *是* 将显示标识每行物料的列。 将 **总计** 选项设置为 *是* 将同时包含总计。 根据每行中列出的物料类型，此列显示以下信息类型之一：

        - **材料** – 列显示相关材料记录的 `ItemID` 字段值。
        - **人工** – 列显示相关人工记录的 `WorkCenterID` 字段值。
        - **间接成本** – 列显示相关成本记录的 `CodeID` 字段值。

        如果 **资源 ID** 字段和 **资源组** 字段的 **查看** 选项都设置为 *否*，您只会看到基于您选择的库存维度的总库存值。

    - **资源组** – 将 **查看** 选项设置为 *是* 将显示标识每行资源组的列。 将 **总计** 选项设置为 *是* 将同时包含总计。 根据每行中列出的物料类型，此列显示以下信息类型之一：

        - **材料** – 列显示相关材料记录的 `ItemGroup` 字段值。
        - **人工** – 列显示相关人工记录的 `WorkcenterGroup` 字段值。
        - **间接成本** – 列显示相关成本记录的 `CostGroup` 字段值。 （`CostGroupType` 值必须是 *间接*。）

        如果 **资源 ID** 字段和 **资源组** 字段的 **查看** 选项都设置为 *否*，您只会看到基于您选择的库存维度的总库存值。

1. 在 **行** 快速选项卡上，设置以下字段。 这些字段使您可以将相应的 WIP 相关子部分添加到报表中或将其删除。

    - **材料** – 将此选项设置为 *是* 将显示有关材料的信息。 *材料* 是默认资源类型，因为材料必须包含在所有报表配置中才能创建可靠的输出。
    - **人工** – 将此选项设置为 *是* 将显示 WIP 的人工成本。
    - **间接成本** – 将此选项设置为 *是* 将显示 WIP 的间接成本。
    - **直接外包** – 将此选项设置为 *是* 将显示 WIP 的直接外包成本。 此信息对于转包很有用。
    - **详细程度** – 为报表选择视图选项：

        - *交易* – 在报表上查看所有相关交易。 请注意，当您查看包含大量交易的报表时，您可能会遇到性能问题。 因此，如果您想使用此查看选项，我们建议您使用 **库存值报表存储** 报表。
        - *总计* – 查看总结果。

    - **包括期初余额** – 将此选项设置为 *是* 将显示期初余额。 此选项仅在 **详细程度** 字段设置为 *交易* 时可用。

## <a name="generate-an-inventory-value-report-storage-report"></a>生成库存值报表存储报表

请执行以下步骤生成并存储 **库存值报表存储** 报表。

1. 转到 **成本管理 \> 查询和报表 \> 库存值报表存储**。
1. 在操作窗格上，选择 **新建**。
1. 在 **库存值** 对话框中，在 **参数** 快速选项卡上，设置以下字段：

    - **名称** – 为报表输入唯一名称。
    - **ID** – 选择要用于报表的[库存值报表配置](#report-configuration)。 此配置为将包含在您的报表中的列和行建立选项。
    - **日期间隔** – 使用本节中的字段定义报表中包含哪些记录。 要定义日期间隔，您可以在 **日期间隔代码** 字段中选择预设范围（相对于报表生成日期），也可以在 **开始日期** 和 **结束日期** 字段中选择特定日期。

1. 在 **要包括的记录** 快速选项卡上，设置筛选器和约束以定义要在报表中包括的数据。 选择 **筛选器** 打开标准查询编辑器对话，您可以在其中定义选择条件、排序条件和联接。 这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的查询时一样。 所有这些筛选器都将应用于库存交易，但不会应用于总帐余额。 设置筛选器时请记住此行为。 否则，库存和总帐之间可能会出现差异。
1. 在 **在后台运行** 快速选项卡上，指定生成报表的方式、时间和频率。 这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的[后台作业](../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)时一样。

    > [!NOTE]
    > 此报表始终作为批处理作业的一部分运行。

1. 选择 **确定** 应用设置并关闭对话框。

批处理作业完成后，报表将在 **库存价值报表存储** 页面上列出。 可能必须刷新页面才能查看报表。

> [!IMPORTANT]
> 在选定的库存值报表配置中，如果您在 **开始日期** 字段和 **结束日期** 字段中选择了相同的日期，并且如果您还将 **包括期初余额** 选项设置为 *是*，可能会获得不正确的期初余额。

## <a name="explore-an-inventory-value-report-storage-report"></a>浏览库存值报表存储报表

生成报表后，您可以按照以下步骤随时查看和浏览报表。

1. 转到 **成本管理 \> 查询和报表 \> 库存值报表存储**。
1. 在列表中选择一个报表。 页面将显示用于生成所选报表的[库存值报表配置](#report-configuration)的详细信息。
1. 在操作窗格上，选择 **查看详细信息** 显示报表内容。
1. 通过执行以下任何一个步骤来浏览报表：

    - 对于 Supply Chain Management 中的大多数标准页面，您可以选择几乎任何列标题，来按该列中的值对网格进行排序或筛选。
    - 使用 **筛选** 字段按几个可用列中任何一列的任何值筛选报表。
    - 使用查看菜单（位于 **筛选** 字段上方）保存和加载您喜欢的排序和筛选选项组合。

## <a name="export-an-inventory-value-report-storage-report"></a>导出库存值报表存储报表

生成的所有报表都存储在 **库存值** 数据实体中。 可使用 Supply Chain Management 的标准数据管理功能将此实体中的数据导出到任何支持的数据格式，如 CSV 或 Excel 格式。

以下示例显示了如何导出 **库存值报表存储** 报表。

1. 转到 **系统管理 \> 工作区 \> 数据管理**。
1. 在 **导入/导出** 部分，选择 **导出** 磁贴。
1. 在出现的 **导出** 页面上，设置导出作业。 首先输入作业的组名称。
1. 在 **选定实体** 部分，选择 **添加实体**。
1. 在出现的对话框中，设置以下字段：

    - **实体名称** – 选择 *库存值*。
    - **目标数据格式** – 选择数据要导出的格式。

1. 选择 **添加** 添加新行，然后选择 **关闭** 关闭对话框。
1. 通常一次导出一个报表。 要导出单个报表，为您刚刚添加到 **查询** 对话框的行设置一个筛选器。 通过这种方式，您可以定义 **库存值** 实体中的哪个报表包含在导出中。 按照以下步骤设置以下筛选选项以导出单个报表：

    1. 在 **范围** 选项卡中，选择 **添加** 添加行。
    2. 将 **表** 字段设置为 *库存值*。
    3. 将 **派生表** 字段设置为 *库存值*。
    4. 将 **字段** 字段设置为要充当筛选依据的字段。 通常，您将使用 **执行名称** 字段和/或 **执行时间** 字段。
    5. 将 **条件** 字段设置为要在所选字段中查找的值。 （如果您在上一步中选择了 **执行名称** 字段，此值将成为报表的名称。 如果您选择了 **执行时间** 字段，它将是生成报表的时间。）
    6. 根据需要向 **范围** 选项卡添加更多行，直到唯一确定了要查找的报表。

1. 选择 **确定** 保存设置并关闭对话框。
1. 选择 **保存** 则保存导出设置。
1. 在 **导出选项** 选项卡上，选择 **立即导出** 生成导出文件。
1. 在出现的 **执行摘要** 页上，您可以查看导出作业的状态和导出的实体的列表。 在 **实体处理状态** 部分，选择列表中的 **库存值** 实体，然后选择 **下载文件** 下载从该实体导出的数据。

有关如何使用数据管理导出数据的详细信息，请参阅[数据导入和导出作业概述](../../fin-ops-core/dev-itpro/data-entities/data-import-export-job.md)。

## <a name="generate-a-standard-inventory-value-report"></a>生成标准库存值报表

使用以下过程生成标准 **库存值** 报表。

1. 转到 **成本管理 \> 查询和报表 \> 库存会计 - 状态报表 \> 库存值**。
1. 在 **库存值报表** 对话框中，在 **参数** 快速选项卡上，设置以下字段：

    - **名称** – 为报表输入唯一名称。
    - **ID** – 选择要用于报表的[库存值报表配置](#report-configuration)。 此配置为将包含在您的报表中的列和行建立选项。
    - **日期间隔** – 使用本节中的字段定义报表中包含哪些记录。 要定义日期间隔，您可以在 **日期间隔代码** 字段中选择预设范围（相对于报表生成日期），也可以在 **开始日期** 和 **结束日期** 字段中选择特定日期。

1. 在 **要包括的记录** 快速选项卡上，设置筛选器和约束以定义要在报表中包括的数据。 选择 **筛选器** 打开标准查询编辑器对话，您可以在其中定义选择条件、排序条件和联接。 这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的查询时一样。
1. 在 **在后台运行** 快速选项卡上，指定生成报表的方式、时间和频率。 这些字段的工作方式与它们用于 Supply Chain Management 中其他类型的[后台作业](../../fin-ops-core/dev-itpro/sysadmin/batch-processing-overview.md)时一样。
1. 选择 **确定** 应用设置并关闭对话框。 报表将出现。

## <a name="reading-inventory-value-reports"></a>阅读库存值报表

本节提供有关如何阅读和理解库存值报表的一些指导。

Supply Chain Management 支持以下两个与库存状态相关的重要概念：

- **财务更新** – 此概念表示库存交易已经开票。 对于生产订单，它表示生产订单结束。
- **实际更新** – 此概念表示库存交易尚未开票，但已收货或装运。 对于生产订单，它表示材料已领取或生产订单已完工入库。

理解了这两个概念后，应该很容易理解报表输出中的以下列：

- **库存：财务数量** – 财务更新的数量。
- **库存：财务金额** – 财务更新的库存金额值。
- **库存：已过帐实际数量** – 实际更新的数量。
- **库存：已过帐实际金额** – 实际更新的库存金额值。
- **库存：未过帐实际数量** – 具有库存交易但尚未过帐到总帐的数量。 例如，例如，您有一个物料模型组，其中清除了 **过帐实际库存** 和 **过帐财务库存** 选项，并且您有链接到该组的物料。 然后您创建采购订单、接收订单并为其开票。 此时，如果您查看物料的库存值报表，您将看到采购订单上的数量和值显示在 **库存：未过帐实际数量** 和 **库存：未过帐实际金额** 列中。
- **库存：未过帐实际金额** – 您可以设置您的报表，让它们显示未过帐的金额。 但是，如果您将报表用于库存对帐，请不要使用此值。 否则，金额不会过帐到总帐。
- **库存：数量** – 报表上所有数量列的总数量。
- **库存：金额** – 报表上所有金额列的总数量。 在对库存进行对帐时，如果您的报表包含 **库存：未过帐实际金额** 列，请不要使用此列。 在这种情况下，您必须从总金额中排除 **库存：未过帐实际金额** 金额。
- **平均单位成本** – 总金额除以总数量。

通常，您将使用库存值报表来查看库存值和数量。 但是，有时此报表不会显示所有相关的库存维度。 如果您没有看到需要的维度，请验证以下设置：

- 查看物料存储和跟踪维度组。 只有启用了 **财务库存** 选项的维度才能够在报表中显示。
- 转到 **成本管理 \> 库存会计政策设置 \> 库存值报表**，选择您用于生成报表的报表配置，并确保在 **查看** 列中选择了所需的库存维度。

例如，您有一个物料编号为 *A0001* 的物料。 在存储维度组中，只有站点启用了财务库存。 站点和仓库都启用了实际库存。 在跟踪维度组中，对实际库存启用了批号，但财务库存未启用。 然后您使用站点、仓库和批号全部已选择的报表配置。 查看报表时，您只看到了站点的值。 仓库和批号列是空白的。 如本示例所示，库存值报表只能显示为财务库存启用的库存维度。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
