---
title: 移动平均成本价
description: 库存结转过程基于在物料的物料模型组中选择的库存评估方法将发货交易记录结算到收货交易记录。 但在运行库存结转前，此系统将计算通常在过帐发货交易记录时使用的移动平均成本价。
author: AndersGirke
ms.date: 02/02/2022
ms.topic: article
ms.search.form: InventModelGroup, InventOnhandItem, InventTrans
audience: Application User
ms.reviewer: kamaybac
ms.custom: 79003
ms.search.region: Global
ms.author: aevengir
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 871b3ffce45848f95d132eff3fd327295bc5084c
ms.sourcegitcommit: fefe93f3f44d8aa0b7e6d54cc4a3e5eca6e64feb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/04/2022
ms.locfileid: "8092181"
---
# <a name="running-average-cost-price"></a>移动平均成本价

[!include [banner](../includes/banner.md)]

库存结转过程基于在物料的物料模型组中选择的库存评估方法将发货交易记录结算到收货交易记录。 但在运行库存结转前，此系统将计算通常在过帐发货交易记录时使用的移动平均成本价。

此系统通过使用以下公式，评估物料的这一移动平均成本价：

估计价格 = (实际金额 + 财务金额) ÷ (实际数量 + 财务数量)

## <a name="default-item-cost"></a>默认物料成本

已发布产品的默认物料成本可以在 **已发布产品详细信息** 页面上通过以下两种方式之一配置：

- 通过在操作窗格的 **管理成本** 选项卡的 **设置** 组中选择 **物料价格** 来创建标准成本。 如果您使用此方法，则必须使用标准成本计算版本，并且必须激活成本。
- 通过在 **管理成本** 快速选项卡的 **价格** 字段中输入一个值，为已发布产品定义默认物料成本价格。

除了输入或创建价格外，您还可以在 **已发布产品详细信息** 页面的 **管理成本** 快速选项卡上选中 **使用最新成本价** 复选框。 在这种情况下，系统将在您发布财务更新时自动更新 **价格** 字段。 例如，如果您过帐采购订单发票，此字段将被设置为该发票中的采购价格。

如果您在有效成本计算版本中有成本价，在 **管理成本** 快速选项卡上输入价格时，系统将先使用有效成本计算版本中的价格，然后再使用在 **管理成本** 快速选项卡上定义的价格。

## <a name="using-the-running-average-cost-price"></a>使用移动平均成本价

下表显示此系统何时使用移动平均成本价过帐库存交易记录，以及何时改为使用在物料主记录上定义的成本价。

| 条件 | 此系统使用估计的移动平均成本价 | 此系统使用默认物料成本价 |
| --- | --- | --- |
| 分子\* 和分母\*\* 均为正。 | 是 | 否 |
| 分子\*、分母\*\* 或二者均为负。 | 否 | 是 |
| 分母\*\* 为 0（零）。 | 否 | 是 |

\* 分子 =（实际金额 + 财务金额）  
\*\* 分母 =（实际数量 + 财务数量）

> [!NOTE]
> 如果没有为某一物料选择 **包括实际成本** 选项，则系统使用 0（零）来用于实际金额和实际数量。 有关此选项的信息，请参阅[包括实际成本](include-physical-value.md)。

## <a name="avoiding-pricing-amplification"></a>避免价格放大

偶尔，此系统在不具有标价所基于的足够收货前就给若干发货标价。 此情况可能导致移动平均成本价的估计过度膨胀。 不过，您可以采取一些步骤来避免价格放大，或者在该情况发生后减少其影响。

**场景：** 以下交易记录发生于您为其选择 **包括实际成本** 的物料：

1. 您在财务上收到数量 100（USD 100.00）。
2. 您在财务上发货数量为 200。
3. 您实际上收到数量 101（USD 202.00）。

在您检查该物料的估计移动平均成本价时，您预期成本价为 USD 1.51。 而您发现基于以下公式预期移动平均成本价达 USD 102.00：

估计价格 = \[202 + (-100)\] ÷ \[101 + (-100)\] = 102 ÷ 1 = 102

发生此定价增加情况是因为在第 2 步中财务上发货 200 个物料时，系统必须在其具有任何相应收据前为其中 100 个物料定价。 此情况导致负库存。 此系统然后估计为 USD 1.00，如您的预期。 但是，在相应的 100 收货到达时，其每个收货的单位价格为 USD 2.00。

> [!NOTE]
> 尽管这些发货生成负库存，但在计算发货价格时，库存为正。 因此，使用移动平均成本价，而非物料主记录上的价格。 此时，此系统将具有 USD 100.00 的库存价值抵消。 虽然该抵消累积到高于 100 件，每件的单位抵消为 USD 1.00，但您现在库存中只有一件。 因此，将抵消 USD 100.00 分配给此单件。 结果是过度膨胀的估计成本价。
>
> 为了进行比较，请注意，如果在此情况中撤消第 2 步和第 3 步，则 200 个物料将按单位价格 USD 1.51 发货，并且一件仍将保持在单位价格 USD 1.51。 因为在涉及负库存时可能发生此价格放大的情况，所以，在以下情况下很难避免：
>
> - 您必须基于现有价值和数量评估发货价格。
> - 您必须调整针对发货和收货的现有价值和数量。
> - 您的业务模型允许您对超过现有件数的物料进行发货或标价。
> - 您必须接受提交给您的任何收货价值和数量。

不过，如果您的业务模型允许以下行为，则它们可帮助您避免可能造成价格放大情况的负数量：

- 如果您为物料选中 **包括实际成本** 选项，则取消选中 **物料模型组** 页上的 **允许实际负库存** 复选框。
- 如果您 **没有** 为物料选中 **包括实际成本** 选项，则取消选中 **物料模型组** 页上的 **允许财务负库存** 选项。

此外，请考虑您的实际库存价值中的最大抵消受到实际交易记录的数目以及实际价格和财务价格之间的差异的限制。 假设最终在财务上更新了所有实际交易记录，实际价值就不会突升。 最后，请注意，如果累积的抵消分散到多个现有件数上，而非只是一件上时，这一价格放大的影响会显著降低。

## <a name="avoid-a-zero-cost-price-on-issues"></a>避免在发货时出现零成本价

如果未在 **物料模型组** 页面上选择 **包括实际成本** 选项，如果库存中没有财务更新的收货，库存发货的成本价可能为零。 为帮助避免这种情况，请考虑以下选项：

- 在 **物料模型组** 页面上选择 **包括实际成本** 选项。 如果收货进行了实际更新，此选项将防止发货出现零成本价。 如果您不允许实际库存为负，发货将通过实际更新的交易记录计算移动平均值。
- 通过激活具有标准成本的成本计算版本来创建默认物料成本价，或在 **已发布产品详细信息** 页面的 **管理成本** 快速选项卡上输入价格。 当未在 **物料模型组** 页面上选择 **包括实际成本** 选项时，此选项最适用，因为系统始终有可以使用的回退价格。
- 在 **已发布产品详细信息** 页面的 **管理成本** 快速选项卡上选择 **使用最新成本价** 选项。 每次您在财务上更新收货时，此选项都会使 **价格** 字段保持最新。 如果您选择此选项，但未输入默认价格或未在标准成本计算版本中激活成本，您仍可以对某个发货使用零成本。

如果您有成本为零的发货交易记录，*库存结转和调整* 流程将在收货财务更新后通过创建调整来更正成本价。 请注意，进行此更新的财务期间可能不同于物料实际收货或发货的财务期间。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
