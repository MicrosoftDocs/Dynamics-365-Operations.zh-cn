---
title: 使用扣缴工作台管理扣缴
description: 本主题描述了如何使用扣缴工作台来处理包含扣缴的客户付款。
author: sherry-zheng
ms.date: 08/02/2021
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: chuzheng
ms.search.validFrom: 2021-08-02
ms.dyn365.ops.version: 10.0.21
ms.openlocfilehash: 04d7c1de85978f7915246fd835a0866cefb6de310bba240ebcadc57089e10521
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/05/2021
ms.locfileid: "6735103"
---
# <a name="manage-deductions-using-the-deduction-workbench"></a>使用扣缴工作台管理扣缴

[!include [banner](../includes/banner.md)]
[!INCLUDE [preview-banner](../includes/preview-banner.md)]

本主题描述了如何使用扣缴工作台来处理包含扣缴的客户付款。

被欠返点的客户可以决定不等待返点支出。 相反，客户可以发送包括扣缴了返点金额的付款。 为了处理此类交易，您可以使用扣缴工作台匹配扣缴打开贷方交易、拆分扣缴、拒绝扣缴和勾销扣缴。

> [!NOTE]
> 长期以来，扣缴工作台一直是 Microsoft Dynamics 365 Supply Chain Management 中销售和市场营销功能的一部分。 但是，它现在已得到了增强，因此它也可以与更新的 **返点管理** 模块配合使用。 本主题介绍如何使用扣缴工作台的旧功能和返点管理功能。 但是，如果您还没有 [为您的系统开启 **返点管理** 模块](rebate-management-enable.md)，那么您将无法使用此处描述的某些功能。

## <a name="prerequisites"></a>先决条件

### <a name="set-up-the-old-deduction-management-system"></a>设置旧的扣缴管理系统

即使您未使用 **返点管理** 模块，也可以将扣缴工作台与 Supply Chain Management 的旧扣缴管理功能一起使用。 但是，您必须先准备系统，如此节中所述。

在您可以使用扣缴工作台之前，您必须完成[设置扣缴管理](/dynamicsax-2012/appuser-itpro/set-up-deduction-management)中描述的设置任务。 还应为客户设置某种返点协议类型：[设置和维护客户返点](/dynamicsax-2012/appuser-itpro/setting-up-and-maintaining-customer-rebates)中描述的客户返点，或贸易折让返点。

如果您要将扣缴应用于客户返点，则必须完成以下任务：

- [设置客户返点](/dynamicsax-2012/appuser-itpro/setting-up-and-maintaining-customer-rebates)。
- 审核并处理返点，以便您可以使用扣缴工作台。

如果您要将扣缴应用于贸易折让返点，则必须完成以下任务：

- 设置返回帐单返点。
- 应用返回帐单返点。

### <a name="configure-accounts-receivable-and-deductions"></a><a name="accounts-receivable-deductions"></a>配置应收帐款和扣缴

系统将所有扣缴事件记录在索赔日记帐中。 因此，您的系统必须包括可用于此目的的日记帐。 如果您尚未拥有索赔日记帐，请立即设置它。 需要此日记帐才能直接在扣缴工作台、客户结算或客户页面上创建扣缴。

若要为扣缴设置新的索赔日记帐，请执行以下步骤。

1. 转到 **总帐 \> 日记帐设置 \> 日记帐名称**。
1. 选择 **新建**，并为新日记帐名称设置以下字段：

    - **名称** - 输入索赔日记帐的唯一名称。
    - **描述** – 输入新日记帐的描述。
    - **日记帐类型** - 选择 *每日*。
    - **凭证系列** - 分配现有编号规则。 或者，创建具有公司范围的新编号规则，并将其分配给新的日记帐名称。

1. 转至 **应收帐款 \> 设置 \> 应收帐款参数**。
1. 在 **扣缴** 选项卡上的 **常规** 快速选项卡上，将 **索赔日记帐名称** 字段设置为您刚才创建的日记帐名称。
1. 在 **退货单** 快速选项卡上，设置以下字段：

    - **创建退货单** - 设置此选项以指定在审核了基于数量的索赔时系统应执行的操作：

        - *是* - 创建退货单。
        - *否* - 创建负销售订单。

    - **在没有附加发票的情况下创建** - 选择值以指定在审核了基于数量的索赔但未附加发票时系统应执行的操作：

        - *接受* - 创建退货单。
        - *警告* - 创建退货单，但显示以下警告消息：“索赔未附加到发票。”
        - *错误* - 不创建退货单，并显示以下错误消息：“索赔未附加到发票。 已取消更新。”

    - **在审核扣缴之前创建退货单** - 如果可以在审核索赔之前创建退货单，则将此选项设置为 *是*。 此设置仅适用于 **创建退货单** 选项设置为 *是* 的基于数量的索赔。

### <a name="configure-general-ledger-parameters"></a>配置总帐参数

当系统为新扣缴创建索赔日记帐时，它还将创建两个新客户交易：一个用于抵消原始发票的索赔金额，另一个用于将客户的债务登记到索赔金额（因为尚未审核索赔）。 因此，必须设置您的系统，以便单个凭证可以具有多个客户行。

要使单个凭证可以具有多个客户行，请按照以下步骤操作。

1. 转到 **总帐 \> 分类帐设置 \> 总帐参数**。
1. 在 **分类帐** 选项卡上的 **常规** 快速选项卡上，将 **一个凭证可以允许多个交易记录** 选项设置为 *是*。
1. 如果您收到警告消息，请选择 **关闭** 以接受更改。

### <a name="create-deduction-reasons"></a><a name="deduction-reasons"></a>创建扣缴原因

系统要求用户为直接在扣缴工作台、客户结算或客户页面上输入的每个扣缴指定原因。 原因确定在审核扣缴后如何处理扣缴。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴原因**。
1. 选择 **新建** 以向网格添加一行，然后为其设置以下字段：

    - **索赔原因** - 输入原因的唯一名称。
    - **描述** – 输入原因的描述以提供有关应如何使用原因的详细信息。
    - **索赔依据** - 选择索赔原因的索赔依据：

        - *基于价格* - 审批后创建普通贷方通知单。
        - *基于数量* - 审批后创建负销售订单或退货单。

    - **退货原因代码** - 选择要作为退货单的 **退货原因代码** 值应用的退货原因代码。
    - **类型** – 选择一种扣缴类型。 所选类型的 **扣缴抵销** 值将用于在创建扣缴或索赔时设置 **扣缴抵销** 字段。 扣缴类型在 **扣缴类型** 页面（**销售和市场营销 \> 贸易折让 \> 扣缴 \> 扣缴类型**）上定义。
    - **索赔过帐帐户** - 仅当 **索赔依据** 字段设置为 *基于价格* 时，此字段才可用。 审核基于价格的索赔后，系统会将您在此处选择的会计科目指定为草稿普通贷方通知单的 **主帐户** 值。

### <a name="set-up-the-settle-approved-deductions-periodic-task"></a>设置结算审核的扣缴定期任务

对于通过在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴，您可以将 *结算审核的扣缴* 定期任务设置为自动匹配具有匹配的 **扣缴 ID** 值和金额的扣缴和贷记。

若要计划此任务，请转到 **销售市场营销 \> 定期任务 \> 结算审核的扣缴**，并设置选项、筛选器和计划，就像处理其他类型的定期任务一样。

> [!NOTE]
> 如果在 **应收帐款参数**（**应收帐款 \> 设置 \> 应收帐款参数**）页面的 *结算* 选项卡上将 **自动结算** 选项设置为 **是**，则 *结算审核的扣缴* 定期任务将不会执行任何操作，因为将自动结算贷方。

## <a name="create-a-deduction"></a>创建扣缴

### <a name="create-a-deduction-journal-entry-by-using-the-customer-payment-journal"></a>使用客户付款日记帐创建扣缴日记帐条目

要创建扣缴日记帐条目，请执行以下步骤：

1. 转到 **应收帐款 \> 付款 \> 客户付款日记帐**。
1. 选择 **新建** 向网格添加行。
1. 在新行的 **名称** 字段中，选择日记帐的名称。
1. 在操作窗格上，选择 **行**。
1. 输入日期、公司帐户和客户帐号。
1. 在 **发票** 字段中，选择与扣缴关联的发票。
1. 在 **贷方** 字段中，输入客户支付的金额。
1. 选择 **确定** 来确认金额少于标记的交易记录的总额。
1. 选择抵销帐户类型和抵销帐户。
1. 在网格上方的工具栏上，选择 **扣缴**。
1. 在 **扣缴** 页上的操作窗格上，选择 **新建** 在网格中添加一行。 系统会自动设置新行的 **扣缴 ID** 字段。
1. 在 **类型** 字段中，选择扣缴类型。
1. 在 **金额** 字段中，输入扣缴列表下面的 **余额** 字段中显示的金额。 此金额表示客户从付款中扣缴的金额。
1. 关闭 **扣缴** 页面。 您已返回到 **客户付款** 页面，该页面现在显示扣缴的新行。
1. 在操作窗格上选择 **验证 \> 验证**。 应接收以下信息：“该日记帐有效。”
1. 在操作窗格上，选择 **过帐**。

### <a name="create-a-deduction-by-using-the-deduction-workbench"></a>使用扣缴工作台创建扣缴

要在扣缴工作台中创建新扣缴，请执行以下步骤。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 在操作窗格上选择 **维护 \> 新建扣缴**。

    在 **新建扣缴** 对话框中，根据在 **贸易折让管理参数** 页（**销售和市场营销 \> 设置 \> 贸易折让 \> 贸易折让管理参数**）上定义的 **扣缴 ID** 编号规则设置 **扣缴 ID** 字段。

1. 设置以下字段：

    - **客户帐户** - 选择扣缴适用的客户帐户。
    - **外部索赔编号** - 输入客户的索赔参考。
    - **索赔金额** - 输入含税的索赔金额。 该值必须为正。
    - **币种** - 选择扣缴的币种。 默认值是为所选客户帐户设置的币种。
    - **索赔依据** - 选择索赔依据。 索赔依据确定在审核扣缴或索赔后创建的贷方交易记录的类型。

        - *基于价格* - 将创建草稿普通发票。
        - *基于数量* - 将创建负销售订单或退货单。

    - **索赔日期** - 选择索赔的日期。 默认值是当前日期。
    - **索赔原因** - 选择适用于当前扣缴的原因代码。 您选择的索赔依据会影响应用的选项。 有关如何创建和配置可在此处选择的索赔原因的详细信息，请参阅本主题前面的[创建扣缴原因](#deduction-reasons)部分。
    - **注释** - 添加应用的任何注释。 审核索赔后，审批者将能够编辑或添加到索赔的注释。
    - **创建索赔日记帐** - 设置此选项以指定在创建索赔或扣缴时是否应创建索赔日记帐：

        - *是* - 系统将使用在 **应收帐款参数** 页面上设置的索赔日记帐创建和过帐总帐。 （有关详细信息，请参阅本主题前面的[配置应收帐款和扣缴](#accounts-receivable-deductions)部分。）将发票附加到索赔时，索赔日记帐用于减少适用发票的余额。 如果索赔以后被拒绝，则索赔日记帐和结算（如果附加了发票）将被冲销。
        - *否* - 此时未创建索赔日记帐。 将在审核索赔时创建它。 即使未创建索赔日记帐，仍可以将发票附加到新索赔。 但是，如果没有索赔日记帐，则无法进行结算。

1. 选择 **确定**。

    此时会创建新扣缴。 如果将 **创建索赔日记帐** 选项设置为 *是*，则将过帐以下交易记录：

    - **两个新客户交易记录** - 一个交易记录抵消原始发票的索赔金额。 其他交易记录将客户的债务登记到索赔金额，因为尚未审核索赔。 当您通过在操作窗格上选择 **维护 \> 附加发票** 来附加发票时，原始发票交易记录和抵销索赔交易记录将自动标记为要进行结算。
    - **两个抵销交易记录** - 这些交易记录将过帐到 **扣缴抵销** 会计科目。
    - **索赔日记帐** - 若要查看扣缴工作台上显示的每个扣缴的索赔日记帐，请选择 **参考** 选项卡。索赔日记帐会显示在 **日记帐批处理号** 字段中。 您还可以在 **扣缴事件** 选项卡上查看索赔日记帐。在那里，它将具有 **匹配** 的 *更新类型* 值。

### <a name="create-a-deduction-from-a-customer-settlement"></a>从客户结算创建扣缴

从客户结算创建扣缴的流程类似于通过扣缴工作台创建扣缴的流程。 但是，将自动设置客户和发票币种，并且会附加发票。 当您通过客户结算页面创建索赔或扣缴时，您不必在操作窗格上选择 **维护 \> 附加发票**。

1. 转到 **应付帐款 \> 客户 \> 所有客户**。
1. 选择要为其创建扣缴的客户。
1. 在操作窗格上 **收款** 选项卡上的 **结算** 组中，选择 **结算交易**。
1. 在 **设置交易记录** 对话框中，在 **概览** 选项卡上，选择创建扣缴所根据的发票。
1. 在工具栏上，选择 **扣缴 \> 新建扣缴**。

    在 **新建扣缴** 对话框中，根据在 **贸易折让管理参数** 页（**销售和市场营销 \> 设置 \> 贸易折让 \> 贸易折让管理参数**）上定义的 **扣缴 ID** 编号规则设置 **扣缴 ID** 字段。 **客户帐户** 字段设置为扣缴适用的客户帐户。

1. 设置以下字段：

    - **外部索赔编号** - 输入客户的索赔参考。
    - **索赔金额** - 输入含税的索赔金额。 该值必须为正。
    - **币种** - 选择扣缴的币种。 默认值是为所选客户帐户设置的币种。
    - **索赔依据** - 选择索赔依据。 索赔依据确定在审核扣缴或索赔后创建的贷方交易记录的类型。

        - *基于价格* - 将创建草稿普通发票。
        - *基于数量* - 将创建负销售订单或退货单。

    - **索赔日期** - 选择索赔的日期。 默认值是当前日期。
    - **索赔原因** - 选择适用于当前扣缴的原因代码。 您选择的索赔依据会影响应用的选项。 有关如何创建和配置可在此处选择的索赔原因的详细信息，请参阅本主题前面的[创建扣缴原因](#deduction-reasons)部分。
    - **注释** - 添加应用的任何注释。 审核索赔后，审批者将能够编辑或添加到索赔的注释。
    - **创建索赔日记帐** - 设置此选项以指定在创建索赔或扣缴时是否应创建索赔日记帐：

        - *是* - 系统将使用在 **应收帐款参数** 页面上设置的索赔日记帐创建和过帐总帐。 （有关详细信息，请参阅本主题前面的[配置应收帐款和扣缴](#accounts-receivable-deductions)部分。）将发票附加到索赔时，索赔日记帐用于减少适用发票的余额。 如果索赔以后被拒绝，则索赔日记帐和结算（如果附加了发票）将被冲销。
        - *否* - 此时未创建索赔日记帐。 将在审核索赔时创建它。 即使未创建索赔日记帐，仍可以将发票附加到新索赔。 但是，如果没有索赔日记帐，则无法进行结算。

1. 选择 **确定**。

    此时会创建新扣缴。 如果将 **创建索赔日记帐** 选项设置为 *是*，则将过帐以下交易记录：

    - **两个新客户交易记录** - 一个交易记录抵消原始发票的索赔金额。 其他交易记录将客户的债务登记到索赔金额，因为尚未审核索赔。 当您通过在操作窗格上选择 **维护 \> 附加发票** 来附加发票时，原始发票交易记录和抵销索赔交易记录将自动标记为要进行结算。
    - **两个抵销交易记录** - 这些交易记录将过帐到 **扣缴抵销** 会计科目。
    - **索赔日记帐** - 若要查看扣缴工作台上显示的每个扣缴的索赔日记帐，请选择 **参考** 选项卡。索赔日记帐会显示在 **日记帐批处理号** 字段中。 您还可以在 **扣缴事件** 选项卡上查看索赔日记帐。在那里，它将具有 **匹配** 的 *更新类型* 值。

    您已返回到 **结算交易记录** 页面，该页面现在将所选发票显示为已标记。 只有当您将 **创建索赔日记帐** 选项设置为 **是** 时，*过帐* 按钮才可用。 如果可用，请选择 **过帐** 以按 **索赔金额** 值减少发票上的余额。

### <a name="create-a-deduction-from-a-customer-page"></a>从客户页面创建扣缴

从客户页面创建扣缴的流程类似于通过扣缴工作台创建扣缴的流程。 但是，系统将自动设置客户。

1. 转到 **应付帐款 \> 客户 \> 所有客户**。
1. 选择要为其创建扣缴的客户。
1. 在操作窗格上，在 **收款** 选项卡，在 **扣缴** 组中，选择 **创建扣缴**。

    在 **新建扣缴** 对话框中，根据在 **贸易折让管理参数** 页（**销售和市场营销 \> 设置 \> 贸易折让 \> 贸易折让管理参数**）上定义的 **扣缴 ID** 编号规则设置 **扣缴 ID** 字段。 **客户帐户** 字段设置为扣缴适用的客户帐户。

1. 设置以下字段：

    - **外部索赔编号** - 输入客户的索赔参考。
    - **索赔金额** - 输入含税的索赔金额。 该值必须为正。
    - **币种** - 选择扣缴的币种。 默认值是为所选客户帐户设置的币种。
    - **索赔依据** - 选择索赔依据。 索赔依据确定在审核扣缴或索赔后创建的贷方交易记录的类型。

        - *基于价格* - 将创建草稿普通发票。
        - *基于数量* - 将创建负销售订单或退货单。

    - **索赔日期** - 选择索赔的日期。 默认值是当前日期。
    - **索赔原因** - 选择适用于当前扣缴的原因代码。 您选择的索赔依据会影响应用的选项。 有关如何创建和配置可在此处选择的索赔原因的详细信息，请参阅本主题前面的[创建扣缴原因](#deduction-reasons)部分。
    - **注释** - 添加应用的任何注释。 审核索赔后，审批者将能够编辑或添加到索赔的注释。
    - **创建索赔日记帐** - 设置此选项以指定在创建索赔或扣缴时是否应创建索赔日记帐：

        - *是* - 系统将使用在 **应收帐款参数** 页面上设置的索赔日记帐创建和过帐总帐。 （有关详细信息，请参阅本主题前面的[配置应收帐款和扣缴](#accounts-receivable-deductions)部分。）将发票附加到索赔时，索赔日记帐用于减少适用发票的余额。 如果索赔以后被拒绝，则索赔日记帐和结算（如果附加了发票）将被冲销。
        - *否* - 此时未创建索赔日记帐。 将在审核索赔时创建它。 即使未创建索赔日记帐，仍可以将发票附加到新索赔。 但是，如果没有索赔日记帐，则无法进行结算。

1. 选择 **确定**。

    此时会创建新扣缴。 如果将 **创建索赔日记帐** 选项设置为 *是*，则将过帐以下交易记录：

    - **两个新客户交易记录** - 一个交易记录抵消原始发票的索赔金额。 其他交易记录将客户的债务登记到索赔金额，因为尚未审核索赔。 当您通过在操作窗格上选择 **维护 \> 附加发票** 来附加发票时，原始发票交易记录和抵销索赔交易记录将自动标记为要进行结算。
    - **两个抵销交易记录** - 这些交易记录将过帐到 **扣缴抵销** 会计科目。
    - **索赔日记帐** - 若要查看扣缴工作台上显示的每个扣缴的索赔日记帐，请选择 **参考** 选项卡。索赔日记帐会显示在 **日记帐批处理号** 字段中。 您还可以在 **扣缴事件** 选项卡上查看索赔日记帐。在那里，它将具有 **匹配** 的 *更新类型* 值。

## <a name="create-a-credit-note-for-a-customer"></a>为客户创建贷方通知单

在客户存在已审核的返点后，可以根据在客户帐户上创建贷方通知单来代表返点。 然后在扣缴工作台上显示贷记，它可匹配到扣缴。

要创建贷方通知单，请执行以下步骤。

1. 转到 **销售和市场营销 \> 客户 \> 所有客户**。
1. 选择客户。
1. 在操作窗格上 **收款** 选项卡上的 **结算** 组中，选择 **结算交易**。
1. 在 **结算交易记录** 对话框中，选择已应用返点的交易记录。
1. 在工具栏上的 **功能** 菜单上，选择适用的返点计划的类型。
1. 在 **返点** 页面上的 **概览** 选项卡上，选择相关返点 ID 旁边的 **标记** 复选框。
1. 在操作窗格上，选择 **功能 \> 创建贷方通知单**。

## <a name="process-a-deduction-on-the-deduction-workbench"></a>在扣缴工作台中处理扣缴

在扣缴工作台，可以把扣缴工作台与打开贷方交易、拆分扣缴、拒绝扣缴和勾销扣缴相匹配。

根据想要如何处理扣缴，请完成以下子部分中的一个或多个过程。 您可以根据需要组合这些过程。 例如，可以把扣缴拆分成两部分，然后匹配一部分到贷方，把剩余部分保留在工作台中，以便与后来的另一个贷方匹配。 还可把扣缴匹配到一个小于扣缴金额的贷方，然后拒绝或购销此扣缴的剩余余额。

### <a name="match-a-deduction-to-a-credit"></a>将扣缴与贷方匹配

若要将扣缴与贷方匹配，请按照以下步骤操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在 **未结交易记录** 部分中，选择要与扣缴匹配的贷方的 **标记** 复选框。 若列出多个贷方，可以选择多个贷方来匹配扣缴。 如果您希望系统自动选择与扣缴金额匹配的贷方，请在工具栏上的 **选择扣缴金额** 菜单上选择相应选项。
1. 在操作窗格上，选择 **维护 \> 匹配**。 系统把扣缴与贷方相匹配。 如果余额仍保留在扣缴中，则它将显示在 **扣缴** 选项卡上的 **剩余金额** 字段中。

    > [!NOTE]
    > 对于通过在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴，仅当 **索赔状态** 字段设置为 *已接受* 时，**维护 \> 匹配** 命令才可用。 此命令可用于手动将基于价格或基于数量的交易记录与 **未结交易记录** 部分中的关联贷方匹配。 此贷方是在以下时刻创建的：（使用 **维护 \> 审核扣缴** 命令）审核扣缴时，或在将扣缴附加到现有贷方时，如本主题后面的[在“审核扣缴”流程之外创建的贷方](#credits-outside-approval)中所述。 *结算审核的扣缴* 定期任务（**销售市场营销 \> 定期任务 \> 结算审核的扣缴**）也可用于自动匹配具有匹配的 **扣缴 ID** 值和金额的扣缴和贷记。

### <a name="split-a-deduction"></a>拆分扣缴

若要拆分扣缴，请按以下步骤进行操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格上，选择 **维护 \> 拆分**。
1. 在 **拆分** 对话框内的 **拆分金额** 字段中，输入要从主扣缴中拆分的金额。 然后选择 **确定**。
1. 在 **扣缴** 选项卡上，请注意拆分金额的新记录拆分将显示。 原始扣缴记录包含扣缴余额的剩余数量。 现在可以单独管理原始返点的两个部分。
1. 选择原始扣缴记录，然后选择 **参考** 选项卡。**拆分金额** 字段会显示从原始金额拆分的金额。

### <a name="attach-an-invoice-to-a-deduction"></a>将发票附加到扣缴

如果通过在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建扣缴，并且当前没有将发票附加到扣缴（即 **发票** 列为空），则您可以将发票附加到扣缴。

若要将发票附加到扣缴，请按照以下步骤操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格上，选择 **维护 \> 附加发票**。
1. 在 **附加发票** 对话框中，选择一张发票，然后选择 **确定**。
1. 在 **结算交易记录** 对话框中，执行以下其中一个步骤，具体取决于在创建扣缴时是否已过帐索赔日记帐：

    - 如果已过帐索赔日记帐，则您选择的发票和索赔日记帐的客户贷方交易记录在 **标记** 列中显示对号标记。 选择 **过帐**。 附加发票上的余额会减少，减少值为索赔金额。
    - 如果未过帐索赔日记帐，则交易记录不会在 **标记** 列中显示对号标记。 由于在审核扣缴之前无法抵销索赔日记帐，因此，请选择 **取消**。

### <a name="detach-an-invoice-from-a-deduction"></a>从扣缴中分离发票

如果通过在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建了扣缴，当前已将发票附加到此扣缴（即 **发票** 列显示发票编号），并且 **索赔状态** 字段设置为 *未结*，则您可以从扣缴中分离发票。 您可能会完成此任务，因为附加了不正确的发票。 发票已从扣缴中删除，如果在附加发票时减少了扣缴，则将更新该发票的余额。

若要分离发票，请执行以下步骤。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格中，选择 **维护 \> 分离发票**。

### <a name="approve-a-deduction"></a>审核扣缴

您可以审核在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴。 但是，您只能审核 **索赔状态** 字段设置为 *打开* 的扣缴。

若要审核扣缴，请按照以下步骤操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格上选择 **维护 \> 审核扣缴**。
1. 在 **审核扣缴** 对话框中，根据需要编辑信息或将信息添加到 **注释** 值。
1. 如果扣缴基于价格，并且发票尚未附加到该扣缴，请选择一个物料销售税组。 通常，在发票上设置了税项组。 因此，在税项代码未附加到发票时，必须指定该代码。
1. 选择 **确定**。

    此时，无法对扣缴进行进一步更改。 如果创建扣缴时 **创建索赔日记帐** 选项设置为 *否*，则在审核扣缴时会创建和过帐索赔日记帐。 审核扣缴后，将自动创建和打开贷项。 类型取决于扣缴的 **索赔依据** 值：

    - *基于价格* - 如果扣缴基于价格，则会为客户帐户创建普通发票。 您可以添加说明并过帐贷项。 创建草稿时，会按扣缴填写以下字段：

        - **扣缴 ID** - 此字段已添加到标题，以便能够追溯扣缴。
        - **主帐户** - 该值由为分配给扣缴的扣缴原因设置的 **索赔过帐帐户** 值来确定。
        - **物料销售税组** - 该值由附加的发票或您在审核扣缴时选择的值来确定。
        - **单位价格** - 该值是扣缴索赔金额的贷项。
        - **发票文本** - 默认情况下，此字段设置为扣缴的 **注释** 值。

    - *基于数量* - 如果扣缴基于数量，则将创建未结销售订单或退货单。 **[应收帐款参数](#accounts-receivable-deductions)** 页上的 **创建退货单** 设置可确定在审核扣缴时是创建销售订单还是退货单。 **复制订单** 页面将会显示并经过筛选，以显示 **发票帐户** 字段设置为扣缴客户帐户的行。 遵循以下步骤:

        1. 在 **发票** 快速选项卡上，**标题** 部分显示 **发票帐户** 值与扣缴的客户帐户匹配的销售发票。 选择适用的销售发票。
        1. **行** 部分显示所选销售发票中的行。 对于您要复制的每行，选择 **选择** 复选框。 或者，在 **标题** 部分中，选中销售订单的 **全选** 复选框以选择其所有行。
        1. 根据需要调整一个或多个行的 **数量** 值。

            您到目前为止选择的所有行都会列在 **要复制的选定行或标题** 快速选项卡上。

        1. 根据需要重复前两个步骤，直到 **要复制的选定行或标题** 快速选项卡上列出了所有需要的行为止。
        1. 选择 **确定**。

            新退货单已打开，并且自动设置了以下字段：

            - **扣缴 ID** - 此字段已添加到标题，以便能够追溯扣缴。
            - **退货原因代码** - 默认情况下，此字段设置为对分配给扣缴的扣缴原因设置的 **退货原因代码** 值。

对贷方开票后，它将显示在扣缴工作台的 **未结交易记录** 部分中，紧靠着适用的 **扣缴 ID** 值，并且其 **索赔类型** 字段设置为 *其他贷方*。 贷方将可用，直至通过以下方式之一用扣缴结算为止：

- 您可以在操作窗格上选择 **维护 \> 匹配** 来手动结算贷方。
- 它由 *结算审核的索赔* 定期作业（**销售和市场营销 \> 定期任务 \> 结算审核的索赔**）自动结算。
- 由于 **应收帐款参数** 页面的 **结算** 选项卡上的 **自动结算** 选项设置为 *是*，因此会自动结算。

若要查看审核扣缴时创建的贷方，您还可以在扣缴工作台的 **未结交易记录** 部分中使用 **未结贷项** 按钮。

### <a name="create-a-return-order"></a>创建退货单

您可以针对在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴创建退货单。 但是，必须满足以下所有条件：

- **索赔依据** 字段设置为 *基于数量*。
- **索赔状态** 设置为 *打开*。
- **[应收帐款参数](#accounts-receivable-deductions)** 页面的 **扣缴** 选项卡上的 **创建退货单** 选项设置为 *是*。
- **[应收帐款参数](#accounts-receivable-deductions)** 页面的 **扣缴** 选项卡上的 **在审核扣缴之前创建退货单** 选项设置为 *是*。

要创建退货单，请按照下列步骤操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格中，选择 **维护 \> 创建退货单**。
1. 在 **审核扣缴** 对话框中，根据需要编辑信息或将信息添加到现有 **注释** 值中，然后选择 **确定**。
1. 在 **复制订单** 对话框中的 **发票** 快速选项卡上，**标题** 部分显示 **发票帐户** 值与扣缴的客户帐户匹配的销售发票。 选择适用的销售发票。
1. **行** 部分显示所选销售发票中的行。 对于您要复制的每行，选择 **选择** 复选框。 或者，在 **标题** 部分中，选中销售订单的 **全选** 复选框以选择其所有行。
1. 根据需要调整一个或多个行的 **数量** 值。

    您到目前为止选择的所有行都会列在 **要复制的选定行或标题** 快速选项卡上。

1. 根据需要重复前两个步骤，直到 **要复制的选定行或标题** 快速选项卡上列出了所有需要的行为止。
1. 选择 **确定**。

    新退货单已打开，并且自动设置了以下字段：

    - **扣缴 ID** - 此字段已添加到标题，以便能够追溯扣缴。
    - **退货原因代码** - 默认情况下，此字段设置为对分配给扣缴的扣缴原因设置的 **退货原因代码** 值。

### <a name="deny-a-deduction"></a>拒绝扣缴

若要拒绝扣缴，请按以下步骤进行操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格上，选择 **维护 \> 拒绝**。
1. 在 **拒绝** 对话框中，选择拒绝的原因代码，然后选择 **确定**。
1. 在操作窗格下面的 **显示** 字段中，选择 *已关闭*。

    **扣缴** 选项卡会显示已拒绝的扣缴，并且扣缴的 **剩余金额** 字段设置为 *0.00*。

    对于在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴，会发生以下事件：

    - 在 **参考** 选项卡上，更新了 **拒绝** 部分中的字段。
    - 如果您在创建扣缴时选择了创建索赔日记帐，并且发票已附加到减少发票余额的扣缴，则会分离发票，并且先前附加的发票的余额将因拒绝的索赔金额而增加。
    - 扣缴的 **状态** 字段设置为 *已关闭*。
    - 扣缴的 **索赔状态** 字段设置为 *已拒绝*。

要撤销拒绝，请按以下步骤进行操作。

1. 在 **扣缴** 选项卡上，选择拒绝的扣缴。
1. 在操作窗格上，选择 **撤销拒绝**。

    对于在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴，会发生以下事件：

    - 在 **参考** 选项卡上，更新了 **拒绝** 部分中的字段。
    - 扣缴的 **状态** 字段设置为 *打开*。
    - 扣缴的 **索赔状态** 字段设置为 *打开*。

### <a name="write-off-a-deduction"></a>勾销扣缴

若要勾销扣缴，请按照以下步骤操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格上，选择 **维护 \> 勾销**。
1. 在 **勾销** 对话框中，选择勾销的原因代码，然后选择 **确定**。
1. 在 **显示** 字段中，选择 *已关闭*。

    **扣缴** 选项卡会显示已勾销的扣缴，并且扣缴的 **剩余金额** 字段设置为 *0.00*。

    对于在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴，会发生以下事件：

    - 在 **参考** 选项卡上，更新了 **勾销** 部分中的字段。
    - 如果您在创建扣缴时创建了索赔日记帐，则索赔日记帐会过帐到扣缴的勾销原因代码。 您可以在 **扣缴事件** 选项卡上查看此条目，在此选项卡中，此条目具有 **勾销** 的 *更新类型* 值。
    - 扣缴的 **状态** 字段设置为 *已关闭*
    - 扣缴的 **索赔状态** 字段设置为 *勾销*。

若要撤销勾销，请按照以下步骤操作。

1. 在 **扣缴** 选项卡上，选择拒绝的扣缴。
1. 在操作窗格上，选择 **撤销勾销**。

    对于在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴，会发生以下事件：

    - 在 **参考** 选项卡上，更新了 **勾销** 部分中的字段。
    - 如果您在创建扣缴时创建了索赔日记帐，则索赔日记帐会过帐到扣缴的勾销原因代码。 您可以在 **扣缴事件** 选项卡上查看此条目，在此选项卡中，此条目具有 **撤销勾销** 的 *更新类型* 值。
    - 扣缴的 **状态** 字段设置为 *打开*。
    - 扣缴的 **索赔状态** 字段设置为 *打开*。

## <a name="credits-created-outside-the-approve-deduction-process"></a><a name="credits-outside-approval"></a>在“审核扣缴”流程之外创建的贷方

本节仅适用于在扣缴工作台、客户结算或客户页面上使用 **新建扣缴** 命令创建的扣缴。

其他用户可能已在 **审核扣缴** 流程之外为客户索赔创建了普通发票、退货单或负销售订单。 在扣缴工作台上审核现有扣缴时，系统将自动创建其他普通发票、退货单或负销售订单。 本节介绍如何在审核扣缴之前将现有贷方附加到扣缴，以帮助防止出现重复的贷方。

### <a name="attach-a-credit-to-deduction"></a>将贷方附加到扣缴

此节介绍如何将贷方附加到贷方的扣缴。

将贷方附加到扣缴后，您可以在扣缴工作台的 **未结交易记录** 部分中使用工具栏上的 **未结贷方** 按钮来查看贷方。

对贷方开票并审核扣缴后，贷方将显示在扣缴工作台的 **未结交易记录** 部分中，紧靠着适用的 **扣缴 ID** 值，并且其 **索赔类型** 字段设置为 *其他贷方*。

#### <a name="attach-a-free-text-invoice-to-a-deduction"></a>将普通发票附加到扣缴

若要将普通发票附加到扣缴，请按照以下步骤操作。

1. 转到 **应收帐款 \> 发票 \> 所有普通发票**。
1. 选择适用的发票。
1. 在操作窗格上的 **发票** 选项卡中，选择 **将贷方附加到扣缴**。 此按钮仅在普通发票 **扣缴 ID** 字段为空白时可用。 空白字段指示普通发票尚未附加到扣缴。
1. 在 **将贷方附加到扣缴** 页面上，您可以选择 *一个* 扣缴。 仅 *基于价格* 的未结扣缴可供选择。
1. 选择 **确定**。 在普通发票的抬头上设置了 **扣缴 ID** 字段。

#### <a name="attach-a-return-order-to-a-deduction"></a>将退货单附加到扣缴

若要将退货单附加到扣缴，请按照以下步骤操作。

1. 转到 **应收帐款 \> 订单 \> 全部退货单**。
1. 选择适用的已接收或可用退货商品授权 (RMA) 编号。
1. 在操作窗格上的 **退货单** 选项卡中，选择 **将贷方附加到扣缴**。 此按钮仅在退货单的 **扣缴 ID** 字段为空白时可用。 空白字段指示退货单尚未附加到扣缴。
1. 在 **将贷方附加到扣缴** 页面上，您可以选择 *一个* 扣缴。 仅 *基于数量* 的未结扣缴可供选择。
1. 选择 **确定**。 在退货单的抬头上设置了 **扣缴 ID** 字段。

#### <a name="attach-a-sales-order-to-a-deduction"></a>将销售订单附加到扣缴

若要将销售订单附加到扣缴，请按照以下步骤操作。

1. 转到 **应收帐款 \> 订单 \> 全部采购订单**。
1. 选择适用的未结、已交付或已开票的销售订单。
1. 在操作窗格上的 **发票** 选项卡中，选择 **将贷方附加到扣缴**。 此按钮仅在销售订单的 **扣缴 ID** 字段为空白时可用。 空白字段指示销售订单尚未附加到扣缴。
1. 在 **附加扣缴** 页面上，您可以选择 *一个* 扣缴。 仅 *基于数量* 的未结扣缴可供选择。
1. 选择 **确定**。 在销售订单的抬头上设置了 **扣缴 ID** 字段。

#### <a name="detach-a-deduction-from-a-credit"></a>从贷方中分离扣缴

如果附加了不正确的扣缴，则可以从贷方中将其分离。 但是，必须满足以下所有条件：

- 贷方已附加到扣缴。
- **索赔状态** 设置为 *打开*。

要从贷方中分离扣缴，请按照以下步骤之一操作，具体取决于贷方类型：

- **普通发票：** 在 **所有普通发票** 页面上，选择发票。 然后，在操作窗格上的 **发票** 选项卡中，选择 **从扣缴中分离贷方**。
- **退货单：** 在 **所有退货单** 页上，选择订单。 然后，在操作窗格上的 **退货单** 选项卡中，选择 **从扣缴中分离贷方**。
- **销售订单：** 在 **所有销售订单** 页上，选择订单。 然后，在操作窗格上的 **发票** 选项卡中，选择 **从扣缴中分离贷方**。

### <a name="attach-a-deduction-to-a-credit"></a>将扣缴附加到贷方

此节介绍如何将扣缴附加到扣缴的贷方。

#### <a name="attach-a-deduction-to-a-free-text-return-order-or-sales-order-credit"></a>将扣缴附加到普通、退货单或销售订单贷方

要将扣缴附加到普通、退货单或销售订单贷方，请按照以下步骤操作。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择适用的未结扣缴。
1. 在操作窗格上选择 **维护 \> 将扣缴附加到贷方**。 仅当 **索赔状态** 字段设置为 *打开* 时，此按钮才可用。
1. 在 **附加贷方** 页面上，您可以选择 *一个* 贷方。 显示的贷方类型取决于扣缴的 **索赔依据** 值：

    - *基于价格* - 此页面显示 **扣缴 ID** 字段为空的客户帐户普通发票。 还显示了客户申请，因为普通发票可能未过帐。 因此，它可能没有可参考的数字。
    - *基于数量* - 显示的贷方类型取决于 **[应收帐款参数](#accounts-receivable-deductions)** 页面上的 **创建退货单** 选项的设置：

        - *是* - 此页面显示 **扣缴 ID** 字段为空的客户帐户退货单。
        - *否* - 此页面显示 **扣缴 ID** 字段为空的客户帐户销售订单。

1. 选择 **确定**。 在贷方的标题上设置了 **扣缴 ID** 字段。

将贷方附加到扣缴后，您可以在扣缴工作台的 **未结交易记录** 部分中使用工具栏上的 **未结贷方** 按钮来查看贷方。

对贷方开票并审核扣缴后，贷方将显示在扣缴工作台的 **未结交易记录** 部分中，紧靠着适用的 **扣缴 ID** 值，并且其 **索赔类型** 字段设置为 *其他贷方*。

#### <a name="detach-a-credit-from-the-deduction"></a>从扣缴中分离贷方

如果附加了不正确的贷方，则可以从扣缴中将其分离。 在操作窗格上的 **维护** 组中，选择 **从贷方中分离扣缴**。 从贷方中删除了 **扣缴 ID** 值。

仅当满足以下条件时，才可从使用 **从贷方中分离扣缴** 按钮：

- 贷方已附加到扣缴。
- **索赔状态** 设置为 *打开*。

## <a name="create-a-one-time-promotion"></a>创建一次性促销

在某些情况下，可能没有与扣缴匹配的已审核返点。 在此情况下，可以使用 *一次性促销* 功能来匹配扣缴到与客户关联的贸易折让。 *一次性促销* 功能会创建新贸易折让协议和促销活动总计。 然后此功能把总计与扣缴匹配，并对关闭扣缴所需的进行过帐。

若使用贸易折让，此功能十分有用。 有关贸易折让的详细信息，请参阅[贸易折让管理](../sales-marketing/trade-allowance.md)。

首先，必须设置可用来创建新贸易折让协议的模板。 要设置模板，请执行以下步骤。

1. 转到 **销售和市场营销 \> 贸易折让 \> 模板**。
1. 在操作窗格上，选择 **新建**。
1. 在字段中，输入从模板创建的协议里应显示的信息。
1. 在 **客户** 快速选项卡上的 **层次结构** 字段中，选择层次结构级别。
1. 在层次结构列表中，选择具有不匹配扣缴的客户，然后选择向右箭头按钮 (**\>**)。 客户会添加到 **贸易折让协议客户** 列表。
1. 根据需要设置剩余字段，然后关闭页面。
1. 转到 **销售和市场营销 \> 设置 \> 贸易折让 \> 贸易折让管理参数**。
1. 在 **概览** 选项卡上的 **一次性促销模板** 字段中，选择要用于创建一次性促销的模板的名称。

接下来，可以在扣缴工作台创建一次性促销。 若要创建一次性促销，请执行以下步骤。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 选择要处理的扣缴旁边的 **标记** 复选框。
1. 在操作窗格上，选择 **维护 \> 作为一次性促销结算扣缴**。
1. 在 **一次性促销** 对话框中，按照以下步骤将扣缴与一个或多个资金关联：

    1. 选择 **新建**，然后在 **资金 ID** 字段中选择资金 ID。 重复此步骤来添加与所需一样多的资金。
    1. 在每个资金 ID 旁边的 **百分比** 字段中，输入要分配到资金的扣缴百分比。 在 **百分比** 字段中输入的金额必须总计为 100%。

1. 选择 **确定**。 系统创建有促销活动总计且总计与扣缴匹配的新贸易折让协议。

## <a name="do-a-mass-update-of-deductions"></a>执行扣缴的成批更新

若必须对多扣缴做出相同更改，则可以选择这些扣缴并对它们的字段执行成批更新。

要执行成批更新，请执行以下步骤。

1. 转到 **销售和市场营销 \> 贸易折让 \> 扣缴 \>扣缴工作台**。
1. 在操作窗格下面的 **显示** 字段中，选择要查看的扣缴类型。
1. 选择要更新的每个扣缴旁边的复选框。 然后，在操作窗格上选择 **维护 \> 成批更新**。
1. **批量更新** 对话框会显示所选扣缴。 根据需要更新字段，然后选择 **确定** 以接受更改。
