---
title: 采购 cXML 增强功能
description: 采购 cXML 增强功能建立在现有的外部目录功能 PunchOut 的基础上，该功能用于采购申请。
author: dasani-madipalli
manager: tfehr
ms.date: 08/03/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: CatCXMLParameters, CatCXMLPurchRequest
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: damadipa
ms.search.validFrom: 2020-08-03
ms.dyn365.ops.version: Release 10.0.13
ms.openlocfilehash: d167666e20ef7e1e0fbdb9c11b6e0b1d0b15ebbf
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/15/2021
ms.locfileid: "5237392"
---
# <a name="purchasing-cxml-enhancements"></a><span data-ttu-id="27e6a-103">采购 cXML 增强功能</span><span class="sxs-lookup"><span data-stu-id="27e6a-103">Purchasing cXML Enhancements</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="27e6a-104">_采购 cXML 增强功能_ 建立在[现有的外部目录功能](set-up-external-catalog-for-punchout.md)的基础上，该功能用于采购申请。</span><span class="sxs-lookup"><span data-stu-id="27e6a-104">The _Purchasing cXML Enhancements_ feature builds on the [existing external catalog functionality](set-up-external-catalog-for-punchout.md) that is used for purchase requisitions.</span></span> <span data-ttu-id="27e6a-105">此现有功能称为 _PunchOut_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-105">This existing functionality is known as _PunchOut_.</span></span> <span data-ttu-id="27e6a-106">虽然采购订单不必一定要来自采购申请，但是采购订单上的供应商与用于发送采购订单单据的参数之间必须存在联系。</span><span class="sxs-lookup"><span data-stu-id="27e6a-106">Although a purchase order doesn't have to originate from a purchase requisition, there must be a connection between the vendor on a purchase order and the parameters that are used to send the purchase order document.</span></span>

## <a name="turn-on-the-purchasing-cxml-enhancements-feature"></a><span data-ttu-id="27e6a-107">打开“采购 cXML 增强功能”</span><span class="sxs-lookup"><span data-stu-id="27e6a-107">Turn on the Purchasing cXML Enhancements feature</span></span>

<span data-ttu-id="27e6a-108">要打开此功能，请打开 **[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)** 页，然后搜索名为 *采购 cXML 增强功能* 的功能。</span><span class="sxs-lookup"><span data-stu-id="27e6a-108">To turn on the feature, open the **[Feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)** page, and search for the feature that is named *Purchasing cXML Enhancements*.</span></span> <span data-ttu-id="27e6a-109">选择此功能，然后然后选择 **立即启用** 将其打开。</span><span class="sxs-lookup"><span data-stu-id="27e6a-109">Select the feature, and then select **Enable now** to turn it on.</span></span>

<span data-ttu-id="27e6a-110">启用功能后，应在以下三个区域配置设置：</span><span class="sxs-lookup"><span data-stu-id="27e6a-110">After you turn on the feature, you should configure settings in the following three areas:</span></span>

- <span data-ttu-id="27e6a-111">**[cXML 参数](#cxml-parameters)** – 使用这些设置为发送采购订单的功能设置一些全局参数。</span><span class="sxs-lookup"><span data-stu-id="27e6a-111">**[cXML parameters](#cxml-parameters)** – Use these settings to set up some global parameters for the functionality for sending purchase orders.</span></span>
- <span data-ttu-id="27e6a-112">**[供应商设置](#vendor-setup)** – 如果默认情况下应为为任何供应商创建的所有新采购订单使用商业可扩展标记语言 (cXML)，请将该供应商的 **通过 cXML 发送采购订单** 选项设置为 _是_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-112">**[Vendor setup](#vendor-setup)** – If commerce eXtensible Markup Language (cXML) should be used by default for all new purchase orders that are created for any vendor, set the **Send purchase order via cXML** option to _Yes_ for that vendor.</span></span>
- <span data-ttu-id="27e6a-113">**[外部目录](#external-catalog-setup)** – 使用新 **订单属性** 设置定义采购订单单据的格式及其发送方式。</span><span class="sxs-lookup"><span data-stu-id="27e6a-113">**[External catalogs](#external-catalog-setup)** – Use the new **Order properties** settings to define the format of the purchase order document and how it's sent.</span></span>

<span data-ttu-id="27e6a-114">下图总结了此配置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-114">The following illustration summarizes this configuration.</span></span>

<span data-ttu-id="27e6a-115">![用于设置 cXML 功能的区域](media/cxml-settings-areas.png "用于设置 cXML 功能的区域")</span><span class="sxs-lookup"><span data-stu-id="27e6a-115">![Areas for setting up cXML features](media/cxml-settings-areas.png "Areas for setting up cXML features")</span></span>

<span data-ttu-id="27e6a-116">此外，您必须设置[采购订单请求批处理作业](#po-batch)。</span><span class="sxs-lookup"><span data-stu-id="27e6a-116">In addition, you must set up the [Purchase order request batch job](#po-batch).</span></span> <span data-ttu-id="27e6a-117">此批处理作业用于发送已确认的采购订单。</span><span class="sxs-lookup"><span data-stu-id="27e6a-117">This batch job is used to send the confirmed purchase orders.</span></span>

## <a name="set-up-global-cxml-parameters"></a><a name="cxml-parameters"></a><span data-ttu-id="27e6a-118">设置全局 cXML 参数</span><span class="sxs-lookup"><span data-stu-id="27e6a-118">Set up global cXML parameters</span></span>

<span data-ttu-id="27e6a-119">使用 **cXML 参数** 页进行一些将应用于发送采购订单的功能的全局设置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-119">Use the **cXML parameters** page to make a few global settings that apply to the functionality for sending purchase orders.</span></span>

<span data-ttu-id="27e6a-120">![cXML 参数页](media/cxml-parameters.png "cXML 参数页")</span><span class="sxs-lookup"><span data-stu-id="27e6a-120">![cXML parameters page](media/cxml-parameters.png "cXML parameters page")</span></span>

<span data-ttu-id="27e6a-121">转到 **采购 \> 设置 \> cXML 管理 \> cXML 参数**，设置以下参数：</span><span class="sxs-lookup"><span data-stu-id="27e6a-121">Go to **Procurement and sourcing \> Setup \> cXML management \> cXML parameters**, and set the following parameters:</span></span>

- <span data-ttu-id="27e6a-122">**cXML 测试模式** – 此全局参数影响从批处理作业实际发送采购订单的方式。</span><span class="sxs-lookup"><span data-stu-id="27e6a-122">**cXML test mode** – This global parameter affects the way that purchase orders are physically sent from the batch job.</span></span> <span data-ttu-id="27e6a-123">选择以下值之一：</span><span class="sxs-lookup"><span data-stu-id="27e6a-123">Select one of the following values:</span></span>

    - <span data-ttu-id="27e6a-124">**测试** – 在此模式下，批处理作业可以运行，消息的 XML 文档将生成，但不发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-124">**Test** – In this mode, the batch job can be running, and the XML document for the message is generated, but it isn't sent.</span></span> <span data-ttu-id="27e6a-125">而是保存在采购订单请求中以供审核。</span><span class="sxs-lookup"><span data-stu-id="27e6a-125">Instead, it's saved on the purchase order request for review purposes.</span></span> <span data-ttu-id="27e6a-126">在最初的实现中，如果想要查看数据在 cXML 消息中是如何输入的，此模式很有用。</span><span class="sxs-lookup"><span data-stu-id="27e6a-126">This mode is helpful when you're in an initial implementation, and you want to see how data is entered in the cXML message.</span></span> <span data-ttu-id="27e6a-127">您可能还希望生成示例消息，然后将其发送给供应商以进行初始验证。</span><span class="sxs-lookup"><span data-stu-id="27e6a-127">You might also want to generate sample messages that you can send to vendors for initial validation.</span></span>
    - <span data-ttu-id="27e6a-128">**活动** – 在此模式下，此功能使用[外部目录设置](#external-catalog-setup)将每个单据实际传输给供应商。</span><span class="sxs-lookup"><span data-stu-id="27e6a-128">**Live** – In this mode, the feature uses the [external catalog settings](#external-catalog-setup) to physically transmit each document to the vendor.</span></span>

- <span data-ttu-id="27e6a-129">**发送采购请求更新** – 将此选项设置为 *是* 发送采购订单的更新消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-129">**Send purchase request updates** – Set this option to *Yes* to send an update message for purchase orders.</span></span> <span data-ttu-id="27e6a-130">设置为 *否* 阻止发送消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-130">Set it to *No* to prevent the message from being sent.</span></span> <span data-ttu-id="27e6a-131">大多数供应商都不希望接收更新消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-131">Most vendors prefer not to receive update messages.</span></span> <span data-ttu-id="27e6a-132">在采购订单应该更改时，他们需要客户通过电话或电子邮件与他们联系。</span><span class="sxs-lookup"><span data-stu-id="27e6a-132">Instead, they require that customers contact them by phone or email if a purchase order should be changed.</span></span> <span data-ttu-id="27e6a-133">此参数是一个全局参数，不能在每个供应商的外部目录上指定替代。</span><span class="sxs-lookup"><span data-stu-id="27e6a-133">This parameter is a global parameter, and no override can be specified on the external catalog for each vendor.</span></span> <span data-ttu-id="27e6a-134">如果您在采购订单上发布第二个确认，采购订单将被标记为已更新，但是第一个确认已被供应商发送并确认。</span><span class="sxs-lookup"><span data-stu-id="27e6a-134">A purchase order will be marked as updated if you post a second confirmation on a purchase order, but the first confirmation has already been sent and acknowledged by the vendor.</span></span> <span data-ttu-id="27e6a-135">如果有第二个确认，但尚未发送第一个确认，第二个确认将被视为新单据。</span><span class="sxs-lookup"><span data-stu-id="27e6a-135">If there is a second confirmation, but the first confirmation hasn't been sent, the second confirmation will be treated as a new document.</span></span> <span data-ttu-id="27e6a-136">在发送一个确认前，您可以根据需要多次确认采购订单。</span><span class="sxs-lookup"><span data-stu-id="27e6a-136">You can confirm a purchase order as many times as you want until one confirmation is sent.</span></span> <span data-ttu-id="27e6a-137">接下来的确认将被视为更新消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-137">The next confirmation will then be treated as an update message.</span></span>
- <span data-ttu-id="27e6a-138">**发送采购请求删除** – 将此选项设置为 *是* 发送采购订单的删除消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-138">**Send purchase request delete** – Set this option to *Yes* to send a delete message for purchase orders.</span></span> <span data-ttu-id="27e6a-139">设置为 *否* 阻止发送消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-139">Set it to *No* to prevent the message from being sent.</span></span> <span data-ttu-id="27e6a-140">大多数供应商都不希望接收删除消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-140">Most vendors prefer not to receive delete messages.</span></span> <span data-ttu-id="27e6a-141">如果采购订单被错误发送，他们需要客户通过电话或电子邮件与他们联系。</span><span class="sxs-lookup"><span data-stu-id="27e6a-141">Instead, they require that customers contact them by phone or email if a purchase order was sent by mistake.</span></span> <span data-ttu-id="27e6a-142">此参数是一个全局参数，不能在每个供应商的外部目录上指定替代。</span><span class="sxs-lookup"><span data-stu-id="27e6a-142">This parameter is a global parameter, and no override can be specified on the external catalog for each vendor.</span></span> <span data-ttu-id="27e6a-143">如果您在 Supply Chain Management 中取消了采购订单，该采购订单将被标记为已删除。</span><span class="sxs-lookup"><span data-stu-id="27e6a-143">A purchase order will be marked as deleted if you cancel the purchase order in Supply Chain Management.</span></span>
- <span data-ttu-id="27e6a-144">**存档文件** – 指定用于导出和保存已存档的 cXML 文档的文件路径。</span><span class="sxs-lookup"><span data-stu-id="27e6a-144">**Archive file** – Specify the file path where you want to export and save archived cXML documents.</span></span> <span data-ttu-id="27e6a-145">从 **采购订单请求** 页运行清除功能时，将使用此路径。</span><span class="sxs-lookup"><span data-stu-id="27e6a-145">The path is used when you run the purge function from the **Purchase order request** page.</span></span>
- <span data-ttu-id="27e6a-146">**街道行的最大字符数** – 输入街道字段中可用于 cXML 文档中的地址的最大字符数。</span><span class="sxs-lookup"><span data-stu-id="27e6a-146">**Max characters for street line** – Enter the maximum number of characters that can be used in the street field for addresses in the cXML document.</span></span> <span data-ttu-id="27e6a-147">除非在外部目录属性上指定了替代，否则此全局参数会影响所有供应商。</span><span class="sxs-lookup"><span data-stu-id="27e6a-147">This global parameter affects all vendors unless an override is specified on the external catalog properties.</span></span>

## <a name="set-up-vendor-purchase-orders-to-use-cxml"></a><a name="vendor-setup"></a><span data-ttu-id="27e6a-148">设置供应商采购订单以使用 cXML</span><span class="sxs-lookup"><span data-stu-id="27e6a-148">Set up vendor purchase orders to use cXML</span></span>

<span data-ttu-id="27e6a-149">每次您确认将 **通过 cXML 发送采购订单** 选项设置为 _是_ 的采购订单时，系统都会自动生成 cXML 消息并将其传递给与该采购订单关联的供应商。</span><span class="sxs-lookup"><span data-stu-id="27e6a-149">Every time that you confirm a purchase order where the **Send purchase order via cXML** option is set to _Yes_, the system automatically generates the cXML message and delivers it to the vendor that is associated with that purchase order.</span></span> <span data-ttu-id="27e6a-150">有两种方法可以控制采购订单的这个选项：</span><span class="sxs-lookup"><span data-stu-id="27e6a-150">There are two ways to control this option for your purchase orders:</span></span>

- <span data-ttu-id="27e6a-151">要设置供应商以自动将 cXML 用于从申请创建的所有新采购订单，请转到 **采购 \> 供应商 \> 所有供应商**，然后选择或创建供应商打开其详细信息页面。</span><span class="sxs-lookup"><span data-stu-id="27e6a-151">To set up a vendor so that it automatically uses cXML for all new purchase orders that are created from a requisition, go to **Procurement and sourcing \> Vendors \> All vendors**, and select or create a vendor to open its details page.</span></span> <span data-ttu-id="27e6a-152">然后，在 **采购订单默认值** 快速选项卡上，将 **通过 cXML 发送采购订单** 选项设置为 _是_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-152">Then, on the **Purchase order defaults** FastTab, set the **Send purchase order via cXML** option to _Yes_.</span></span> <span data-ttu-id="27e6a-153">如果 cXML 还应自动用于 **不** 是从申请创建的新采购订单，您还必须将相关外部目录的 **ENABLEMANUALPO** 订单属性设置为 _True_，如本主题后面的[设置订单属性](#set-order-properties)一节所述。</span><span class="sxs-lookup"><span data-stu-id="27e6a-153">If cXML should also automatically be used for new purchase orders that are **not** created from a requisition, you must also set the **ENABLEMANUALPO** order property to _True_ for the related external catalog, as described in the [Set the order properties](#set-order-properties) section later in this topic.</span></span>
- <span data-ttu-id="27e6a-154">对于单个采购订单，请转到 **采购 \> 采购订单 \> 所有采购订单**，选择或创建一个采购订单并打开其详细信息页面。</span><span class="sxs-lookup"><span data-stu-id="27e6a-154">For individual purchase orders, go to **Procurement and sourcing \> Purchase orders \> All purchase orders**, and select or create a purchase order to open its details page.</span></span> <span data-ttu-id="27e6a-155">切换到 **标题** 视图，然后在 **设置** 快速选项卡上，根据需要设置 **通过 cXML 发送采购订单** 选项。</span><span class="sxs-lookup"><span data-stu-id="27e6a-155">Switch to the **Header** view, and then, on the **Setup** FastTab, set the **Send purchase order via cXML** option as required.</span></span>

<span data-ttu-id="27e6a-156">![供应商采购订单的默认设置](media/cxml-order-defaults.png "供应商采购订单的默认设置")</span><span class="sxs-lookup"><span data-stu-id="27e6a-156">![Default settings for vendor purchase orders](media/cxml-order-defaults.png "Default settings for vendor purchase orders")</span></span>

## <a name="set-up-an-external-catalog-to-use-cxml"></a><a name="external-catalog-setup"></a><span data-ttu-id="27e6a-157">设置外部目录以使用 cXML</span><span class="sxs-lookup"><span data-stu-id="27e6a-157">Set up an external catalog to use cXML</span></span>

<span data-ttu-id="27e6a-158">在 **外部目录** 页上，对于每个目录，可以设置 PunchOut 功能和用于发送采购订单的功能。</span><span class="sxs-lookup"><span data-stu-id="27e6a-158">On the **External catalogs** page, for each of your catalogs, you can set up the PunchOut functionality and the functionality for sending purchase orders.</span></span> <span data-ttu-id="27e6a-159">要找到相关设置，请转到 **采购 \> 目录 \> 外部目录**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-159">To find the relevant settings, go to **Procurement and sourcing \> Catalogs \> External catalogs**.</span></span> <span data-ttu-id="27e6a-160">首先[照常设置每个目录](set-up-external-catalog-for-punchout.md)。</span><span class="sxs-lookup"><span data-stu-id="27e6a-160">Start by [setting up each catalog as usual](set-up-external-catalog-for-punchout.md).</span></span> <span data-ttu-id="27e6a-161">此过程包括分配供应商、选择允许供应商提供的类别和激活目录。</span><span class="sxs-lookup"><span data-stu-id="27e6a-161">This process includes assigning a vendor, selecting the categories that the vendor is allowed to supply, and activating the catalog.</span></span> <span data-ttu-id="27e6a-162">然后配置本节中所述的其他设置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-162">Then configure the additional settings that are described in this section.</span></span>

> [!NOTE]
> <span data-ttu-id="27e6a-163">当您确认可以通过 cXML 发送的采购订单时，系统会查找与该采购订单关联的供应商，然后找到与该供应商关联的第一个活动的外部目录。</span><span class="sxs-lookup"><span data-stu-id="27e6a-163">When you confirm a purchase order that can be sent via cXML, the system looks up the vendor that is associated with the purchase order and then finds the first active external catalog that is associated with that vendor.</span></span> <span data-ttu-id="27e6a-164">然后，系统使用该外部目录中的设置发送采购订单。</span><span class="sxs-lookup"><span data-stu-id="27e6a-164">The system then uses the settings from that external catalog to send the purchase order.</span></span> <span data-ttu-id="27e6a-165">如果设置了多个外部目录，系统会根据采购订单上的供应商仅使用找到的第一个外部目录。</span><span class="sxs-lookup"><span data-stu-id="27e6a-165">If multiple external catalogs are set up, the system uses only the first external catalog that it finds, based on the vendor on the purchase order.</span></span> <span data-ttu-id="27e6a-166">因此，我们建议您只为每个供应商创建一个外部目录。</span><span class="sxs-lookup"><span data-stu-id="27e6a-166">Therefore, we recommend that you create just one external catalog for each vendor.</span></span>

<span data-ttu-id="27e6a-167">![外部目录设置](media/cxml-supplier-catalog.png "外部目录设置")</span><span class="sxs-lookup"><span data-stu-id="27e6a-167">![External catalog settings](media/cxml-supplier-catalog.png "External catalog settings")</span></span>

### <a name="set-the-punchout-protocol-type"></a><span data-ttu-id="27e6a-168">设置 PunchOut 协议类型</span><span class="sxs-lookup"><span data-stu-id="27e6a-168">Set the PunchOut protocol type</span></span>

<span data-ttu-id="27e6a-169">在 **外部目录** 页的 **常规** 快速选项卡上，将 **Punchout 协议类型** 字段设置为 _cXML_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-169">On the **General** FastTab of the **External catalogs** page, set the **Punchout protocol type** field to _cXML_.</span></span> <span data-ttu-id="27e6a-170">除非合作伙伴扩展了功能并在扩展中提供了其他选项，否则此选项将是唯一可用的选项。</span><span class="sxs-lookup"><span data-stu-id="27e6a-170">This option will be the only available option, unless a partner has extended the functionality and provides an additional option in the extension.</span></span>

<span data-ttu-id="27e6a-171">如果您还将目录用于 PunchOut，则还必须[设置消息格式](set-up-external-catalog-for-punchout.md)。</span><span class="sxs-lookup"><span data-stu-id="27e6a-171">If you're also using the catalog for PunchOut, you must also [set up the message format](set-up-external-catalog-for-punchout.md).</span></span> <span data-ttu-id="27e6a-172">消息格式用于从申请建立与 PunchOut 交易中的供应商的连接。</span><span class="sxs-lookup"><span data-stu-id="27e6a-172">The message format is used to establish the connection to the vendor in the PunchOut transaction from the requisition.</span></span> <span data-ttu-id="27e6a-173">发送采购订单时，订单属性将用于与供应商建立连接。</span><span class="sxs-lookup"><span data-stu-id="27e6a-173">When a purchase order is sent, the order properties will be used to establish the connection with a vendor.</span></span>

### <a name="set-the-order-properties"></a><a name="set-order-properties"></a><span data-ttu-id="27e6a-174">设置订单属性</span><span class="sxs-lookup"><span data-stu-id="27e6a-174">Set the order properties</span></span>

<span data-ttu-id="27e6a-175">_采购 cXML 增强功能_ 为外部目录添加了新的 **订单属性** 快速选项卡。</span><span class="sxs-lookup"><span data-stu-id="27e6a-175">The _Purchasing cXML Enhancements_ feature adds a new **Order properties** FastTab for external catalogs.</span></span> <span data-ttu-id="27e6a-176">此快速选项卡提供了一个网格，您可以在其中定义订单属性。</span><span class="sxs-lookup"><span data-stu-id="27e6a-176">This FastTab provides a grid where you can define the order properties.</span></span> <span data-ttu-id="27e6a-177">它还提供了一个工具栏。</span><span class="sxs-lookup"><span data-stu-id="27e6a-177">It also provides a toolbar.</span></span> <span data-ttu-id="27e6a-178">此工具栏包含以下三个按钮，可用于管理订单属性：</span><span class="sxs-lookup"><span data-stu-id="27e6a-178">This toolbar contains the following three buttons that you can use to manage the order properties:</span></span>

- <span data-ttu-id="27e6a-179">**默认属性** – 设置新目录时，选择此按钮可将常用属性的预定义集合添加到网格。</span><span class="sxs-lookup"><span data-stu-id="27e6a-179">**Default properties** – When you're setting up a new catalog, select this button to add a predefined collection of commonly used properties to the grid.</span></span>
- <span data-ttu-id="27e6a-180">**新建** – 将新属性添加到网格。</span><span class="sxs-lookup"><span data-stu-id="27e6a-180">**New** – Add a new property to the grid.</span></span>
- <span data-ttu-id="27e6a-181">**删除** – 从网格中删除当前选定的属性。</span><span class="sxs-lookup"><span data-stu-id="27e6a-181">**Delete** – Delete the currently selected property from the grid.</span></span> <span data-ttu-id="27e6a-182">如果您意外删除了默认属性，请选择 **默认属性** 恢复所有缺少的属性。</span><span class="sxs-lookup"><span data-stu-id="27e6a-182">If you accidentally delete a default property, select **Default properties** to restore all the missing properties.</span></span>

<span data-ttu-id="27e6a-183">每次将一个或多个属性添加到网格时，请使用右列为每个属性指定一个值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-183">Every time that you add one or more properties to the grid, use the right column to specify a value for each.</span></span>

<span data-ttu-id="27e6a-184">通过以下方式使用默认属性：</span><span class="sxs-lookup"><span data-stu-id="27e6a-184">Use the default properties in the following way:</span></span>

- <span data-ttu-id="27e6a-185">**BUYER\_COOKIE** – 此跟踪字段可用于指示您的公司的特定信息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-185">**BUYER\_COOKIE** – This tracking field can be used to indicate specific information for your company.</span></span> <span data-ttu-id="27e6a-186">除非您与供应商就如何使用此属性达成协议，否则在发送采购订单时它没有太多意义。</span><span class="sxs-lookup"><span data-stu-id="27e6a-186">Unless you have an agreement with the vendor about how this property is used, it doesn't have very much meaning when sending a purchase order.</span></span> <span data-ttu-id="27e6a-187">因此，应将其设置为一个简单值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-187">Therefore, you should set it to a simple value.</span></span>
- <span data-ttu-id="27e6a-188">**DELIVERTO** – 在采购订单的单据中输入装运地址后，**需引起注意的信息** 字段用于设置 XML 消息中的 **DeliverTo** 字段。</span><span class="sxs-lookup"><span data-stu-id="27e6a-188">**DELIVERTO** – When the shipping address is entered in the document from the purchase order, the **Attention information** field is used to set the **DeliverTo** field in the XML message.</span></span> <span data-ttu-id="27e6a-189">如果您需要将此值用作申请者名称，并且将在采购订单标题上设置申请者字段，请为此属性输入值 _REQUESTER_，以使申请者名称输入到 XML 中的 **DeliverTo** 字段中。</span><span class="sxs-lookup"><span data-stu-id="27e6a-189">If you require that this value be a requester name, and you will set the requester field on the purchase order header, enter the value _REQUESTER_ for this property, so that the requester name will be entered in the **DeliverTo** field in the XML.</span></span> <span data-ttu-id="27e6a-190">在这种情况下，使用的主要电子邮件地址和电话号码将来自申请者而不是订货人。</span><span class="sxs-lookup"><span data-stu-id="27e6a-190">In this case, the primary email address and phone number that are used will be from the requester instead of the orderer.</span></span>
- <span data-ttu-id="27e6a-191">**DEPLOYMENTMODE** – 根据供应商的要求设置此属性。</span><span class="sxs-lookup"><span data-stu-id="27e6a-191">**DEPLOYMENTMODE** – Set this property as required by the vendor.</span></span> <span data-ttu-id="27e6a-192">值通常是 _PRODUCTION_ 或 _TEST_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-192">The values are usually _PRODUCTION_ or _TEST_.</span></span> <span data-ttu-id="27e6a-193">请根据您与供应商的沟通来设置值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-193">Set the value based on your communication with the vendor.</span></span> <span data-ttu-id="27e6a-194">通常，它必须与供应商指示为测试或生产系统的 **ORDERCHECKURL** 值后面的预期系统相匹配。</span><span class="sxs-lookup"><span data-stu-id="27e6a-194">Usually, it must match the intended system behind the **ORDERCHECKURL** value that the vendor indicates as a test or production system.</span></span>
- <span data-ttu-id="27e6a-195">**FIXEDBILLADDRESSID** – 设置 XML 消息中的 **addressID** 字段时，它将选择地址中指定的位置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-195">**FIXEDBILLADDRESSID** – When the **addressID** field in the XML message is set, it picks up the location that is specified on the address.</span></span> <span data-ttu-id="27e6a-196">如果由于某些原因您传达给供应商的 ID 值与地址位置中的值不同，您可以在此处指定值来强制替代。</span><span class="sxs-lookup"><span data-stu-id="27e6a-196">If the ID value that you've communicated to the vendor differs from the value on the address location for some reason, you can force an override by specifying the value here.</span></span> <span data-ttu-id="27e6a-197">假定您只对供应商使用一个地址，并且该地址是在供应商的系统中设置的。</span><span class="sxs-lookup"><span data-stu-id="27e6a-197">The assumption is that you will use only one address with the vendor, and that the address is set up in the vendor's system.</span></span> <span data-ttu-id="27e6a-198">账单地址是在 Supply Chain Management 中为法人指定的主要发票地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-198">The billing address is the primary invoice address that is specified for the legal entity in Supply Chain Management.</span></span>
- <span data-ttu-id="27e6a-199">**FIXEDSHIPADDRESSID** – 设置 XML 消息中的 **addressID** 字段时，它将选择地址中指定的位置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-199">**FIXEDSHIPADDRESSID** – When the **addressID** field in the XML message is set, it picks up the location that is specified on the address.</span></span> <span data-ttu-id="27e6a-200">如果由于某些原因您传达给供应商的 ID 值与地址位置中的值不同，您可以在此处指定值来强制替代。</span><span class="sxs-lookup"><span data-stu-id="27e6a-200">If the ID value that you've communicated to the vendor differs from the value on the address location for some reason, you can force an override by specifying the value here.</span></span> <span data-ttu-id="27e6a-201">假定您只对供应商使用一个地址，并且该地址是在供应商的系统中设置的。</span><span class="sxs-lookup"><span data-stu-id="27e6a-201">The assumption is that you will use only one address with the vendor, and that the address is set up in the vendor's system.</span></span> <span data-ttu-id="27e6a-202">装运地址是在采购订单的标题中指定的地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-202">The shipping address is the address that is specified on the header of the purchase order.</span></span> <span data-ttu-id="27e6a-203">大多数供应商仅接受标题地址，不接受行地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-203">Most vendors accept only header addresses, not line addresses.</span></span> <span data-ttu-id="27e6a-204">虽然 XML 中有行地址字段，但它们将被设置为标题地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-204">Although there are fields for line addresses in the XML, they will be set to the header address.</span></span>
- <span data-ttu-id="27e6a-205">**FROM\_DOMAIN** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-205">**FROM\_DOMAIN** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-206">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-206">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-207">**FROM\_IDENTITY** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-207">**FROM\_IDENTITY** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-208">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-208">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-209">**ORDERCHECKURL** – 输入要将采购订单单据发送到的 URL。</span><span class="sxs-lookup"><span data-stu-id="27e6a-209">**ORDERCHECKURL** – Enter the URL to transmit the purchase order documents to.</span></span> <span data-ttu-id="27e6a-210">此 URL 以 `https://` 开头，由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-210">This URL starts with `https://` and is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-211">**PAYLOAD\_ID** – 根据当前供应商所采用的业务流程的要求，输入有效负载 ID 的前缀值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-211">**PAYLOAD\_ID** – Enter a prefix value for the payload ID, as required for the business processes that are in place for the current vendor.</span></span>
- <span data-ttu-id="27e6a-212">**SENDER\_DOMAIN** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-212">**SENDER\_DOMAIN** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-213">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-213">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-214">**SENDER\_IDENTITY** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-214">**SENDER\_IDENTITY** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-215">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-215">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-216">**SHARED\_SECRET** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-216">**SHARED\_SECRET** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-217">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-217">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-218">**STREETLENGTH** – 输入表示供应商接受的街道名称最大字符数的数字。</span><span class="sxs-lookup"><span data-stu-id="27e6a-218">**STREETLENGTH** – Enter a number that represents the maximum number of characters that the vendor will accept as a street name.</span></span> <span data-ttu-id="27e6a-219">如果在此处输入一个值，它将替代在 **cXML 参数** 页指定的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-219">If a value is entered here, it overrides the value that is specified on the **cXML parameters** page.</span></span> <span data-ttu-id="27e6a-220">系统将删除换行符和空格，以尝试使 Supply Chain Management 中的标准地址符合此处指定的字符数。</span><span class="sxs-lookup"><span data-stu-id="27e6a-220">The system will remove line breaks and spaces to try to fit the standard address in Supply Chain Management into the number of characters that is specified here.</span></span> <span data-ttu-id="27e6a-221">任何其他字符将被截断。</span><span class="sxs-lookup"><span data-stu-id="27e6a-221">Any additional characters will be truncated.</span></span>
- <span data-ttu-id="27e6a-222">**TO\_DOMAIN** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-222">**TO\_DOMAIN** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-223">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-223">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-224">**TO\_IDENTITY** – 输入用于发送采购订单单据的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-224">**TO\_IDENTITY** – Enter the value that is used to send purchase order documents.</span></span> <span data-ttu-id="27e6a-225">此值由您的供应商提供。</span><span class="sxs-lookup"><span data-stu-id="27e6a-225">This value is supplied by your vendor.</span></span>
- <span data-ttu-id="27e6a-226">**USERAGENT** – 输入一个值以标识您正在使用的系统。</span><span class="sxs-lookup"><span data-stu-id="27e6a-226">**USERAGENT** – Enter a value to identify the system that you're using.</span></span> <span data-ttu-id="27e6a-227">例如，输入 _Dynamics 365 Supply Chain Management_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-227">For example, enter _Dynamics 365 Supply Chain Management_.</span></span>
- <span data-ttu-id="27e6a-228">**VERSION** – 输入 cXML 版本号（如果供应商要求此信息）。</span><span class="sxs-lookup"><span data-stu-id="27e6a-228">**VERSION** – Enter a cXML version number, if the vendor requests this information.</span></span> <span data-ttu-id="27e6a-229">默认版本为 *1.2.008*。</span><span class="sxs-lookup"><span data-stu-id="27e6a-229">The default version is *1.2.008*.</span></span> <span data-ttu-id="27e6a-230">此版本是固定的，多数供应商都接受。</span><span class="sxs-lookup"><span data-stu-id="27e6a-230">This version is stable and is accepted by most vendors.</span></span>
- <span data-ttu-id="27e6a-231">**RESPONSETEXT** – 输入您希望订单发送后供应商在 cXML 响应消息中返回的任何自定义文本。</span><span class="sxs-lookup"><span data-stu-id="27e6a-231">**RESPONSETEXT** – Enter any custom text that you expect the vendor to return in the cXML response message after the order has been sent.</span></span> <span data-ttu-id="27e6a-232">这样，系统可以将消息标记为 _已确认_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-232">In this way, the system can mark the message as _Acknowledged_.</span></span> <span data-ttu-id="27e6a-233">如果响应与标准文本或您在此处输入的客户文本不匹配，请求将被标记为 _错误_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-233">If the response doesn't match standard text or the customer text that you enter here, the request will be marked as _Error_.</span></span>
- <span data-ttu-id="27e6a-234">**RESPONSETEXTSUB** – 如果要在供应商响应文本中搜索 **RESPONSETEXT** 字段中指定的值，请将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-234">**RESPONSETEXTSUB** – Set this property to _TRUE_ if you want to search the vendor response text for the values that are specified in the **RESPONSETEXT** field.</span></span> <span data-ttu-id="27e6a-235">例如，供应商可能会在响应中返回包含“OK”的长字符串。</span><span class="sxs-lookup"><span data-stu-id="27e6a-235">For example, the vendor might return a long string that includes "OK" in the response.</span></span> <span data-ttu-id="27e6a-236">在这种情况下，您可以在 **RESPONSETEXT** 字段中输入 _OK_，并将 **RESPONSETESTSUB** 设置为 _TRUE_，以在响应中的任何位置搜索“OK”。</span><span class="sxs-lookup"><span data-stu-id="27e6a-236">In this case, you can enter _OK_ in the **RESPONSETEXT** field and set **RESPONSETESTSUB** to _TRUE_ to search for "OK" anywhere in the response.</span></span> <span data-ttu-id="27e6a-237">然后可以将订单设置为 _已确认_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-237">The order can then be set to _Acknowledged_.</span></span>
- <span data-ttu-id="27e6a-238">**CONTENTTYPE** – 在典型的目录设置中，无需设置此属性。</span><span class="sxs-lookup"><span data-stu-id="27e6a-238">**CONTENTTYPE** – In a typical catalog setup, you don't have to set this property.</span></span> <span data-ttu-id="27e6a-239">如果在发送采购订单时收到来自供应商系统的服务器 500 错误，可以通过将此属性设置为 _FALSE_ 来进行测试。</span><span class="sxs-lookup"><span data-stu-id="27e6a-239">If you receive a server 500 error from a vendor's system when you send a purchase order, you can do testing by setting this property to _FALSE_.</span></span> <span data-ttu-id="27e6a-240">该值将更改 Web 请求中的设置，可能让消息可以在某些平台上发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-240">That value will change a setting in the web request and might enable the message to be sent for some platforms.</span></span>
- <span data-ttu-id="27e6a-241">**ENABLEHEADERS** – 将此属性设置为 _TRUE_ 可以将标题与采购订单一起发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-241">**ENABLEHEADERS** – Set this property to _TRUE_ to send headers together with the purchase order.</span></span> <span data-ttu-id="27e6a-242">仅在供应商需要时才必须设置此属性。</span><span class="sxs-lookup"><span data-stu-id="27e6a-242">You must set this property only if the vendor requires it.</span></span> <span data-ttu-id="27e6a-243">如果将此属性设置为 _TRUE_，请添加基于供应商提供的名称的其他自定义属性，并在其前面加上 _H\__ 前缀。</span><span class="sxs-lookup"><span data-stu-id="27e6a-243">If you set this property to _TRUE_, add extra custom properties that are based on the names that the vendor provides, and prefix them with _H\__.</span></span> <span data-ttu-id="27e6a-244">典型示例包括 **H\_USERID**、**H\_PASSWORD**、**H\_RECEIVERID** 和 **H\_ACTIONREQUEST**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-244">Typical examples include **H\_USERID**, **H\_PASSWORD**, **H\_RECEIVERID**, and **H\_ACTIONREQUEST**.</span></span> <span data-ttu-id="27e6a-245">默认属性中包括以下自定义属性：</span><span class="sxs-lookup"><span data-stu-id="27e6a-245">The following custom properties are included in the default properties:</span></span>

    - <span data-ttu-id="27e6a-246">**H\_USERID** – 如果贸易伙伴需要您发送用户 ID 作为 URL 的一部分来提交采购订单，请在此处输入值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-246">**H\_USERID** – If the trading partner requires that you send a user ID as part of the URL to submit a purchase order, enter the value here.</span></span>
    - <span data-ttu-id="27e6a-247">**H\_PASSWORD** – 如果贸易伙伴需要您发送密码作为 URL 的一部分来提交采购订单，请在此处输入值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-247">**H\_PASSWORD** – If the trading partner requires that you send a password as part of the URL to submit a purchase order, enter the value here.</span></span>

- <span data-ttu-id="27e6a-248">**ENABLEMANUALPO** – 如果将此属性设置为 _TRUE_，则当用户手动创建采购订单时（即当他们不是从申请开始时），这些采购订单将继承供应商的 **通过 cXML 发送采购订单** 选项的设置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-248">**ENABLEMANUALPO** – If this property is set to _TRUE_, when users manually create purchase orders (that is, when they don't start from a requisition), those purchase orders will inherit the setting of the **Send purchase order via cXML** option from the vendor.</span></span> <span data-ttu-id="27e6a-249">如果未设置此属性，或设置为 _FALSE_，将不会在手动创建的采购订单的采购订单标题上设置 **通过 cXML 发送采购订单** 选项。</span><span class="sxs-lookup"><span data-stu-id="27e6a-249">If this property isn't set, or if it's set to _FALSE_, the **Send purchase order via cXML** option won't be set on the purchase order header for manually created purchase orders.</span></span> <span data-ttu-id="27e6a-250">对于从申请创建的采购订单，无论此属性如何设置，始终会继承供应商的 **通过 cXML 发送采购订单** 选项的设置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-250">For purchase orders that are created from a requisition, the setting of the **Send purchase order via cXML** option is always inherited from the vendor, regardless of the setting of this property.</span></span> <span data-ttu-id="27e6a-251">有关详细信息，请参阅本主题前面的[设置供应商采购订单以使用 cXML](#vendor-setup) 一节。</span><span class="sxs-lookup"><span data-stu-id="27e6a-251">For more information, see the [Set up vendor purchase orders to use cXML](#vendor-setup) section earlier in this topic.</span></span>
- <span data-ttu-id="27e6a-252">**PUNCHOUTPOONLY** – 如果将此属性设置为 _TRUE_，仅从 PunchOut 流程创建的采购申请行会在采购订单标题上设置 **通过 cXML 发送采购订单** 选项。</span><span class="sxs-lookup"><span data-stu-id="27e6a-252">**PUNCHOUTPOONLY** – If this property is set to _TRUE_, only purchase requisition lines that are created from the PunchOut process will set the **Send purchase order via cXML** option on the purchase order header.</span></span> <span data-ttu-id="27e6a-253">此外，采购订单上所有行的采购申请行类型必须为 _外部目录项_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-253">In addition, the purchase requisition line type of all lines on the purchase order must be _External catalog item_.</span></span> <span data-ttu-id="27e6a-254">否则，将无法创建 cXML 采购订单。</span><span class="sxs-lookup"><span data-stu-id="27e6a-254">Otherwise, the cXML purchase order can't be created.</span></span>
- <span data-ttu-id="27e6a-255">**PUNCHOUTSHIPTO** – 如果此属性设置为 _TRUE_，当用户打开外部目录时，法人的默认地址将添加到 PunchOut 设置请求消息中。</span><span class="sxs-lookup"><span data-stu-id="27e6a-255">**PUNCHOUTSHIPTO** – If this property is set to _TRUE_, the default address of the legal entity will be added to the PunchOut setup request message when the user opens an external catalog.</span></span> <span data-ttu-id="27e6a-256">此地址将添加为 **ShipTo** 地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-256">This address is added as the **ShipTo** address.</span></span> <span data-ttu-id="27e6a-257">供应商将使用 **ShipTo** 地址来根据公司位置显示定价。</span><span class="sxs-lookup"><span data-stu-id="27e6a-257">Vendors will use the **ShipTo** address to show pricing based on the company location.</span></span>
- <span data-ttu-id="27e6a-258">**TRACEPUNCHOUT** – 如果您尝试从申请浏览到外部目录时收到错误消息，请将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-258">**TRACEPUNCHOUT** – Set this property to _TRUE_ if you receive an error message when you try to browse to an external catalog from the requisition.</span></span> <span data-ttu-id="27e6a-259">然后，将填充在 Supply Chain Management 和供应商站点之间发送的 **PunchOutSetupRequest** 和 **PunchOutResponse** 消息的跟踪信息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-259">Trace information will then be filled in for the **PunchOutSetupRequest** and **PunchOutResponse** messages that are sent between Supply Chain Management and the vendor site.</span></span> <span data-ttu-id="27e6a-260">您可以在 **cXML 购物车消息日志** 页上查看此信息，可以从遇到问题的供应商目录的 **外部目录设置** 页打开此页面。</span><span class="sxs-lookup"><span data-stu-id="27e6a-260">You can view this information on the **cXML cart message log** page, which you can open from the **External catalog setup** page for the vendor catalog that you're have having issues with.</span></span> <span data-ttu-id="27e6a-261">仅在进行故障排除时，才应将此属性设置为 _TRUE_，因为这会在数据库中对每个 PunchOut 造成很大的性能开销。</span><span class="sxs-lookup"><span data-stu-id="27e6a-261">You should set this property to _TRUE_ only if you're troubleshooting, because it creates a large performance overhead on the database for each PunchOut.</span></span> <span data-ttu-id="27e6a-262">有关详细信息，请参阅本主题后面的[查看外部目录 PunchOut 的 cXML 购物车消息日志](#message-log)一节。</span><span class="sxs-lookup"><span data-stu-id="27e6a-262">For more information, see the [View the cXML cart message log for external catalog PunchOut](#message-log) section later in this topic.</span></span>
- <span data-ttu-id="27e6a-263">**REPLACENEWLINE** – 如果由于供应商的系统正在发送包含换行符 (\\n) 的 **PunchOutResponse** 消息而遇到问题，请将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-263">**REPLACENEWLINE** – Set this property to _TRUE_ if you're having an issue because a vendor's system is sending a **PunchOutResponse** message that includes newline characters (\\n).</span></span> <span data-ttu-id="27e6a-264">如果通过中间件或采购中心分析了供应商的消息，则可能会发生此问题。</span><span class="sxs-lookup"><span data-stu-id="27e6a-264">This issue might occur if the vendor's messages are parsed through middleware or a procurement hub.</span></span> <span data-ttu-id="27e6a-265">如果您在使用新供应商设置时遇到问题，请将 **TRACEPUNCHOUT** 属性设置为 _TRUE_ 来查看 **PunchOutResponse** 消息，确定 XML 标记是否被换行符破坏。</span><span class="sxs-lookup"><span data-stu-id="27e6a-265">If you're having an issue with a new vendor setup, set the **TRACEPUNCHOUT** property to _TRUE_ to view the **PunchOutResponse** message and determine whether the XML tags are broken up by newline characters.</span></span>
- <span data-ttu-id="27e6a-266">**POCOMMENTS** – 如果您希望 cXML 文档包括附加到 Supply Chain Management 中采购订单的注释，将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-266">**POCOMMENTS** – Set this property to _TRUE_ if you want the cXML document to include notes that are attached to the purchase order in Supply Chain Management.</span></span> <span data-ttu-id="27e6a-267">附件文本包含在采购订单消息的标题注释中。</span><span class="sxs-lookup"><span data-stu-id="27e6a-267">The attachment text is included in the header comments in the purchase order message.</span></span> <span data-ttu-id="27e6a-268">有关系统如何选择和处理这些附件的详细信息，请参阅本主题后面的[将注释附加到采购订单](#attach-po-notes)一节。</span><span class="sxs-lookup"><span data-stu-id="27e6a-268">For more information about how the system selects and processes these attachments, see the [Attach notes to a purchase order](#attach-po-notes) section later in this topic.</span></span>
- <span data-ttu-id="27e6a-269">**VENDCOMMENTS** – 如果您希望 cXML 文档包括附加到 Supply Chain Management 中采购订单的注释，将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-269">**VENDCOMMENTS** – Set this property to _TRUE_ if you want the cXML document to include notes that are attached to the purchase order in Supply Chain Management.</span></span> <span data-ttu-id="27e6a-270">附件文本包含在采购订单消息的标题注释中。</span><span class="sxs-lookup"><span data-stu-id="27e6a-270">The attachment text is included in the header comments in the purchase order message.</span></span> <span data-ttu-id="27e6a-271">有关系统如何选择和处理这些附件的详细信息，请参阅[将注释附加到采购订单](#attach-po-notes)一节。</span><span class="sxs-lookup"><span data-stu-id="27e6a-271">For more information about how the system selects and processes these attachments, see the [Attach notes to a purchase order](#attach-po-notes) section.</span></span>
- <span data-ttu-id="27e6a-272">**CLEANAMP** – 如果在尝试对供应商执行 PunchOut 时收到错误消息，并且此供应商的返回 URL 包含错误编码的与号 (\&)，将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-272">**CLEANAMP** – Set this property to _TRUE_ if you receive an error message when you try to do a PunchOut to a vendor, and the vendor's return URL includes incorrectly encoded ampersands (\&).</span></span>
- <span data-ttu-id="27e6a-273">**PUNCHOUTTZ** – 如果您正在使用的供应商使用国际标准化组织 (ISO) 8601 标准对 PunchOut 请求消息的日期/时间进行特定验证，将此属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-273">**PUNCHOUTTZ** – Set this property to _TRUE_ if the vendor that you're working with uses the International Organization for Standardization (ISO) 8601 standard to do a specific validation of the date/time of PunchOut request message.</span></span> <span data-ttu-id="27e6a-274">Supply Chain Management 在 **PunchOutSetupRequest** 消息中使用协调世界时 (UTC) 日期。</span><span class="sxs-lookup"><span data-stu-id="27e6a-274">Supply Chain Management uses the Coordinated Universal Time (UTC) date in the **PunchOutSetupRequest** message.</span></span> <span data-ttu-id="27e6a-275">因此，当您将此属性设置为 _TRUE_ 时，将会在日期/时间格式中添加 *+00:00*。</span><span class="sxs-lookup"><span data-stu-id="27e6a-275">Therefore, when you set this property to _TRUE_, *+00:00* is added to the date/time format.</span></span>
- <span data-ttu-id="27e6a-276">**WMSADDRESSID** – 将此属性设置为 _TRUE_ 可以将采购订单标题上的仓库编号用作发送给供应商的采购订单请求的 **ShipTo** 地址中的 **addressID** 值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-276">**WMSADDRESSID** – Set this property to _TRUE_ to use the warehouse number on the purchase order header as the **addressID** value in the **ShipTo** address for the purchase order request that is sent to the vendor.</span></span> <span data-ttu-id="27e6a-277">如果为 **FIXEDSHIPADDRESSID** 属性设置了值，该值优先于此值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-277">If you set a value for the **FIXEDSHIPADDRESSID** property, that value takes precedence over this value.</span></span> <span data-ttu-id="27e6a-278">因此，您应该使用一个属性或另一个属性在文档的 **ShipTo** 地址中设置 **addressID** 值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-278">Therefore, you should use one property or the other to set the **addressID** value in the **ShipTo** address for the document.</span></span>
- <span data-ttu-id="27e6a-279">**PUNCHOUTSHIPTOUSER** – 此属性与 **PUNCHOUTSHIPTO** 属性一起使用。</span><span class="sxs-lookup"><span data-stu-id="27e6a-279">**PUNCHOUTSHIPTOUSER** – This property works together with the **PUNCHOUTSHIPTO** property.</span></span> <span data-ttu-id="27e6a-280">如果 **PUNCHOUTSHIPTO** 设置为 _TRUE_，将选择法人的地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-280">If **PUNCHOUTSHIPTO** is set to _TRUE_, the address for the legal entity is picked up.</span></span> <span data-ttu-id="27e6a-281">如果 **PUNCHOUTSHIPTOUSER** 设置为 _TRUE_，将使用 PunchOut 用户的主地址代替法人地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-281">If **PUNCHOUTSHIPTOUSER** is set to _TRUE_, the primary address from the PunchOut user is used instead of the legal entity address.</span></span>

### <a name="activate-the-external-catalog"></a><span data-ttu-id="27e6a-282">激活外部目录</span><span class="sxs-lookup"><span data-stu-id="27e6a-282">Activate the external catalog</span></span>

<span data-ttu-id="27e6a-283">完成设置所有属性并为外部目录配置其他设置后，返回 **外部目录** 页的 **常规** 快速选项卡，将 **活动** 选项设置为 *是*。</span><span class="sxs-lookup"><span data-stu-id="27e6a-283">When you've finished setting up all the properties and configuring other settings for your external catalog, go back to the **General** FastTab of the **External catalogs** page, and set the **Active** option to *Yes*.</span></span>

### <a name="attach-notes-to-a-purchase-order"></a><a name="attach-po-notes"></a><span data-ttu-id="27e6a-284">将注释附加到采购订单</span><span class="sxs-lookup"><span data-stu-id="27e6a-284">Attach notes to a purchase order</span></span>

<span data-ttu-id="27e6a-285">如 [设置订单属性](#set-order-properties)一节所述，如果您希望传递的 cXML 包含附加到相关采购订单和/或供应商记录的注释中的文本，您可以在外部目录设置中将 **POCOMMENTS** 和/或 **VENDCOMMENTS** 属性设置为 _TRUE_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-285">As was mentioned in the [Set the order properties](#set-order-properties) section, if you want your delivered cXML to include text from notes that are attached to the relevant purchase order and/or vendor records, you can set the **POCOMMENTS** and/or **VENDCOMMENTS** property to _TRUE_ in the external catalog setup.</span></span> <span data-ttu-id="27e6a-286">本节提供有关系统如何选择和处理这些附件（如果使用）的更多详细信息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-286">This section provides more detail about how the system selects and processes these attachments, if you use them.</span></span>

<span data-ttu-id="27e6a-287">若要设置系统要查找的注释类型，请转到 **采购 \> 设置 \> 窗体 \> 窗体设置**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-287">To set the types of notes that the system will look for, go to **Procurement and sourcing \> Setup \> Forms \> From setup**.</span></span> <span data-ttu-id="27e6a-288">然后，在 **采购订单** 选项卡上，将 **包括单据的类型** 字段设置为您希望包含的注释类型。</span><span class="sxs-lookup"><span data-stu-id="27e6a-288">Then, on the **Purchase order** tab, set the **Include documents of type** field to the type of note that you want to be able to include.</span></span> <span data-ttu-id="27e6a-289">将仅包含文本注释，不包含文档附件。</span><span class="sxs-lookup"><span data-stu-id="27e6a-289">Only text notes will be included, not document attachments.</span></span>

<span data-ttu-id="27e6a-290">![窗体设置页面](media/cxml-form-setup.png "窗体设置页面")</span><span class="sxs-lookup"><span data-stu-id="27e6a-290">![Form setup page](media/cxml-form-setup.png "Form setup page")</span></span>

<span data-ttu-id="27e6a-291">仅当附件的 **类型** 字段设置为您在 **包括单据的类型** 字段中选择的值，并且附件的 **限制** 字段设置为 _外部_ 时，附件才会包含在采购订单中。</span><span class="sxs-lookup"><span data-stu-id="27e6a-291">Attachments will be included with a purchase order only if their **Type** field is set to the value that you select in the **Include documents of type** field, and if their **Restriction** field is set to _External_.</span></span> <span data-ttu-id="27e6a-292">要创建、查看或编辑采购订单的附件，请转到 **采购 \> 所有采购订单**，选择或创建采购订单，然后选择右上角的 **附件** 按钮（回形针符号）。</span><span class="sxs-lookup"><span data-stu-id="27e6a-292">To create, view, or edit the attachments for a purchase order, go to **Procurement and sourcing \> All purchase orders**, select or create a purchase order, and then select the **Attachments** button (paperclip symbol) in the upper-right corner.</span></span>

<span data-ttu-id="27e6a-293">![设置为发送给供应商的附加注释](media/cxml-note-to-vendor.png "设置为发送给供应商的附加注释")</span><span class="sxs-lookup"><span data-stu-id="27e6a-293">![Attached note that is set up to be sent to a vendor](media/cxml-note-to-vendor.png "Attached note that is set up to be sent to a vendor")</span></span>

## <a name="view-the-cxml-cart-message-log-for-external-catalog-punchout"></a><a name="message-log"></a><span data-ttu-id="27e6a-294">查看外部目录 PunchOut 的 cXML 购物车消息日志</span><span class="sxs-lookup"><span data-stu-id="27e6a-294">View the cXML cart message log for external catalog PunchOut</span></span>

<span data-ttu-id="27e6a-295">当您将外部目录的 **Punchout 协议类型** 字段设置为 _cXML_ 时，系统将捕获从供应商返回的购物车的消息日志。</span><span class="sxs-lookup"><span data-stu-id="27e6a-295">When you set the **Punchout protocol type** field to _cXML_ for an external catalog, the system will capture a message log of the carts that come back from vendors.</span></span> <span data-ttu-id="27e6a-296">此日志可用于故障排除和其他数据目的。</span><span class="sxs-lookup"><span data-stu-id="27e6a-296">This log can be used for troubleshooting and other data purposes.</span></span>

<span data-ttu-id="27e6a-297">要打开外部目录的日志，请选择相关目录，然后在操作窗格上选择 **cXML 购物车消息日志**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-297">To open the log for an external catalog, select the relevant catalog, and then, on the Action Pane, select **cXML cart message log**.</span></span> <span data-ttu-id="27e6a-298">**cXML 购物车消息日志** 页将显示已返回购物车的列表、与这些购物车相关的 XML，以及在相关采购申请上创建的行。</span><span class="sxs-lookup"><span data-stu-id="27e6a-298">The **cXML cart message log** page shows a list of the carts that have been returned, the XML that is related to those carts, and the lines that were created on the related purchase requisition.</span></span>

<span data-ttu-id="27e6a-299">![cXML 购物车消息日志页面](media/cxml-cart-message-log.png "cXML 购物车消息日志页面")</span><span class="sxs-lookup"><span data-stu-id="27e6a-299">![cXML cart message log page](media/cxml-cart-message-log.png "cXML cart message log page")</span></span>

## <a name="set-the-extrinsic-elements-for-external-catalog-punchout"></a><span data-ttu-id="27e6a-300">设置外部目录 PunchOut 的外在元素</span><span class="sxs-lookup"><span data-stu-id="27e6a-300">Set the extrinsic elements for external catalog PunchOut</span></span>

<span data-ttu-id="27e6a-301">当您将外部目录的 **Punchout 协议类型** 字段设置为 *cXML* 时，可以添加自定义外在元素，这些元素将插入请求 XML 消息中的正确位置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-301">When you set the **Punchout protocol type** field to *cXML* for an external catalog, you can add custom extrinsic elements that will be inserted at the correct place in the request XML message.</span></span>

<span data-ttu-id="27e6a-302">要将外在元素添加到外部目录，请按照下列步骤操作。</span><span class="sxs-lookup"><span data-stu-id="27e6a-302">To add extrinsic elements to an external catalog, follow these steps.</span></span>

1. <span data-ttu-id="27e6a-303">转到 **采购 \> 目录 \> 外部目录**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-303">Go to **Procurement and sourcing \> Catalogs \> External catalogs**.</span></span>
1. <span data-ttu-id="27e6a-304">选择相关目录。</span><span class="sxs-lookup"><span data-stu-id="27e6a-304">Select the relevant catalog.</span></span>
1. <span data-ttu-id="27e6a-305">在 **消息格式** 快速选项卡上的 **外在** 部分，选择 **添加**，为您要包括的每个外在元素向网格添加一行。</span><span class="sxs-lookup"><span data-stu-id="27e6a-305">On the **Message format** FastTab, in the **Extrinsics** section, select **Add** to add a row to the grid for each extrinsic element that you want to include.</span></span> <span data-ttu-id="27e6a-306">在每一行上，设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="27e6a-306">On each row, set the following fields:</span></span>

    - <span data-ttu-id="27e6a-307">**名称** – 为元素输入名称。</span><span class="sxs-lookup"><span data-stu-id="27e6a-307">**Name** – Enter a name for the element.</span></span> <span data-ttu-id="27e6a-308">此值将成为每一行创建的 **外在** XML元素的 **名称** 属性的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-308">This value will become the value of the **name** attribute for the **Extrinsic** XML element that is created by each row.</span></span> <span data-ttu-id="27e6a-309">通常，您将与供应商一起商定每个外在元素的名称。</span><span class="sxs-lookup"><span data-stu-id="27e6a-309">Usually, you will work with your vendor to agree on the name for each extrinsic element.</span></span>
    - <span data-ttu-id="27e6a-310">**值** – 为元素选择一个值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-310">**Value** – Select a value for the element.</span></span> <span data-ttu-id="27e6a-311">此值将成为每一行创建的 XML元素的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-311">This value will become the value of the XML element that is created by each row.</span></span> <span data-ttu-id="27e6a-312">提供以下值：</span><span class="sxs-lookup"><span data-stu-id="27e6a-312">The following values are available:</span></span>

        - <span data-ttu-id="27e6a-313">**用户名** – 使用正在执行 PunchOut 的用户的名称。</span><span class="sxs-lookup"><span data-stu-id="27e6a-313">**User name** – Use the name of the user who is doing the PunchOut.</span></span> <span data-ttu-id="27e6a-314">此名称是 Supply Chain Management 的登录名称。</span><span class="sxs-lookup"><span data-stu-id="27e6a-314">This name is the sign-in name for Supply Chain Management.</span></span>
        - <span data-ttu-id="27e6a-315">**用户电子邮件** – 使用正在执行 PunchOut 的用户的电子邮件地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-315">**User email** – Use the email address of the user who is doing the PunchOut.</span></span> <span data-ttu-id="27e6a-316">此地址是用户在 **用户选项** 页的 **帐户** 选项卡上设置的地址。</span><span class="sxs-lookup"><span data-stu-id="27e6a-316">This address is the address that the user has set up on the **Account** tab of the **User options** page.</span></span>
        - <span data-ttu-id="27e6a-317">**随机值** – 使用唯一的随机值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-317">**Random value** – Use a unique random value.</span></span>
        - <span data-ttu-id="27e6a-318">**用户全名** – 使用与正在访问外部目录的用户关联的联系人的全名。</span><span class="sxs-lookup"><span data-stu-id="27e6a-318">**User full name** – Use the full name of the contact person who is associated with the user who is accessing the external catalog.</span></span>
        - <span data-ttu-id="27e6a-319">**名字** – 使用与正在访问外部目录的用户关联的联系人的名字。</span><span class="sxs-lookup"><span data-stu-id="27e6a-319">**Firstname** – Use the first name of the contact person who is associated with the user who is accessing the external catalog.</span></span>
        - <span data-ttu-id="27e6a-320">**姓氏** – 使用与正在访问外部目录的用户关联的联系人的姓氏。</span><span class="sxs-lookup"><span data-stu-id="27e6a-320">**Lastname** – Use the last name of the contact person who is associated with the user who is accessing the external catalog.</span></span>
        - <span data-ttu-id="27e6a-321">**电话号码** – 使用与正在访问外部目录的用户关联的联系人的主电话号码。</span><span class="sxs-lookup"><span data-stu-id="27e6a-321">**Phone number** – Use the primary phone number of the contact person who is associated with the user who is accessing the external catalog.</span></span>

<span data-ttu-id="27e6a-322">![外在元素设置](media/cxml-extrinsics.png "外在元素设置")</span><span class="sxs-lookup"><span data-stu-id="27e6a-322">![Extrinsic element settings](media/cxml-extrinsics.png "Extrinsic element settings")</span></span>

<span data-ttu-id="27e6a-323">用户或管理员看不到外在元素，因为在用户执行 PunchOut 之前不会添加它们。</span><span class="sxs-lookup"><span data-stu-id="27e6a-323">The user or admin won't see the extrinsic elements, because they aren't added until the user does a PunchOut.</span></span> <span data-ttu-id="27e6a-324">它们会自动插入到 cXML 设置请求消息中的 **BuyerCookie** 和 **BrowserFromPost** 元素之间。</span><span class="sxs-lookup"><span data-stu-id="27e6a-324">They will automatically be inserted between the **BuyerCookie** and **BrowserFromPost** elements in the cXML setup request message.</span></span> <span data-ttu-id="27e6a-325">因此，在设置外部目录时，无需在 XML 中手动设置它们。</span><span class="sxs-lookup"><span data-stu-id="27e6a-325">Therefore, you don't have to set them manually in the XML when you set up the external catalog.</span></span>

<span data-ttu-id="27e6a-326">![添加到 XML 的外在元素](media/cxml-extrinsics-xml.png "添加到 XML 的外在元素")</span><span class="sxs-lookup"><span data-stu-id="27e6a-326">![Extrinsic elements added to the XML](media/cxml-extrinsics-xml.png "Extrinsic elements added to the XML")</span></span>

## <a name="create-and-process-a-purchase-order"></a><a name="create-po"></a><span data-ttu-id="27e6a-327">创建和处理采购订单</span><span class="sxs-lookup"><span data-stu-id="27e6a-327">Create and process a purchase order</span></span>

<span data-ttu-id="27e6a-328">为供应商创建采购订单时，将继承该供应商的 **通过 cXML 发送采购订单** 选项的设置。</span><span class="sxs-lookup"><span data-stu-id="27e6a-328">When you create a purchase order for a vendor, it will inherit the setting of the **Send purchase order via cXML** option from that vendor.</span></span> <span data-ttu-id="27e6a-329">但是，此设置在采购订单的 **标题** 视图中的 **设置** 快速选项卡上仍然可用，因此您以后可以根据需要进行更改。</span><span class="sxs-lookup"><span data-stu-id="27e6a-329">However, the setting remains available on the **Setup** FastTab in the **Header** view of the purchase order, so that you can change it later as required.</span></span>

<span data-ttu-id="27e6a-330">![设置为使用 cXML 的采购订单](media/cxml-purchase-order.png "设置为使用 cXML 的采购订单")</span><span class="sxs-lookup"><span data-stu-id="27e6a-330">![Purchase order set to use cXML](media/cxml-purchase-order.png "Purchase order set to use cXML")</span></span>

<span data-ttu-id="27e6a-331">当您从来自 PunchOut 流的采购申请创建采购订单时，将填充所有必需的行详细信息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-331">When you create a purchase order from a purchase requisition that came from a PunchOut flow, all the required line details will be filled in.</span></span> <span data-ttu-id="27e6a-332">然后，您可以手动添加采购订单行或从其他采购订单复制。</span><span class="sxs-lookup"><span data-stu-id="27e6a-332">You can then manually add purchase order lines or copy them from other purchase orders.</span></span> <span data-ttu-id="27e6a-333">请确保设置所有必填字段。</span><span class="sxs-lookup"><span data-stu-id="27e6a-333">Be sure to set all required fields.</span></span> <span data-ttu-id="27e6a-334">这些必填字段包括外部参考编号，即将在 cXML 消息中使用的供应商编号。</span><span class="sxs-lookup"><span data-stu-id="27e6a-334">These required fields include the external reference number, which is the vendor number that will be used in the cXML message.</span></span>

<span data-ttu-id="27e6a-335">![外部参考编号的示例](media/cxml-line-details.png "外部参考编号的示例")</span><span class="sxs-lookup"><span data-stu-id="27e6a-335">![Example of an external reference number](media/cxml-line-details.png "Example of an external reference number")</span></span>

<span data-ttu-id="27e6a-336">填写采购订单的所有详细信息后，请确保进行确认。</span><span class="sxs-lookup"><span data-stu-id="27e6a-336">When you've finished filling in all the details for the purchase order, be sure to confirm it.</span></span> <span data-ttu-id="27e6a-337">除非采购订单已确认，否则不会发送任何消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-337">No message is sent unless the purchase order is confirmed.</span></span> <span data-ttu-id="27e6a-338">要确认采购订单，在操作窗格上，在 **采购** 选项卡上的 **操作** 组中，选择 **确认**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-338">To confirm a purchase order, on the Action Pane, on the **Purchase** tab, in the **Actions** group, select **Confirm**.</span></span> 

<span data-ttu-id="27e6a-339">确认采购订单后，您可以通过 **采购订单确认** 日记帐查看确认状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-339">After the purchase order is confirmed, you can view the status of the confirmation through the **Purchase order confirmations** journals.</span></span> <span data-ttu-id="27e6a-340">在操作窗格上，在 **采购** 选项卡的 **日记帐** 组中，选择 **采购订单确认**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-340">On the Action Pane, on the **Purchase** tab, in the **Journals** group, select **Purchase order confirmations**.</span></span>

<span data-ttu-id="27e6a-341">每个采购订单可以有很多确认。</span><span class="sxs-lookup"><span data-stu-id="27e6a-341">Each purchase order can have many confirmations.</span></span> <span data-ttu-id="27e6a-342">每个确认标有递增编号。</span><span class="sxs-lookup"><span data-stu-id="27e6a-342">Each confirmation is marked with an incremental number.</span></span> <span data-ttu-id="27e6a-343">在下图中，采购订单为 *00000275*，确认为 *00000275-1*。</span><span class="sxs-lookup"><span data-stu-id="27e6a-343">In the following illustration, the purchase order is *00000275*, and the confirmation is *00000275-1*.</span></span> <span data-ttu-id="27e6a-344">此编号反映了标准 Supply Chain Management 功能，其中基于确认确定采购订单的更改，以及因此应发送给供应商的 cXML 消息的类型。</span><span class="sxs-lookup"><span data-stu-id="27e6a-344">This numbering reflects standard Supply Chain Management functionality, where changes in a purchase order, and therefore the type of cXML message that should be sent to the vendor, are identified based on the confirmation.</span></span> <span data-ttu-id="27e6a-345">如图所示，**采购订单确认** 页还包括 **订单发送状态** 和 **订单请求供应商状态** 字段。</span><span class="sxs-lookup"><span data-stu-id="27e6a-345">As the illustration shows, the **Purchase order confirmations** page also includes **Order send status** and **Order request vendor status** fields.</span></span> <span data-ttu-id="27e6a-346">有关您可能在此页面上看到的各种状态值的详细信息，请参阅本主题后面的[监视采购订单请求](#monitor-po-requests)一节。</span><span class="sxs-lookup"><span data-stu-id="27e6a-346">For more information about the various status values that you might see on this page, see the [Monitor purchase order requests](#monitor-po-requests) section later in this topic.</span></span>

<span data-ttu-id="27e6a-347">![采购订单确认页面](media/cxml-po-confirmations.png "采购订单确认页面")</span><span class="sxs-lookup"><span data-stu-id="27e6a-347">![Purchase order confirmations page](media/cxml-po-confirmations.png "Purchase order confirmations page")</span></span>

<span data-ttu-id="27e6a-348">要查看有关文档的详细信息，请选择网格上方的 **采购订单请求**。</span><span class="sxs-lookup"><span data-stu-id="27e6a-348">To view more information about the document, select **Purchase order request** above the grid.</span></span>

<span data-ttu-id="27e6a-349">**采购订单请求** 页面包含两个网格。</span><span class="sxs-lookup"><span data-stu-id="27e6a-349">The **Purchase order request** page includes two grids.</span></span> <span data-ttu-id="27e6a-350">在页面上部的网格中，每个采购订单有一个标记为发送的记录。</span><span class="sxs-lookup"><span data-stu-id="27e6a-350">The grid in the upper part of the page has one record for each purchase order that is marked for sending.</span></span> <span data-ttu-id="27e6a-351">页面下部 **采购订单请求历史记录** 选项卡上的网格可能有所选采购订单的多个记录，指示每个确认的状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-351">The grid on the **Purchase order request history** tab in the lower part of the page might have several records for the selected purchase order, to indicate the status of each confirmation.</span></span> <span data-ttu-id="27e6a-352">下图显示了上部网格中的采购订单 00000275 和 **采购订单请求历史记录** 选项卡上的网格中的单据 00000275-1。</span><span class="sxs-lookup"><span data-stu-id="27e6a-352">The following illustration shows purchase order 00000275 in the upper grid and document 00000275-1 in the grid on the **Purchase order request history** tab.</span></span>

<span data-ttu-id="27e6a-353">![采购订单请求页面](media/cxml-po-request.png "采购订单请求页面")</span><span class="sxs-lookup"><span data-stu-id="27e6a-353">![Purchase order request page](media/cxml-po-request.png "Purchase order request page")</span></span>

<span data-ttu-id="27e6a-354">如果批处理作业已设置并正在运行，将发送单据。</span><span class="sxs-lookup"><span data-stu-id="27e6a-354">If the batch job is set up and running, the document will be sent.</span></span> <span data-ttu-id="27e6a-355">发送单据后，您可以查看状态更改。</span><span class="sxs-lookup"><span data-stu-id="27e6a-355">You can view the status change after the document has been sent.</span></span> <span data-ttu-id="27e6a-356">在下图中，**订单发送状态** 字段设置为 _已发送_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-356">In the following illustration, the **Order send status** field is set to _Sent_.</span></span> <span data-ttu-id="27e6a-357">**订单请求供应商状态** 字段设置为 _已确认_，指示供应商已收到单据，并且能够读取该单据并将其存储在系统中。</span><span class="sxs-lookup"><span data-stu-id="27e6a-357">The **Order request vendor status** field is set to _Acknowledged_ to indicate that the vendor received the document, and was able to read it and store it in its system.</span></span> <span data-ttu-id="27e6a-358">**采购订单请求历史记录** 选项卡上的网格显示发送单据的时间。</span><span class="sxs-lookup"><span data-stu-id="27e6a-358">The grid on the **Purchase order request history** tab shows the time when the document was sent.</span></span> <span data-ttu-id="27e6a-359">有关您可能在此页面上看到的各种状态值的详细信息，请参阅[监视采购订单请求](#monitor-po-requests)一节。</span><span class="sxs-lookup"><span data-stu-id="27e6a-359">For more information about the various status values that you might see on this page, see the [Monitor purchase order requests](#monitor-po-requests) section.</span></span>

<span data-ttu-id="27e6a-360">![采购订单请求页面上的状态消息](media/cxml-po-request-2.png "采购订单请求页面上的状态消息")</span><span class="sxs-lookup"><span data-stu-id="27e6a-360">![Status messages on the Purchase order request page](media/cxml-po-request-2.png "Status messages on the Purchase order request page")</span></span>

## <a name="schedule-the-purchase-order-request-batch-job"></a><a name="po-batch"></a><span data-ttu-id="27e6a-361">计划采购订单请求批处理作业</span><span class="sxs-lookup"><span data-stu-id="27e6a-361">Schedule the Purchase order request batch job</span></span>

<span data-ttu-id="27e6a-362">要激活发送采购订单请求的批处理作业，请转到 **采购 \> 设置 \> cXML 管理 \> 采购订单请求**，然后在操作窗格上的 **采购订单请求** 选项卡上，在 **批处理** 组中，选择 **提交作业** 以打开 **采购请求准备与发送** 对话框。</span><span class="sxs-lookup"><span data-stu-id="27e6a-362">To activate the batch job for sending purchase order requests, go to **Procurement and sourcing \> Setup \> cXML Management \> Purchase order request**, and then, on the Action Pane, on the **Purchase order request** tab, in the **Batch** group, select **Submit job** to open the **Purchase request prepare and send** dialog box.</span></span> <span data-ttu-id="27e6a-363">您可以像在 Supply Chain Management 中处理批处理作业那样使用此对话框设置定期。</span><span class="sxs-lookup"><span data-stu-id="27e6a-363">You can use this dialog box to set up the recurrence, just as you usually do for batch jobs in Supply Chain Management.</span></span> <span data-ttu-id="27e6a-364">根据您的订单量选择一个间隔。</span><span class="sxs-lookup"><span data-stu-id="27e6a-364">Select an interval, based on your order volume.</span></span> <span data-ttu-id="27e6a-365">虽然您可以每分钟运行批处理作业，但可能最好的做法是根据与供应商的计划匹配的订单接收窗口在整个工作日内发送批处理。</span><span class="sxs-lookup"><span data-stu-id="27e6a-365">Although you can run the batch job every minute, it's probably best to send batches throughout the business day, based on order receipt windows that match your vendors' schedules.</span></span>

<span data-ttu-id="27e6a-366">例如，您的供应商有一项政策规定，下午 1 点之前收到的所有订单都在同一天装运。</span><span class="sxs-lookup"><span data-stu-id="27e6a-366">For example, your vendor has a policy that states that all orders that are received by 1 PM will be shipped on the same day.</span></span> <span data-ttu-id="27e6a-367">在这种情况下，您可能只需要在早上运行几次批处理来传达您有的全部订单。</span><span class="sxs-lookup"><span data-stu-id="27e6a-367">In this case, you might have to run the batch only a few times during the morning to communicate any orders that you have.</span></span> <span data-ttu-id="27e6a-368">其余订单将在第二天发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-368">The remaining orders will then be sent the next day.</span></span> <span data-ttu-id="27e6a-369">此决定只是一个业务决定。</span><span class="sxs-lookup"><span data-stu-id="27e6a-369">This decision is purely a business decision.</span></span> <span data-ttu-id="27e6a-370">您可以进行检查，然后相应地设置参数。</span><span class="sxs-lookup"><span data-stu-id="27e6a-370">You can review it and set the parameters for it accordingly.</span></span>

<span data-ttu-id="27e6a-371">过程中将查找状态为 *等待* 的采购订单请求文档。</span><span class="sxs-lookup"><span data-stu-id="27e6a-371">The process will look for purchase order request documents that have a status of *Waiting*.</span></span> <span data-ttu-id="27e6a-372">如果您有必须立即发送给供应商的订单，可以选择 **提交作业** 并将 **批处理** 选项设置为 *否*。</span><span class="sxs-lookup"><span data-stu-id="27e6a-372">If you have an order that you must send to a vendor immediately, you can select **Submit job** and set the **Batch processing** option to *No*.</span></span>

## <a name="monitor-purchase-order-requests"></a><a name="monitor-po-requests"></a><span data-ttu-id="27e6a-373">监视采购订单请求</span><span class="sxs-lookup"><span data-stu-id="27e6a-373">Monitor purchase order requests</span></span>

### <a name="view-the-status-of-a-purchase-order"></a><span data-ttu-id="27e6a-374">查看采购订单的状态</span><span class="sxs-lookup"><span data-stu-id="27e6a-374">View the status of a purchase order</span></span>

<span data-ttu-id="27e6a-375">确认可以通过 cXML 发送的订单后，它们将进入 _等待_ 状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-375">When orders that can be sent via cXML are confirmed, they go into _Waiting_ status.</span></span> <span data-ttu-id="27e6a-376">如 [创建和处理采购订单](#create-po)一节所述，您可以在 **采购订单请求** 页查看采购订单状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-376">As was described in the [Create and process a purchase order](#create-po) section, you can view the purchase order status on the **Purchase order request** page.</span></span> <span data-ttu-id="27e6a-377">每个采购订单请求可以具有几种状态之一，具体取决于其参数和数据。</span><span class="sxs-lookup"><span data-stu-id="27e6a-377">Each purchase order request can have one of several statuses, depending on its parameters and data.</span></span> <span data-ttu-id="27e6a-378">本节介绍各种状态类型及其可以具有的值。</span><span class="sxs-lookup"><span data-stu-id="27e6a-378">This section describes the various status types and the values that they can have.</span></span> <span data-ttu-id="27e6a-379">此信息可以帮助您管理问题并了解采购订单的状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-379">This information can help you manage issues and understand the status of your purchase orders.</span></span>

<span data-ttu-id="27e6a-380">![采购订单请求页面上的采购订单状态](media/cxml-monitor-po-request.png "采购订单请求页面上的采购订单状态")</span><span class="sxs-lookup"><span data-stu-id="27e6a-380">![Purchase order status on the Purchase order request page](media/cxml-monitor-po-request.png "Purchase order status on the Purchase order request page")</span></span>

<span data-ttu-id="27e6a-381">**采购订单请求** 页上部的网格可能会显示以下状态值：</span><span class="sxs-lookup"><span data-stu-id="27e6a-381">The grid in the upper part of the **Purchase order request** page might show the following status values:</span></span>

- <span data-ttu-id="27e6a-382">**订单发送状态** – 此字段可以具有以下值之一：</span><span class="sxs-lookup"><span data-stu-id="27e6a-382">**Order send status** – This field can have one of the following values:</span></span>

    - <span data-ttu-id="27e6a-383">**等待** – 文档正在等待发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-383">**Waiting** – The document is waiting to be sent.</span></span>
    - <span data-ttu-id="27e6a-384">**已发送** – 文档已发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-384">**Sent** – The document has been sent.</span></span>
    - <span data-ttu-id="27e6a-385">**已停止** – 文档在发送之前被标记为 _已停止_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-385">**Stopped** – The document was marked as _Stopped_ before it was sent.</span></span> <span data-ttu-id="27e6a-386">（要将文档标记为 _已停止_，在 **采购请求** 页的操作窗格上选择 **停止**。）</span><span class="sxs-lookup"><span data-stu-id="27e6a-386">(To mark a document as _Stopped_, select **Stop** on the Action Pane of the **Purchase request** page.)</span></span>
    - <span data-ttu-id="27e6a-387">**存档** – 文档已清除。</span><span class="sxs-lookup"><span data-stu-id="27e6a-387">**Archive** – The document has been purged.</span></span> <span data-ttu-id="27e6a-388">（要清除文档，在 **采购请求** 页的操作窗格上选择 **清除**。）</span><span class="sxs-lookup"><span data-stu-id="27e6a-388">(To purge a document, select **Purge** on the Action Pane of the **Purchase request** page.)</span></span>

- <span data-ttu-id="27e6a-389">**订单请求供应商状态** – 此字段可以具有以下值之一：</span><span class="sxs-lookup"><span data-stu-id="27e6a-389">**Order request vendor status** – This field can have one of the following values:</span></span>

    - <span data-ttu-id="27e6a-390">**等待** – 文档正在等待发送。</span><span class="sxs-lookup"><span data-stu-id="27e6a-390">**Waiting** – The document is waiting to be sent.</span></span>
    - <span data-ttu-id="27e6a-391">**已确认** – 供应商已确认文档已接收。</span><span class="sxs-lookup"><span data-stu-id="27e6a-391">**Acknowledged** – The document has been acknowledged as received by the vendor.</span></span> <span data-ttu-id="27e6a-392">您可以通过选择页面下部的 **响应 XML** 选项卡来查看从供应商返回的详细 XML 消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-392">You can review the detailed XML message that is returned from the vendor by selecting the **Response XML** tab in the lower part of the page.</span></span>
    - <span data-ttu-id="27e6a-393">**错误** – 文档已发送给供应商，但发生错误。</span><span class="sxs-lookup"><span data-stu-id="27e6a-393">**Error** – The document was sent to the vendor, but an error occurred.</span></span> <span data-ttu-id="27e6a-394">您可以通过选择页面下部的 **响应 XML** 选项卡查看错误消息。</span><span class="sxs-lookup"><span data-stu-id="27e6a-394">You can review the error message by selecting the **Response XML** tab in the lower part of the page.</span></span>

<span data-ttu-id="27e6a-395">**采购订单请求** 页下部的 **采购订单请求历史记录** 选项卡上的网格可能显示以下值：</span><span class="sxs-lookup"><span data-stu-id="27e6a-395">The grid on the **Purchase order request history** tab in the lower part of the **Purchase order request** page might show the following values:</span></span>

- <span data-ttu-id="27e6a-396">**订单请求类型** – 此字段可以具有以下值之一：</span><span class="sxs-lookup"><span data-stu-id="27e6a-396">**Order request type** – This field can have one of the following values:</span></span>

    - <span data-ttu-id="27e6a-397">**新** – 确认采购订单后，行将立即标记为新行。</span><span class="sxs-lookup"><span data-stu-id="27e6a-397">**New** – The line is marked as new immediately after the purchase order is confirmed.</span></span>
    - <span data-ttu-id="27e6a-398">**更新** – 如果供应商已经发送并确认了确认，下一个确认将标记为 _更新_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-398">**Update** – If a confirmation has already been sent and acknowledged by the vendor, the next confirmation will be marked as _Update_.</span></span> <span data-ttu-id="27e6a-399">仅当 **发送采购请求更新** 选项在 [全局 cXML 参数](#cxml-parameters)中设置为 *是* 时，才会发送更新。</span><span class="sxs-lookup"><span data-stu-id="27e6a-399">Updates will be sent only if the **Send purchase request updates** option is set to *Yes* in the [global cXML parameters](#cxml-parameters).</span></span>
    - <span data-ttu-id="27e6a-400">**删除** – 如果供应商已经发送并确认了确认，但采购订单被取消，正在等待的确认将被标记为 _删除_。</span><span class="sxs-lookup"><span data-stu-id="27e6a-400">**Delete** – If a confirmation has already been sent and acknowledged by the vendor, but the purchase order is canceled, the confirmation that is waiting will be marked as _Delete_.</span></span> <span data-ttu-id="27e6a-401">仅当 **发送采购请求删除** 选项在 [全局 cXML 参数](#cxml-parameters)中设置为 *是* 时，才会发送删除。</span><span class="sxs-lookup"><span data-stu-id="27e6a-401">Deletions will be sent only if the **Send purchase request delete** option is set to *Yes* in the [global cXML parameters](#cxml-parameters).</span></span>

- <span data-ttu-id="27e6a-402">**请求时间** – 创建订单确认的时间。</span><span class="sxs-lookup"><span data-stu-id="27e6a-402">**Request time** – The time when the order confirmation was created.</span></span> <span data-ttu-id="27e6a-403">您可以将请求时间与订单状态时间进行比较，来确定确认和供应商确认之间的时间。</span><span class="sxs-lookup"><span data-stu-id="27e6a-403">You can compare the request time with the order status time to determine the time between confirmation and vendor acknowledgment.</span></span>
- <span data-ttu-id="27e6a-404">**订单发送状态** – 此字段与页面上部的 **订单发送状态** 字段相同。</span><span class="sxs-lookup"><span data-stu-id="27e6a-404">**Order send status** – This field is the same as the **Order send status** field in the upper part of the page.</span></span> <span data-ttu-id="27e6a-405">在此处重复出现是为了让您更轻松地在确认级别查看状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-405">It's repeated here to make it easier to view the status at the confirmation level.</span></span> <span data-ttu-id="27e6a-406">如果 **订单请求类型** 字段设置为 *新*，并且在发送确认之前重新确认了采购订单，**订单发送状态** 字段将设置为 *存档*。</span><span class="sxs-lookup"><span data-stu-id="27e6a-406">If the **Order request type** field is set to *New*, and the purchase order is reconfirmed before a confirmation is sent, the **Order send status** field is set to *Archive*.</span></span>
- <span data-ttu-id="27e6a-407">**订单状态时间** – 采购订单请求历史记录最后更新的时间。</span><span class="sxs-lookup"><span data-stu-id="27e6a-407">**Order status time** – The time when the purchase order request history record was last updated.</span></span> <span data-ttu-id="27e6a-408">（更新包括状态更改。）</span><span class="sxs-lookup"><span data-stu-id="27e6a-408">(The updates include status changes.)</span></span>
- <span data-ttu-id="27e6a-409">**订单请求供应商状态** – 此字段与页面上部的 **订单请求供应商状态** 字段相同。</span><span class="sxs-lookup"><span data-stu-id="27e6a-409">**Order request vendor status** – This field is the same as the **Order request vendor status** field in the upper part of the page.</span></span> <span data-ttu-id="27e6a-410">在此处重复出现是为了让您更轻松地在确认级别查看状态。</span><span class="sxs-lookup"><span data-stu-id="27e6a-410">It's repeated here to make it easier to view the status at the confirmation level.</span></span>
- <span data-ttu-id="27e6a-411">**重新提交时间** – 记录重新提交的时间。</span><span class="sxs-lookup"><span data-stu-id="27e6a-411">**Re-submit time** – The time when the record was resubmitted.</span></span>
- <span data-ttu-id="27e6a-412">**重新提交计数** – 记录重新提交的次数。</span><span class="sxs-lookup"><span data-stu-id="27e6a-412">**Re-submit count** – The number of times that the record has been resubmitted.</span></span> <span data-ttu-id="27e6a-413">大数字指示多次失败，因此可能表示您的数据设置或供应商的数据设置有问题。</span><span class="sxs-lookup"><span data-stu-id="27e6a-413">A high number indicates multiple failures, and therefore might indicate an issue with either your data setup or your vendor's data setup.</span></span>

### <a name="view-the-xml-for-a-purchase-order-request-message"></a><span data-ttu-id="27e6a-414">查看采购订单请求消息的 XML</span><span class="sxs-lookup"><span data-stu-id="27e6a-414">View the XML for a purchase order request message</span></span>

<span data-ttu-id="27e6a-415">要查看采购订单请求消息的 XML，请选择 **采购订单请求** 页底部的 **请求 XML 文本** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="27e6a-415">To view the XML for the purchase order request message, select the **Request XML text** tab at the bottom of the **Purchase order request** page.</span></span> <span data-ttu-id="27e6a-416">此选项卡上的信息在测试或错误验证期间可能会有所帮助。</span><span class="sxs-lookup"><span data-stu-id="27e6a-416">The information on this tab can be helpful during testing or error validation.</span></span> <span data-ttu-id="27e6a-417">为了使信息更易于阅读，您可以将其作为格式化的消息来查看。</span><span class="sxs-lookup"><span data-stu-id="27e6a-417">To make the information easier to read, you can view it as a formatted message.</span></span> <span data-ttu-id="27e6a-418">将选项卡的内容复制到文本文件，然后在 XML 编辑器中进行查看。</span><span class="sxs-lookup"><span data-stu-id="27e6a-418">Copy the contents of the tab to a text file, and then view it in an XML editor.</span></span>

<span data-ttu-id="27e6a-419">![请求 XML 文本选项卡](media/cxml-request-xml-text.png "请求 XML 文本选项卡")</span><span class="sxs-lookup"><span data-stu-id="27e6a-419">![Request XML text tab](media/cxml-request-xml-text.png "Request XML text tab")</span></span>

### <a name="view-the-details-of-the-vendor-response"></a><span data-ttu-id="27e6a-420">查看供应商响应的详细信息</span><span class="sxs-lookup"><span data-stu-id="27e6a-420">View the details of the vendor response</span></span>

<span data-ttu-id="27e6a-421">要查看供应商确认或错误响应的内容，请选择 **采购订单请求** 页底部的 **响应 XML** 选项卡。</span><span class="sxs-lookup"><span data-stu-id="27e6a-421">To view the content of a vendor acknowledgment or error response, select the **Response XML** tab at the bottom of the **Purchase order request** page.</span></span>

<span data-ttu-id="27e6a-422">![响应 XML 选项卡](media/cxml-response-xml.png "响应 XML 选项卡")</span><span class="sxs-lookup"><span data-stu-id="27e6a-422">![Response XML tab](media/cxml-response-xml.png "Response XML tab")</span></span>

## <a name="additional-resources"></a><span data-ttu-id="27e6a-423">其他资源</span><span class="sxs-lookup"><span data-stu-id="27e6a-423">Additional resources</span></span>

- [<span data-ttu-id="27e6a-424">为电子采购发包设置外部目录</span><span class="sxs-lookup"><span data-stu-id="27e6a-424">Set up an external catalog for PunchOut e-procurement</span></span>](set-up-external-catalog-for-punchout.md)
- [<span data-ttu-id="27e6a-425">针对电子采购发包使用外部目录</span><span class="sxs-lookup"><span data-stu-id="27e6a-425">Use external catalogs for PunchOut e-procurement</span></span>](use-external-catalogs-for-punchout.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]