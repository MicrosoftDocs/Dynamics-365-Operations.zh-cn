---
title: 财务日记帐上的默认财务维度
description: 本主题介绍了相应的规则，这些规则定义如何在通过财务日记帐输入的交易记录中设置财务维度值。 此外，还介绍了有关使用固定维度的方案的详细信息。
author: kweekley
ms.date: 09/04/2021
ms.topic: index-page
ms.prod: ''
ms.technology: ''
ms.search.form: LedgerJournalTransDaily, LedgerJournalTransVendInvoice, LedgerJournalTransVendPaym, LedgerJournalTransCustPaym
audience: Application User
ms.reviewer: roschlom
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2020-12-14
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: 327bc27f068e1f9eefacc6b5defa27044cb1a77e
ms.sourcegitcommit: d420b96d37093c26f0e99c548f036eb49a15ec30
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/03/2021
ms.locfileid: "7472524"
---
# <a name="default-financial-dimensions-on-financial-journals"></a>财务日记帐上的默认财务维度

[!include [banner](../includes/banner.md)]

本主题介绍了相应的规则，这些规则定义如何在通过财务日记帐（而不是通过库存日记帐或项目日记帐）输入的交易记录中设置财务维度值。 此外，还介绍了有关使用固定维度的方案的详细信息。

## <a name="symptom"></a>问题

财务日记帐中的“科目”或“对方科目”上未按预期设置财务维度值。 下面是两个方案示例：

在普通日记帐中输入了凭证。 科目是供应商科目，对方科目是银行科目。 默认情况下，科目上输入了供应商的财务维度，但对方科目上未输入银行的财务维度。 而是，默认情况下对方科目上输入了科目中的维度值。

已为客户分配了默认财务维度值，并且收入主科目为部门财务维度分配了固定维度值。 在普通日记帐中输入了凭证。  科目为客户，对方科目为会计科目，具体来说即具有固定维度值的收入科目。 收入主科目的对方科目上未设置固定维度。 而是，设置为来自客户的科目中的部门维度值。  在过帐凭证后，已过帐的会计条目中使用了固定维度值，但凭证仍在收入科目上显示客户的部门值。 

如果要在日记帐内的凭证上设置财务维度值，应遵循什么规则？

## <a name="resolution"></a>解决方法

默认情况下，应遵循以下规则在财务日记帐（例如普通日记帐或供应商发票日记帐）中的凭证行上输入财务维度值。 

1. **日记帐标题**

   - 默认情况下，将输入日记帐名称维度中的日记帐标题维度。

2. **日记帐行科目**

   - 默认情况下，将输入日记帐标题维度中的日记帐行科目维度。
   - 如果任何财务维度为空白，则默认情况下将为其输入来自客户、供应商、银行、固定资产、项目或分类帐维度的值。

     - 如果科目类型为 **分类帐**，则在输入交易记录期间将像默认维度一样处理会计科目上的固定维度。
     - 如果科目类型为 **客户**、**供应商**、**银行**、**固定资产** 或 **项目**，则无法确定主科目。 因此，默认情况下，将不会为科目输入固定维度。

3. **日记帐行对方科目**

 - 首先，日记帐行对方科目维度默认来自日记帐行科目维度。

 - 如果任何财务维度为空白，则下一个默认条目将来自客户、供应商、银行、固定资产、项目或分类帐的默认维度。
   1. 如果对方科目类型为 **分类帐**，则在输入交易记录期间将像默认维度一样处理会计科目上的固定维度。 如果默认情况下已输入来自科目的维度值，则主科目的默认或固定维度值将不会覆盖现有值。
   2. 如果对方科目类型为 **客户**、**供应商**、**银行**、**固定资产** 或 **项目**，则主科目尚不可知，因此固定维度将不会为对方科目的默认值。

4. **过帐**

    1. 在过帐期间，将对会计条目的每行的主科目（同时针对科目和对方科目）进行计算，以确定是否存在固定维度值。 如果定义了固定维度，则任何现有值或空白值将替换为该固定维度值。

        过帐之后，固定维度值 **不** 会显示在日记帐行上。 而是，当您在过帐凭证之后查看凭证时，固定维度值将显示在会计条目上。

    2. 默认情况下，在过帐期间不会输入其他维度值，包括过帐期间可能添加的其他会计科目，例如尾数舍入科目和内部公司应付及应收科目。 其他会计科目的默认维度条目从科目或对方科目中获取。

出于默认情况下输入维度值的目的，日记帐默认流程无法确定空白维度值为有意保留空白，还是未创建默认条目。 如果维度值为有意保留空白，则默认情况下仍可能会使用之前描述的默认订单来输入值。 如果您要求维度具有空白值，则可能需要创建值为 **0**（零）或 **空白** 的维度，以便使用此值来代替空白维度。

请查看以下方案，了解财务维度默认订单的示例。

### <a name="scenario-1"></a>方案 1

转到 **总帐 \> 日记帐设置 \> 日记帐名称**，然后选择 **GenJrn** 日记帐名称。 然后，在 **财务维度** 快速选项卡上，为默认财务维度定义以下值：

- **BUSINESSUNIT：** 001
- **DEPARTMENT：** 024

[![日记帐名称页面](./media/financial-dimension-defaulting-jrnl-names-01.png)](./media/financial-dimension-defaulting-jrnl-names-01.png)

转到 **总帐 \> 日记帐条目 \> 普通日记帐**，并创建一个使用 **GenJrn** 日记帐名称的新普通日记帐。 默认情况下，会将日记帐名称（LedgerJournalName 表）中的维度输入到日记帐标题（LedgerJournalTable 表），如 **财务维度** 选项卡上所示。

[![“普通日记帐”页面上的“财务维度”选项卡](./media/financial-dimension-defaulting-genrl-jrnl-02.png)](./media/financial-dimension-defaulting-genrl-jrnl-02.png)

转到 **行**。 在 **科目类型** 字段中，选择 **分类帐**，然后在 **科目** 字段中输入 **170150**。 接下来，选择要移出字段的 **选项卡** 键。 默认情况下，将输入日记帐标题中的维度。 因此，**科目** 值显示为 **170150-001-024**。

[![“日记帐凭证”页面上普通日记帐的日记帐行](./media/financial-dimension-defaulting-jrnl-vchr-03.png)](./media/financial-dimension-defaulting-jrnl-vchr-03.png)

将 **科目** 值更改为 **170150-001-023**。 输入借方金额或贷方金额。 在 **对方科目类型** 字段中，选择 **分类帐**，然后在 **对方科目** 字段中输入 **600150**。 默认情况下，将输入科目中的维度值。 因此，**对方科目** 值显示为 **600150-001-023**。

### <a name="scenario-2"></a>方案 2

使用您为方案 1 中的日记帐名称定义的相同财务维度。 接下来，转到 **应收帐款 \> 客户 \> 所有客户**，并为客户 US-001 定义默认财务维度值。 选择该客户以打开客户详细信息。 在 **财务维度** 选项卡上，保留 **BUSINESSUNIT** 维度的默认值 (**001**)。 添加 **COSTCENTER** 维度，并输入 **007** 作为值。

创建一个使用 **GenJrn** 日记帐名称的新普通日记帐。 在 **财务维度** 选项卡上，将默认 **BUSINESSUNIT** 值从 **001** 更改为 **002**。

转到 **行**。 在 **科目类型** 字段中，选择 **客户**，然后在 **科目** 字段中输入 **US-001**。 要查看非会计科目类型的财务维度，请选择 **财务维度 \> 科目**。 输入了财务维度值的以下默认条目：

- **BUSINESSUNIT：** 002 – 默认条目从日记帐标题中获取。 默认情况下，未输入来自客户 US-001 的值 **001**，因为已输入了一个默认值。
- **COSTCENTER：** 007 – 默认条目从所设置的客户 US-001 中获取。
- **DEPARTMENT：** 024 – 默认条目从日记帐标题中获取。

回到行上的 **对方科目类型** 字段中，选择 **分类帐**，然后在 **对方科目** 字段中输入 **600150**。 行上输入了以下默认财务维度值：

- **BUSINESSUNIT：** 002 - 默认条目从科目的财务维度中获取。 （默认情况下，它初始是从日记帐标题中输入的。）
- **DEPARTMENT：** 024 - 默认条目从科目的财务维度中获取。 （默认情况下，它初始是从日记帐标题中输入的。）
- **COSTCENTER：** 007 - 默认条目从科目的财务维度中获取。 （默认情况下，它初始是从客户中输入的。）

### <a name="scenario-3"></a>方案 3

在用于方案 2 的同一日记帐中，添加一个新行。 在 **科目类型** 字段中，选择 **分类帐**，然后在 **科目** 字段中输入 **170150**。 清除默认维度值，以便仅保留主科目 170150。 在 **对方科目类型** 字段中，选择 **客户**，然后在 **对方科目** 字段中输入 **US-001**。 输入了财务维度值的以下默认条目：

- **BUSINESSUNIT：** 002 – 默认条目从日记帐标题中获取，因为科目维度值为空白。 默认情况下，未输入来自客户 US-001 的值 **001**，因为已从日记帐标题中获取了默认值。 如果 **BUSINESSUNIT** 值为有意保留空白，则您还必须删除对方科目上的财务维度。
- **COSTCENTER：** 007 - 默认条目从客户 US-001 中获取，因为科目维度值和日记帐标题维度值为空白。 如果 **COSTCENTER** 值为有意保留空白，则您还必须删除对方科目上的财务维度。
- **DEPARTMENT：** 024 – 默认条目从日记帐标题中获取，因为科目维度值为空白。 如果 **DEPARTMENT** 值为有意保留空白，则您还必须删除对方科目上的财务维度。

### <a name="scenario-4"></a>方案 4

使用您为方案 1 和 2 中的日记帐名称和客户定义的相同默认财务维度值。 接下来，为主科目 170150 上的 **BUSINESSUNIT** 维度定义固定维度值。 转到 **总帐 \> 会计科目表 \> 科目 \> 主科目**。 在 **主科目** 字段中，选择 **170150**，然后在 **法人覆盖** 选项卡上选择 **添加**。 选择 **USMF** 作为法人，然后选择 **添加**。 选择该记录，然后选择 **默认维度**。 将 **BUSINESSUNIT** 维度更改为 **固定值**，并输入 **003** 作为值。

创建一个使用 **GenJrn** 日记帐名称的新普通日记帐。 在 **财务维度** 选项卡上，删除所有默认维度值。

转到 **行**。 在 **科目类型** 字段中，选择 **分类帐**，然后在 **科目** 字段中输入 **170150**。 接下来，选择要移出字段的 **选项卡** 键。 默认情况下，将输入为科目 170150 设置的主科目中的维度值。 因此，**科目** 值显示为 **170150-003-**。

将 **科目** 值更改为 **170150-004-**。 **日记帐功能不会阻止对固定维度值进行更改。** 输入借方金额或贷方金额。 在 **对方科目类型** 字段中，选择 **分类帐**，然后在 **对方科目** 字段中输入 **170250**。 将输入科目中的财务维度值 004 作为默认值。 然后，对单据进行过帐。 在日记帐中，选择 **凭证**。 请注意，在过帐期间，**BUSINESSUNIT** 值将还原为固定维度值 **003**。

当您返回到日记帐上的凭证时，**BUSINESSUNIT** 维度 **不** 会反映固定维度值。 它始终具有过帐前在屏幕上显示的值。 过帐流程不会更改凭证上输入的任何内容。 过帐期间将仅会更改会计条目。

## <a name="developer-notes"></a>开发人员注意事项

如果您是开发人员并且想要查看默认流程的代码，请查看以下方法：

- **LedgerJournalEngine.accountModified()** – 此方法是主科目维度默认流程（即所有日记帐的标准流程并且会被某些日记帐类型覆盖）的主入口点。
- **LedgerJournalEngine.offsetAccountModified()** – 此方法是对方科目维度默认流程的主入口点。
