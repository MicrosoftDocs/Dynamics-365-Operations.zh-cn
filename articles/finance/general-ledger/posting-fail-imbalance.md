---
title: 不平衡导致日记帐过帐失败
description: 本主题介绍凭证交易记录中借方和贷方为何可能不平衡，从而导致无法过帐交易记录。 本主题中还包含解决该问题的步骤。
author: kweekley
ms.date: 08/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2021-8-03
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: 07408e608496dcc19562b866449b3b27f5f80edd
ms.sourcegitcommit: e09f5c6d78d7942af950ae3f6407df2fedceeba4
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/06/2022
ms.locfileid: "8719920"
---
# <a name="journal-posting-failure-because-of-imbalance"></a>不平衡导致日记帐过帐失败

[!include [banner](../includes/banner.md)]

本主题介绍凭证交易记录中借方和贷方为何可能不平衡，从而导致无法过帐交易记录。 本主题中还包含解决该问题的步骤。

## <a name="symptom"></a>问题

在某些情况下，无法过帐日记帐，并且显示以下消息：“截止特定日期，特定凭证的交易记录不平衡（记帐币种：0.01 - 申报币种：0.06）。” 为何不能过帐该日记帐？

## <a name="resolution"></a>解决方法

在过帐到总帐期间，如果在 **分类帐设置** 页面上定义了交易币种、记帐币种和申报币种，则这些币种的每个凭证必须平衡。 （当借方总计等于贷方总计时，凭证平衡。）

总计在日记帐行页面底部以记帐币种和申报币种显示。 其 **不** 使用外币交易记录的交易记录币种显示。 此外，模拟或过帐期间用户收到的错误消息仅使用记帐币种和申报币种显示差异。 不使用交易记录币种显示差异，因为一个凭证可以有多个交易记录币种，并且日记帐中可以包含不同交易记录币种的凭证。 因此，您必须手动验证每个只有一种交易货币的凭证的交易货币金额是否平衡，这一点很重要。

### <a name="transaction-currency"></a>交易币种

在模拟和过帐期间，系统将验证只有一种交易货币的每个凭证的交易货币是否平衡。 对于输入的每一个凭证，交易记录币种可以有一个或多个币种。 例如，在将现金从使用欧元 (EUR) 的银行帐户转移到使用加拿大元 (CAD) 的银行帐户时，总帐中输入的凭证可以有两个交易记录币种。

如果凭证只有一个交易货币，则借方总计必须等于该凭证的交易货币贷方总计。 客户遇到以下情况：由于交易币种金额不平衡，过帐正常失败：

- 交易记录币种的借方总计和贷方总计 **不** 平衡，但是其记帐币种和申报币种平衡。 客户假定仍将过帐凭证。 但是，该假设不正确。 **如果凭证的所有行采用同一种交易货币，则凭证中的交易货币金额始终必须平衡。**
- 凭证是通过数据管理框架 (DMF) 与数据实体一起导入的，用户认为交易币种金额已平衡。 在导入文件中，有些金额具有两个以上的小数位，导入金额时包括了两个以上的小数位。 因此，借方与贷方不等，因为它们存在尾差。 日记帐无法在凭证行中体现此差异，因为显示的金额只有两个小数位。
- 凭证是通过 DMF 与数据实体一起导入的，而用户认为交易币种金额平衡。 虽然 **凭证** 已平衡，但凭证中的某些行具有不同的交易记录日期。 如果您添加了每个 **凭证和交易记录日期** 的交易货币借方总计和贷方总计，则它们不平衡。 如果您在系统中通过总帐输入凭证，则满足此要求。 但是，当凭证通过 DMF 与数据实体一起导入时，则不满足此要求。

在一个支持的场景中，一个凭证可以有多个交易记录币种。 在此情况下，系统 **不** 验证交易记录币种的借方是否等于贷方，因为币种不匹配。 相反，系统将验证记帐币种和申报币种金额是否平衡。

### <a name="accounting-currency"></a>记帐币种

如果凭证的所有行采用同一个交易记录币种，并且交易记录币种金额平衡，系统将验证记帐币种金额是否平衡。 如果使用外币输入凭证，将使用凭证行中的汇率将交易记录币种金额转换为记帐币种。 首先，凭证的每个行都会转换并舍入到两个小数位。 然后汇总这些行以确定借方总计和贷方总计。 因为会转换每行，所以借方总计和贷方总计可能不平衡。 不过，如果差异的绝对值在 **总帐参数** 页面中定义的 **最大尾差** 值范围内，将过帐凭证，并将差异自动过帐到尾差帐户。

如果凭证有多个交易记录币种，则凭证的每个行都将转换为记帐币种并舍入到两个小数位，然后将汇总这些行以确定借方总计和贷方总计。 要被视为平衡，借方和贷方必须以会计货币进行平衡。  尾差帐户永远不会以会计货币添加到凭证中，以使借方和贷方达到平衡。 

### <a name="reporting-currency"></a>申报币种

如果凭证的所有行采用同一个交易记录币种，并且交易记录币种金额平衡，系统将验证申报币种金额是否平衡。 如果使用外币输入凭证，将使用凭证行中的汇率将交易记录币种金额转换为申报币种。 首先，凭证的每个行都会转换并舍入到两个小数位。 然后汇总这些行以确定借方总计和贷方总计。 因为会转换每行，所以借方总计和贷方总计可能不平衡。 不过，如果差异在 **总帐参数** 页面中定义的 **最大尾差 - 申报币种的舍入** 值范围内，将过帐凭证，并将差异自动过帐到尾差帐户。

如果凭证有多个交易记录币种，则凭证的每个行都将转换为申报币种并舍入到两个小数位，然后将汇总这些行以确定借方总计和贷方总计。 要被视为平衡，借方和贷方必须以申报币种进行平衡。  尾差帐户永远不会以申报币种添加到凭证中，以使借方和贷方达到平衡。

### <a name="example-for-an-accounting-currency-imbalance"></a>记帐币种不平衡的示例

> [!NOTE]
> 申报币种金额是按照与记帐币种金额相同的方式根据交易币种金额计算得出的。

汇率：1.5

| 行 | 凭证 | 科目 | 货币 | 借记（交易） | 贷记（交易） | 借方（会计） | 贷方（会计） |
|---|---|---|---|---|---|---|---|
| 1 | 001 | 1101-01 | EUR | 3.33 | | 5.00 (4.995) | |
| 2 | 001 | 1101-02 | EUR | 3.33 | | 5.00 (4.995) | |
| 3 | 001 | 1101-03 | EUR | 3.34 | | 5.01 | |
| 4 | 001 | 4101- | EUR | | 10.00 | | 15.00 |
| **合计** | | | | **10.00** | **10.00** | **15.01** | **15.00** |

该记帐币种不平衡，相差 0.01。 但是，只要以记帐币种表示的最大尾数舍入值至少为 0.01，差额将自动过帐到尾差帐户，并且凭证将成功过帐。
