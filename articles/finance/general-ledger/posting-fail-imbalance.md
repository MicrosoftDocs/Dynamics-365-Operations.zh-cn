---
title: 不平衡导致日记帐过帐失败
description: 本主题介绍凭证交易记录中借方和贷方为何可能不平衡，从而导致无法过帐交易记录。 本主题中还包含解决该问题的步骤。
author: kweekley
ms.date: 08/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2021-8-03
ms.dyn365.ops.version: 10.0.14
ms.openlocfilehash: a59724ff698b6ad0e84b0642240da5f8953ab3d1
ms.sourcegitcommit: 9642494da87c0d237f9fcbe15df14315d9e88fa2
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/15/2021
ms.locfileid: "7385715"
---
# <a name="journal-posting-failure-because-of-imbalance"></a>不平衡导致日记帐过帐失败

[!include [banner](../includes/banner.md)]

本主题介绍凭证交易记录中借方和贷方为何可能不平衡，从而导致无法过帐交易记录。 本主题中还包含解决该问题的步骤。

## <a name="symptom"></a>问题

在某些情况下，无法过帐日记帐，并且显示以下消息：“截止特定日期，特定凭证的交易记录不平衡（记帐币种：0.01 - 申报币种：0.06）。” 为何不能过帐该日记帐？

## <a name="resolution"></a>解决方法

在过帐到总帐期间，如果在 **分类帐设置** 页面上定义了交易币种、记帐币种和申报币种，则这些币种的每个凭证必须平衡。 （当借方总计等于贷方总计时，凭证平衡。）

总计在日记帐行页面底部以记帐币种和申报币种显示。 其 **不** 使用外币交易记录的交易记录币种显示。 此外，模拟或过帐期间用户收到的错误消息仅使用记帐币种和申报币种显示差异。 不使用交易记录币种显示差异，因为一个凭证可以有多个交易记录币种，并且日记帐中可以包含不同交易记录币种的凭证。 因此，请务必验证每个凭证的交易记录币种金额平衡。

### <a name="transaction-currency"></a>交易币种

在模拟和过帐期间，系统将验证每个凭证的交易币种是否平衡。 对于输入的每一个凭证，交易记录币种可以有一个或多个币种。 例如，在将现金从使用欧元 (EUR) 的银行帐户转移到使用加拿大元 (CAD) 的银行帐户时，总帐中输入的凭证可以有两个交易记录币种。

如果凭证只有一个交易记录币种，则借方总计必须等于该凭证的贷方总计。 客户遇到以下情况：由于交易币种金额不平衡，过帐正常失败：

- 交易记录币种的借方总计和贷方总计 **不** 平衡，但是其记帐币种和申报币种平衡。 客户假定仍将过帐凭证。 但是，该假设不正确。 **如果凭证的所有行采用同一种币种，则凭证中的交易记录币种金额始终必须平衡。**
- 凭证是通过 Microsoft Excel 导入的，而用户认为交易记录币种金额平衡。 在 Excel 工作簿中，导入的金额设置为 **数字** 值，而不是 **币种** 值。 在此场景中，工作簿中的数字金额具有两个以上的小数位，导入金额时包括了两个以上的小数位。 因此，借方与贷方不等，因为它们存在尾差。 日记帐无法在凭证行中体现此差异，因为显示的金额只有两个小数位。
- 凭证是通过 Excel 导入的，而用户认为交易记录币种金额平衡。 虽然凭证已平衡，但凭证中的某些行具有不同的交易记录日期。 如果您添加了每个凭证和交易记录日期的借方总计和贷方总计，则它们不平衡。 系统现在会阻止此场景。 一个凭证只能有一个交易记录日期。 如果您在系统中通过总帐输入凭证，则满足此要求。 但是，如果通过 Excel 导入凭证，则最初不满足。

在一个支持的场景中，一个凭证可以有多个交易记录币种。 在此情况下，系统 **不** 验证交易记录币种的借方是否等于贷方，因为币种不匹配。 相反，系统将验证记帐币种金额是否平衡。

### <a name="accounting-currency"></a>记帐币种

如果凭证的所有行采用同一个交易记录币种，并且交易记录币种金额平衡，系统将验证记帐币种金额是否平衡。 如果使用外币输入凭证，将使用凭证行中的汇率将交易记录币种金额转换为记帐币种。 首先转换凭证的每一行。 然后汇总这些行以确定借方总计和贷方总计。 因为会转换每行，所以借方总计和贷方总计可能不平衡。 不过，如果差异在 **总帐参数** 页面中定义的 **最大尾差** 值范围内，将过帐凭证，并将差异自动过帐到尾差帐户。

如果凭证有多个交易记录币种，则凭证的每个行都将转换为记帐币种，然后将汇总这些行以确定借方总计和贷方总计。 若要考虑平衡，借方和贷方必须平衡，并且不得存在尾差。

### <a name="reporting-currency"></a>申报币种

如果凭证的所有行采用同一个交易记录币种，并且交易记录币种金额平衡，系统将验证申报币种金额是否平衡。 如果使用外币输入凭证，将使用凭证行中的汇率将交易记录币种金额转换为申报币种。 首先转换凭证的每一行。 然后汇总这些行以确定借方总计和贷方总计。 因为会转换每行，所以借方总计和贷方总计可能不平衡。 不过，如果差异在 **总帐参数** 页面中定义的 **最大尾差 - 申报币种的舍入** 值范围内，将过帐凭证，并将差异自动过帐到尾差帐户。

如果凭证有多个交易记录币种，则凭证的每个行都将转换为申报币种，然后将汇总这些行以确定借方总计和贷方总计。 若要考虑平衡，借方和贷方必须平衡，并且不得存在尾差。
