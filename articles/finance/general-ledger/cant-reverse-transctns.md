---
title: 为什么无法冲销此交易记录？
description: 本主题介绍了无法冲销交易记录的不同原因。 它还列出了此问题的解决方案。
author: kweekley
ms.date: 07/21/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2021-07-21
ms.dyn365.ops.version: 10.0.20
ms.openlocfilehash: e18caf1dbdf8191713c17b1793f5da44cf2f182b
ms.sourcegitcommit: 631d2cea52590af15f208e9af584446e85540fcf
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/07/2022
ms.locfileid: "8724520"
---
# <a name="why-cant-i-reverse-this-transaction"></a>为什么无法冲销此交易记录？

[!include [banner](../includes/banner.md)]

本主题介绍了无法冲销交易记录的不同原因。 它还列出了此问题的解决方案。

## <a name="symptom"></a>问题

组织可能会遇到必须冲销已过帐的交易记录的情况。 偶尔，系统会阻止他们冲销这些交易记录。 此行为可能会引发两个问题：

- 为什么无法冲销此交易记录？
- 批量冲销功能如何影响此行为？

## <a name="resolution"></a>解决方法

交易记录必须满足特定条件才能冲销。 此主题的剩余部分提供对每个模块的验证。 尽管本主题侧重于 Microsoft Dynamics 365 Finance 中的交易记录，但某些概念和验证可以应用于其他应用，例如 Dynamics 365 Supply Chain Management。

此外，冲销交易记录的位置可能会对是否可以冲销该交易记录有影响。 例如，只能从银行帐户的交易记录页上的 **支票** 部分冲销作为支票过帐的供应商付款。 无法从总帐中的 **凭证交易记录** 页中冲销它。

如果在 **功能管理工作区** 中启用了 **多个单据的批量冲销** 功能（也称为批量冲销功能），则将影响可冲销的交易记录数量以及可冲销交易记录的位置。 此功能在启用时提供两个好处：

- 对于某些类型的交易记录，从其过帐的日记帐或从 **凭证交易记录** 页中一次可以选择并冲销多个交易记录。 但是，在启用此功能之前，单个交易记录必须是可冲销的。 引入此功能之前，必须一次冲销一个交易记录。
- 可以从日记帐（总帐）或 **凭证交易记录** 页中冲销 *某些* 子分类交易记录。 不必从子分类帐页面中冲销它们。 例如，以前只能从 **供应商交易记录** 页中冲销供应商发票日记帐。 但是，现在也可以从总帐那边、从日记帐或 **凭证交易记录** 页冲销它。 本主题的每个部分都解释了此好处不适用的交易记录的类型。

批量冲销功能 **不会** 使更多类型的交易记录被冲销。 如果之前无法冲销交易记录类型，则在启用该功能后仍无法冲销此类型。 例如，无论是否启用批量冲销功能，均无法冲销采购订单供应商发票。

有关批量冲销功能的详细信息，请参阅[冲销日记帐过帐](reverse-journal-posting.md)。

## <a name="general-ledger"></a>总帐

仅通过使用会计科目来输入总帐调整。 因此，他们仅更新总帐。

如果禁用批量冲销功能，则可以单独从分类帐 (**LedgerTransAccount**) 的 **\<main account\> 的交易记录** 页面中冲销大多数总帐调整。 （页面的确切标题因所选主科目而异。）此页面显示已过帐到主科目的每个交易记录。 它通常从 **试算平衡表列表** 页打开，或者通过在 **凭证交易记录** 页上选择 **交易记录** 来打开。

如果启用批量冲销功能，则现在可以从 **凭证交易记录** 页以及从交易记录过帐自的日记帐中冲销一个或多个总帐凭证。 异常包括总帐外币重估、合并和年终结算交易记录。 这些交易记录将从运行年终结算所在的页面中冲销。

### <a name="reasons-why-transactions-cant-be-reversed"></a>无法冲销交易记录的原因

由于以下原因，无法冲销交易记录：

- 普通日记帐：

    - 会计期间处于暂停状态或永久关闭状态：

        - 如果冲销日期位于未打开的会计期间内，则无法冲销该交易记录。
        - 如果交易记录支持冲销日期条目，则仍可以通过将冲销日期更改为未结期间来冲销该交易记录。

    - 已运行年终结算流程：

        - 交易记录的会计日期是经过年终结算的会计年度。 尽管会计年度中的期间可能仍处于未结状态，但如果已对会计年度运行年终结算流程，则无法冲销该交易记录。 会计年度的状态不同于该会计年度中的期间状态。
        - 可以冲销年终结算，然后可以冲销该交易记录。 此方法可能不是一个选项。 根据会计结算流程的状态，在已结算会计年度或下一会计年度的未结期间中手动输入冲销交易记录可能比较容易。 如果将新交易记录过帐到已通过了年终结算流程的会计年度的未结期间，则必须重新运行年终结算。

    - 交易记录冲销已在进行中：

        - 如果交易记录正在冲销中，则必须完成该流程。 无法执行单独的冲销流程。 
        - 冲销完成后，可以再次冲销已冲销的交易记录（即可以冲销此冲销）。

    - 分类帐结算：

        - 如果已使用 **分类帐结算** 定期任务（**总帐 \> 定期任务\> 分类帐结算**）对交易记录的一行或多行进行分类帐结算，以便记录存在于 LedgerTransSettlement 表中，则无法冲销该交易记录。
        - 可以冲销分类帐结算，然后可以冲销该凭证。

    - 内部公司：

        - 如果该交易记录是内部公司交易记录，则无法将其冲销。
        - 该交易记录 **不是** 内部公司交易记录，但已过帐到 **内部公司设置** 页面上定义的“应付”或“应收”主科目。

    - 应计项目：

        - 如果冲销了应计总帐凭证，则应计分录和所有相应的应计子交易记录将被冲销。
        - 无法冲销单个应计子交易记录。

- 收入确认日记帐：

    - 无法冲销收入确认交易记录。
    - 通过收入确认日记帐确认收入时，凭证将仅过帐到会计科目。 因此，在 **凭证交易记录** 等页面上，交易记录似乎只是总帐条目。

- 外币重估：

    - 可以冲销外币重估交易记录，但只能从运行重估所在的 **总帐外币重估** 页面中进行。
    - 仅当冲销已过帐到未结会计期间时才能完成冲销。

- 合并：

    - 可以冲销合并交易记录，但只能从 **合并交易记录** 页中进行。
    - 仅当冲销已过帐到未结会计期间时才能完成冲销。

- 年终结算：

    - 可通过以下方式冲销年终结算交易记录（期末交易记录和期初交易记录）：

        - 如果关闭总帐年终结算增强功能，请在 **年终结算** 对话框中选择 **撤消以前的结算** 选项。
        - 如果启用总帐年终增强功能，请选择在 **年终结算** 页上为年终结算创建的公司和会计年度记录，然后选择 **冲销年终结算**。

    - 请注意，年终结算的冲销实际上会删除期末和期初交易记录。 从未过帐冲销凭证。

## <a name="accounts-payable"></a>应付帐款

多个交易记录类型会更新应付帐款子分类帐。 示例包括供应商发票、供应商发票日记帐和支出报表。

如果禁用了批量冲销功能，则可以从发票的 **供应商交易记录** 页或支票付款的 **银行帐户** 页单独冲销交易记录。

如果启用批量冲销功能，则也可以从 **凭证交易记录** 页以及从交易记录过帐自的日记帐中冲销一个或多个应付帐款交易记录。 但是，只能从银行帐户中冲销供应商付款。 此外，无法从分类帐的 **\<main account\> 的交易记录** 页面中冲销供应商交易记录。 只能从 **凭证交易记录** 页中冲销它们。

请注意，某些交易记录根本无法冲销。 示例包括采购订单供应商发票和电子供应商付款。

### <a name="reasons-why-vouchers-cant-be-reversed"></a>无法冲销凭证的原因

由于以下原因，无法冲销凭证：

- 会计期间处于暂停状态或关闭状态：

    - 如果冲销日期位于未打开的会计期间内，则无法冲销该交易记录。
    - 如果交易记录支持冲销日期条目，则仍可以通过将冲销日期更改为未结期间来冲销该交易记录。

- 已运行总帐年终结算流程：

    - 交易记录的会计日期是在总帐中结算的会计年度。 尽管会计年度中的期间可能仍处于未结状态，但如果已对会计年度运行年终结算流程，则无法冲销该交易记录。 会计年度的状态不同于该会计年度中的期间状态。
    - 可以冲销年终结算，然后可以冲销该交易记录。 此方法可能不是一个选项。 根据会计结算流程的状态，在已结算会计年度或下一会计年度的未结期间中手动输入冲销交易记录可能比较容易。 如果将新交易记录过帐到已通过了年终结算流程的会计年度的未结期间，则必须重新运行年终结算。

- 子分类日记帐分录尚未转移到总帐：

    - 此原因仅适用于非采购订单供应商发票。
    - 使用 **未转移的子分类日记帐分录** 将分录转移到总帐。 然后，可以从 **供应商交易记录** 页中冲销非采购订单供应商发票。

- 结算：

    - 交易记录（如发票或付款）已结算或标记为要结算。

        - 您可以通过在 **供应商交易记录** 页上选择 **查看结算** 或 **结算 \> 结算历史记录** 来验证交易记录是已结算还是标记为要结算。
        - 如果必须冲销其中一个交易记录，也可以从 **供应商交易记录** 页（**结算 \> 撤消结算**）中冲销结算。

- 凭证包含使用相同凭证号（一个凭证签发）输入的多个子分类交易记录。
- 尚未审核发票：

    - 如果未在发票上选择 **审核** 复选框，则无法冲销该发票。

        - 在这种情况下，审批不引用工作流程中的审批，而是引用发票上的 **审批** 选项。 此选项用于阻止支付发票。 它通常用于供应商发票登记簿发票。

- 交易记录在发票池中：

    - 无法直接从 **供应商交易记录** 页中冲销池中的发票。 相反，必须通过 **发票审批日记帐** 页上的取消流程冲销发票。

- 该交易记录具有已更正的父发票（印度本地化）。
- 该交易记录的本票状态为 **已汇出发票**。
- 该交易记录用于部分税务结算。
- 该交易记录包含供应商帐户，但正在从不正确的页面中冲销，例如 **\<main account\> 的交易记录** 页面：

    - 正如此原因所示，即使启用批量冲销功能，某些子分类交易记录也只能从特定页面中冲销。

### <a name="types-of-transactions-that-cant-be-reversed"></a>无法冲销的交易记录类型

不能冲销以下类型的交易记录：

- 外币重估：

    - 与总帐外币重估不同，无法冲销应收帐款和应付帐款外币重估。 相反，必须使用发票日期再次运行重估。 在这种情况下，重估使用发票日期中的汇率，并且基本上将未实现的损益变为 0（零）。 因此，结果与冲销上一次重估的结果相似。 但是，请注意，如果发票上更改了默认汇率，则不会冲销此金额。

- 采购订单供应商发票：

    - 必须创建贷方通知单才能冲销供应商发票。 有关如何创建冲销交易记录的详细信息，请参阅[创建采购退货单](../../supply-chain/procurement/tasks/create-purchase-return-order.md)。

- 本票
- 银行信用证出口装运

## <a name="accounts-receivable"></a>应收帐款

多个交易记录类型会更新应收帐款子分类帐。 示例包括销售订单中的客户发票、通过普通日记帐输入的客户发票、普通发票、客户付款和勾销。

如果禁用了批量冲销功能，则可以从发票的 **客户交易记录** 页或存款的 **银行帐户** 页单独冲销交易记录。 有关如何冲销付款的信息，请参阅本主题后面的[现金和银行管理](cant-reverse-transctns.md#cash-and-bank-management)部分。

如果启用批量冲销功能，则也可以从 **凭证交易记录** 页以及交易记录过帐自的日记帐中冲销一个或多个应收帐款交易记录。 但是，只能从银行帐户中冲销存款，并且只能从原始页面中冲销普通发票（如果启用允许更正的功能）。 此外，仍然无法从分类帐的 **\<main account\> 的交易记录** 页面中冲销客户交易记录。 但是，可以从 **凭证交易记录** 页中冲销它们。

请注意，某些交易记录无法冲销。 示例包括销售订单客户发票和勾销。

### <a name="reasons-why-transactions-cant-be-reversed"></a>无法冲销交易记录的原因

由于以下原因，无法冲销交易记录：

- 会计期间处于暂停状态或永久关闭状态：

    - 如果冲销日期位于未打开的会计期间内，则无法冲销该交易记录。
    - 如果交易记录支持冲销日期条目，则仍可以通过将冲销日期更改为未结期间来冲销该交易记录。

- 已运行总帐年终结算流程：

    - 交易记录的会计日期是经过总帐年终结算的会计年度。 尽管会计年度中的期间可能仍处于未结状态，但如果已对会计年度运行年终结算流程，则无法冲销该交易记录。 会计年度的状态不同于该会计年度中的期间状态。
    - 可以冲销年终结算，然后可以冲销该交易记录。 此方法可能不是一个选项。 根据会计结算流程的状态，在已结算会计年度或下一会计年度的未结期间中手动输入冲销交易记录可能比较容易。 如果将新交易记录过帐到已通过了年终结算流程的会计年度的未结期间，则必须重新运行年终结算。

- 子分类日记帐分录尚未转移到总帐：

    - 此原因仅适用于普通发票。
    - 使用 **未转移的子分类日记帐分录** 将分录转移到总帐。 如果启用了更正功能，则可以冲销或更正普通发票。

- 结算：

    - 交易记录（如发票或付款）已结算或标记为要结算。

        - 您可以通过在 **客户交易记录** 页上选择 **查看结算** 或 **结算 \> 结算历史记录** 来验证交易记录是已结算还是标记为要结算。
        - 如果必须冲销其中一个交易记录，也可以从 **客户交易记录** 页（**结算 \> 撤消结算**）中冲销结算。

- 交易记录包含使用相同凭证号（一个凭证签发）输入的多个子分类交易记录。
- 尚未审核发票：

    - 如果未在发票上选择 **审核** 复选框，则无法冲销该发票。

        - 在这种情况下，审批不引用工作流程中的审批，而是引用凭证行上的 **审批** 选项。 此选项用于阻止支付发票。 虽然此选项通常用于应付帐款，但也可用于通过日记帐输入的应收帐款发票。

- 该交易记录具有已更正的父发票（印度本地化）。
- 该交易记录包含客户帐户，但正在从不正确的页面中冲销，例如 **\<main account\> 的交易记录** 页面：

    - 正如此原因所示，即使启用批量冲销功能，某些子分类交易记录也只能从特定页面中冲销。

### <a name="types-of-transactions-that-cant-be-reversed"></a>无法冲销的交易记录类型

不能冲销以下类型的交易记录：

- 外币重估：

    - 与总帐外币重估不同，无法冲销应收帐款和应付帐款外币重估。 相反，必须使用发票日期再次运行重估。 在这种情况下，重估使用发票日期中的汇率，并且基本上将未实现的损益变为 0（零）。 因此，结果与冲销上一次重估的结果相似。 但是，请注意，如果发票上更改了默认汇率，则不会冲销此金额。

- 已调整预缴税金的交易记录
- 销售订单客户发票：

    - 必须创建贷方通知单或退货才能冲销交易记录。 有关如何创建冲销交易记录的信息，请参阅[销售退货](../../supply-chain/warehousing/sales-returns.md)。

- 汇票
- 收银交易记录
- 高级调整
- 利息单
- 催款单
- 银行信用证
- 出口装运
- 收入确认日记帐：

    - 通过收入确认日记帐确认收入时，凭证将仅过帐到会计科目。 因此，它们似乎只是总帐条目。 无法冲销这些条目，因为无法重新打开收入计划以重新确认收入。

## <a name="cash-and-bank-management"></a>现金和银行管理

多个交易记录类型通过普通日记帐更新银行子分类帐。 示例包括供应商付款、客户付款和银行转帐。

如果禁用了批量冲销功能，则可以从支票和存款的 **银行帐户** 页或客户付款的 **户交易记** 页单独冲销交易记录。

如果启用批量冲销功能，则也可以从 **凭证交易记录** 页以及从交易记录过帐自的日记帐中冲销一个或多个付款交易记录。 但是，仍只能从银行帐户中冲销存款。 此外，仍然无法从分类帐的 **\<main account\> 的交易记录** 页面中冲销银行交易记录。 但是，可以从 **凭证交易记录** 页中冲销它们。

请注意，某些交易记录无法冲销。 示例包括电子供应商付款。

### <a name="reasons-why-transactions-cant-be-reversed"></a>无法冲销交易记录的原因

由于以下原因，无法冲销交易记录：

- 会计期间处于暂停状态或永久关闭状态：

    - 如果冲销日期位于未打开的会计期间内，则无法冲销该交易记录。
    - 如果交易记录支持冲销日期条目，则仍可以通过将冲销日期更改为未结期间来冲销该交易记录。

- 已运行总帐年终结算流程：

    - 交易记录的会计日期是经过总帐年终结算的会计年度。 尽管会计年度中的期间可能仍处于未结状态，但如果已对会计年度运行年终结算流程，则无法冲销该交易记录。 会计年度的状态不同于该会计年度中的期间状态。
    - 可以冲销年终结算，然后可以冲销该交易记录。 此方法可能不是一个选项。 根据会计结算流程的状态，在已结算会计年度或下一会计年度的未结期间中手动输入冲销交易记录可能比较容易。 如果将新交易记录过帐到已通过了年终结算流程的会计年度的未结期间，则必须重新运行年终结算。

- 结算：

    - 交易记录（付款）已结算或标记为要结算。

        - 您可以通过在客户交易记录页上选择 **供应商交易记录** 或 **客户交易记录** 上的 **查看结算** 或 **结算 \> 结算历史记录** 来验证交易记录是已结算还是标记为要结算。
        - 如果必须冲销其中一个交易记录，也可以从 **供应商交易记录** 或 **客户交易记录** 页（**结算 \> 撤消结算**）中冲销结算。

- 交易记录包含使用相同凭证号（一个凭证签发）输入的多个子分类交易记录。
- 过渡交易记录：

    - 如果交易记录与过渡付款相关，则无法冲销该交易记录。
    - 如果必须冲销过渡付款，则必须先从银行过渡帐户清除付款。 如果付款符合其他验证条件，则可以冲销该付款。

- 该交易记录包含银行帐户，但正在从 **\<main account\> 的交易记录** 页面或不正确的子分类帐中冲销，例如应收帐款或应付帐款：

    - 正如此原因所示，即使启用批量冲销功能，某些子分类交易记录也只能从特定页面中冲销。

- 银行外币重估：

    - 可以冲销银行外币重估。 但是，如果您按时间顺序完成冲销步骤，则可能会阻止冲销。 例如，如果您在 3 月和 4 月运行重估，则在冲销 4 月重估之前，无法冲销 3 月重估。

### <a name="types-of-transactions-that-cant-be-reversed"></a>无法冲销的交易记录类型

不能冲销以下类型的交易记录：

- 作为电子资金转移 (EFT) 进行的供应商付款
- 本票
- 汇票

## <a name="fixed-assets"></a>固定资产

多个交易记录类型会更新固定资产子分类帐。 示例包括购置和折旧。

如果禁用了批量冲销功能，则可以根据交易记录类型，从 **供应商交易记录** 页面、**固定资产交易记录** 页面或资产租赁单独冲销交易记录。

如果启用批量冲销功能，则也可以从 **凭证交易记录** 页内从中过帐交易记录的日记帐中冲销一个或多个固定资产交易记录。

### <a name="reasons-why-transactions-cant-be-reversed"></a>无法冲销交易记录的原因

由于以下原因，无法冲销交易记录：

- 会计期间处于暂停状态或永久关闭状态：

    - 如果冲销日期位于未打开的会计期间内，则无法冲销该交易记录。
    - 如果交易记录支持冲销日期条目，则仍可以通过将冲销日期更改为未结期间来冲销该交易记录。

- 已运行总帐年终结算流程：

    - 交易记录的会计日期是在总帐中结算的会计年度。 尽管会计年度中的期间可能仍处于未结状态，但如果已对会计年度运行年终结算流程，则无法冲销该交易记录。 会计年度的状态不同于该会计年度中的期间状态。
    - 可以冲销年终结算，然后可以冲销该交易记录。 此方法可能不是一个选项。 根据会计结算流程的状态，在已结算会计年度或下一会计年度的未结期间中手动输入冲销交易记录可能比较容易。 如果将新交易记录过帐到已通过了年终结算流程的会计年度的未结期间，则必须重新运行年终结算。

- 购置：

    - 如果采购订单供应商发票上存在购置，则必须通过输入供应商贷方通知单来进行冲销。 有关如何输入冲销交易记录的详细信息，请参阅[创建采购退货单](../../supply-chain/procurement/tasks/create-purchase-return-order.md)。
    - 项目交易记录中存在购置。
    - 过帐资产折旧后，无法冲销购置。 必须冲销折旧，然后才能冲销购置。
    - 如果固定资产的价值模型或折旧帐簿的状态未打开，则无法冲销该交易记录。

- 处置：

    - 处置是通过普通发票完成的：

        - 如果普通发票包含固定资产，则阻止其更正。 但是，如果通过日记帐处置了资产，则可以从固定资产记录中冲销普通发票。

    - 如果固定资产的价值模型或折旧帐簿的状态未打开，则无法冲销该交易记录。

- 折旧：

    - 如果后续折旧也已过帐，则 **可以** 冲销折旧。 但是，您将收到警告，因为此方法不是最佳实践。
    - 如果固定资产的价值模型或折旧帐簿的状态未打开，则无法冲销该交易记录。

- 对于凭证的交易记录日期或之后的日期，存在特定资产和资产帐簿的交易记录（或冲销交易记录）。
- 该交易记录包含资产帐户，但正在从 **\<main account\> 的交易记录** 页面或不正确的子分类帐中冲销，例如应收帐款或应付帐款：

    - 正如此原因所示，即使启用批量冲销功能，某些子分类交易记录也只能从特定页面中冲销。
    - 如果在非采购订单供应商发票或供应商发票日记帐上发生购置，则只能从应付帐款中的 **供应商交易记录** 页中冲销该购置。
    - 如果从资产租赁中购置资产，则可以从资产租赁中的 **负债交易记录** 页中冲销该资产。
