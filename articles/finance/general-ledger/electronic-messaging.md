---
title: 电子消息
description: 此主题提供 Microsoft Dynamics 365 Finance 中电子消息的概述和设置信息。
author: ShylaThompson
ms.date: 11/16/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: roschlom
ms.search.region: Global
ms.author: roschlom
ms.search.validFrom: 2018-10-28
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: 42896c85fe72690aadafb878eb7e899c6fe10c32
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "5823780"
---
# <a name="electronic-messaging"></a><span data-ttu-id="c6439-103">电子消息</span><span class="sxs-lookup"><span data-stu-id="c6439-103">Electronic messaging</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="c6439-104">此主题提供电子消息的概述和设置信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-104">This topic provides overview and setup information for electronic messaging.</span></span>

<span data-ttu-id="c6439-105">最近，全世界各个国家和地区的政府与立法机构对在这些国家或地区注册的公司实施了报告要求。</span><span class="sxs-lookup"><span data-stu-id="c6439-105">Recently, the governments and legislative authorities of various countries and regions around the world have implemented reporting requirements for companies that are registered in those countries or regions.</span></span> <span data-ttu-id="c6439-106">要求的目的是支持数据以电子格式从这些公司、直接从具有、存储和处理数据的系统获取。</span><span class="sxs-lookup"><span data-stu-id="c6439-106">The purpose of the requirements is to enable data to be obtained from those companies in electronic format, directly from the systems where it was accounted, stored, and processed.</span></span>

<span data-ttu-id="c6439-107">Finance 中的电子消息功能支持在 Finance 与政府和立法机构为报告、提交和接收官方信息提供的系统之间进行各种电子互操作流程。</span><span class="sxs-lookup"><span data-stu-id="c6439-107">The Electronic messages functionality in Finance supports various processes for electronic interoperation between Finance and the systems that governments and legislative authorities offer for reporting, submitting, and receiving official information.</span></span>

<span data-ttu-id="c6439-108">电子消息功能已与 **电子报告** (ER) 模块集成。</span><span class="sxs-lookup"><span data-stu-id="c6439-108">The Electronic messages functionality is integrated with the **Electronic Reporting** (ER) module.</span></span> <span data-ttu-id="c6439-109">因此，您可以为电子消息设置 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="c6439-109">Therefore, you can set up ER formats for electronic messages.</span></span> <span data-ttu-id="c6439-110">有关详细信息，请参阅[电子报告 (ER)](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/analytics/general-electronic-reporting)。</span><span class="sxs-lookup"><span data-stu-id="c6439-110">For more information, see [Electronic reporting (ER)](https://docs.microsoft.com/dynamics365/unified-operations/dev-itpro/analytics/general-electronic-reporting).</span></span>

<span data-ttu-id="c6439-111">电子消息基于以下实体：</span><span class="sxs-lookup"><span data-stu-id="c6439-111">Electronic messaging is based on the following entities:</span></span>

- <span data-ttu-id="c6439-112">**电子消息** – 应该在内部报告和/或传输的报表或申报。</span><span class="sxs-lookup"><span data-stu-id="c6439-112">**Electronic message** – A report or declaration that should be reported and/or transmitted internally.</span></span> <span data-ttu-id="c6439-113">示例是发送给税务局的报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-113">An example is a report that is sent to a tax office.</span></span>
- <span data-ttu-id="c6439-114">**电子消息项** – 应包括在报告的消息中的记录。</span><span class="sxs-lookup"><span data-stu-id="c6439-114">**Electronic message items** – Records that should be included in the message that is reported.</span></span>
- <span data-ttu-id="c6439-115">**电子消息处理** – 应运行以收集所需的数据、生成报表、在 Microsoft Azure Blob 存储中存储数据、在系统之外传输报表、接收系统外部的响应以及基于收到的信息更新数据库的行动链。</span><span class="sxs-lookup"><span data-stu-id="c6439-115">**Electronic message processing** – A chain of actions that should be run to collect the required data, generate reports, store data in Microsoft Azure Blob storage, transmit reports outside the system, receive responses from outside the system, and, based on the information that is received, update the database.</span></span> <span data-ttu-id="c6439-116">链中的操作可以已链接，也可以未链接</span><span class="sxs-lookup"><span data-stu-id="c6439-116">The actions in the chain can be either linked or unlinked</span></span>

<span data-ttu-id="c6439-117">下图显示电子消息的数据流。</span><span class="sxs-lookup"><span data-stu-id="c6439-117">The following illustration shows the flow of data for electronic messaging.</span></span>

![电子消息数据流](media/electronic-messaging-data-flow.png)

<span data-ttu-id="c6439-119">电子消息功能支持以下场景：</span><span class="sxs-lookup"><span data-stu-id="c6439-119">The Electronic messages functionality supports the following scenarios:</span></span>

- <span data-ttu-id="c6439-120">手动创建消息和生成基于不同类型的关联导出 ER 格式的报表：Microsoft Excel、XML、JavaScript Object Notation (JSON)、PDF、文本和 Microsoft Word。</span><span class="sxs-lookup"><span data-stu-id="c6439-120">Manually create messages, and generate reports that are based on associated exporting ER formats of various types: Microsoft Excel, XML, JavaScript Object Notation (JSON), PDF, text, and Microsoft Word.</span></span>
- <span data-ttu-id="c6439-121">自动创建和处理基于通过关联导入 ER 格式从当局请求和接收的信息的消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-121">Automatically create and process messages that are based on information that was requested and received from an authority via an associated importing ER format.</span></span>
- <span data-ttu-id="c6439-122">作为消息项收集和处理来自数据源的信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-122">Collect and process information from a data source as message items.</span></span> <span data-ttu-id="c6439-123">数据源是一个 Finance 表。</span><span class="sxs-lookup"><span data-stu-id="c6439-123">The data source is a Finance table.</span></span>
- <span data-ttu-id="c6439-124">存储附加信息，并通过调用有关消息或消息项的专门定义的可执行类评估不同值。</span><span class="sxs-lookup"><span data-stu-id="c6439-124">Store additional information, and evaluate various values by calling specifically defined executable classes in relation to messages or message items.</span></span>
- <span data-ttu-id="c6439-125">聚合在消息项中收集的信息，按消息拆分该信息，然后生成关联导出 ER 格式的报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-125">Aggregate information that is collected in message items, split that information by message, and generate reports that are in associated exporting ER formats.</span></span>
- <span data-ttu-id="c6439-126">传输使用存储在 Azure Key Vault 中的安全信息生成到 Web 服务的报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-126">Transmit the reports that are generated to a web service by using security information that is stored in Azure Key Vault.</span></span>
- <span data-ttu-id="c6439-127">接收 Web 服务的响应、解释响应、根据需要更新 Finance 中的数据。</span><span class="sxs-lookup"><span data-stu-id="c6439-127">Receive a response from a web service, interpret the response, and update data in Finance as appropriate.</span></span>
- <span data-ttu-id="c6439-128">存储和查看生成的所有报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-128">Store and review all the reports that are generated.</span></span>
- <span data-ttu-id="c6439-129">存储和查看与为消息或消息项运行的行动有关的所有日志信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-129">Store and review all the log information that is related to actions that are run for a message or message item.</span></span>
- <span data-ttu-id="c6439-130">通过各个消息状态和消息项状态控制处理。</span><span class="sxs-lookup"><span data-stu-id="c6439-130">Control the processing through various message statuses and message item statuses.</span></span>

## <a name="set-up-electronic-messaging"></a><span data-ttu-id="c6439-131">设置电子消息</span><span class="sxs-lookup"><span data-stu-id="c6439-131">Set up electronic messaging</span></span>

<span data-ttu-id="c6439-132">电子消息可以帮助您维护不同文档类型的不同电子报告流程。</span><span class="sxs-lookup"><span data-stu-id="c6439-132">Electronic messaging can help you maintain different electronic reporting processes for different document types.</span></span> <span data-ttu-id="c6439-133">在一些复杂的场景中，设置了电子消息，以便其包含很多消息状态、消息项状态、行动、额外字段和可执行类的组合。</span><span class="sxs-lookup"><span data-stu-id="c6439-133">In some complex scenarios, electronic messaging is set up so that it has a combination of many message statuses, message items statuses, actions, additional fields, and executable classes.</span></span> <span data-ttu-id="c6439-134">对于这些场景，数据实体包可以导入。</span><span class="sxs-lookup"><span data-stu-id="c6439-134">For these scenarios, packages of data entities are available for import.</span></span> <span data-ttu-id="c6439-135">如果您使用这些数据实体包，您应使用数据管理工具将其导入到法人。</span><span class="sxs-lookup"><span data-stu-id="c6439-135">If you use these data entity packages, you should import them to a legal entity by using the Data management tool.</span></span> <span data-ttu-id="c6439-136">有关如何使用数据管理工具的详细信息，请参阅[数据管理](../../dev-itpro/data-entities/data-entities-data-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="c6439-136">For more information about how to use the Data management tool, see [Data management](../../dev-itpro/data-entities/data-entities-data-packages.md).</span></span>

<span data-ttu-id="c6439-137">如果您不导入数据实体包，您可以手动设置电子消息功能。</span><span class="sxs-lookup"><span data-stu-id="c6439-137">If you don't import a data entity package, you can manually set up the Electronic messages functionality.</span></span> <span data-ttu-id="c6439-138">在这种情况下，必须设置以下元素：</span><span class="sxs-lookup"><span data-stu-id="c6439-138">In this case, you must set up the following elements:</span></span>

- [<span data-ttu-id="c6439-139">编号规则</span><span class="sxs-lookup"><span data-stu-id="c6439-139">Number sequences</span></span>](#number-sequences)
- [<span data-ttu-id="c6439-140">消息项类型和状态</span><span class="sxs-lookup"><span data-stu-id="c6439-140">Message item types and statuses</span></span>](#message-item-types-and-statuses)
- [<span data-ttu-id="c6439-141">消息状态</span><span class="sxs-lookup"><span data-stu-id="c6439-141">Message statuses</span></span>](#message-statuses)
- [<span data-ttu-id="c6439-142">附加字段</span><span class="sxs-lookup"><span data-stu-id="c6439-142">Additional fields</span></span>](#additional-fields)
- [<span data-ttu-id="c6439-143">可执行类设置</span><span class="sxs-lookup"><span data-stu-id="c6439-143">Executable class settings</span></span>](#executable-class-settings)
- [<span data-ttu-id="c6439-144">填充记录行为</span><span class="sxs-lookup"><span data-stu-id="c6439-144">Populate records actions</span></span>](#populate-records-actions)
- [<span data-ttu-id="c6439-145">Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="c6439-145">Web applications</span></span>](#web-applications)
- [<span data-ttu-id="c6439-146">Web 服务设置</span><span class="sxs-lookup"><span data-stu-id="c6439-146">Web service settings</span></span>](#web-service-settings)
- [<span data-ttu-id="c6439-147">消息处理操作</span><span class="sxs-lookup"><span data-stu-id="c6439-147">Message processing actions</span></span>](#message-processing-actions)
- [<span data-ttu-id="c6439-148">电子消息处理</span><span class="sxs-lookup"><span data-stu-id="c6439-148">Electronic message processing</span></span>](#electronic-message-processing)

<span data-ttu-id="c6439-149">以下部分提供有关每个元素的详细信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-149">The following sections provide more information about each of these elements.</span></span>

### <a name="number-sequences"></a><span data-ttu-id="c6439-150">编号规则</span><span class="sxs-lookup"><span data-stu-id="c6439-150">Number sequences</span></span>

<span data-ttu-id="c6439-151">为消息和消息项设置编号规则。</span><span class="sxs-lookup"><span data-stu-id="c6439-151">Set up number sequences for both messages and message items.</span></span> <span data-ttu-id="c6439-152">此编号规则用于自动为消息和消息项编号。</span><span class="sxs-lookup"><span data-stu-id="c6439-152">The number sequences are used to automatically number the messages and the message items.</span></span> <span data-ttu-id="c6439-153">将把分配的编号用作消息和消息项在系统中的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="c6439-153">The numbers that are assigned will be used as unique identifiers for the messages and message items in the system.</span></span> <span data-ttu-id="c6439-154">您可以在 **总帐参数** 页（**总帐** \> **分类帐设置** \> **总帐参数**）上为电子消息设置编号规则。</span><span class="sxs-lookup"><span data-stu-id="c6439-154">You can set up number sequences for electronic messaging on the **General ledger parameters** page (**General ledger** \> **Ledger setup** \> **General ledger parameters**).</span></span>

### <a name="message-item-types-and-statuses"></a><span data-ttu-id="c6439-155">消息项类型和状态</span><span class="sxs-lookup"><span data-stu-id="c6439-155">Message item types and statuses</span></span>

<span data-ttu-id="c6439-156">消息项类型标识将在电子消息中使用的记录的类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-156">Message item types identify the types of records that will be used in electronic messages.</span></span> <span data-ttu-id="c6439-157">您可以在 **消息项类型** 页（**税** \> **设置** \> **电子消息** \> **消息项类型**）设置消息项类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-157">You can set up message item types on the **Message item types** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message item types**).</span></span>

<span data-ttu-id="c6439-158">消息项状态标识将应用于您正在设置的处理中的消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-158">Message item statuses identify the statuses that will apply to message items in the processing that you're setting up.</span></span> <span data-ttu-id="c6439-159">您可以在 **消息项状态** 页（**税** \> **设置** \> **电子消息** \> **消息项状态**）设置消息项类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-159">You can set up message item types on the **Message item statuses** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message item statuses**).</span></span>

<span data-ttu-id="c6439-160">消息项状态的 **允许删除** 参数定义用户是否可在 **电子消息** 页面或 **电子消息项** 页面上删除此状态的消息项。</span><span class="sxs-lookup"><span data-stu-id="c6439-160">The **Allow delete** parameter of a message item status defines whether users can delete message items that have this status on the **Electronic messages** page or the **Electronic message items** page.</span></span>

### <a name="message-statuses"></a><span data-ttu-id="c6439-161">消息状态</span><span class="sxs-lookup"><span data-stu-id="c6439-161">Message statuses</span></span>

<span data-ttu-id="c6439-162">设置应该在消息处理中呈现的消息状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-162">Set up the message statuses that should be available in message processing.</span></span> <span data-ttu-id="c6439-163">您可以在 **消息状态** 页（**税** \> **设置** \> **电子消息** \> **消息状态**）设置消息状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-163">You can set up message statuses on the **Message statuses** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message statuses**).</span></span>

<span data-ttu-id="c6439-164">下表描述 **消息状态** 页的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-164">The following table describes the fields on the **Message statuses** page.</span></span>

| <span data-ttu-id="c6439-165">字段名称</span><span class="sxs-lookup"><span data-stu-id="c6439-165">Field name</span></span>          | <span data-ttu-id="c6439-166">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-166">Description</span></span> |
|---------------------|-------------|
| <span data-ttu-id="c6439-167">消息状态</span><span class="sxs-lookup"><span data-stu-id="c6439-167">Message status</span></span>      | <span data-ttu-id="c6439-168">输入消息状态的唯一名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-168">Enter a unique name for the message status.</span></span> <span data-ttu-id="c6439-169">消息状态可用于表示电子消息在各阶段的状态特征。</span><span class="sxs-lookup"><span data-stu-id="c6439-169">Message statuses are used to characterize the state of an electronic message at every moment.</span></span> <span data-ttu-id="c6439-170">您输入的名称在 **电子消息** 页面中和与电子消息有关的日志中显示。</span><span class="sxs-lookup"><span data-stu-id="c6439-170">The name that you enter is shown on the **Electronic messages** page and in a log that is related to electronic messages.</span></span> |
| <span data-ttu-id="c6439-171">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-171">Description</span></span>         | <span data-ttu-id="c6439-172">输入消息状态的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-172">Enter a description of the message status.</span></span> |
| <span data-ttu-id="c6439-173">响应类型</span><span class="sxs-lookup"><span data-stu-id="c6439-173">Response type</span></span>       | <span data-ttu-id="c6439-174">选择消息状态的响应类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-174">Select the type of response for the message status.</span></span> <span data-ttu-id="c6439-175">处理中的某些操作可以生成多种响应类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-175">Some actions in a processing can produce more than one response type.</span></span> <span data-ttu-id="c6439-176">例如，**Web 服务** 类型的操作可以生成 **已成功执行** 类型或 **技术错误** 类型的响应，具体取决于其执行结果。</span><span class="sxs-lookup"><span data-stu-id="c6439-176">For example, actions of the **Web service** type can produce responses of either the **Successfully executed** type or the **Technical error** type, depending on the result of its execution.</span></span> <span data-ttu-id="c6439-177">在此案例中，必须同时定义这两种响应类型的消息状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-177">In this case, you must define message statuses for both response types.</span></span> <span data-ttu-id="c6439-178">有关操作类型及相关响应类型的详细信息，请参阅[消息处理操作类型](#message-processing-action-types)。</span><span class="sxs-lookup"><span data-stu-id="c6439-178">For more information about action types and the types of responses that are related to them, see [Message processing action types](#message-processing-action-types).</span></span> |
| <span data-ttu-id="c6439-179">消息项状态</span><span class="sxs-lookup"><span data-stu-id="c6439-179">Message item status</span></span> | <span data-ttu-id="c6439-180">电子消息的状态有时一定会影响相关消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-180">Sometimes, the status of an electronic message must influence the status of related message items.</span></span> <span data-ttu-id="c6439-181">请选择此字段中的消息项状态将其与消息状态关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-181">Select a message item status in this field to associate it with the message status.</span></span> |
| <span data-ttu-id="c6439-182">允许删除</span><span class="sxs-lookup"><span data-stu-id="c6439-182">Allow delete</span></span>        | <span data-ttu-id="c6439-183">如果用户应该可以删除在 **电子消息** 页面上为此状态的电子消息，请选中此复选框。</span><span class="sxs-lookup"><span data-stu-id="c6439-183">Select this check box if users should be able to delete electronic messages that have this status on the **Electronic messages** page.</span></span> |

### <a name="additional-fields"></a><span data-ttu-id="c6439-184">附加字段</span><span class="sxs-lookup"><span data-stu-id="c6439-184">Additional fields</span></span>

<span data-ttu-id="c6439-185">电子消息功能让您可以填充交易表中的记录。</span><span class="sxs-lookup"><span data-stu-id="c6439-185">The Electronic messages functionality lets you fill in records from a transactional table.</span></span> <span data-ttu-id="c6439-186">这样，您可以为报告准备记录，然后报告它们。</span><span class="sxs-lookup"><span data-stu-id="c6439-186">In this way, you can prepare the records for reporting and then report them.</span></span> <span data-ttu-id="c6439-187">但是，有时交易记录表中的信息不足，无法按照可满足申报要求的方式填写记录。</span><span class="sxs-lookup"><span data-stu-id="c6439-187">However, transactional tables sometimes don't have enough information to fill in records in a manner that meets the reporting requirements.</span></span> <span data-ttu-id="c6439-188">若要填写必须为记录报告的所有信息，您可以设置附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-188">To fill in all the information that must be reported for a record, you can set up additional fields.</span></span> <span data-ttu-id="c6439-189">附加字段可与消息和消息项关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-189">Additional fields can be associated with both messages and message items.</span></span> <span data-ttu-id="c6439-190">您可以在 **附加字段** 页（**税** \> **设置** \> **电子消息** \> **附加字段**）设置附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-190">You can set up additional fields on the **Additional fields** page (**Tax** \> **Setup** \> **Electronic messages** \> **Additional fields**).</span></span>

<span data-ttu-id="c6439-191">下表描述 **附加字段** 页的常规字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-191">The following table describes the general fields on the **Additional fields** page.</span></span>

| <span data-ttu-id="c6439-192">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-192">Field</span></span>       | <span data-ttu-id="c6439-193">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-193">Description</span></span> |
|-------------|-------------|
| <span data-ttu-id="c6439-194">字段名称</span><span class="sxs-lookup"><span data-stu-id="c6439-194">Field name</span></span>  | <span data-ttu-id="c6439-195">输入与此流程相关的消息项的其他属性的名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-195">Enter the name of an additional attribute of message items that are related to the process.</span></span> <span data-ttu-id="c6439-196">在处理流程时，此名称显示在用户界面 (UI) 中。</span><span class="sxs-lookup"><span data-stu-id="c6439-196">This name is shown in the user interface (UI) while you work with the process.</span></span> <span data-ttu-id="c6439-197">它还可以用于与流程相关的 ER 配置。</span><span class="sxs-lookup"><span data-stu-id="c6439-197">It can also be used in ER configurations that are related to the process.</span></span> |
| <span data-ttu-id="c6439-198">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-198">Description</span></span> | <span data-ttu-id="c6439-199">输入附加字段的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-199">Enter a description of the additional field.</span></span> |
| <span data-ttu-id="c6439-200">用户编辑</span><span class="sxs-lookup"><span data-stu-id="c6439-200">User edit</span></span>   | <span data-ttu-id="c6439-201">如果用户应该可以通过 UI 更改附加字段的值，请将此选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="c6439-201">Set this option to **Yes** if users should be able to change the value of the additional field from the UI.</span></span> |
| <span data-ttu-id="c6439-202">计数器</span><span class="sxs-lookup"><span data-stu-id="c6439-202">Counter</span></span>     | <span data-ttu-id="c6439-203">如果附加字段应该包含电子消息中的编号规则，请将此选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="c6439-203">Set this option to **Yes** if the additional field should contain a number sequence in an electronic message.</span></span> <span data-ttu-id="c6439-204">运行 **电子申报导出** 类型的操作时，将自动填写附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="c6439-204">Value of the additional field will be filled in automatically when an action of the **Electronic reporting export** is run.</span></span> |
| <span data-ttu-id="c6439-205">隐藏</span><span class="sxs-lookup"><span data-stu-id="c6439-205">Hidden</span></span>      | <span data-ttu-id="c6439-206">如果 UI 中应该隐藏该附加字段，请将此选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="c6439-206">Set this option to **Yes** if the additional field should be hidden in the UI.</span></span> |

<span data-ttu-id="c6439-207">对于此项处理，每个额外字段都可能有不同的值。</span><span class="sxs-lookup"><span data-stu-id="c6439-207">Each additional field can have different values for the processing.</span></span> <span data-ttu-id="c6439-208">请在 **值** 快速选项卡上定义这些值。</span><span class="sxs-lookup"><span data-stu-id="c6439-208">You define these values on **Values** FastTab.</span></span> <span data-ttu-id="c6439-209">下表介绍这些字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-209">The following table describes the fields.</span></span>

| <span data-ttu-id="c6439-210">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-210">Field</span></span>                | <span data-ttu-id="c6439-211">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-211">Description</span></span> |
|----------------------|-------------|
| <span data-ttu-id="c6439-212">字段值</span><span class="sxs-lookup"><span data-stu-id="c6439-212">Field value</span></span>          | <span data-ttu-id="c6439-213">输入在报告过程中要用于消息或消息项的字段值。</span><span class="sxs-lookup"><span data-stu-id="c6439-213">Enter the field value to use for a message or message item during reporting.</span></span> |
| <span data-ttu-id="c6439-214">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-214">Description</span></span>          | <span data-ttu-id="c6439-215">输入字段值的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-215">Enter a description of the field value.</span></span> |
| <span data-ttu-id="c6439-216">科目类型</span><span class="sxs-lookup"><span data-stu-id="c6439-216">Account type</span></span>         | <span data-ttu-id="c6439-217">有些字段值可能被限制为特定科目类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-217">Some field values might be limited to specific account types.</span></span> <span data-ttu-id="c6439-218">选择以下值之一：**所有**、**客户** 或 **供应商**。</span><span class="sxs-lookup"><span data-stu-id="c6439-218">Select one of the following values: **All**, **Customer**, or **Vendor**.</span></span> |
| <span data-ttu-id="c6439-219">帐户编码</span><span class="sxs-lookup"><span data-stu-id="c6439-219">Account code</span></span>         | <span data-ttu-id="c6439-220">如果您在 **科目类型** 字段中选择了 **客户** 或 **供应商**，您可以进一步将字段值的使用限定为特定组或表。</span><span class="sxs-lookup"><span data-stu-id="c6439-220">If you selected **Customer** or **Vendor** in the **Account type** field, you can further limit the use of the field value to a specific group or table.</span></span> |
| <span data-ttu-id="c6439-221">帐户/组编号</span><span class="sxs-lookup"><span data-stu-id="c6439-221">Account/Group number</span></span> | <span data-ttu-id="c6439-222">如果您在 **科目类型** 字段中选择了 **客户** 或 **供应商**，并且如果您在 **帐户编码** 字段中输入了组或表，您可以在此字段中输入特定组或票务代理。</span><span class="sxs-lookup"><span data-stu-id="c6439-222">If you selected **Customer** or **Vendor** in the **Account type** field, and if you entered a group or table in the **Account code** field, you can enter a specific group or counteragent in this field.</span></span> |
| <span data-ttu-id="c6439-223">生效</span><span class="sxs-lookup"><span data-stu-id="c6439-223">Effective</span></span>            | <span data-ttu-id="c6439-224">指定应该开始考虑值的日期。</span><span class="sxs-lookup"><span data-stu-id="c6439-224">Specify the date when the value should start to be considered.</span></span> |
| <span data-ttu-id="c6439-225">到期</span><span class="sxs-lookup"><span data-stu-id="c6439-225">Expiration</span></span>           | <span data-ttu-id="c6439-226">指定应该停止考虑值的日期。</span><span class="sxs-lookup"><span data-stu-id="c6439-226">Specify the date when the value should stop being considered.</span></span> |

<span data-ttu-id="c6439-227">默认情况下，**帐户/组编号**、**帐户编码**、**生效** 和 **到期** 字段定义的条件组合不会影响为附加字段选择值。</span><span class="sxs-lookup"><span data-stu-id="c6439-227">By default, combinations of criteria that are defined by the **Account/Group number**, **Account code**, **Effective**, and **Expiration** fields don't influence the selection of values for additional fields.</span></span> <span data-ttu-id="c6439-228">但是，可以在可执行类中使用这些组合来实施特定逻辑以计算附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="c6439-228">However, these combinations can be used in an executable class to implement specific logic that calculates values for additional fields.</span></span>

### <a name="executable-class-settings"></a><span data-ttu-id="c6439-229">可执行类设置</span><span class="sxs-lookup"><span data-stu-id="c6439-229">Executable class settings</span></span>

<span data-ttu-id="c6439-230">可执行类是一个 X++ 方法或类，如果流程需要一些评估，电子消息处理可以对行动调用它。</span><span class="sxs-lookup"><span data-stu-id="c6439-230">An executable class is an X++ method or class that the electronic message processing can call in relation to an action if some evaluation is required for the process.</span></span>

<span data-ttu-id="c6439-231">您可以在 **可执行类设置** 页（**税** \> **设置**\> **电子消息** \> **可执行类设置**）手动设置可执行类。</span><span class="sxs-lookup"><span data-stu-id="c6439-231">You can manually set up an executable class on the **Executable class settings** page (**Tax** \> **Setup** \> **Electronic messages** \> **Executable class settings**).</span></span> <span data-ttu-id="c6439-232">创建行，并设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-232">Create a line, and set the following fields.</span></span>

| <span data-ttu-id="c6439-233">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-233">Field</span></span>                 | <span data-ttu-id="c6439-234">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-234">Description</span></span> |
|-----------------------|-------------|
| <span data-ttu-id="c6439-235">可执行类</span><span class="sxs-lookup"><span data-stu-id="c6439-235">Executable class</span></span>      | <span data-ttu-id="c6439-236">输入将在设置此类为其调用的消息处理行动期间使用的名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-236">Enter the name that will be used during the setup of a message processing action that this class is called in relation to.</span></span> |
| <span data-ttu-id="c6439-237">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-237">Description</span></span>           | <span data-ttu-id="c6439-238">输入可执行类的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-238">Enter a description of the executable class.</span></span> |
| <span data-ttu-id="c6439-239">可执行类名称</span><span class="sxs-lookup"><span data-stu-id="c6439-239">Executable class name</span></span> | <span data-ttu-id="c6439-240">选择 X++ 可执行类。</span><span class="sxs-lookup"><span data-stu-id="c6439-240">Select an X++ executable class.</span></span> |
| <span data-ttu-id="c6439-241">执行级别</span><span class="sxs-lookup"><span data-stu-id="c6439-241">Execution level</span></span>       | <span data-ttu-id="c6439-242">因为应为选择的可执行类预定义此字段，因此此字段将自动设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-242">This field is set automatically, because the value should be predefined for the selected executable class.</span></span> <span data-ttu-id="c6439-243">此字段限制相关评估运行的级别。</span><span class="sxs-lookup"><span data-stu-id="c6439-243">This field limits the level that related evaluation is run on.</span></span> |
| <span data-ttu-id="c6439-244">类描述</span><span class="sxs-lookup"><span data-stu-id="c6439-244">Class description</span></span>     | <span data-ttu-id="c6439-245">因为应为选择的可执行类预定义此字段，因此此字段将自动设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-245">This field is set automatically, because the value should be predefined for the selected executable class.</span></span> |

<span data-ttu-id="c6439-246">某些可执行类可能有必需参数，必须在首次运行该可执行类之前定义。</span><span class="sxs-lookup"><span data-stu-id="c6439-246">Some executable classes might have mandatory parameters that must be defined before the executable class is run for the first time.</span></span> <span data-ttu-id="c6439-247">若要定义这些参数，请在操作窗格上选择 **参数**，设置显示的对话框中的字段，然后选择 **确定**。</span><span class="sxs-lookup"><span data-stu-id="c6439-247">To define these parameters, select **Parameters** on the Action Pane, set the fields in the dialog box that appears, and then select **OK**.</span></span> <span data-ttu-id="c6439-248">务必选择 **确定**。</span><span class="sxs-lookup"><span data-stu-id="c6439-248">It's important that you select **OK**.</span></span> <span data-ttu-id="c6439-249">否则，不会将这些参数保存到数据库，这样就不能正确调用可执行类。</span><span class="sxs-lookup"><span data-stu-id="c6439-249">Otherwise, the parameters won't be saved to the database, and the executable class won't be called correctly.</span></span>

### <a name="populate-records-actions"></a><span data-ttu-id="c6439-250">填充记录行为</span><span class="sxs-lookup"><span data-stu-id="c6439-250">Populate records actions</span></span>

<span data-ttu-id="c6439-251">您使用填充记录操作设置将记录添加到消息项表以使其可以添加到电子消息的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-251">You use populate records actions to set up actions that add records to the Message items table so that they can be added to an electronic message.</span></span> <span data-ttu-id="c6439-252">例如，如果您的电子消息必须报告客户发票，则必须设置链接到“客户发票日记帐”表中的 **数据源** 字段的填充记录操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-252">For example, if your electronic message must report customer invoices, you must set up a populate records action that is linked to the **Data source** field in the Customer invoice journal table.</span></span> <span data-ttu-id="c6439-253">您可以在 **填充记录行动** 页（**税** \> **设置**\> **电子消息** \> **填充记录行动**）设置填充记录行动。</span><span class="sxs-lookup"><span data-stu-id="c6439-253">You can set up populate records actions on the **Populate records action** page (**Tax** \> **Setup** \> **Electronic messages** \> **Populate records actions**).</span></span> <span data-ttu-id="c6439-254">为应将记录添加到表的每个操作创建新记录，然后设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-254">Create a new record for every action that should add records to the table, and set the following fields.</span></span>

| <span data-ttu-id="c6439-255">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-255">Field</span></span>       | <span data-ttu-id="c6439-256">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-256">Description</span></span> |
|-------------|-------------|
| <span data-ttu-id="c6439-257">姓名</span><span class="sxs-lookup"><span data-stu-id="c6439-257">Name</span></span>        | <span data-ttu-id="c6439-258">为在您的流程中填充记录的操作输入名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-258">Enter a name for the action that fills in records in your process.</span></span> |
| <span data-ttu-id="c6439-259">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-259">Description</span></span> | <span data-ttu-id="c6439-260">输入填充记录操作的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-260">Enter a description of the populate records action.</span></span> |

<span data-ttu-id="c6439-261">在 **数据源设置** 快速选项卡上，为用于流程的每个数据源添加一个行，并设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-261">On the **Datasources setup** FastTab, add a line for every data source that is used for the process, and set the following fields.</span></span>

| <span data-ttu-id="c6439-262">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-262">Field</span></span>                  | <span data-ttu-id="c6439-263">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-263">Description</span></span> |
|------------------------|-------------|
| <span data-ttu-id="c6439-264">姓名</span><span class="sxs-lookup"><span data-stu-id="c6439-264">Name</span></span>                   | <span data-ttu-id="c6439-265">输入数据源的名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-265">Enter a name for the data source.</span></span> |
| <span data-ttu-id="c6439-266">消息项类型</span><span class="sxs-lookup"><span data-stu-id="c6439-266">Message item type</span></span>      | <span data-ttu-id="c6439-267">选择在为数据源创建记录时应使用的消息项的类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-267">Select the type of message item that should be used when records are created for the data source.</span></span> |
| <span data-ttu-id="c6439-268">科目类型</span><span class="sxs-lookup"><span data-stu-id="c6439-268">Account type</span></span>           | <span data-ttu-id="c6439-269">选择应与来自数据源的记录关联的科目的类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-269">Select the type of account that should be associated with records from the data source.</span></span> |
| <span data-ttu-id="c6439-270">主表名称</span><span class="sxs-lookup"><span data-stu-id="c6439-270">Master table name</span></span>      | <span data-ttu-id="c6439-271">选择应是数据源的表。</span><span class="sxs-lookup"><span data-stu-id="c6439-271">Select the table that should be a data source.</span></span> |
| <span data-ttu-id="c6439-272">单据编号字段</span><span class="sxs-lookup"><span data-stu-id="c6439-272">Document number field</span></span>  | <span data-ttu-id="c6439-273">在所选表中选择应从中获取单据编号的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-273">Select the field that the document number should be taken from in the selected table.</span></span> |
| <span data-ttu-id="c6439-274">单据日期字段</span><span class="sxs-lookup"><span data-stu-id="c6439-274">Document date field</span></span>    | <span data-ttu-id="c6439-275">在所选表中选择应从中获取单据日期的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-275">Select the field that the document date should be taken from in the selected table.</span></span> |
| <span data-ttu-id="c6439-276">文档帐户字段</span><span class="sxs-lookup"><span data-stu-id="c6439-276">Document account field</span></span> | <span data-ttu-id="c6439-277">在所选表中选择应从中获取单据科目的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-277">Select the field that the document account should be taken from in the selected table.</span></span> |
| <span data-ttu-id="c6439-278">用户查询</span><span class="sxs-lookup"><span data-stu-id="c6439-278">User query</span></span>             | <span data-ttu-id="c6439-279">如果选中此复选框，则可以通过选择网格上方的 **编辑查询** 来设置查询。</span><span class="sxs-lookup"><span data-stu-id="c6439-279">If this check box is selected, you can set up a query by selecting **Edit query** above the grid.</span></span> <span data-ttu-id="c6439-280">否则，所有记录将从所选数据源填充。</span><span class="sxs-lookup"><span data-stu-id="c6439-280">Otherwise, all the records will be filled in from the selected data source.</span></span> |

### <a name="web-applications"></a><span data-ttu-id="c6439-281">Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="c6439-281">Web applications</span></span>

<span data-ttu-id="c6439-282">请使用 Web 应用程序设置设置 Web 应用程序，以使其支持 Open Authorization (OAuth) 2.0。</span><span class="sxs-lookup"><span data-stu-id="c6439-282">You use web application settings to set up a web application so that it supports Open Authorization (OAuth) 2.0.</span></span> <span data-ttu-id="c6439-283">OAuth 是一种开放标准，供用户在不共享自己的访问凭证的情况下，为该应用程序授予代表自己的“安全委托访问权限”。</span><span class="sxs-lookup"><span data-stu-id="c6439-283">OAuth is the open standard that lets users grant "secure delegated access" to the application on their behalf, without sharing their access credentials.</span></span> <span data-ttu-id="c6439-284">也可以获取授权码和访问令牌来了解授权流程。</span><span class="sxs-lookup"><span data-stu-id="c6439-284">You can also go through the authorization process by getting an authorization code and access token.</span></span> <span data-ttu-id="c6439-285">您可以在 **Web 应用程序** 页（**税** \> **设置** \> **电子消息** \> **Web 应用程序**）设置 Web 应用程序设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-285">You can set up web application settings on the **Web applications** page (**Tax** \> **Setup** \> **Electronic messages** \> **Web applications**).</span></span>

<span data-ttu-id="c6439-286">下表描述 **Web 应用程序** 页的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-286">The following table describes the fields on the **Web applications** page.</span></span>

| <span data-ttu-id="c6439-287">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-287">Field</span></span>                        | <span data-ttu-id="c6439-288">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-288">Description</span></span> |
|------------------------------|-------------|
| <span data-ttu-id="c6439-289">应用程序名称</span><span class="sxs-lookup"><span data-stu-id="c6439-289">Application name</span></span>             | <span data-ttu-id="c6439-290">为 Web 应用程序输入名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-290">Enter a name for the web application.</span></span> |
| <span data-ttu-id="c6439-291">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-291">Description</span></span>                  | <span data-ttu-id="c6439-292">输入 Web 应用程序的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-292">Enter a description of the web application.</span></span> |
| <span data-ttu-id="c6439-293">基 URL</span><span class="sxs-lookup"><span data-stu-id="c6439-293">Base URL</span></span>                     | <span data-ttu-id="c6439-294">输入 Web 应用程序的基 Internet 地址。</span><span class="sxs-lookup"><span data-stu-id="c6439-294">Enter the base internet address of the web application.</span></span> |
| <span data-ttu-id="c6439-295">授权 URL 路径</span><span class="sxs-lookup"><span data-stu-id="c6439-295">Authorization URL path</span></span>       | <span data-ttu-id="c6439-296">指定用于构成进行授权的 URL 的路径。</span><span class="sxs-lookup"><span data-stu-id="c6439-296">Specify the path that is used to compose the URL for authorization.</span></span> |
| <span data-ttu-id="c6439-297">令牌 URL 路径</span><span class="sxs-lookup"><span data-stu-id="c6439-297">Token URL path</span></span>               | <span data-ttu-id="c6439-298">指定用于构成令牌的 URL 的路径。</span><span class="sxs-lookup"><span data-stu-id="c6439-298">Specify the path that is used to compose the URL for the token.</span></span> |
| <span data-ttu-id="c6439-299">重定向 URL</span><span class="sxs-lookup"><span data-stu-id="c6439-299">Redirect URL</span></span>                 | <span data-ttu-id="c6439-300">输入重定向 URL。</span><span class="sxs-lookup"><span data-stu-id="c6439-300">Enter the redirect URL.</span></span> |
| <span data-ttu-id="c6439-301">客户端 ID</span><span class="sxs-lookup"><span data-stu-id="c6439-301">Client ID</span></span>                    | <span data-ttu-id="c6439-302">输入 Web 应用程序的客户端 ID。</span><span class="sxs-lookup"><span data-stu-id="c6439-302">Enter the client ID of the web application.</span></span> |
| <span data-ttu-id="c6439-303">客户端密钥</span><span class="sxs-lookup"><span data-stu-id="c6439-303">Client secret</span></span>                | <span data-ttu-id="c6439-304">输入 Web 应用程序的客户端密钥。</span><span class="sxs-lookup"><span data-stu-id="c6439-304">Enter the client secret of the web application.</span></span> |
| <span data-ttu-id="c6439-305">服务器令牌</span><span class="sxs-lookup"><span data-stu-id="c6439-305">Server token</span></span>                 | <span data-ttu-id="c6439-306">输入 Web 应用程序的服务器令牌。</span><span class="sxs-lookup"><span data-stu-id="c6439-306">Enter the server token of the web application.</span></span> |
| <span data-ttu-id="c6439-307">授权格式映射</span><span class="sxs-lookup"><span data-stu-id="c6439-307">Authorization format mapping</span></span> | <span data-ttu-id="c6439-308">选择用于生成授权请求的 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="c6439-308">Select the ER format that is used to generate the request for authorization.</span></span> |
| <span data-ttu-id="c6439-309">导入令牌模型映射</span><span class="sxs-lookup"><span data-stu-id="c6439-309">Import token model mapping</span></span>   | <span data-ttu-id="c6439-310">选择用于存储访问令牌的 ER 导入模型。</span><span class="sxs-lookup"><span data-stu-id="c6439-310">Select the ER importing model mapping that is used to store the access token.</span></span> |
| <span data-ttu-id="c6439-311">授予作用域</span><span class="sxs-lookup"><span data-stu-id="c6439-311">Granted scope</span></span>                | <span data-ttu-id="c6439-312">为应用程序授予的请求作用域。</span><span class="sxs-lookup"><span data-stu-id="c6439-312">The scope that is granted for requests to the application.</span></span> <span data-ttu-id="c6439-313">将自动更新此字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-313">This field is automatically updated.</span></span> |
| <span data-ttu-id="c6439-314">访问令牌将于以下时间到期</span><span class="sxs-lookup"><span data-stu-id="c6439-314">Access token will expire in</span></span>  | <span data-ttu-id="c6439-315">访问令牌的剩余有效时间。</span><span class="sxs-lookup"><span data-stu-id="c6439-315">The remaining time before the access token expires.</span></span> | 
| <span data-ttu-id="c6439-316">接受</span><span class="sxs-lookup"><span data-stu-id="c6439-316">Accept</span></span>                       | <span data-ttu-id="c6439-317">指定 Web 请求的 **接受** 属性。</span><span class="sxs-lookup"><span data-stu-id="c6439-317">Specify the **Accept** property of the web request.</span></span> <span data-ttu-id="c6439-318">例如，输入 **application/vnd.hmrc.1.0+json**。</span><span class="sxs-lookup"><span data-stu-id="c6439-318">For example, enter **application/vnd.hmrc.1.0+json**.</span></span> |
| <span data-ttu-id="c6439-319">内容类型</span><span class="sxs-lookup"><span data-stu-id="c6439-319">Content type</span></span>                 | <span data-ttu-id="c6439-320">指定内容类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-320">Specify the content type.</span></span> <span data-ttu-id="c6439-321">例如，输入 **application/json**。</span><span class="sxs-lookup"><span data-stu-id="c6439-321">For example, enter **application/json**.</span></span> |

<span data-ttu-id="c6439-322">此外，**Web 应用程序** 页面的操作窗格中还有以下按钮，用于支持授权流程：</span><span class="sxs-lookup"><span data-stu-id="c6439-322">In addition, the following buttons are available on the Action Pane of the **Web applications** page to support the authorization process:</span></span>

- <span data-ttu-id="c6439-323">**获取授权代码** - 初始化 Web 应用程序的授权。</span><span class="sxs-lookup"><span data-stu-id="c6439-323">**Get authorization code** – Initialize authorization of the web application.</span></span>
- <span data-ttu-id="c6439-324">**获取访问令牌** - 初始化访问令牌的获取流程。</span><span class="sxs-lookup"><span data-stu-id="c6439-324">**Obtain access token** – Initialize the process of getting an access token.</span></span>
- <span data-ttu-id="c6439-325">**刷新访问令牌** - 刷新访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c6439-325">**Refresh access token** – Refresh an access token.</span></span>

<span data-ttu-id="c6439-326">可将以加密格式存储在系统的数据库中的 Web 应用程序访问令牌用于请求 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="c6439-326">When an access token to a web application is stored in the system's database in encrypted format, it can be used for requests to a web service.</span></span> <span data-ttu-id="c6439-327">出于安全目的，只有必须允许解决这些请求的安全角色才能访问这些访问令牌。</span><span class="sxs-lookup"><span data-stu-id="c6439-327">For security purposes, access to the access token must be limited to security roles that must be allowed to address those requests.</span></span> <span data-ttu-id="c6439-328">如果安全组外的用户尝试解决请求，该用户将收到错误消息，说明不允许其通过所选 Web 应用程序进行互操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-328">If users outside the security group try to address a request, they receive an error that states that they aren't allowed to interoperate via the selected web application.</span></span> <span data-ttu-id="c6439-329">若要设置必须有权访问访问令牌的安全角色，请使用 **Web 应用程序** 页面上的 **安全角色** 快速选项卡。</span><span class="sxs-lookup"><span data-stu-id="c6439-329">To set up the security roles that must have access to the access token, use the **Security roles** FastTab on the **Web applications** page.</span></span> <span data-ttu-id="c6439-330">如果不为 Web 应用程序定义安全角色，则只有系统管理员可以通过此 Web 应用程序互操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-330">If security roles aren't defined for a web application, only a system admin can interoperate via this web application.</span></span>

### <a name="web-service-settings"></a><span data-ttu-id="c6439-331">Web 服务设置</span><span class="sxs-lookup"><span data-stu-id="c6439-331">Web service settings</span></span>

<span data-ttu-id="c6439-332">您使用 Web 服务设置对传输到 Web 服务的直接数据传输进行设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-332">You use web service settings to set up direct data transmission to a web service.</span></span> <span data-ttu-id="c6439-333">您可以在 **Web 服务设置** 页（**税** \> **设置** \> **电子消息** \> **Web 服务设置**）设置 Web 服务设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-333">You can set up web service settings on the **Web service settings** page (**Tax** \> **Setup** \> **Electronic messages** \> **Web service settings**).</span></span>

<span data-ttu-id="c6439-334">下表描述 **Web 服务设置** 页的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-334">The following table describes the fields on the **Web service settings** page.</span></span>

| <span data-ttu-id="c6439-335">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-335">Field</span></span>                          | <span data-ttu-id="c6439-336">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-336">Description</span></span> |
|--------------------------------|-------------|
| <span data-ttu-id="c6439-337">Web 服务</span><span class="sxs-lookup"><span data-stu-id="c6439-337">Web service</span></span>                    | <span data-ttu-id="c6439-338">为 Web 服务输入名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-338">Enter a name for the web service.</span></span> |
| <span data-ttu-id="c6439-339">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-339">Description</span></span>                    | <span data-ttu-id="c6439-340">输入 Web 服务的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-340">Enter a description of the web service.</span></span> |
| <span data-ttu-id="c6439-341">Internet 地址</span><span class="sxs-lookup"><span data-stu-id="c6439-341">Internet address</span></span>               | <span data-ttu-id="c6439-342">输入 Web 服务的 Internet 地址。</span><span class="sxs-lookup"><span data-stu-id="c6439-342">Enter the internet address of the web service.</span></span> <span data-ttu-id="c6439-343">如果为 Web 服务指定了 Web 应用程序，并且该 Web 服务的 Internet 地址应该与为该 Web 应用程序定义的 Internet 地址相同，则请选择 **复制基 URL** 将 Web 应用程序的基 URL 复制到此字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-343">If a web application is specified for the web service, and if the internet address of the web service should be the same as the internet address that is defined for that web application, select **Copy base URL** to copy the base URL of the web application to this field.</span></span> |
| <span data-ttu-id="c6439-344">证书</span><span class="sxs-lookup"><span data-stu-id="c6439-344">Certificate</span></span>                    | <span data-ttu-id="c6439-345">选择此前设置的密钥保管库证书。</span><span class="sxs-lookup"><span data-stu-id="c6439-345">Select a Key Vault certificate that has previously been set up.</span></span> |
| <span data-ttu-id="c6439-346">Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="c6439-346">Web application</span></span>                | <span data-ttu-id="c6439-347">选择此前设置的密钥保管库证书。</span><span class="sxs-lookup"><span data-stu-id="c6439-347">Select a Key Vault certificate that has previously been set up.</span></span> |
| <span data-ttu-id="c6439-348">响应类型 - XML</span><span class="sxs-lookup"><span data-stu-id="c6439-348">The response type – XML</span></span>        | <span data-ttu-id="c6439-349">如果响应类型是 XML，将此选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="c6439-349">Set this option to **Yes** if the response type is XML.</span></span> |
| <span data-ttu-id="c6439-350">请求方法</span><span class="sxs-lookup"><span data-stu-id="c6439-350">Request method</span></span>                 | <span data-ttu-id="c6439-351">指定请求的方法。</span><span class="sxs-lookup"><span data-stu-id="c6439-351">Specify the method of the request.</span></span> <span data-ttu-id="c6439-352">HTTP 定义指示应该为给定资源执行的操作的一组请求方法。</span><span class="sxs-lookup"><span data-stu-id="c6439-352">HTTP defines a set of request methods that indicate the action that should be performed for a given resource.</span></span> <span data-ttu-id="c6439-353">请求方法可以是 **GET**、**POST**，或其他 HTTP 方法。</span><span class="sxs-lookup"><span data-stu-id="c6439-353">The request method can be **GET**, **POST**, or another HTTP method.</span></span> |
| <span data-ttu-id="c6439-354">请求标题</span><span class="sxs-lookup"><span data-stu-id="c6439-354">Request headers</span></span>                | <span data-ttu-id="c6439-355">指定请求标题。</span><span class="sxs-lookup"><span data-stu-id="c6439-355">Specify request headers.</span></span> <span data-ttu-id="c6439-356">请求标题是可以在 HTTP 请求中使用但与消息内容不相关的 HTTP 标题。</span><span class="sxs-lookup"><span data-stu-id="c6439-356">A request header is an HTTP header that can be used in an HTTP request, and that isn't related to the content of the message.</span></span> |
| <span data-ttu-id="c6439-357">接受</span><span class="sxs-lookup"><span data-stu-id="c6439-357">Accept</span></span>                         | <span data-ttu-id="c6439-358">指定 Web 请求的 **接受** 属性。</span><span class="sxs-lookup"><span data-stu-id="c6439-358">Specify the **Accept** property of the web request.</span></span> |
| <span data-ttu-id="c6439-359">接受编码</span><span class="sxs-lookup"><span data-stu-id="c6439-359">Accept encoding</span></span>                | <span data-ttu-id="c6439-360">指定 **接受编码** 值。</span><span class="sxs-lookup"><span data-stu-id="c6439-360">Specify the **Accept-Encoding** value.</span></span> <span data-ttu-id="c6439-361">接受编码请求 HTTP 标题给予客户可以了解的内容编码的建议。</span><span class="sxs-lookup"><span data-stu-id="c6439-361">The Accept-Encoding request HTTP header advertises the content encoding that the client can understand.</span></span> <span data-ttu-id="c6439-362">此内容编码通常是压缩算法。</span><span class="sxs-lookup"><span data-stu-id="c6439-362">This content encoding is usually a compression algorithm.</span></span> |
| <span data-ttu-id="c6439-363">内容类型</span><span class="sxs-lookup"><span data-stu-id="c6439-363">Content type</span></span>                   | <span data-ttu-id="c6439-364">指定内容类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-364">Specify the content type.</span></span> <span data-ttu-id="c6439-365">内容类型实体 HTTP 标题指示资源的媒体类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-365">The Content-Type entity HTTP header indicates the media type of the resource.</span></span> |
| <span data-ttu-id="c6439-366">成功的响应代码</span><span class="sxs-lookup"><span data-stu-id="c6439-366">Successful response code</span></span>       | <span data-ttu-id="c6439-367">指定用于指示请求已成功的 HTTP 状态代码。</span><span class="sxs-lookup"><span data-stu-id="c6439-367">Specify the HTTP status code that indicates that the request was successful.</span></span> |
| <span data-ttu-id="c6439-368">请求标题格式映射</span><span class="sxs-lookup"><span data-stu-id="c6439-368">Request headers format mapping</span></span> | <span data-ttu-id="c6439-369">选择用于生成 Web 请求标题的 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="c6439-369">Select the ER format that is used to generate web request headers.</span></span> |

### <a name="message-processing-actions"></a><span data-ttu-id="c6439-370">消息处理操作</span><span class="sxs-lookup"><span data-stu-id="c6439-370">Message processing actions</span></span>

<span data-ttu-id="c6439-371">您使用消息处理操作创建流程的操作和设置操作参数。</span><span class="sxs-lookup"><span data-stu-id="c6439-371">You use message processing actions to create actions for your processes and set up their parameters.</span></span> <span data-ttu-id="c6439-372">您可以在 **消息处理操作** 页（**税** \> **设置** \> **电子消息** \> **消息处理操作**）设置消息处理操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-372">You can set up message processing actions on the **Message processing actions** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message processing actions**).</span></span>

<span data-ttu-id="c6439-373">下表描述 **消息处理操作** 页的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-373">The following tables describe the fields on the **Message processing actions** page.</span></span>

#### <a name="general-fasttab"></a><span data-ttu-id="c6439-374">常规快速选项卡</span><span class="sxs-lookup"><span data-stu-id="c6439-374">General FastTab</span></span>

| <span data-ttu-id="c6439-375">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-375">Field</span></span>                       | <span data-ttu-id="c6439-376">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-376">Description</span></span> |
|-----------------------------|-------------|
| <span data-ttu-id="c6439-377">操作类型</span><span class="sxs-lookup"><span data-stu-id="c6439-377">Action type</span></span>                 | <span data-ttu-id="c6439-378">选择操作的类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-378">Select the type of action.</span></span> <span data-ttu-id="c6439-379">有关可用选项的信息，请参阅[消息处理操作类型](#message-processing-action-types)部分。</span><span class="sxs-lookup"><span data-stu-id="c6439-379">For information about the available options, see the [Message processing action types](#message-processing-action-types) section.</span></span> |
| <span data-ttu-id="c6439-380">格式映射</span><span class="sxs-lookup"><span data-stu-id="c6439-380">Format mapping</span></span>              | <span data-ttu-id="c6439-381">选择应为操作调用的 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="c6439-381">Select the ER format that should be called for the action.</span></span> <span data-ttu-id="c6439-382">此字段仅可用于 **电子报告导出**、**电子报告导入** 和 **电子报告导出消息** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-382">This field is available only for actions of the **Electronic reporting export**, **Electronic reporting import**, and **Electronic reporting export message** types.</span></span> |
| <span data-ttu-id="c6439-383">URL 路径的格式映射</span><span class="sxs-lookup"><span data-stu-id="c6439-383">Format mapping for URL path</span></span> | <span data-ttu-id="c6439-384">选择应为操作调用的 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="c6439-384">Select the ER format that should be called for the action.</span></span> <span data-ttu-id="c6439-385">此字段仅可用于 **Web 服务** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-385">This field is available only for actions of the **Web service** type.</span></span> <span data-ttu-id="c6439-386">其用于构成将添加到为所选 Web 服务器指定的基 internet 地址的 URL 地址的路径。</span><span class="sxs-lookup"><span data-stu-id="c6439-386">It's used to compose the path of the URL address that will be added to the base internet address that is specified for the selected web server.</span></span> |
| <span data-ttu-id="c6439-387">消息项类型</span><span class="sxs-lookup"><span data-stu-id="c6439-387">Message item type</span></span>           | <span data-ttu-id="c6439-388">选择应为其评估操作的记录的类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-388">Select the type of records that the action should be evaluated for.</span></span> <span data-ttu-id="c6439-389">此字段可用于 **消息项执行级别**、**电子申报导出**、**电子申报导入**、**Web 服务** 类型及其他一些类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-389">This field is available for actions of the **Message item execution level**, **Electronic reporting export**, **Electronic reporting import**, and **Web service** types, and also some other types.</span></span> <span data-ttu-id="c6439-390">如果将此字段留空，为消息处理定义的所有消息项类型都将进行评估。</span><span class="sxs-lookup"><span data-stu-id="c6439-390">If you leave this field blank, all the message item types that are defined for the message processing are evaluated.</span></span> |
| <span data-ttu-id="c6439-391">可执行类</span><span class="sxs-lookup"><span data-stu-id="c6439-391">Executable class</span></span>            | <span data-ttu-id="c6439-392">选择以前创建的可执行类设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-392">Select executable class settings that were previously created.</span></span> <span data-ttu-id="c6439-393">此字段仅可用于 **消息项执行级别** 和 **消息项执行级别** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-393">This field is available only for actions of the **Message item execution level** and **Message item execution level** types.</span></span> |
| <span data-ttu-id="c6439-394">填充记录行为</span><span class="sxs-lookup"><span data-stu-id="c6439-394">Populate records action</span></span>     | <span data-ttu-id="c6439-395">选择此前设置的填充记录操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-395">Select a populate records action that was previously set up.</span></span> <span data-ttu-id="c6439-396">此字段仅可用于 **填充记录** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-396">This field is available only for actions of the **Populate records** type.</span></span> |
| <span data-ttu-id="c6439-397">Web 服务</span><span class="sxs-lookup"><span data-stu-id="c6439-397">Web service</span></span>                 | <span data-ttu-id="c6439-398">选择此前设置的 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="c6439-398">Select a web service that was previously set up.</span></span> <span data-ttu-id="c6439-399">此字段仅可用于 **Web 服务** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-399">This field is available only for actions of the **Web service** type.</span></span> |
| <span data-ttu-id="c6439-400">文件名</span><span class="sxs-lookup"><span data-stu-id="c6439-400">File name</span></span>                   | <span data-ttu-id="c6439-401">指定将充当操作结果的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-401">Specify the name of the file that will be the result of the action.</span></span> <span data-ttu-id="c6439-402">此文件可以是 Web 服务器的响应或生成的报告。</span><span class="sxs-lookup"><span data-stu-id="c6439-402">This file can be the response from the web server or the report that is generated.</span></span> <span data-ttu-id="c6439-403">此操作仅适用于 **Web 服务** 和 **电子申报导出消息** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-403">This field is available only for actions of the **Web service** and **Electronic reporting export message** types.</span></span> |
| <span data-ttu-id="c6439-404">显示对话框</span><span class="sxs-lookup"><span data-stu-id="c6439-404">Show dialog</span></span>                 | <span data-ttu-id="c6439-405">如果必须在生成报告之前向用户显示对话框，请将此选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="c6439-405">Set this option to **Yes** if a dialog box must be shown to users before report generation.</span></span> <span data-ttu-id="c6439-406">此操作仅适用于 **电子申报导出消息** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-406">This field is available only for actions of the **Electronic reporting export message** type.</span></span> |

##### <a name="message-processing-action-types"></a><span data-ttu-id="c6439-407">消息处理操作类型</span><span class="sxs-lookup"><span data-stu-id="c6439-407">Message processing action types</span></span>

<span data-ttu-id="c6439-408">**操作类型** 字段中具有以下选项：</span><span class="sxs-lookup"><span data-stu-id="c6439-408">The following options are available in the **Action type** field:</span></span>

- <span data-ttu-id="c6439-409">**创建消息** – 使用此操作类型允许用户在 **电子消息** 页手动创建消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-409">**Create message** – Use this action type to let users manually create messages on the **Electronic message** page.</span></span> <span data-ttu-id="c6439-410">无法为此类型的操作设置初始状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-410">An initial status can't be set up for an action of this type.</span></span>
- <span data-ttu-id="c6439-411">**填充记录** – **填充记录** 类型的操作必须在以前设置。</span><span class="sxs-lookup"><span data-stu-id="c6439-411">**Populate records** – An action of the **Populate records** type must previously be set up.</span></span> <span data-ttu-id="c6439-412">将此操作类型与填充记录操作关联以使该操作包括在处理中。</span><span class="sxs-lookup"><span data-stu-id="c6439-412">Associate this action type with a populate records action to enable that action to be included in processing.</span></span> <span data-ttu-id="c6439-413">假设此操作类型用于消息处理中的第一个操作（当未提前创建电子消息时），或用于向 **创建消息** 类型的操作之前创建的消息添加消息项的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-413">It's assumed that this action type is used either for the first action in message processing (when no electronic message was created in advance) or for an action that adds message items to a message that was previously created by an action of **Create message** type.</span></span> <span data-ttu-id="c6439-414">因此，对于此类型的操作，只能为消息项设置结果状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-414">Therefore, for actions of this type, a result status can be set up only for message items.</span></span> <span data-ttu-id="c6439-415">只能为消息设置初始状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-415">An initial status can be set up only for messages.</span></span>
- <span data-ttu-id="c6439-416">**消息执行级别** – 使用此操作类型设置应在消息级别评估的可执行类。</span><span class="sxs-lookup"><span data-stu-id="c6439-416">**Message execution level** – Use this action type to set up an executable class that should be evaluated at the message level.</span></span>
- <span data-ttu-id="c6439-417">**消息项执行级别** – 使用此操作类型设置应在消息项级别评估的可执行类。</span><span class="sxs-lookup"><span data-stu-id="c6439-417">**Message item execution level** – Use this action type to set up an executable class that should be evaluated at the message item level.</span></span>
- <span data-ttu-id="c6439-418">**电子申报导出** – 为应基于消息项级别的导出 ER 配置生成报表的操作使用此操作类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-418">**Electronic reporting export** – Use this action type for actions that should generate a report that is based on an exporting ER configuration at the message item level.</span></span>
- <span data-ttu-id="c6439-419">**电子申报导出消息** – 为应基于消息级别的导出 ER 配置生成报表的操作使用此操作类型（例如，当消息不包含任何消息项时）。</span><span class="sxs-lookup"><span data-stu-id="c6439-419">**Electronic reporting export message** – Use this action type for actions that should generate a report that is based on an exporting ER configuration at the message level (for example, when a message doesn't have any message items).</span></span>
- <span data-ttu-id="c6439-420">**电子申报导入** – 为应基于导入 ER 配置生成报表的操作使用此操作类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-420">**Electronic reporting import** – Use this action type for actions that should generate a report that is based on an importing ER configuration.</span></span>
- <span data-ttu-id="c6439-421">**消息级别用户处理** – 为假定一些用户在消息级别手动操作的操作使用此操作类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-421">**Message level user processing** – Use this action type for actions that assume some manual action by the user at the message level.</span></span> <span data-ttu-id="c6439-422">例如，用户可能更新消息的状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-422">For example, the user might update the status of messages.</span></span>
- <span data-ttu-id="c6439-423">**用户处理** – 为假定一些用户在消息项级别手动操作的操作使用此操作类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-423">**User processing** – Use this action type for actions that assume some manual action by the user at the message item level.</span></span> <span data-ttu-id="c6439-424">例如，用户可能更新消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-424">For example, the user might update the status of messages items.</span></span>
- <span data-ttu-id="c6439-425">**Web 服务** – 为应将生成的报表传输到 Web 服务的操作使用此操作类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-425">**Web service** – Use this action type for actions that should transmit a generated report to a web service.</span></span> <span data-ttu-id="c6439-426">此操作类型不用于“意大利采购和销售发票通信”报告。</span><span class="sxs-lookup"><span data-stu-id="c6439-426">This action type isn't used for Italian Purchase and Sales Invoices Communication reporting.</span></span> <span data-ttu-id="c6439-427">对于 **Web 服务** 类型的操作，**消息处理操作** 页面中包含 **杂项详细信息** 快速选项卡，可在其中指定确认文本。</span><span class="sxs-lookup"><span data-stu-id="c6439-427">For actions of **Web service** type, the **Message processing actions** page includes a **Miscellaneous details** FastTab, where you can specify a confirmation text.</span></span> <span data-ttu-id="c6439-428">将在解决对所选 Web 服务的请求之前，向用户显示此确认文本。</span><span class="sxs-lookup"><span data-stu-id="c6439-428">This confirmation text will be shown to users before requests to the selected web service are addressed.</span></span>
- <span data-ttu-id="c6439-429">**请求验证** – 使用此操作类型从服务器请求验证。</span><span class="sxs-lookup"><span data-stu-id="c6439-429">**Request verification** – Use this action type to request verification from a server.</span></span>

#### <a name="initial-statuses-fasttab"></a><span data-ttu-id="c6439-430">初始状态快速选项卡</span><span class="sxs-lookup"><span data-stu-id="c6439-430">Initial statuses FastTab</span></span>

> [!NOTE]
> <span data-ttu-id="c6439-431">**初始状态** 快速选项卡不可用于具有 **创建消息** 初始操作类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-431">The **Initial statuses** FastTab isn't available for actions that have an initial action type of **Create message**.</span></span>

| <span data-ttu-id="c6439-432">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-432">Field</span></span>               | <span data-ttu-id="c6439-433">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-433">Description</span></span> |
|---------------------|-------------|
| <span data-ttu-id="c6439-434">消息项状态</span><span class="sxs-lookup"><span data-stu-id="c6439-434">Message item status</span></span> | <span data-ttu-id="c6439-435">选择应为其评估所选的消息处理操作的消息项状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-435">Select the message item status that the selected message processing action should be evaluated for.</span></span> |
| <span data-ttu-id="c6439-436">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-436">Description</span></span>         | <span data-ttu-id="c6439-437">所选消息项状态的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-437">A description of the selected message item status.</span></span> |

#### <a name="result-statuses-fasttab"></a><span data-ttu-id="c6439-438">结果状态快速选项卡</span><span class="sxs-lookup"><span data-stu-id="c6439-438">Result statuses FastTab</span></span>

| <span data-ttu-id="c6439-439">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-439">Field</span></span>               | <span data-ttu-id="c6439-440">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-440">Description</span></span> |
|---------------------|-------------|
| <span data-ttu-id="c6439-441">消息状态</span><span class="sxs-lookup"><span data-stu-id="c6439-441">Message status</span></span>      | <span data-ttu-id="c6439-442">选择应为其评估所选的消息处理操作的消息状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-442">Select the message statuses that the selected message processing action should be evaluated for.</span></span> <span data-ttu-id="c6439-443">此字段仅可用于在消息级别评估的消息处理操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-443">This field is available only for message processing actions that are evaluated at the message level.</span></span> <span data-ttu-id="c6439-444">例如，适用于 **电子申报导出** 和 **电子申报导入** 类型的操作，但不适用于 **用户处理** 和 **消息项执行级别** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-444">For example, it's available for actions of the **Electronic reporting export** and **Electronic reporting import** types, but it isn't available for actions of the **User processing** and **Message item execution level** types.</span></span> |
| <span data-ttu-id="c6439-445">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-445">Description</span></span>         | <span data-ttu-id="c6439-446">所选消息状态的描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-446">A description of the selected message status.</span></span> |
| <span data-ttu-id="c6439-447">响应类型</span><span class="sxs-lookup"><span data-stu-id="c6439-447">Response type</span></span>       | <span data-ttu-id="c6439-448">所选消息状态的响应类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-448">The response type of the selected message status.</span></span> |
| <span data-ttu-id="c6439-449">消息项状态</span><span class="sxs-lookup"><span data-stu-id="c6439-449">Message item status</span></span> | <span data-ttu-id="c6439-450">选择应在评估所选消息处理操作后可用的生成的状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-450">Select the resulting statuses that should be available after the selected message processing action is evaluated.</span></span> <span data-ttu-id="c6439-451">此字段仅可用于在消息项级别评估的消息处理操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-451">This field is available only for message processing actions that are evaluated at the message item level.</span></span> <span data-ttu-id="c6439-452">例如，它可用于 **用户处理** 和 **消息项执行级别** 类型的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-452">For example, it's available for actions of the **User processing** and **Message item execution level** types.</span></span> <span data-ttu-id="c6439-453">对于在消息级别评估的消息处理操作，此字段显示为所选消息状态设置的消息项状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-453">For message processing actions that are evaluated at the message level, this field shows the message item status that was set up for the selected message status.</span></span> |

<span data-ttu-id="c6439-454">下表显示必须为不同操作类型和响应类型设置的结果状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-454">The following table shows the result statuses that must be set up for different action types and response types.</span></span>

| <span data-ttu-id="c6439-455">电子消息操作类型/响应类型</span><span class="sxs-lookup"><span data-stu-id="c6439-455">Electronic message action type/Response type</span></span> | <span data-ttu-id="c6439-456">已成功执行</span><span class="sxs-lookup"><span data-stu-id="c6439-456">Successfully executed</span></span> | <span data-ttu-id="c6439-457">业务错误</span><span class="sxs-lookup"><span data-stu-id="c6439-457">Business error</span></span> | <span data-ttu-id="c6439-458">技术错误</span><span class="sxs-lookup"><span data-stu-id="c6439-458">Technical error</span></span> | <span data-ttu-id="c6439-459">用户定义的</span><span class="sxs-lookup"><span data-stu-id="c6439-459">User defined</span></span> | <span data-ttu-id="c6439-460">取消</span><span class="sxs-lookup"><span data-stu-id="c6439-460">Cancel</span></span> |
|----------------------------------------------|-----------------------|----------------|-----------------|--------------|--------|
| <span data-ttu-id="c6439-461">创建消息</span><span class="sxs-lookup"><span data-stu-id="c6439-461">Create message</span></span>                               | <span data-ttu-id="c6439-462">X</span><span class="sxs-lookup"><span data-stu-id="c6439-462">X</span></span>                     |                |                 |              |        |
| <span data-ttu-id="c6439-463">电子报告导出</span><span class="sxs-lookup"><span data-stu-id="c6439-463">Electronic reporting export</span></span>                  | <span data-ttu-id="c6439-464">X</span><span class="sxs-lookup"><span data-stu-id="c6439-464">X</span></span>                     |                |                 |              |        |
| <span data-ttu-id="c6439-465">电子报告导入</span><span class="sxs-lookup"><span data-stu-id="c6439-465">Electronic reporting import</span></span>                  |                       |                |                 |              |        |
| <span data-ttu-id="c6439-466">Web 服务</span><span class="sxs-lookup"><span data-stu-id="c6439-466">Web service</span></span>                                  | <span data-ttu-id="c6439-467">X</span><span class="sxs-lookup"><span data-stu-id="c6439-467">X</span></span>                     |                | <span data-ttu-id="c6439-468">X</span><span class="sxs-lookup"><span data-stu-id="c6439-468">X</span></span>               |              |        |
| <span data-ttu-id="c6439-469">用户处理</span><span class="sxs-lookup"><span data-stu-id="c6439-469">User processing</span></span>                              |                       |                |                 |              |        |
| <span data-ttu-id="c6439-470">消息执行级别</span><span class="sxs-lookup"><span data-stu-id="c6439-470">Message execution level</span></span>                      |                       |                |                 |              |        |
| <span data-ttu-id="c6439-471">填充记录</span><span class="sxs-lookup"><span data-stu-id="c6439-471">Populate records</span></span>                             |                       |                |                 |              |        |
| <span data-ttu-id="c6439-472">消息项执行级别</span><span class="sxs-lookup"><span data-stu-id="c6439-472">Message item execution level</span></span>                 |                       |                |                 |              |        |
| <span data-ttu-id="c6439-473">请求验证</span><span class="sxs-lookup"><span data-stu-id="c6439-473">Request verification</span></span>                         | <span data-ttu-id="c6439-474">X</span><span class="sxs-lookup"><span data-stu-id="c6439-474">X</span></span>                     | <span data-ttu-id="c6439-475">X</span><span class="sxs-lookup"><span data-stu-id="c6439-475">X</span></span>              | <span data-ttu-id="c6439-476">X</span><span class="sxs-lookup"><span data-stu-id="c6439-476">X</span></span>               |              |        |
| <span data-ttu-id="c6439-477">电子报告导出消息</span><span class="sxs-lookup"><span data-stu-id="c6439-477">Electronic reporting export message</span></span>          | <span data-ttu-id="c6439-478">X</span><span class="sxs-lookup"><span data-stu-id="c6439-478">X</span></span>                     |                |                 |              |        |
| <span data-ttu-id="c6439-479">消息级别用户处理</span><span class="sxs-lookup"><span data-stu-id="c6439-479">Message level user processing</span></span>                |                       |                |                 |              |        |

### <a name="electronic-message-processing"></a><span data-ttu-id="c6439-480">电子消息处理</span><span class="sxs-lookup"><span data-stu-id="c6439-480">Electronic message processing</span></span>

<span data-ttu-id="c6439-481">电子消息处理是电子消息功能的基本概念。</span><span class="sxs-lookup"><span data-stu-id="c6439-481">Electronic message processing is a basic concept of the Electronic messages functionality.</span></span> <span data-ttu-id="c6439-482">它聚合应为电子消息评估的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-482">It aggregates actions that should be evaluated for the electronic message.</span></span> <span data-ttu-id="c6439-483">操作可以通过初始状态和结果状态链接。</span><span class="sxs-lookup"><span data-stu-id="c6439-483">The actions can be linked via an initial status and a result status.</span></span> <span data-ttu-id="c6439-484">或者，**用户处理** 类型的操作可以独立启动。</span><span class="sxs-lookup"><span data-stu-id="c6439-484">Alternatively, actions of the **User processing** type can be started independently.</span></span> <span data-ttu-id="c6439-485">在 **电子消息处理** 页（**税** \> **设置** \> **电子消息** \> **电子消息处理**），还可以选择应在消息级或消息项级为处理支持的附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-485">On the **Electronic message processing** page (**Tax** \> **Setup** \> **Electronic messages** \> **Electronic message processing**), you can also select additional fields that should be supported for the processing on either the message level or the message items level.</span></span>

<span data-ttu-id="c6439-486">**操作** 快速选项卡让您可以将预定义的操作添加到处理。</span><span class="sxs-lookup"><span data-stu-id="c6439-486">The **Action** FastTab lets you add predefined actions to the processing.</span></span> <span data-ttu-id="c6439-487">您可以指定是否必须单独运行操作，或者它是否可以通过处理启动。</span><span class="sxs-lookup"><span data-stu-id="c6439-487">You can specify whether an action must be run separately, or whether it can be started by the processing.</span></span> <span data-ttu-id="c6439-488">若要指定处理中的操作可以由用户初始化，请将该操作的 **单独运行** 字段设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="c6439-488">To specify that an action in the processing can be initialized only by a user, set the **Run separately** field to **Yes** for that action.</span></span> <span data-ttu-id="c6439-489">如果某个操作应该由对于状态定义为操作初始状态的消息或消息项启动，请将 **单独运行** 字段设置为 **否**。</span><span class="sxs-lookup"><span data-stu-id="c6439-489">If an action should be started by the processing for messages or message items that are in the status that is defined as the initial status for the action, set the **Run separately** field to **No**.</span></span> <span data-ttu-id="c6439-490">**用户操作** 类型的操作始终必须单独运行。</span><span class="sxs-lookup"><span data-stu-id="c6439-490">Actions of the **User action** type must always be run separately.</span></span>

<span data-ttu-id="c6439-491">有时必须将多个操作聚合为序列，即使第一个操作设置为单独运行。</span><span class="sxs-lookup"><span data-stu-id="c6439-491">Sometimes, several actions must be aggregated into a sequence, even though the first action is set up so that it runs separately.</span></span> <span data-ttu-id="c6439-492">例如，用户必须初始化报表生成，但是报表一生成，就必须立即发送给 Web 服务，并且必须在系统中反映 Web 服务的响应。</span><span class="sxs-lookup"><span data-stu-id="c6439-492">For example, a user must initialize report generation, but immediately after the report is generated, it must be sent to a web service, and the response from the web service must be reflected in the system.</span></span> <span data-ttu-id="c6439-493">在此情况下，可以为始终必须一起运行的操作创建不可分序列。</span><span class="sxs-lookup"><span data-stu-id="c6439-493">In this situation, you can create an inseparable sequence for the actions that must always run together.</span></span> <span data-ttu-id="c6439-494">在 **操作** 快速选项卡上，选择网格上方的 **不可分序列**，然后创建序列。</span><span class="sxs-lookup"><span data-stu-id="c6439-494">On the **Action** FastTab, select **Inseparable sequences** above the grid, and create a sequence.</span></span> <span data-ttu-id="c6439-495">然后，在 **不可分序列** 字段中为必须一起运行的所有操作选择该序列。</span><span class="sxs-lookup"><span data-stu-id="c6439-495">Then, for all the actions that must run together, select the sequence in the **Inseparable sequence** field.</span></span> <span data-ttu-id="c6439-496">在此案例中，可以为序列中的第一个操作将 **单独运行** 字段设置为 **是**，但是为其他所有操作设置为 **否**。</span><span class="sxs-lookup"><span data-stu-id="c6439-496">In this case, the **Run separately** field can be set to **Yes** for the first action in the sequence but **No** for all the other action.</span></span>

<span data-ttu-id="c6439-497">**消息项附加字段** 快速选项卡让您可以添加与消息项相关的预定义附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-497">The **Message item additional fields** FastTab lets you add predefined additional fields that are related to message items.</span></span> <span data-ttu-id="c6439-498">您必须为与字段相关的每个消息项类型添加附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-498">You must add additional fields for each type of message item that the fields are related to.</span></span>

<span data-ttu-id="c6439-499">**消息附加字段** 快速选项卡让您可以添加与消息相关的预定义附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-499">The **Message additional fields** FastTab lets you add predefined additional fields that are related to messages.</span></span>

<span data-ttu-id="c6439-500">**安全角色** 快速选项卡允许您设置在进行特定处理的系统中预定义的安全角色。</span><span class="sxs-lookup"><span data-stu-id="c6439-500">The **Security roles** FastTab lets you set up the security roles that are predefined in the system for specific processing.</span></span> <span data-ttu-id="c6439-501">具有特定角色的用户将只看到为该角色定义的处理。</span><span class="sxs-lookup"><span data-stu-id="c6439-501">Users who have a specific role will see only processing that is defined for that role.</span></span>

<span data-ttu-id="c6439-502">**批处理** 快速选项卡让您可以设置在批处理制度中执行的处理。</span><span class="sxs-lookup"><span data-stu-id="c6439-502">The **Batch** FastTab lets you set up processing to work in a batch regime.</span></span>

## <a name="work-with-the-electronic-messages-functionality"></a><span data-ttu-id="c6439-503">使用电子消息功能</span><span class="sxs-lookup"><span data-stu-id="c6439-503">Work with the Electronic messages functionality</span></span>

<span data-ttu-id="c6439-504">如果您在消息级别工作，**电子消息** 页（**税** \> **查询和报表** \> **电子消息** \> **电子消息**）更有用。</span><span class="sxs-lookup"><span data-stu-id="c6439-504">If you're working at the message level, the **Electronic messages** page (**Tax** \> **Inquiries and reports** \> **Electronic messages** \> **Electronic messages**) is more useful.</span></span> <span data-ttu-id="c6439-505">如果您在数据收集（消息项）级别运行，**电子消息项** 页（**税** \> **查询和报表** \> **电子消息** \> **电子消息项**）更有用。</span><span class="sxs-lookup"><span data-stu-id="c6439-505">If you're operating at the data collection (message item) level, the **Electronic message items** page (**Tax** \> **Inquires and reports** \> **Electronic messages** \> **Electronic message items**) is more useful.</span></span>

### <a name="electronic-messages"></a><span data-ttu-id="c6439-506">电子消息</span><span class="sxs-lookup"><span data-stu-id="c6439-506">Electronic messages</span></span>

<span data-ttu-id="c6439-507">**电子消息** 页根据您的角色显示对您可用的处理。</span><span class="sxs-lookup"><span data-stu-id="c6439-507">The **Electronic messages** page presents the processing that is available to you, based on your role.</span></span> <span data-ttu-id="c6439-508">安全角色与该处理的设置中的处理关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-508">Security roles are associated with processing in the setup of that processing.</span></span> <span data-ttu-id="c6439-509">对于每个您可用的处理，此页显示电子消息和与之相关的信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-509">For each processing that is available to you, the page shows electronic messages and information that is related to them.</span></span>

<span data-ttu-id="c6439-510">**消息** 快速选项卡显示所选处理的电子消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-510">The **Messages** FastTab shows electronic messages for the selected processing.</span></span> <span data-ttu-id="c6439-511">根据所选消息和预定义处理的状态，您可以通过使用网格上方的按钮运行一些操作：</span><span class="sxs-lookup"><span data-stu-id="c6439-511">Depending on the status of the selected message and predefined processing, you can run some actions by using the buttons above the grid:</span></span>

- <span data-ttu-id="c6439-512">**新建** – 此按钮与 **创建消息** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-512">**New** – This button is associated with actions of the **Create message** type.</span></span>
- <span data-ttu-id="c6439-513">**删除** – 如果选择了所选消息的当前状态的 **允许删除** 复选框，此按钮可用。</span><span class="sxs-lookup"><span data-stu-id="c6439-513">**Delete** – This button is available if the **Allow delete** check box is selected for the current status of the selected message.</span></span>
- <span data-ttu-id="c6439-514">**收集数据** - 此按钮与 **填充记录** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-514">**Collect data** – This button is associated with actions of the **Populate records** type.</span></span>
- <span data-ttu-id="c6439-515">**生成报表** – 此按钮与 **电子报告导出消息** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-515">**Generate report** – This button is associated with actions of the **Electronic reporting export message** type.</span></span>
- <span data-ttu-id="c6439-516">**发送报表** – 此按钮与 **Web 服务** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-516">**Send report** – This button is associated with actions of the **Web service** type.</span></span>
- <span data-ttu-id="c6439-517">**导入响应** – 此按钮与 **电子申报导入** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-517">**Import response** – This button is associated with actions of the **Electronic reporting import** type.</span></span>
- <span data-ttu-id="c6439-518">**更新状态** – 此按钮与 **消息级别用户处理** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-518">**Update status** – This button is associated with actions of the **Message level user processing** type.</span></span>
- <span data-ttu-id="c6439-519">**消息项** – 打开 **电子消息项** 页。</span><span class="sxs-lookup"><span data-stu-id="c6439-519">**Message items** – Open the **Electronic message items** page.</span></span>

<span data-ttu-id="c6439-520">**操作日志** 快速选项卡显示有关为所选消息运行的所有操作的信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-520">The **Action log** FastTab shows information about all the actions that have been run for the selected message.</span></span> <span data-ttu-id="c6439-521">如果操作导致了错误，将向网格中的相关行附加有关该错误的信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-521">If an action caused an error, information about the error is attached to the related line in the grid.</span></span> <span data-ttu-id="c6439-522">若要查看有关该错误的信息，请在网格中选择该行，然后选择页面右上角的 **附件** 按钮（回形针符号）。</span><span class="sxs-lookup"><span data-stu-id="c6439-522">To review the information about the error, select the line in the grid, and then select the **Attachment** button (the paper clip symbol) in the upper-right corner on the page.</span></span>

<span data-ttu-id="c6439-523">**消息附加字段** 快速选项卡显示为处理设置中的消息定义的所有附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-523">The **Message additional fields** FastTab shows all the additional fields that are defined for messages in the processing setup.</span></span> <span data-ttu-id="c6439-524">它还显示这些附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="c6439-524">It also shows the values of those additional fields.</span></span>

<span data-ttu-id="c6439-525">**消息项** 快速选项卡显示与所选消息相关的所有消息项。</span><span class="sxs-lookup"><span data-stu-id="c6439-525">The **Message items** FastTab shows all the message items that are related to the selected message.</span></span> <span data-ttu-id="c6439-526">根据所选消息项的状态，您可以通过使用网格上方的按钮运行一些操作：</span><span class="sxs-lookup"><span data-stu-id="c6439-526">Depending on the status of the selected message item, you can run some actions by using the buttons above the grid:</span></span>

- <span data-ttu-id="c6439-527">**删除** – 如果选择了所选消息项的当前状态的 **允许删除** 复选框，此按钮可用。</span><span class="sxs-lookup"><span data-stu-id="c6439-527">**Delete** – This button is available if the **Allow delete** check box is selected for the current status of the selected message item.</span></span>
- <span data-ttu-id="c6439-528">**更新状态** – 此按钮与 **用户处理** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-528">**Update status** – This button is associated with actions of the **User processing** type.</span></span>
- <span data-ttu-id="c6439-529">**原始单据** - 打开显示所选消息项的原始单据的页面。</span><span class="sxs-lookup"><span data-stu-id="c6439-529">**Original document** – Open a page that shows the original document for the selected message item.</span></span>

<span data-ttu-id="c6439-530">将把已经为消息生成并收到的所有报表附加到该消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-530">All reports that have already been generated and received for a message are attached to that message.</span></span> <span data-ttu-id="c6439-531">若要查看与消息有关的附件，请选择该消息，然后选择页面右上角的 **附件** 按钮（回形针符号）。</span><span class="sxs-lookup"><span data-stu-id="c6439-531">To review the attachments that are related to a message, select the message, and then select the **Attachment** button (the paper clip symbol) in the upper-right corner of the page.</span></span>

![“附件”按钮](media/attachment-icon.png)

<span data-ttu-id="c6439-533">**附件** 页显示与所选消息相关的所有附件。</span><span class="sxs-lookup"><span data-stu-id="c6439-533">The **Attachments** page shows all the attachments that are related to the selected message.</span></span> <span data-ttu-id="c6439-534">若要查看文件，请在左侧列表中选择它，然后选择操作窗格上的 **打开**。</span><span class="sxs-lookup"><span data-stu-id="c6439-534">To view a file, select it in the list on the left, and then select **Open** on the Action Pane.</span></span>

![“打开”按钮](media/open-button.png)

<span data-ttu-id="c6439-536">也可以查看与之前为消息运行的特定操作有关的附件。</span><span class="sxs-lookup"><span data-stu-id="c6439-536">You can also review attachments that are related to a specific action that was previously run for a message.</span></span> <span data-ttu-id="c6439-537">在 **电子消息** 页面中，在 **消息** 快速选项卡上选择消息，在 **操作日志** 快速选项卡上选择操作，然后选择页面右上角的 **附件** 按钮。</span><span class="sxs-lookup"><span data-stu-id="c6439-537">On the **Electronic messages** page, select the message on the **Messages** FastTab, select the action on **Action log** FastTab, and then select the **Attachment** button in the upper-right corner of the page.</span></span>

<span data-ttu-id="c6439-538">您还可以通过选择操作窗格上的 **运行处理** 运行整个处理或特定操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-538">You can also run either the whole processing or just a specific action by selecting **Run processing** on the Action Pane.</span></span>

### <a name="electronic-message-items"></a><span data-ttu-id="c6439-539">电子消息项</span><span class="sxs-lookup"><span data-stu-id="c6439-539">Electronic message items</span></span>

<span data-ttu-id="c6439-540">**电子消息项** 页显示所有消息项，以及为每个消息项运行的操作的日志。</span><span class="sxs-lookup"><span data-stu-id="c6439-540">The **Electronic message items** page presents all message items and a log of the actions that have been run for each message item.</span></span> <span data-ttu-id="c6439-541">它还显示为消息项定义的附加字段，以及这些附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="c6439-541">It also shows the additional fields that are defined for the message items, and the values of those additional fields.</span></span>

<span data-ttu-id="c6439-542">下表描述 **消息项** 选项卡的字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-542">The following table describes the fields on the **Message items** tab.</span></span>

<table>
<thead>
<tr>
<th><span data-ttu-id="c6439-543">字段</span><span class="sxs-lookup"><span data-stu-id="c6439-543">Field</span></span></th>
<th><span data-ttu-id="c6439-544">说明</span><span class="sxs-lookup"><span data-stu-id="c6439-544">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span data-ttu-id="c6439-545">处理中</span><span class="sxs-lookup"><span data-stu-id="c6439-545">Processing</span></span></td>
<td><span data-ttu-id="c6439-546">用于创建消息项的处理的名称。</span><span class="sxs-lookup"><span data-stu-id="c6439-546">The name of the processing that was used to create the message item.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-547">消息项</span><span class="sxs-lookup"><span data-stu-id="c6439-547">Message item</span></span></td>
<td><span data-ttu-id="c6439-548">消息项的 ID。</span><span class="sxs-lookup"><span data-stu-id="c6439-548">The ID of the message item.</span></span> <span data-ttu-id="c6439-549">此 ID 基于在<strong>总帐参数</strong>页定义的<strong>消息项</strong>编号规则自动分配。</span><span class="sxs-lookup"><span data-stu-id="c6439-549">This ID is assigned automatically, based on the <strong>Message item</strong> number sequence that is defined on the <strong>General ledger parameters</strong> page.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-550">消息项日期</span><span class="sxs-lookup"><span data-stu-id="c6439-550">Message item date</span></span></td>
<td><span data-ttu-id="c6439-551">创建消息项的日期。</span><span class="sxs-lookup"><span data-stu-id="c6439-551">The date when the message item was created.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-552">消息项类型</span><span class="sxs-lookup"><span data-stu-id="c6439-552">Message item type</span></span></td>
<td><span data-ttu-id="c6439-553">消息项的类型。</span><span class="sxs-lookup"><span data-stu-id="c6439-553">The type of message item.</span></span> <span data-ttu-id="c6439-554">可以为同一个处理设置多个消息项类型（例如，<strong>传入发票</strong>和<strong>传出发票</strong>）。</span><span class="sxs-lookup"><span data-stu-id="c6439-554">Several types of messages items can be set up for the same processing (for example, <strong>Incoming invoices</strong> and <strong>Outgoing invoices</strong>).</span></span> <span data-ttu-id="c6439-555">只有当发票被添加到消息项表时，此字段才会自动填充。</span><span class="sxs-lookup"><span data-stu-id="c6439-555">This field can be filled in automatically only when an invoice is added to the Message items table.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-556">消息项状态</span><span class="sxs-lookup"><span data-stu-id="c6439-556">Message item status</span></span></td>
<td><span data-ttu-id="c6439-557">消息项的实际状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-557">The actual status of the message item.</span></span> <span data-ttu-id="c6439-558">可用状态随消息项类型而变化。</span><span class="sxs-lookup"><span data-stu-id="c6439-558">The available statuses vary, depending on the type of message item.</span></span> <span data-ttu-id="c6439-559">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="c6439-559">Here are some examples:</span></span>
<ul>
<li><span data-ttu-id="c6439-560"><strong>已填充</strong> – 记录已添加到消息项表中。</span><span class="sxs-lookup"><span data-stu-id="c6439-560"><strong>Populated</strong> – A record was added to the Message items table.</span></span></li>
<li><span data-ttu-id="c6439-561"><strong>已评估</strong> – 已为消息项计算其他属性。</span><span class="sxs-lookup"><span data-stu-id="c6439-561"><strong>Evaluated</strong> – Additional attributes were calculated for the message item.</span></span></li>
<li><span data-ttu-id="c6439-562"><strong>已报告</strong> – 消息项已成功添加到报表中。</span><span class="sxs-lookup"><span data-stu-id="c6439-562"><strong>Reported</strong> – The message item was successfully added to a report.</span></span></li>
<li><span data-ttu-id="c6439-563"><strong>已排除</strong> – 如果您必须在导出报表前从报表中排除一些消息项，此状态可能有用。</span><span class="sxs-lookup"><span data-stu-id="c6439-563"><strong>Excluded</strong> – This status can be useful if you must exclude some message items from a report before it's exported.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="c6439-564">传输日期</span><span class="sxs-lookup"><span data-stu-id="c6439-564">Transmission date</span></span></td>
<td><span data-ttu-id="c6439-565">对于在系统外自动传输生成的报表的处理，为传输消息项的日期。</span><span class="sxs-lookup"><span data-stu-id="c6439-565">For processing that automatically transmits a generated report outside the system, the date when the message item was transmitted.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-566">文档编号</span><span class="sxs-lookup"><span data-stu-id="c6439-566">Document number</span></span></td>
<td><span data-ttu-id="c6439-567">此字段基于填充记录操作的设置自动填充。</span><span class="sxs-lookup"><span data-stu-id="c6439-567">This field is filled in automatically, based on the setup of the populate records action.</span></span> <span data-ttu-id="c6439-568">只有当发票被添加到消息项表时，此字段才会自动填充。</span><span class="sxs-lookup"><span data-stu-id="c6439-568">This field can be filled in automatically only when an invoice is added to the Message items table.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-569">帐号</span><span class="sxs-lookup"><span data-stu-id="c6439-569">Account number</span></span></td>
<td><span data-ttu-id="c6439-570">客户或供应商的帐号（或其他字段值，根据在填充记录操作上定义的字段）。</span><span class="sxs-lookup"><span data-stu-id="c6439-570">The account number of a customer or vendor (or another field value, depending on the field that is defined on the populate records action).</span></span> <span data-ttu-id="c6439-571">只有当发票被添加到消息项表时，此字段才会自动填充。</span><span class="sxs-lookup"><span data-stu-id="c6439-571">This field can be filled in automatically only when an invoice is added to the Message items table.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-572">消息</span><span class="sxs-lookup"><span data-stu-id="c6439-572">Message</span></span></td>
<td><span data-ttu-id="c6439-573">消息的编号。</span><span class="sxs-lookup"><span data-stu-id="c6439-573">The number of the message.</span></span> <span data-ttu-id="c6439-574">此编号基于在<strong>总帐参数</strong>页定义的<strong>消息</strong>编号规则自动分配。</span><span class="sxs-lookup"><span data-stu-id="c6439-574">This number is assigned automatically, based on the <strong>Message</strong> number sequence that is defined on the <strong>General ledger parameters</strong> page.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-575">消息状态</span><span class="sxs-lookup"><span data-stu-id="c6439-575">Message status</span></span></td>
<td><span data-ttu-id="c6439-576">电子消息的实际状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-576">The actual status of the electronic message.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="c6439-577">后续操作</span><span class="sxs-lookup"><span data-stu-id="c6439-577">Next action</span></span></td>
<td><span data-ttu-id="c6439-578">可以为消息项的当前状态启动的下一个操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-578">The next actions that can be started for the current status of the message item.</span></span></td>
</tr>
</tbody>
</table>

<span data-ttu-id="c6439-579">**附加字段** 选项卡显示所选消息项的附加字段及其值。</span><span class="sxs-lookup"><span data-stu-id="c6439-579">The **Additional fields** tab shows the additional fields for the selected message item, and their values.</span></span>

#### <a name="run-processing"></a><span data-ttu-id="c6439-580">运行处理</span><span class="sxs-lookup"><span data-stu-id="c6439-580">Run processing</span></span>

<span data-ttu-id="c6439-581">选择操作窗格上的 **运行处理** 运行消息项的处理。</span><span class="sxs-lookup"><span data-stu-id="c6439-581">Select **Run processing** on the Action Pane to run the processing for message items.</span></span> <span data-ttu-id="c6439-582">若要运行特定操作，在 **运行处理** 对话框中，将 **选择操作** 选项设置为 **是**，然后选择操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-582">To run a specific action, in the **Run processing** dialog box, set the **Choose action** option to **Yes**, and then select an action.</span></span> <span data-ttu-id="c6439-583">若要运行整个处理，则将 **选择操作** 选项保留为 **否**。</span><span class="sxs-lookup"><span data-stu-id="c6439-583">To run the whole processing, leave the **Choose action** option set to **No**.</span></span>

#### <a name="generate-report"></a><span data-ttu-id="c6439-584">生成报表</span><span class="sxs-lookup"><span data-stu-id="c6439-584">Generate report</span></span>

<span data-ttu-id="c6439-585">选择操作窗格上的 **生成报表** 生成报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-585">Select **Generate report** on the Action Pane to generate a report.</span></span> <span data-ttu-id="c6439-586">此按钮与 **电子报告导出** 类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="c6439-586">This button is associated with actions of the **Electronic reporting export** type.</span></span>

#### <a name="update-status"></a><span data-ttu-id="c6439-587">更新状态</span><span class="sxs-lookup"><span data-stu-id="c6439-587">Update status</span></span>

<span data-ttu-id="c6439-588">选择操作窗格上的 **更新状态** 更新一个或多个消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-588">Select **Update status** on the Action Pane to update the status of one or more message items.</span></span> <span data-ttu-id="c6439-589">在 **更新状态** 对话框中，使用 **要包括的记录** 快速选项卡选择要更新的消息项。</span><span class="sxs-lookup"><span data-stu-id="c6439-589">In the **Update status** dialog box, use the **Records to include** FastTab to select the message items to update.</span></span> <span data-ttu-id="c6439-590">请确保正确定义选择条件，因为消息项状态将根据这些条件、所选操作的初始状态以及您指定的 **新状态** 值更新。</span><span class="sxs-lookup"><span data-stu-id="c6439-590">Make sure that you correctly define the selection criteria, because message item statuses will be updated according to these criteria, the initial status of the selected action, and the **New status** value that you specify.</span></span> <span data-ttu-id="c6439-591">在完成状态更新后，将很难确定更新了哪些项目。</span><span class="sxs-lookup"><span data-stu-id="c6439-591">After a status update is completed, it will be difficult to determine which items were updated.</span></span> <span data-ttu-id="c6439-592">因此将很难回滚状态更新。</span><span class="sxs-lookup"><span data-stu-id="c6439-592">Therefore, it will be difficult to roll back the status update.</span></span>

#### <a name="electronic-messages"></a><span data-ttu-id="c6439-593">电子消息</span><span class="sxs-lookup"><span data-stu-id="c6439-593">Electronic messages</span></span>

<span data-ttu-id="c6439-594">选择操作窗格上的 **电子消息** 查看与所选消息项相关的电子消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-594">Select **Electronic messages** on the Action Pane to review an electronic message that is related to the selected message item.</span></span>

<span data-ttu-id="c6439-595">您还可以查看与特定消息项相关的所有文件。</span><span class="sxs-lookup"><span data-stu-id="c6439-595">You can also review all the files that are related to a specific message item.</span></span> <span data-ttu-id="c6439-596">选择消息项的 **消息** 字段，或选择操作窗格上的 **电子消息**。</span><span class="sxs-lookup"><span data-stu-id="c6439-596">Select the **Message** field for the message item, or select **Electronic messages** on the Action Pane.</span></span> <span data-ttu-id="c6439-597">然后，在 **电子消息** 页面上选择要查看的文件所属消息，再选择页面右上角的 **附件** 按钮（回形针符号）。</span><span class="sxs-lookup"><span data-stu-id="c6439-597">Then, on the **Electronic message** page, select the message to review files for, and then select the **Attachment** button (the paper clip symbol) in the upper-right corner of the page.</span></span>

![“附件”按钮](media/attachment-icon.png)

<span data-ttu-id="c6439-599">**附件** 页显示与消息相关的所有附件。</span><span class="sxs-lookup"><span data-stu-id="c6439-599">The **Attachments** page shows all the attachments that are related to the message.</span></span> <span data-ttu-id="c6439-600">若要查看文件，请在左侧列表中选择它，然后选择操作窗格上的 **打开**。</span><span class="sxs-lookup"><span data-stu-id="c6439-600">To view a file, select it in the list on the left, and then select **Open** on the Action Pane.</span></span>

![“打开”按钮](media/open-button.png)

#### <a name="original-document"></a><span data-ttu-id="c6439-602">原始凭证</span><span class="sxs-lookup"><span data-stu-id="c6439-602">Original document</span></span>

<span data-ttu-id="c6439-603">选择操作窗格上的 **原始单据** 打开所选消息项的原始单据。</span><span class="sxs-lookup"><span data-stu-id="c6439-603">Select **Original document** on the Action Pane to open the original document for the selected message item.</span></span>

## <a name="example-set-up-and-run-processing-to-call-a-simple-er-exporting-format-to-generate-an-excel-report"></a><span data-ttu-id="c6439-604">示例：设置并运行处理以调用简单的 ER 导出格式来生成 Excel 报表</span><span class="sxs-lookup"><span data-stu-id="c6439-604">Example: Set up and run processing to call a simple ER exporting format to generate an Excel report</span></span>

<span data-ttu-id="c6439-605">在创建您的 ER 格式后，将其映射到数据源，然后完成它，您可以使用 **电子报告** 工作区来运行它。</span><span class="sxs-lookup"><span data-stu-id="c6439-605">After you've created your ER format, mapped it to data sources, and completed it, you can run it by using the **Electronic reporting** workspace.</span></span> <span data-ttu-id="c6439-606">将生成一个报表，而您可以将其保存到本地。</span><span class="sxs-lookup"><span data-stu-id="c6439-606">A report is generated, and you can save it locally.</span></span>

<span data-ttu-id="c6439-607">若要控制报告流程的以下方面，必须设置电子消息处理：</span><span class="sxs-lookup"><span data-stu-id="c6439-607">To control the following aspects of the reporting process, you must set up electronic messaging processing:</span></span>

- <span data-ttu-id="c6439-608">记录有关生成报表人员的信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-608">Log information about who generated the report.</span></span>
- <span data-ttu-id="c6439-609">记录有关报表的生成时间的信息。</span><span class="sxs-lookup"><span data-stu-id="c6439-609">Log information about when the report was generated.</span></span>
- <span data-ttu-id="c6439-610">保存为以前期间生成的报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-610">Save the reports that were generated for previous periods.</span></span>

<span data-ttu-id="c6439-611">本部分提供显示如何设置电子消息以基于 Excel 的导出 ER 格式生成报表的示例。</span><span class="sxs-lookup"><span data-stu-id="c6439-611">This section provides an example that shows how you can set up electronic messaging to generate a report that is based on an exporting ER format for Excel.</span></span> <span data-ttu-id="c6439-612">如果要按此示例操作，必须已经创建了 ER Excel 导出格式，并映射到数据源并且完成。</span><span class="sxs-lookup"><span data-stu-id="c6439-612">If you want to follow this example, the ER Excel exporting format must already be created, mapped to data sources, and completed.</span></span> <span data-ttu-id="c6439-613">此外，还必须已经为电子消息设置了编号规则。</span><span class="sxs-lookup"><span data-stu-id="c6439-613">Additionally, a number sequence must already be set up for electronic messages.</span></span>

<span data-ttu-id="c6439-614">在您创建处理时，如果您首先定义将设置的处理操作和状态将会很有用。</span><span class="sxs-lookup"><span data-stu-id="c6439-614">When you build processing, it's helpful if you first define the processing actions and statuses that will be set up.</span></span> <span data-ttu-id="c6439-615">下图显示此示例的处理看起来如何。</span><span class="sxs-lookup"><span data-stu-id="c6439-615">The following illustration shows what the processing looks like for this example.</span></span>

![处理方案](media/processing-scheme.png)

#### <a name="create-message-statuses"></a><span data-ttu-id="c6439-617">创建消息状态</span><span class="sxs-lookup"><span data-stu-id="c6439-617">Create message statuses</span></span>

1. <span data-ttu-id="c6439-618">转到 **税 \> 设置 \> 电子消息 \> 消息状态**。</span><span class="sxs-lookup"><span data-stu-id="c6439-618">Go to **Tax \> Setup \> Electronic messages \> Message statuses**.</span></span>
2. <span data-ttu-id="c6439-619">创建以下消息状态：</span><span class="sxs-lookup"><span data-stu-id="c6439-619">Create the following message statuses:</span></span>

    - <span data-ttu-id="c6439-620">新建</span><span class="sxs-lookup"><span data-stu-id="c6439-620">New</span></span>
    - <span data-ttu-id="c6439-621">已准备</span><span class="sxs-lookup"><span data-stu-id="c6439-621">Prepared</span></span>
    - <span data-ttu-id="c6439-622">已生成</span><span class="sxs-lookup"><span data-stu-id="c6439-622">Generated</span></span>

    ![消息状态](media/message-statuses.png)

3. <span data-ttu-id="c6439-624">在 **新** 状态的行中，选择 **允许删除** 复选框以让用户可以删除此状态的消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-624">On the line for the **New** status, select the **Allow delete** check box to let users delete messages that have this status.</span></span>

#### <a name="create-additional-fields"></a><span data-ttu-id="c6439-625">创建附加字段</span><span class="sxs-lookup"><span data-stu-id="c6439-625">Create additional fields</span></span>

1. <span data-ttu-id="c6439-626">转到 **税 \> 设置 \> 电子消息 \> 附加字段**。</span><span class="sxs-lookup"><span data-stu-id="c6439-626">Go to **Tax \> Setup \> Electronic messages \> Additional fields**.</span></span>
2. <span data-ttu-id="c6439-627">添加附加字段及其值。</span><span class="sxs-lookup"><span data-stu-id="c6439-627">Add an additional field and its values.</span></span> <span data-ttu-id="c6439-628">下面是一个示例。</span><span class="sxs-lookup"><span data-stu-id="c6439-628">Here is an example.</span></span>

    ![附加字段](media/additional-fields.png)

3. <span data-ttu-id="c6439-630">将 **用户编辑** 选项设置为 **是** 以允许用户编辑此字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-630">Set the **User edit** option to **Yes** to let users edit the field.</span></span>

#### <a name="create-message-processing-actions"></a><span data-ttu-id="c6439-631">创建消息处理操作</span><span class="sxs-lookup"><span data-stu-id="c6439-631">Create message processing actions</span></span>

<span data-ttu-id="c6439-632">对于本例，将创建以下操作：</span><span class="sxs-lookup"><span data-stu-id="c6439-632">For this example, you will create the following actions:</span></span>

- <span data-ttu-id="c6439-633">**创建消息**</span><span class="sxs-lookup"><span data-stu-id="c6439-633">**Create message**</span></span>
- <span data-ttu-id="c6439-634">**更新为已准备**</span><span class="sxs-lookup"><span data-stu-id="c6439-634">**Update to Prepared**</span></span>
- <span data-ttu-id="c6439-635">**生成报表**</span><span class="sxs-lookup"><span data-stu-id="c6439-635">**Generate report**</span></span>
- <span data-ttu-id="c6439-636">**更新为初始状态**（可选）</span><span class="sxs-lookup"><span data-stu-id="c6439-636">**Update to initial status** (optional)</span></span>

1. <span data-ttu-id="c6439-637">转到 **税 \> 设置 \> 电子消息 \> 消息处理操作**。</span><span class="sxs-lookup"><span data-stu-id="c6439-637">Go to **Tax \> Setup \> Electronic messages \> Message processing actions**.</span></span>
2. <span data-ttu-id="c6439-638">创建名为 **创建消息** 的操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-638">Create an action that is named **Create message**.</span></span> <span data-ttu-id="c6439-639">在 **常规** 快速选项卡上，在 **操作类型** 字段中，选择 **创建消息**。</span><span class="sxs-lookup"><span data-stu-id="c6439-639">On the **General** FastTab, in the **Action type** field, select **Create message**.</span></span>
3. <span data-ttu-id="c6439-640">创建名为 **更新为已准备** 的操作，然后设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="c6439-640">Create an action that is named **Update to Prepared**, and set the following fields:</span></span>

    - <span data-ttu-id="c6439-641">在 **常规** 快速选项卡上，在 **操作类型** 字段中，选择 **消息级别用户处理**。</span><span class="sxs-lookup"><span data-stu-id="c6439-641">On the **General** FastTab, in the **Action type** field, select **Message level user processing**.</span></span>
    - <span data-ttu-id="c6439-642">在 **初始状态** 快速选项卡上，在 **消息状态** 字段中，选择 **新**。</span><span class="sxs-lookup"><span data-stu-id="c6439-642">On the **Initial statuses** FastTab, in the **Message status** field, select **New**.</span></span>
    - <span data-ttu-id="c6439-643">在 **结果状态** 快速选项卡上，在 **消息状态** 字段中，选择 **已准备**。</span><span class="sxs-lookup"><span data-stu-id="c6439-643">On the **Result statuses** FastTab, in the **Message status** field, select **Prepared**.</span></span> <span data-ttu-id="c6439-644">在 **响应类型** 字段中，输入 **已成功执行**。</span><span class="sxs-lookup"><span data-stu-id="c6439-644">In the **Response type** field, enter **Successfully executed**.</span></span>

4. <span data-ttu-id="c6439-645">创建名为 **生成报表** 的操作，然后设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="c6439-645">Create an action that is named **Generate report**, and set the following fields:</span></span>

    - <span data-ttu-id="c6439-646">在 **常规** 快速选项卡上，在 **操作类型** 字段中，选择 **电子报告导出**。</span><span class="sxs-lookup"><span data-stu-id="c6439-646">On the **General** FastTab, in the **Action type** field, select **Electronic reporting export**.</span></span> <span data-ttu-id="c6439-647">在 **格式映射** 字段中，选择导出 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="c6439-647">In the **Format mapping** field, select the exporting ER format.</span></span> <span data-ttu-id="c6439-648">选项有 **Excel**、**XML**、**JSON**、**文本** 和 **其他**。</span><span class="sxs-lookup"><span data-stu-id="c6439-648">The options are **Excel**, **XML**, **JSON**, **Text**, and **Other**.</span></span>
    - <span data-ttu-id="c6439-649">在 **初始状态** 快速选项卡上，在 **消息状态** 字段中，选择 **已准备**。</span><span class="sxs-lookup"><span data-stu-id="c6439-649">On the **Initial statuses** FastTab, in the **Message status** field, select **Prepared**.</span></span>
    - <span data-ttu-id="c6439-650">在 **结果状态** 快速选项卡上，在 **消息状态** 字段中，选择 **已生成**。</span><span class="sxs-lookup"><span data-stu-id="c6439-650">On the **Result statuses** FastTab, in the **Message status** field, select **Generated**.</span></span> <span data-ttu-id="c6439-651">在 **响应类型** 字段中，输入 **已成功执行**。</span><span class="sxs-lookup"><span data-stu-id="c6439-651">In the **Response type** field, enter **Successfully executed**.</span></span>

    ![生成报表操作](media/generate-report-action.png)

5. <span data-ttu-id="c6439-653">可选：若要使用户能够多次重新生成报表，您可以创建 **更新为初始状态** 操作并设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="c6439-653">Optional: To let users regenerate a report several times, you can create an **Update to initial status** action and set the following fields:</span></span>

    - <span data-ttu-id="c6439-654">在 **常规** 快速选项卡上，在 **操作类型** 字段中，选择 **消息级别用户处理**。</span><span class="sxs-lookup"><span data-stu-id="c6439-654">On the **General** FastTab, in the **Action type** field, select **Message level user processing**.</span></span>
    - <span data-ttu-id="c6439-655">在 **初始状态** 快速选项卡上，在 **消息状态** 字段中，选择 **已生成**。</span><span class="sxs-lookup"><span data-stu-id="c6439-655">On the **Initial statuses** FastTab, in the **Message status** field, select **Generated**.</span></span>
    - <span data-ttu-id="c6439-656">在 **结果状态** 快速选项卡上，为这两个消息状态（**已准备** 和 **新**）分别添加一行。</span><span class="sxs-lookup"><span data-stu-id="c6439-656">On the **Result statuses** FastTab, add a separate line for each of the two message statuses (**Prepared** and **New**).</span></span> <span data-ttu-id="c6439-657">为这两行将 **响应类型** 字段设置为 **已成功执行**。</span><span class="sxs-lookup"><span data-stu-id="c6439-657">For both lines, set the **Response type** field to **Successfully executed**.</span></span>

#### <a name="electronic-message-processing"></a><span data-ttu-id="c6439-658">电子消息处理</span><span class="sxs-lookup"><span data-stu-id="c6439-658">Electronic message processing</span></span>

<span data-ttu-id="c6439-659">在此示例中，应设置所有操作，以便其单独运行。</span><span class="sxs-lookup"><span data-stu-id="c6439-659">In this example, all the actions should be set up so that they run separately.</span></span> <span data-ttu-id="c6439-660">假定用户将初始化每个操作。</span><span class="sxs-lookup"><span data-stu-id="c6439-660">The assumption is that the user will initialize every action.</span></span>

1. <span data-ttu-id="c6439-661">转到 **税 \> 设置 \> 电子消息 \> 电子消息处理**。</span><span class="sxs-lookup"><span data-stu-id="c6439-661">Go to **Tax \> Setup \> Electronic messages \> Electronic message processing**.</span></span>
2. <span data-ttu-id="c6439-662">为您的处理添加记录，添加所有先前定义的操作和附加字段。</span><span class="sxs-lookup"><span data-stu-id="c6439-662">Add a record for your processing, and add all previously defined actions and an additional field.</span></span>
3. <span data-ttu-id="c6439-663">可选：在 **安全角色** 快速选项卡上，为您的处理定义安全角色以限制对特定报告的访问。</span><span class="sxs-lookup"><span data-stu-id="c6439-663">Optional: On the **Security roles** FastTab, define security roles for your processing to limit access to specific reporting.</span></span>
4. <span data-ttu-id="c6439-664">转到 **税 \> 查询和报表 \> 电子消息 \> 电子消息**。</span><span class="sxs-lookup"><span data-stu-id="c6439-664">Go to **Tax \> Inquires and reports \> Electronic messages \> Electronic messages**.</span></span>
5. <span data-ttu-id="c6439-665">选择 **新建** 创建消息。</span><span class="sxs-lookup"><span data-stu-id="c6439-665">Select **New** to create a message.</span></span> <span data-ttu-id="c6439-666">此时，您可以添加日期和描述。</span><span class="sxs-lookup"><span data-stu-id="c6439-666">At this point, you can add dates and a description.</span></span> <span data-ttu-id="c6439-667">您还可以根据需要更新附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="c6439-667">You can also update the value of the additional field as you require.</span></span>

    ![创建电子消息](media/create-electronic-message.png)

<span data-ttu-id="c6439-669">**操作日志** 快速选项卡上的网格将自动填充为对消息执行的所有操作的日志。</span><span class="sxs-lookup"><span data-stu-id="c6439-669">The grid on the **Action log** FastTab is automatically filled in with a log of all actions that are performed on the message.</span></span>

<span data-ttu-id="c6439-670">您现在可以删除或更新消息状态。</span><span class="sxs-lookup"><span data-stu-id="c6439-670">You can now either delete or update the message status.</span></span> <span data-ttu-id="c6439-671">若要更新消息状态，请选择 **更新状态**。</span><span class="sxs-lookup"><span data-stu-id="c6439-671">To update the message status, select **Update status**.</span></span> <span data-ttu-id="c6439-672">在 **新状态** 字段中，选择 **已准备**，然后选择 **确定**。</span><span class="sxs-lookup"><span data-stu-id="c6439-672">In the **New status** field, select **Prepared**, and then select **OK**.</span></span>

![更新消息状态](media/update-status.png)

<span data-ttu-id="c6439-674">消息状态更新为 **已准备**，现在，您可以通过选择 **生成报表** 生成报表。</span><span class="sxs-lookup"><span data-stu-id="c6439-674">The message status is updated to **Prepared**, and you can now generate the report by selecting **Generate report**.</span></span> <span data-ttu-id="c6439-675">将生成报表，消息状态和操作日志将更新。</span><span class="sxs-lookup"><span data-stu-id="c6439-675">The report is generated, and the message status and action log are updated.</span></span> <span data-ttu-id="c6439-676">若要查看生成的报表，请选择页面右上角的 **附件** 按钮（回形针符号）。</span><span class="sxs-lookup"><span data-stu-id="c6439-676">To view the generated report, select the **Attachment** button (the paper clip symbol) in the upper-right corner of the page.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]