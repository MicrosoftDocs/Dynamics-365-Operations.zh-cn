---
title: 机器学习模型的结果（预览）
description: 本主题讨论机器学习 (ML) 模型中的混淆矩阵、分类问题和准确度。 目的是加深您对 ML 预测结果准确度的理解。
author: ShivamPandey-msft
manager: AnnBe
ms.date: 06/05/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5223bdfbc0f5828b5dccac30362783075ce8157f
ms.sourcegitcommit: f59df61799915f6a79aec7e3e8664c02df6597da
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/22/2021
ms.locfileid: "5044364"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="55a64-104">机器学习模型的结果（预览）</span><span class="sxs-lookup"><span data-stu-id="55a64-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="55a64-105">本主题讨论机器学习 (ML) 模型中的混淆矩阵、分类问题和准确度。</span><span class="sxs-lookup"><span data-stu-id="55a64-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="55a64-106">目的是加深您对 ML 预测结果准确度的理解。</span><span class="sxs-lookup"><span data-stu-id="55a64-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="55a64-107">目标受众包括希望建立数据科学知识和技能的工程师、分析师和管理人员。</span><span class="sxs-lookup"><span data-stu-id="55a64-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="55a64-108">混淆矩阵</span><span class="sxs-lookup"><span data-stu-id="55a64-108">Confusion matrix</span></span>
<span data-ttu-id="55a64-109">对一组历史数据培训了监视的 ML 问题之后，将使用培训流程中预扣的数据进行测试。</span><span class="sxs-lookup"><span data-stu-id="55a64-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="55a64-110">这样，您可以将训练的模型的预测与实际值进行比较。</span><span class="sxs-lookup"><span data-stu-id="55a64-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="55a64-111">混淆矩阵提供了一种评估分类问题的成功程度以及错误的发生位置（即混淆之处）的方法。</span><span class="sxs-lookup"><span data-stu-id="55a64-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="55a64-112">例如，您的目标是根据一些身体和行为属性来预测宠物是狗还是猫。</span><span class="sxs-lookup"><span data-stu-id="55a64-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="55a64-113">如果您的测试数据集中包含 30 只狗和 20 只猫，那么混淆矩阵可能类似于下图。</span><span class="sxs-lookup"><span data-stu-id="55a64-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

![物种预测示例](media/species-prediction-matrix.png)

<span data-ttu-id="55a64-115">绿色单元格中的数字表示正确的预测。</span><span class="sxs-lookup"><span data-stu-id="55a64-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="55a64-116">如您所见，该模型正确预测了实际猫的百分比更高。</span><span class="sxs-lookup"><span data-stu-id="55a64-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="55a64-117">该模型的整体准确度很好计算。</span><span class="sxs-lookup"><span data-stu-id="55a64-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="55a64-118">在此示例中，为 42 ÷ 50，即 0.84。</span><span class="sxs-lookup"><span data-stu-id="55a64-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="55a64-119">混淆矩阵中的多类分类符</span><span class="sxs-lookup"><span data-stu-id="55a64-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="55a64-120">如前例所示，大多数关于混淆矩阵的讨论都集中在二进制分类符上。</span><span class="sxs-lookup"><span data-stu-id="55a64-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="55a64-121">这种情况是特殊情况，可以考虑其他指标，例如敏感性和召回率。</span><span class="sxs-lookup"><span data-stu-id="55a64-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="55a64-122">接下来，我们将考虑具有三个状态的财务方案的分类问题。</span><span class="sxs-lookup"><span data-stu-id="55a64-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="55a64-123">该模型预测是按时，逾期还是严重逾期支付客户发票。</span><span class="sxs-lookup"><span data-stu-id="55a64-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="55a64-124">例如，在 100 张测试发票中，有 50 张按时付款，有 35 张是逾期付款，有 15 张是很晚付款。</span><span class="sxs-lookup"><span data-stu-id="55a64-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="55a64-125">在这种情况下，模型可能会产生类似于下图的混淆矩阵。</span><span class="sxs-lookup"><span data-stu-id="55a64-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

![模型 1](media/payment-prediction-matrix.png)<span data-ttu-id="55a64-127">]</span><span class="sxs-lookup"><span data-stu-id="55a64-127">]</span></span>

<span data-ttu-id="55a64-128">混淆矩阵提供的信息远远超过简单的准确度指标。</span><span class="sxs-lookup"><span data-stu-id="55a64-128">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="55a64-129">但是，它仍然相对容易理解。</span><span class="sxs-lookup"><span data-stu-id="55a64-129">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="55a64-130">混淆矩阵告诉您是否具有平衡的数据集，其中输出类的计数相似。</span><span class="sxs-lookup"><span data-stu-id="55a64-130">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="55a64-131">对于多类方案，它告诉您当输出类为序数时预测可能有多深，如前面有关客户付款的示例所示。</span><span class="sxs-lookup"><span data-stu-id="55a64-131">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="55a64-132">模型准确度</span><span class="sxs-lookup"><span data-stu-id="55a64-132">Model accuracy</span></span> 
<span data-ttu-id="55a64-133">不同的准确度指标具有量化模型质量的优势。</span><span class="sxs-lookup"><span data-stu-id="55a64-133">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="55a64-134">由于准确度是易于理解的指标，因此这是向其他人（特别是向不是数据科学家的模型用户）解释模型的良好起点。</span><span class="sxs-lookup"><span data-stu-id="55a64-134">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="55a64-135">无需了解统计信息即可了解模型的准确度。</span><span class="sxs-lookup"><span data-stu-id="55a64-135">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="55a64-136">当混淆矩阵可用时，它将提供对模型性能的进一步了解。</span><span class="sxs-lookup"><span data-stu-id="55a64-136">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="55a64-137">但是，为了更全面地理解，应注意与准确度相关的几个挑战。</span><span class="sxs-lookup"><span data-stu-id="55a64-137">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="55a64-138">指标的有用性取决于问题的背景。</span><span class="sxs-lookup"><span data-stu-id="55a64-138">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="55a64-139">与模型性能有关的一个经常出现的问题是：“模型有多好？”</span><span class="sxs-lookup"><span data-stu-id="55a64-139">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="55a64-140">但是，这个问题的答案不一定很简单。</span><span class="sxs-lookup"><span data-stu-id="55a64-140">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="55a64-141">考虑以下混淆矩阵（模型 2）。</span><span class="sxs-lookup"><span data-stu-id="55a64-141">Consider the following confusion matrix (model 2).</span></span>

![样本较大的付款预测示例](media/payment-prediction-matrix-2.png)

<span data-ttu-id="55a64-143">快速计算表明该模型的准确度为 (70 + 10 + 3) ÷ 100，即 0.83。</span><span class="sxs-lookup"><span data-stu-id="55a64-143">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="55a64-144">从表面上看，此结果似乎比以前的多类模型（模型 1）的结果好，后者的准确度为 0.73。</span><span class="sxs-lookup"><span data-stu-id="55a64-144">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="55a64-145">但是更好吗？</span><span class="sxs-lookup"><span data-stu-id="55a64-145">But is it better?</span></span>

<span data-ttu-id="55a64-146">要开始解决这个问题，请考虑一下本能猜测的准确度。</span><span class="sxs-lookup"><span data-stu-id="55a64-146">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="55a64-147">对于分类问题，简单的猜测总是可以预测出最常见的类。</span><span class="sxs-lookup"><span data-stu-id="55a64-147">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="55a64-148">对于模型 1，该猜测将是“按时”，它将产生 0.50 的准确度。</span><span class="sxs-lookup"><span data-stu-id="55a64-148">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="55a64-149">对于模型 2，该猜测也将是“按时”，它将产生 0.80 的准确度。</span><span class="sxs-lookup"><span data-stu-id="55a64-149">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="55a64-150">因为模型 1 的本能猜测提升了 0.73 – 0.50 = 0.23，而模型 2 的本能猜测提升了 0.83 – 0.80 = 0.03，因此模型 1 更好，即使其准确度更低。</span><span class="sxs-lookup"><span data-stu-id="55a64-150">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="55a64-151">计算表明，模型质量的有效评估需要比准确度值更多的上下文。</span><span class="sxs-lookup"><span data-stu-id="55a64-151">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="55a64-152">还需要注意一个方面。</span><span class="sxs-lookup"><span data-stu-id="55a64-152">Another aspect is worth noting.</span></span> <span data-ttu-id="55a64-153">考虑使用医学测试来检测患者疾病的情况。</span><span class="sxs-lookup"><span data-stu-id="55a64-153">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="55a64-154">该问题是二进制分类问题，其中阳性结果表明患者患有该疾病。</span><span class="sxs-lookup"><span data-stu-id="55a64-154">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="55a64-155">在这种情况下，您必须考虑以下错误的影响：</span><span class="sxs-lookup"><span data-stu-id="55a64-155">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="55a64-156">误报，即测试表明患者患有疾病，但实际上并非如此</span><span class="sxs-lookup"><span data-stu-id="55a64-156">False positives, where the test says that a patient has the disease, but she doesn't really have it</span></span>
- <span data-ttu-id="55a64-157">漏报，即测试表明患者未患疾病，但实际上患有</span><span class="sxs-lookup"><span data-stu-id="55a64-157">False negatives, where the test says that a patient doesn't have the disease, but he really does have it</span></span>

<span data-ttu-id="55a64-158">显然，两种类型的错误都是不希望的，但是哪个更糟？</span><span class="sxs-lookup"><span data-stu-id="55a64-158">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="55a64-159">同样，这取决于具体情况。</span><span class="sxs-lookup"><span data-stu-id="55a64-159">Again, it depends.</span></span> <span data-ttu-id="55a64-160">对于需要迅速治疗的威胁生命的疾病，应尽量减少漏报（希望随后进行其他检查）。</span><span class="sxs-lookup"><span data-stu-id="55a64-160">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="55a64-161">在其他不太重要的情况下，模型创建者可能会尽量减少误报。</span><span class="sxs-lookup"><span data-stu-id="55a64-161">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="55a64-162">无论如何，合理的结论是，要有效地确定模型的质量，您必须拥有比准确度指标所提供的信息更多的信息。</span><span class="sxs-lookup"><span data-stu-id="55a64-162">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="55a64-163">推荐</span><span class="sxs-lookup"><span data-stu-id="55a64-163">Recommendations</span></span>

<span data-ttu-id="55a64-164">准确度是与不熟悉统计信息的领域专家进行交流的重要工具。</span><span class="sxs-lookup"><span data-stu-id="55a64-164">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="55a64-165">但是，为了使信息有用，至关重要的是提供更多上下文以及准确度值。</span><span class="sxs-lookup"><span data-stu-id="55a64-165">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="55a64-166">对于付款预测方案，您可以为 ML 模型设置一个目标，其中包括不同付款行为中的因素。</span><span class="sxs-lookup"><span data-stu-id="55a64-166">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="55a64-167">目标是该模型应通过减少至少 50％ 的错误答案来改善本能猜测。</span><span class="sxs-lookup"><span data-stu-id="55a64-167">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="55a64-168">换句话说，您想要一个目标准确度，该准确度将本能猜测的准确度与 100％ 的准确度分开。</span><span class="sxs-lookup"><span data-stu-id="55a64-168">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="55a64-169">下表总结了本主题中混淆矩阵的这一原理。</span><span class="sxs-lookup"><span data-stu-id="55a64-169">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="55a64-170">型号</span><span class="sxs-lookup"><span data-stu-id="55a64-170">Model</span></span>   | <span data-ttu-id="55a64-171">本能猜测</span><span class="sxs-lookup"><span data-stu-id="55a64-171">Naïve guess</span></span> | <span data-ttu-id="55a64-172">目标</span><span class="sxs-lookup"><span data-stu-id="55a64-172">Target</span></span> | <span data-ttu-id="55a64-173">模型准确度</span><span class="sxs-lookup"><span data-stu-id="55a64-173">Model accuracy</span></span> | <span data-ttu-id="55a64-174">目标达成了吗？</span><span class="sxs-lookup"><span data-stu-id="55a64-174">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="55a64-175">模型 1</span><span class="sxs-lookup"><span data-stu-id="55a64-175">Model 1</span></span> | <span data-ttu-id="55a64-176">0.50</span><span class="sxs-lookup"><span data-stu-id="55a64-176">0.50</span></span>        | <span data-ttu-id="55a64-177">0.75</span><span class="sxs-lookup"><span data-stu-id="55a64-177">0.75</span></span>   | <span data-ttu-id="55a64-178">0.73</span><span class="sxs-lookup"><span data-stu-id="55a64-178">0.73</span></span>           | <span data-ttu-id="55a64-179">几乎达成。</span><span class="sxs-lookup"><span data-stu-id="55a64-179">Almost.</span></span> <span data-ttu-id="55a64-180">该模型极大地改善了猜测。</span><span class="sxs-lookup"><span data-stu-id="55a64-180">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="55a64-181">模型 2</span><span class="sxs-lookup"><span data-stu-id="55a64-181">Model 2</span></span> | <span data-ttu-id="55a64-182">0.80</span><span class="sxs-lookup"><span data-stu-id="55a64-182">0.80</span></span>        | <span data-ttu-id="55a64-183">0.90</span><span class="sxs-lookup"><span data-stu-id="55a64-183">0.90</span></span>   | <span data-ttu-id="55a64-184">0.83</span><span class="sxs-lookup"><span data-stu-id="55a64-184">0.83</span></span>           | <span data-ttu-id="55a64-185">编号</span><span class="sxs-lookup"><span data-stu-id="55a64-185">No.</span></span> <span data-ttu-id="55a64-186">需要改进。</span><span class="sxs-lookup"><span data-stu-id="55a64-186">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="55a64-187">分类 F1 准确度</span><span class="sxs-lookup"><span data-stu-id="55a64-187">Classification F1 accuracy</span></span>

<span data-ttu-id="55a64-188">本主题中的最后注意事项是对分类 ML 性能的更高级度量，称为 F1 准确度。</span><span class="sxs-lookup"><span data-stu-id="55a64-188">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="55a64-189">在定义 F1 准确度之前，还必须引入两个指标：即精度和召回率。</span><span class="sxs-lookup"><span data-stu-id="55a64-189">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="55a64-190">精度指示正确分配了指定为阳性的预测总数中的多少个。</span><span class="sxs-lookup"><span data-stu-id="55a64-190">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="55a64-191">该指标也称为阳性预测值。</span><span class="sxs-lookup"><span data-stu-id="55a64-191">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="55a64-192">召回率是正确预测的实际阳性病例总数。</span><span class="sxs-lookup"><span data-stu-id="55a64-192">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="55a64-193">此度量标准也称为灵敏度。</span><span class="sxs-lookup"><span data-stu-id="55a64-193">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="55a64-194">[![真实结果与错误结果](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="55a64-194">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="55a64-195">在上图的混淆矩阵中，这些指标是通过以下方式计算的：</span><span class="sxs-lookup"><span data-stu-id="55a64-195">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="55a64-196">精度 = TP ÷ (TP + FP)</span><span class="sxs-lookup"><span data-stu-id="55a64-196">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="55a64-197">召回率 = TP ÷ (TP + FN)</span><span class="sxs-lookup"><span data-stu-id="55a64-197">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="55a64-198">F1 度量结合了精度和召回率。</span><span class="sxs-lookup"><span data-stu-id="55a64-198">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="55a64-199">结果是两个值的谐量平均值。</span><span class="sxs-lookup"><span data-stu-id="55a64-199">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="55a64-200">其计算方法如下：</span><span class="sxs-lookup"><span data-stu-id="55a64-200">It's calculated in the following way:</span></span>

- <span data-ttu-id="55a64-201">F1 = 2 × (精度 × 召回率) ÷ (精度 + 召回率)</span><span class="sxs-lookup"><span data-stu-id="55a64-201">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="55a64-202">让我们看一个具体的例子。</span><span class="sxs-lookup"><span data-stu-id="55a64-202">Let's look at a concrete example.</span></span> <span data-ttu-id="55a64-203">在本主题的较早部分，有一个模型示例可以预测动物是狗还是猫。</span><span class="sxs-lookup"><span data-stu-id="55a64-203">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="55a64-204">下面重复此图。</span><span class="sxs-lookup"><span data-stu-id="55a64-204">The illustration is repeated here.</span></span>

<span data-ttu-id="55a64-205">[![物种预测示例（重复）](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="55a64-205">[![Species prediction example (repeated)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="55a64-206">如果将“狗”用作肯定答案，则结果如下。</span><span class="sxs-lookup"><span data-stu-id="55a64-206">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="55a64-207">精度 = 24 ÷ (24 + 2) = 0.9231</span><span class="sxs-lookup"><span data-stu-id="55a64-207">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="55a64-208">召回率 = 24 ÷ (24 + 6) = 0.8</span><span class="sxs-lookup"><span data-stu-id="55a64-208">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="55a64-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span><span class="sxs-lookup"><span data-stu-id="55a64-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="55a64-210">如您所见，F1 值介于精度和召回率之间。</span><span class="sxs-lookup"><span data-stu-id="55a64-210">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="55a64-211">尽管 F1 的准确性不是那么容易理解，但是它会增加基本准确性数字的细微差别。</span><span class="sxs-lookup"><span data-stu-id="55a64-211">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="55a64-212">如下面的讨论所示，它还可以帮助解决不平衡的数据集。</span><span class="sxs-lookup"><span data-stu-id="55a64-212">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="55a64-213">本主题的[模型准确性](#model-accuracy)一节比较了以下两个混淆矩阵。</span><span class="sxs-lookup"><span data-stu-id="55a64-213">The [Model accuracy](#model-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="55a64-214">即使第一个模型的准确性较低，它也被认为是更有用的模型，因为它比默认的按时付款显示出更多的改进。</span><span class="sxs-lookup"><span data-stu-id="55a64-214">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

![付款预测与实际示例](media/payment-prediction-matrix.png)

![样本较大的付款预测示例（重复）](media/payment-prediction-matrix-2.png)

<span data-ttu-id="55a64-217">让我们看看使用 F1 分数时这两个模型的比较。</span><span class="sxs-lookup"><span data-stu-id="55a64-217">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="55a64-218">F1 分数会影响每种状态的精度和召回率，而 F1 宏计算会将每种状态的 F1 分数取平均值，以确定总体 F1 分数。</span><span class="sxs-lookup"><span data-stu-id="55a64-218">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="55a64-219">还有其他 F1 变体，但是考虑到所有三种状态的平等考虑，考虑宏版本会引起更大的兴趣。</span><span class="sxs-lookup"><span data-stu-id="55a64-219">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="55a64-220">为了简化计算，构建了样本数组以匹配实际值和预测值。</span><span class="sxs-lookup"><span data-stu-id="55a64-220">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="55a64-221">这些数组在 Python 中使用了 sklearn 的指标库来计算值。</span><span class="sxs-lookup"><span data-stu-id="55a64-221">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="55a64-222">结果如下。</span><span class="sxs-lookup"><span data-stu-id="55a64-222">Here is the result.</span></span>

| <span data-ttu-id="55a64-223">型号</span><span class="sxs-lookup"><span data-stu-id="55a64-223">Model</span></span>   | <span data-ttu-id="55a64-224">本能猜测</span><span class="sxs-lookup"><span data-stu-id="55a64-224">Naive guess</span></span> | <span data-ttu-id="55a64-225">准确度</span><span class="sxs-lookup"><span data-stu-id="55a64-225">Accuracy</span></span> | <span data-ttu-id="55a64-226">F1 宏</span><span class="sxs-lookup"><span data-stu-id="55a64-226">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="55a64-227">模型 1</span><span class="sxs-lookup"><span data-stu-id="55a64-227">Model 1</span></span> | <span data-ttu-id="55a64-228">0.5</span><span class="sxs-lookup"><span data-stu-id="55a64-228">0.5</span></span>         | <span data-ttu-id="55a64-229">0.73</span><span class="sxs-lookup"><span data-stu-id="55a64-229">0.73</span></span>     | <span data-ttu-id="55a64-230">0.67</span><span class="sxs-lookup"><span data-stu-id="55a64-230">0.67</span></span>     |
| <span data-ttu-id="55a64-231">模型 2</span><span class="sxs-lookup"><span data-stu-id="55a64-231">Model 2</span></span> | <span data-ttu-id="55a64-232">0.80</span><span class="sxs-lookup"><span data-stu-id="55a64-232">0.80</span></span>        | <span data-ttu-id="55a64-233">0.83</span><span class="sxs-lookup"><span data-stu-id="55a64-233">0.83</span></span>     | <span data-ttu-id="55a64-234">0.66</span><span class="sxs-lookup"><span data-stu-id="55a64-234">0.66</span></span>     |

<span data-ttu-id="55a64-235">有关此计算如何工作的更多详细信息，下面是模型 1 的 sklearn.metrics 分类报告。</span><span class="sxs-lookup"><span data-stu-id="55a64-235">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="55a64-236">标签分别为 1、2 和 3 的行表示了三种状态：“按时”、“逾期”和“严重逾期”。</span><span class="sxs-lookup"><span data-stu-id="55a64-236">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="55a64-237">宏平均值只是“f1-score”列的平均值。</span><span class="sxs-lookup"><span data-stu-id="55a64-237">The macro average is just the average of the "f1-score" column.</span></span>

|           | <span data-ttu-id="55a64-238">精度</span><span class="sxs-lookup"><span data-stu-id="55a64-238">precision</span></span> | <span data-ttu-id="55a64-239">召回率</span><span class="sxs-lookup"><span data-stu-id="55a64-239">recall</span></span>   | <span data-ttu-id="55a64-240">f1-score</span><span class="sxs-lookup"><span data-stu-id="55a64-240">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="55a64-241">**1**</span><span class="sxs-lookup"><span data-stu-id="55a64-241">**1**</span></span>     | <span data-ttu-id="55a64-242">0.83</span><span class="sxs-lookup"><span data-stu-id="55a64-242">0.83</span></span>      | <span data-ttu-id="55a64-243">0.80</span><span class="sxs-lookup"><span data-stu-id="55a64-243">0.80</span></span>     | <span data-ttu-id="55a64-244">0.82</span><span class="sxs-lookup"><span data-stu-id="55a64-244">0.82</span></span>     |
| <span data-ttu-id="55a64-245">**2**</span><span class="sxs-lookup"><span data-stu-id="55a64-245">**2**</span></span>     | <span data-ttu-id="55a64-246">0.68</span><span class="sxs-lookup"><span data-stu-id="55a64-246">0.68</span></span>      | <span data-ttu-id="55a64-247">0.71</span><span class="sxs-lookup"><span data-stu-id="55a64-247">0.71</span></span>     | <span data-ttu-id="55a64-248">0.69</span><span class="sxs-lookup"><span data-stu-id="55a64-248">0.69</span></span>     |
| <span data-ttu-id="55a64-249">**3**</span><span class="sxs-lookup"><span data-stu-id="55a64-249">**3**</span></span>     | <span data-ttu-id="55a64-250">0.50</span><span class="sxs-lookup"><span data-stu-id="55a64-250">0.50</span></span>      | <span data-ttu-id="55a64-251">0.50</span><span class="sxs-lookup"><span data-stu-id="55a64-251">0.50</span></span>     | <span data-ttu-id="55a64-252">0.50</span><span class="sxs-lookup"><span data-stu-id="55a64-252">0.50</span></span>     |

<span data-ttu-id="55a64-253">从这些结果可以看出，两个模型的 F1 宏精度得分几乎相同。</span><span class="sxs-lookup"><span data-stu-id="55a64-253">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="55a64-254">在这种情况下以及其他许多情况下，F1 精度可以更好地指示模型的功能。</span><span class="sxs-lookup"><span data-stu-id="55a64-254">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="55a64-255">至于准确性，对结果的解释要求您了解模型中最重要的考虑因素。</span><span class="sxs-lookup"><span data-stu-id="55a64-255">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

#### <a name="privacy-notice"></a><span data-ttu-id="55a64-256">隐私声明</span><span class="sxs-lookup"><span data-stu-id="55a64-256">Privacy notice</span></span>
<span data-ttu-id="55a64-257">预览版 (1) 采用的隐私和安全措施可能比 Dynamics 365 Finance and Operations 服务少，(2) 不包含在该服务的服务级别协议 (SLA) 中，(3) 不应用于处理应遵守法律或法规合规性要求的个人数据或其他数据，以及 (4) 享受有限支持。</span><span class="sxs-lookup"><span data-stu-id="55a64-257">Previews (1) might use less privacy and fewer security measures than the Dynamics 365 Finance and Operations service, (2) aren't included in the service level agreement (SLA) for this service, (3) should not be used to process personal data or other data that is subject to legal or regulatory compliance requirements, and (4) have limited support.</span></span>
