---
title: 销售订单的信用保留
description: 本主题描述了用于将销售订单置于信用保留状态的规则的设置。
author: mikefalkner
manager: AnnBe
ms.date: 01/25/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: roschloma
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: roschlom
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: 102ea4285407a4f4985cc8dd46ebc1ad21fc6f67
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/13/2020
ms.locfileid: "4440626"
---
# <a name="credit-holds-for-sales-orders"></a>销售订单的信用保留
[!include [banner](../includes/banner.md)]

本主题描述了用于将销售订单置于信用保留状态的规则的设置。 信用管理锁定规则可以应用于单个客户或一组客户。 锁定规则定义了针对以下情况的响应：

1. 逾期天数
2. 帐户状态
3. 付款期限
4. 信用额度已过期
5. 逾期金额
6. 销售订单金额
7. 使用的可用信用部分

此外，还有两个参数可控制将阻止销售订单的其他方案

1. 付款期限变化
2. 结算折扣变化

## <a name="set-up-blocking-rules-and-exclusion-rules"></a>设置锁定规则和排除规则

当客户发起销售交易时，将根据一组锁定规则来审查销售订单上的信息，这些锁定规则指导关于是否向客户提供信用并允许销售继续进行的决策。 您还可以定义排除规则，以覆盖锁定规则并允许处理销售订单。 您可以在 **信用管理 > 设置 > 信用管理设置 > 锁定规则** 页上设置锁定规则和排除规则。

### <a name="days-overdue"></a>逾期天数

如果锁定规则适用于一张或多张发票已过期一定天数的客户，请打开 **逾期天数** 选项卡。
1. 选择此规则 **适用于** 的客户范围。
   - 如果规则适用于特定客户，请选择 **表**。
   - 如果在客户组级别应用了规则，请选择 **组**。 
   - 如果规则适用于所有客户，请选择 **全部**。
2. 指定范围后，必须指定将在范围内使用的 **帐户/组**。
   - 对于 **表** 范围，查找将提供要选择的客户列表。 
   - 如果规则适用于客户信用组，请选择 **组**。
   - 如果规则适用于所有客户，请选择 **全部**。 
3. 选择 **风险组**，以对根据一组常见因素（例如 Dun 和 Bradstreet 评级、客户的营业年数、他们成为您的客户的时间长短等等）归组的客户应用信用管理暂停标准。  
4. 选择您要设置的规则的类型。 **锁定** 选项将创建锁定订单的规则。 **排除** 选项将创建一个规则，以不使用另一个规则来锁定订单。 
5. 选择 **值类型**。 默认条目是固定天数。 如果要创建排除项，则可以改为指定固定的天数或数额。 
6. 输入将订单置于信用管理暂停状态以进行审核之前为选定锁定规则留出的 **逾期** 天数。 逾期天数表示额外的宽限天数，该宽限天数会加到发票被认为逾期之前可能具有的付款到期日期之外的天数中。 如果您指定了 **值类型** 作为排除项金额，则输入金额和该金额的货币。

### <a name="accounts-status"></a>帐户状态

如果锁定规则适用于具有所选帐户状态的客户，请打开 **帐户状态** 选项卡。
1. 选择您要设置的规则的类型。  **锁定** 将创建锁定订单的规则。 **排除** 将创建一个规则，以不使用某个规则来锁定订单。 
2. 选择将导致规则将销售订单置于暂停状态或将其排除在外的 **帐户状态**。

### <a name="terms-of-payment"></a>付款期限

如果锁定规则适用于所选的付款期限，请选择 **付款期限**。
1. 选择您要设置的规则的类型。  **锁定** 将创建锁定订单的规则。 **排除** 将创建一个规则，以不使用某个规则来锁定订单。 
2. 选择将导致规则将销售订单置于暂停状态或将其排除在外的 **付款期限**。

### <a name="credit-limit-expired"></a>信用额度已过期

如果锁定规则适用于信用额度已过期的客户，请打开 **信用额度过期** 选项卡。
1. 选择此规则 **适用于** 的客户范围。
   - 如果规则适用于特定客户，请选择 **表**。
   - 如果在客户组级别应用了规则，请选择 **组**。 
   - 如果规则适用于所有客户，请选择 **全部**。
2. 指定范围后，必须指定在范围内使用的 **帐户/组**。
   - 对于 **表** 范围，查找将提供要从中进行选择的客户列表。 
   - 如果规则适用于客户信用管理组，请选择 **组**。
   - 如果规则适用于所有客户，请选择 **全部**。 
3. 选择 **风险组** 以进一步限制将被置于信用管理暂停状态的客户列表。 
4. 选择您要设置的规则的类型。 
   - 选择 **锁定** 以创建锁定订单的规则。 
   - 选择 **排除** 以创建一个规则，以不使用另一个规则来锁定订单。 
5. 针对将订单置于信用管理暂停状态之前选择的锁定规则输入 **信用额度过期天数**。 逾期天数表示加到信用额度过期天数上的额外宽限天数。

### <a name="overdue-amount"></a>逾期金额

如果锁定规则适用于具有逾期金额的客户，请打开 **逾期金额** 选项卡。
1. 选择此规则 **适用于** 的客户范围。
   - 如果规则适用于特定客户，请选择 **表**。
   - 如果在客户组级别应用了规则，请选择 **组**。 
   - 如果规则适用于所有客户，请选择 **全部**。
2. 指定范围后，必须指定在范围内使用的 **帐户/组**。
   - 对于 **表** 范围，查找将提供客户查找结果。 
   - 如果规则适用于客户信用管理组，请选择 **组**。
   - 如果规则适用于所有客户，请选择 **全部**。 
3. 如果想要进一步限制将变为信用管理暂停状态的客户列表，请选择 **风险组**。 
4. 选择您要设置的规则的类型。 
   - 选择 **锁定** 以创建锁定订单的规则。 
   - 选择 **排除** 以创建一个规则，以不使用另一个规则来锁定订单。 
5. 针对将订单置于信用管理暂停状态以进行审核之前选择的锁定规则输入 **逾期金额**。 
6. 选择 **值类型** 以定义也将用于测试信用额度已用数量的值类型。 锁定规则需要一个百分比，但排除项可以具有固定的数额或百分比。 阈值与信用额度有关。
7. 针对客户变为信用管理暂停状态之前选择的规则输入 **信用额度阈值** 值。 根据在值类型中选择的值类型，此值可以是数额或百分比。
8. 此规则检查是否超过了 **逾期金额** 和 **信用额度阈值**。 

### <a name="sales-order"></a>销售订单 

如果锁定规则适用于销售订单的值，请选择 **销售订单**。
1. 选择此规则 **适用于** 的客户范围。
   - 如果规则适用于特定客户，请选择 **表**。
   - 如果在客户组级别应用了规则，请选择 **组**。 
   - 如果规则适用于所有客户，请选择 **全部**。
2. 指定范围后，必须指定在范围内使用的 **帐户/组**。
   - 对于 **表** 范围，查找将提供客户查找结果。 
   - 如果规则适用于客户信用管理组，请选择 **组**。
   - 如果规则适用于所有客户，请选择 **全部**。 
3. 如果想要进一步限制将变为信用管理暂停状态的客户列表，请选择 **风险组**。 
4. 选择您要设置的规则的类型。  
   - 选择 **锁定** 以创建锁定订单的规则。 
   - 选择 **排除** 以创建一个规则，以不使用另一个规则来锁定订单。 
5. 针对将订单置于信用管理暂停状态之前选择的锁定规则输入 **销售订单金额**。 

销售订单规则包括一个覆盖所有其他规则的附加设置。 要创建排除项以下达销售订单而不使任何其他规则生效，请选中排除行上的 **下达销售订单** 复选框。

### <a name="credit-limit-used"></a>已用信用额度

如果锁定规则适用于所使用的客户信用额度金额，请选择 **已用信用额度**。
1. 选择此规则 **适用于** 的客户范围。
   - 如果规则适用于特定客户，请选择 **表**。
   - 如果在客户组级别应用了规则，请选择 **组**。 
   - 如果规则适用于所有客户，请选择 **全部**。
2. 指定范围后，必须指定在范围内使用的 **帐户/组**。
   - 对于 **表** 范围，查找将提供客户查找结果。 
   - 如果规则适用于客户信用管理组，请选择 **组**。
   - 如果规则适用于所有客户，请选择 **全部**。 
3. 如果想要进一步限制将变为信用管理暂停状态的客户列表，请选择 **风险组**。 
4. 选择您要设置的规则的类型。
   - 选择 **锁定** 以创建锁定订单的规则。 
   - 选择 **排除** 以创建一个规则，以不使用另一个规则来锁定订单。 
5. 选择 **剩余阈值** 以定义将锁定销售订单的信用额度的百分比。 如果订单值使所使用的信用额度的数额增加到此百分比以上，则该订单将被暂停。 

## <a name="put-a-sales-order-on-hold-based-on-other-criteria"></a>根据其他条件将销售订单置于暂停状态
  
### <a name="rank-payment-terms"></a>对付款期限排名  

您可以强制在更改付款期限时执行信用控制规则。 您必须对付款期限进行排名并为其分配排名值。 如果将订单上的付款期限更改为排名高于旧付款期限的付款期限，则该订单将被发送到信用管理系统并需要审批。

您可以在 **信用管理 > 设置 > 信用管理设置 > 付款期限排名** 页上设置付款期限排名。

1. 选择 **付款期限** 字段以对付款期限进行排名；当您选择一个期限时，将在 **描述** 字段中显示说明。
2. 在 **排名** 字段中选择期限的排名。 这些值都是相对的，因此您可以使用 1、2、3 或 10、20、30。 您也可以对大多数付款期限使用相同的值，以便只有一两个付款期限会触发信用检查。

### <a name="rank-settlement-discounts"></a>对结算折扣排名   

您可以强制在更改结算折扣时执行信用控制规则。 您必须对结算折扣进行排名并为其分配排名值。 如果将订单上的结算折扣更改为排名高于旧结算折扣的结算折扣，则该订单将被发送到信用管理系统并需要审批。

您可以在 **信用管理 > 设置 > 信用管理设置 > 结算折扣排名** 页上设置付款期限排名。

1. 选择您要排名的 **现金折扣**。 此时将显示结算折扣的 **描述**。
2. 选择 **排名** 值。 这些值都是相对的，因此您可以使用 1、2、3 或 10、20、30。 您也可以对大多数结算折扣使用相同的值，以便只有一两个结算折扣会触发信用检查。

## <a name="sequence-the-application-of-rules"></a>对规则的应用进行排序

规则以更改的特定顺序运行，以适应组织的需求。 

- 使用销售订单排除规则的一个实例，您可以覆盖可能会锁定销售订单的所有规则。 创建销售订单排除规则并标记 **下达销售订单** 选项。 如果该排除规则为真，则该订单将不会被置于暂停状态，并且不会检查其他任何规则。
- 锁定规则可以将订单置于暂停状态。
- 排除规则在锁定规则之后运行。 排除规则只会影响定义它们所针对的规则。 
- 锁定和排除规则先在“表”中运行，然后在“组”中运行，最后在“所有订单”中运行。 由于会处理此订单，所以可能会有一个将不会运行的“全部”级别的锁定规则，之所以不会运行，是因为运行了“表”或“组”级别的排除规则。
- 如果排除项处于同一级别，则它们不会覆盖锁定规则。 例如，组级别的排除规则不会覆盖组级别的锁定规则。 您无需使用销售订单排除规则的一个实例在“全部”级别设置排除项，但上面提到的除外。 

**已用信用额度** 规则的行为将根据在“信用和收款”参数表中找到的 **检查销售订单的信用额度** 参数的设置发生变化。
- 如果将此参数设置为“否”，则不会运行“已用信用额度”规则。
- 如果将此参数设置为“是”，并且将 **超出信用额度时显示提示消息** 设置为“警告”，那么当超出信用额度时，您将收到警告。 **已用信用额度** 规则将会运行，以查看您是否有要运行的规则。 但是，对于这种情况，通常不会添加任何规则。
- 如果将此参数设置为“是”，并且将 **超出信用额度时显示提示消息** 设置为“错误”，则将检查信用额度，如果超出信用额度，订单将被暂停。 此外，**已用信用额度** 规则将会运行，以查看是否有应运行的其他规则。 错误消息不会显示，但是将显示 **超出信用额度** 锁定原因。 

## <a name="settings-that-will-change-the-way-an-order-is-placed-on-hold"></a>将更改订单暂停方式的设置

即使实施了规则，也可以将订单从信用管理中排除。 

- 如果将 **所有客户 > 选择客户 > 信用和收款快速选项卡** 中的 **将客户排除在信用管理之外** 设置更改为 **是**，则不会处理该客户的订单
- 如果您将 **信用管理快速选项卡** 中 **销售订单标题** 上的 **从信用管理中排除** 值更改为 **是**，那么将不会处理信用管理规则。 此设置只能由信贷员或信贷经理来完成。

## <a name="processing-orders-on-hold-using-the-credit-management-hold-list"></a>使用信用管理暂停列表处理暂停的订单

信用管理暂停列表使信贷经理可以查看已置于暂停状态的所有销售订单，并使他们能够在信用问题得到缓解后解除暂停。 **信用管理暂停列表** 页面显示了所有已置于暂停状态的销售订单。 您可以在 **所有信用暂停** 页面（**信用管理 > 信用管理暂停列表 > 所有信用暂停**）上查看暂停列表。
所有法人的销售订单都将发送到同一信用管理暂停列表，从而集中显示所有需要关注的交易。 用户将仅看到他们有权访问的法人的信息。

出于以下原因，可以将销售订单放置在暂停列表中：
1. 客户的发票已逾期指定天数。 
2. 订单具有特定的帐户状态。
3. 订单有特定的付款期限。
4. 客户的信用额度已过期。
5. 客户有逾期金额，并且已使用了指定百分比的信用额度
6. 销售订单超过一定数额。
7. 客户已超出一定百分比的信用额度。
8. 付款期限不同于客户的默认付款期限。
9. 结算折扣不同于客户的默认结算折扣。

每个销售订单的锁定原因都显示在暂停列表中。 如果有一个以上的暂停原因，则原因将显示为 **多个**。 您可以使用操作窗格上的 **锁定原因** 菜单查看销售订单被置于暂停状态的所有原因。 您还可以在速见表中查看 **锁定原因**。

### <a name="releasing-orders-from-the-hold-list-for-processing"></a>从暂停列表中下达订单以进行处理

在研究了暂停原因并缓解了问题之后，可以下达销售订单以做进一步处理。

1) 在暂停列表中选择一行。 您可以通过选择多个行来下达多个订单。
2) 对已选择下达的订单选择一个 **下达原因**。  
3) 对已选择下达的每个订单选择 **查看日期**。  
4) 选择操作窗格上的 **下达** 菜单以下达订单。 仅在选择了交易后，此菜单才可用。 系统会向用户显示两个选项：
   - 选择 **进行过帐** 可以解除暂停并使用将销售订单置于暂停状态时使用的相同过帐流程来过帐单据。 例如，如果销售订单确认被置于暂停状态，则销售订单确认将在下达后完成。 系统将显示销售订单过帐表格，并允许用户发布确认。
   - 选择 **不过帐** 可以解除暂停但不进行任何进一步处理。 现在可以手动过帐销售订单。

### <a name="rejecting-orders-in-the-hold-list"></a>拒绝暂停列表中的订单
您可以使用操作窗格上的 **拒绝** 菜单拒绝销售订单
1. 在暂停列表中选择一行。 您可以通过选择多个行来下达多个订单。
2. 该订单将从暂停列表中删除，销售订单标题将更新以表明该订单被拒绝。

### <a name="automatically-releasing-credit-management-holds"></a>自动解除信用管理暂停
销售订单将根据锁定规则放置在暂停列表中。 但是，如果销售订单在一段时间内仍在暂停列表中，则暂停的某些原因可能会随时间发生变化。 例如，客户可以支付账单，以腾出其信用额度。 

您可以使用 **评估下达** 菜单查看暂停列表中的销售订单，并在暂停原因缓解后自动下达订单。
1.  选择 **评估下达** 菜单
2.  选择 **处理锁定规则** 以查看所有销售订单。 选择 **针对选定行处理锁定规则** 以仅查看您选择的行。
3. 此时将出现一个滑块，以便您可以选择一个客户。 针对所有客户将客户下拉列表留空。 
4. 如果单击“确定”，该流程会在后台运行，您可以继续执行其他任务。 如果在单击“确定”之前选择批处理，则单击“确定”后该流程将成批运行。 处理列表中的暂停订单可能需要一些时间，因此，请使用“刷新”更新订单的状态。 
5.  如果锁定原因不再适用于订单，则在查看锁定原因时，该锁定原因将被视为不再有效，并且您将不会再在该原因旁边看到复选标记。
6.  如果清除了所有锁定原因，则 **准备下达** 这个新原因会添加到锁定原因列表中。 销售订单可自动下达。
7.  如果将 **信用和收款 > 设置 > 信用和收款参数 > 信用 > 自动下达** 选项卡中的 **自动下达** 参数设置为 **进行过帐**，那么系统将提示您使用过帐表单对锁定的单据进行过帐。
8.  如果将 **信用和收款 > 设置 > 信用和收款参数 > 信用 > 自动下达** 选项卡中的 **自动下达** 参数设置为 **不进行过帐**，那么您必须手动过帐此订单。

### <a name="credit-management-approval-workflow"></a>信用管理审批工作流

您还可以创建 **信用管理工作流** 来控制信用暂停的解除。 使用 **信用管理 > 设置 > 信用管理工作流** 页设置工作流后，标记为下达或拒绝的订单将发送到工作流，在此工作流中，必须先审批这些订单，然后才能下达或拒绝它们。 

如果将“下达并过帐”任务或“下达但不过帐”任务包括在工作流中，则工作流审批流程还将下达销售订单。 但是，如果由于缺少设置信息或其他原因导致下达流程失败，则需要从工作流中撤回销售订单，修复导致失败的问题，然后再次将订单提交至工作流。

如果您没有将“下达并过帐”任务或“下达但不过帐”任务包括在工作流中，则工作流审批流程只允许您在审批完成后手动下达销售订单。

### <a name="forced-credit-hold"></a>强制信用暂停  
  
有时，即使订单不符合暂停规则的条件，也可能需要锁定销售订单。 例如，信用经理可以获悉客户的非信用相关问题，并可以决定立即手动暂停订单，直到问题得到解决为止。 如果出现这种情况，您可以手动强制暂停销售订单。

1. 打开要暂停的销售订单。  
2. 在 **信用管理** 操作窗格上的 **信用管理** 选项卡中选择 **强制信用暂停**。
3. 选择 **强制暂停原因**。
4. 单击 **确定**。 销售订单将返回到“信用管理暂停”列表。

您还可以使用 **信用管理 > 定期任务 > 强制信用暂停** 页强制暂停多个订单。 例如，您可以为特定客户暂停所有销售订单。
1. 选择 **强制暂停原因**。 
2. 单击 **要包括的记录** 以选择要暂停的销售订单。 
3. 单击 **确定** 以处理选定的销售订单。

无法使用工作流处理已被强制暂停的销售订单。

#### <a name="releasing-orders-that-were-added-to-the-credit-management-hold-list-with-a-forced-credit-hold"></a>下达已添加到信用管理暂停列表中并且已强制信用暂停的订单
具有强制暂停原因的销售订单无法自动下达。 如果销售订单被强制暂停，并且您使用了自动下达销售订单的流程，则该销售订单将显示为 **准备下达** 并保留在暂停列表中。 您必须使用 **下达** 菜单下达订单。
 
## <a name="free-text-invoices-orders-and-project-invoice-support-in-credit-management"></a>信用管理中的自由文本发票、订单和项目发票支持 
信用管理目前只能用于销售订单。 自由文本发票、销售点订单和呼叫中心订单将使用您添加的临时信用额度和保险/担保来调整信用额度。 如果信用额度存在问题，那么这些单据将不会使用锁定规则，也不会被放置在暂停列表中。

信用管理不支持项目发票。
