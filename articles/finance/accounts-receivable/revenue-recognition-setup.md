---
title: 收入确认设置
description: 本主题将介绍收入确认的设置选项及其影响。
author: kweekley
ms.date: 08/24/2018
ms.topic: index-page
ms.prod: ''
ms.technology: ''
ms.search.form: Customer
audience: Application User
ms.reviewer: roschlom
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2018-08-30
ms.dyn365.ops.version: 8.0.4
ms.openlocfilehash: c395aabfc8705b4713cf1041b5644ac478d8c1a4c4c211334aea3572f1618b84
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/05/2021
ms.locfileid: "6759009"
---
# <a name="revenue-recognition-setup"></a>收入确认设置
[!include [banner](../includes/banner.md)]

添加了一个新的 **收入确认** 模块，该模块包括所有必需设置的菜单项。 本主题介绍设置选项及其影响。

> [!NOTE]
> 收入确认功能不能通过功能管理来启用。 目前，您必须使用 Configuration Key 启用该功能。

> 不支持在 Commerce 渠道（电子商务、POS、呼叫中心）中使用收入确认，包括捆绑功能。 配置了收入确认的项目不应添加到在 Commerce 渠道中创建的订单或交易记录中。

**收入确认** 模块具有以下设置选项：

- 收入确认日记帐
- 收入确认的参数
- 收入计划 
- 库存设置

    - 物料组和已发布产品
    - 定义收入计划
    - 定义收入价格

        - 过帐模板
        - 捆绑

    - 捆绑组件
    - 捆绑物料

- 项目设置

## <a name="revenue-recognition-journals"></a>收入确认日记帐

为收入确认引入的新日记帐类型。 该日记帐为必需项，且适用于两种情形。

第一种情形发生在履行所有合同义务之后，这时通过创建收入确认日记帐（基于收入计划的详细信息）来确认延期收入。 该日记帐包含将延期收入会计科目的余额转移至收入会计科目的会计条目。

第二种情形发生在重新分配之后创建日记帐时。 将销售订单行添加到之前已开票的销售订单，或者创建包括原始合同中的某行的新销售订单时，会产生重新分配。 如果在添加新销售订单行之前过帐发票，则必须为已过帐的客户发票创建更正的会计条目。

日记帐将在 **日记帐名称** 页面（**收入确认 \> 设置 \> 日记帐名称**）中设置。 日记帐类型必须设置为 **收入确认**。 通过收入确认日记帐可选择要过帐到的过帐层。

## <a name="parameters-for-revenue-recognition"></a>收入确认的参数

收入确认设置在 **总帐参数** 页面（**收入确认 \> 设置 \> 总帐参数**）的 **收入确认** 选项卡中配置。 提供了以下设置：

- **收入确认日记帐名称** - 选择已为收入确认创建的日记帐。 当从收入计划确认收入，或者为已开票的销售订单执行重新分配时，需要日记帐。
- **启用折扣分配方法** - 将此选项设置为 **是**，可通过分配在收入价格中为每个已发布产品定义的公平市场价值，来确认收入价格。 此分配包括在物料之间分配所有单行折扣。 如果将此选项设置为 **否**，系统将使用在收入价格中为每个已发布产品定义的中间价格。 如果将此选项设置为 **否**，但未为已发布产品设置中间价格，则不会分配收入价格。
- **包括标题折扣** - 将此选项设置为 **是**，可通过在产品之间分配标题折扣，以确定收入价格。 如果将此选项设置为 **否**，则标题折扣不包括在收入价格分配中。
- **禁用合同条款** - 如果可以发布收入类型为 **过帐合同支持** 的产品，尽管未为其定义合同开始日期和结束日期，请将此选项设置为 **是**。 通常，对于收入类型为 **过帐合同支持** 的物料，需要合同开始日期和结束日期。 如果未定义合同开始日期和合同结束日期，将使用发生次数和发票日期计算过帐时收入计划的详细信息。
- **重新分配时将发票更正过帐到应收帐款** - 当为已过帐的发票执行重新分配时，必须更正已过帐发票的会计条目。 使用此选项可以指定如何完成更正。

    - 将此选项设置为 **否** 可限制将更正的交易记录过帐到总帐。 当将此选项设置为 **否** 时，不会在应收帐款中创建用于内部会计更正的附加文档。 对发票付款时，结算流程使用旧会计条目过帐任何现金折扣，或者任何已实现利润或已有损失。
    - 将此选项设置为 **是**，可自动为应收帐款中的更正交易记录创建冲销文档和新发票。 由于此更正是内部会计更正，将不会向客户发送或传达新文档。 冲销文档将结算到原始发票，并且新更正的发票由客户付款。 请注意，所有三个文档都将显示在报表中，例如客户对帐单。

[![设置信息。](./media/revenue-recognition-setup-info.png)](./media/revenue-recognition-setup-info.png)

## <a name="revenue-schedules"></a>收入计划

必须为可以延期收入的事件的每次发生创建一个收入计划。 例如，如果您的组织在 6 个月、12 个月、18 个月和 24 个月期间提供支持，则必须为每个期间创建收入计划。 收入计划的设置确定如何在所选期间数量之间分配收入价格。 此外，它还将确定为过帐发票时所创建的收入计划输入的默认日期。

如果按里程碑确认收入，则我们建议您为里程碑数创建收入确认计划，而不管确认日期。 创建计划之后，可以进行编辑，以便反映预期里程碑日期。 这些记录可以置于暂停状态，直至您收到通知，即已满足里程碑并且可以确认收入。

收入计划在 **收入计划** 页面（**收入确认 \> 设置 \> 收入计划**）中创建。

[![收入计划。](./media/revenue-recognition-revenue-schedules.png)](./media/revenue-recognition-revenue-schedules.png)

在 **收入计划** 和 **说明** 字段中输入描述性值。 以下附加设置用于在过帐发票时创建收入计划。

- **发生次数** - 输入收入延期的月数或发生次数。
- **自动暂停** - 如果过帐发票时收入计划的所有行都应自动置于暂停状态，请选中此复选框。 在确认每行的延期收入之前，必须从计划的每行中手动移除暂停状态。
- **自动合同条款** - 如果应自动设置合同开始日期和结束日期，请选中此复选框。 仅对于收入类型为 **过帐合同支持** 的已发布产品，才会自动设置这些日期。 合同开始日期会自动设置为销售订单行的要求装运日期，合同结束日期会自动设置为在收入计划的设置中定义的开始日期加上月数或者发生次数。 例如，销售订单行上的产品适用于一年保修。 默认收入计划是 **12M**（12 个月），在此收入计划下，将选中 **自动合同条款** 复选框。 如果销售订单行的要求装运日期为 2019 年 12 月 16 日，则默认合同开始日期为 2019 年 12 月 16 日，并且默认合同结束日期为 2020 年 12 月 15 日。
- **确认基础** - 确认基础确定在发生次数之间分配收入价格的方式。

    - **每月按日期** - 金额基于每月中的实际天数分配。
    - **每月** - 金额在发生次数中定义的月数之间平均分配。
    - **发生次数** - 金额在发生次数之间平均分配，但如果选择 **实际开始日期** 作为确认惯例，则可以包括额外期间。

- **确认惯例** - 确认惯例确定在发票的收入计划中设置的默认日期。

    - **实际开始日期** - 通过使用合同开始日期（面向过帐合同支持 \[PCS\] 物料）或发票日期（面向基本和非基本物料）来创建计划。
    - **每月的第一天** - 第一个计划行中的日期是合同开始日期（或发票日期）。 但是，将在每月的第一天创建所有后续计划行。
    - **月中拆分** - 第一个计划行中的日期取决于发票日期。 如果在每月的第一天至第十五天过帐发票，则将使用每月的第一天创建收入计划。 如果在每月的第十六天或之后过帐发票，则将使用下一个月的第一天创建收入计划。
    - **下个月的第一天** - 计划中的日期是下个月的第一天。

选择 **收入计划详细信息** 按钮，可查看每个期间中确认的一般期间和百分比。 默认情况下，**确认百分比** 值在期间数之间平均划分。 如果确认基础设置为 **每月** 或 **发生次数**，则可以更改确认百分比。 更改确认百分比时，将会显示一条警告消息，通知您总计不等于 100%。 如果您收到该消息，可以继续编辑行。 但在关闭页面之前，百分比总计必须达到 100。

[![收入计划详细信息。](./media/revenue-recognition-revenue-schedule-details.png)](./media/revenue-recognition-revenue-schedule-details.png)

## <a name="inventory-setup"></a>库存设置

如果文档中未包括任何物料，则可以确认销售订单上已发布产品的收入，但不适用于销售订单上的销售类别或普通发票。 设置已发布产品时做出的选择确定物料收入的确认方式。 例如，这些选择确定是否分配收入价格，以及是否使用收入计划延期收入。

设置可以在 **物料组** 页面（**收入确认 \> 设置 \> 库存和产品设置 \> 物料组**）的 **收入确认** 快速选项卡中进行。 此页面包括多个设置字段。 这些字段用于仅对系统中创建的新的已发布产品设置默认值。 创建新产品时，默认情况下将为物料组输入在此处设置的值。 您可以覆盖 **已发布产品** 页面（**收入确认 \> 设置 \> 库存和产品设置 \> 已发布产品**）上的已发布产品的默认值。 然后，为已发布产品设置的默认值将转移到销售订单。

## <a name="item-groups-and-released-products"></a>物料组和已发布产品

### <a name="define-the-revenue-schedule"></a>定义收入计划

如果为已发布产品定义了收入计划并且默认情况下用在销售订单行中，则将会延期销售订单行上的收入。 如果默认情况下应将该设置用于产品，则可以在 **物料组** 页面（**收入确认 \> 设置 \> 库存和产品设置 \> 物料组**）的 **收入确认** 快速选项卡中定义收入计划。 您也可以为 **已发布产品** 页面（**收入确认 \> 设置 \> 库存设置 \> 已发布产品**）的 **收入确认** 快速选项卡上的已发布产品定义该设置。

在 **收入计划** 字段中，选择代表必须延期收入的期间的收入计划。 过帐销售订单发票时，收入计划会自动输入到销售订单行中，并且将创建计划详细信息。

### <a name="define-the-revenue-price"></a>定义收入价格

物料组和已发布产品可以使用中间价格方法或折扣分配方法进行设置。 这两种方法都需要 **已发布产品** 页面上的各种设置：

- **收入分配是否可用** - 将此选项设置为 **是** 可在收入分配计算中包括已发布产品。 如果将此选项设置为 **否**，则定义中间价格后，已发布产品将使用中间价格。 如果未定义中间价格，则将使用销售订单行上的单价过帐到收入或延期收入。
- **收入类型** - 选择定义已发布产品的收入类型：

    - **基本** - 该物料是组织收入的主要来源。 此值为默认设置。
    - **非基本** - 该物料不是组织收入的主要来源。 使用中间价格设置时，将对当前价格进行“扣减”，以达到中间价格，然后进行分配。 例如，基本物料具有必须针对收入进行确认的固定价格。 如果存在折扣，折扣可能从基本物料收入中进行扣减，但扣减金额最多 **只能** 等于固定价格金额。 其余折扣从非基本物料的收入中扣除。 或者，折扣可能不从基本物料收入中扣减。
    - **过帐合同支持** - 物料支持对客户的销售中包括的其他元素。 收入价格在销售中包括的基本和非基本产品之间分配。 根据设置，PCS 物料可能不要求在销售订单行中定义合同开始日期和结束日期。

- **从扣减中排除** - 将此选项设置为 **是**，表示不能将物料的中间价格调整到所定义的最低百分比以下或者最高百分比之上。 任何收入价格都将获取自销售订单中包括的另一已发布产品的收入价格。 如果将此选项设置为 **否**，则可以调整或扣减物料的中间价格。请注意，如果售出多个设置为中间价格的物料，则在 **从扣减中排除** 选项设置为 **否** 的情况下，必须设置至少一个已发布产品。 在这种情形下，将存在至少一个可向其分配收入价格的任何差异的物料。
- **中间价格** - 将此选项设置为 **是**，表示应调整物料的收入价格，以便在收入价格低于您指定的最小容差或高于最大容差时等于中间价格，并且在 **从扣减中排除** 选项设置为 **否** 的情况下，扣减金额应分配到具有产品的行。

    - **最大容差** - 输入允许高于中间价格的百分比。
    - **最小容差** - 输入允许低于中间价格的百分比。

在配置已发布产品的设置完成后，必须通过手动在 **收入价格** 页面（转至 **收入确认 \> 设置 \> 库存设置 \> 已发布产品**，然后在操作窗格的 **销售** 选项卡的 **收入确认** 组中，选择 **收入价格**）上输入公平价值价格或中间价格，来定义收入价格。

[![收入价格。](./media/revenue-recognition-revenue-prices.png)](./media/revenue-recognition-revenue-prices.png)

此页面上手动定义的收入价格用于基于所定义的条件，来确定每个销售订单上的收入价格分配。 每个条件都与销售订单行匹配，以确定应在分配流程中使用的收入价格。

- **物料代码** 和 **物料关系** - 可以为单个产品或一组产品定义收入价格。 如果您在 **物料代码** 字段中选择 **表**，请在 **物料关系** 字段中选择已发布的产品。 如果您在 **物料代码** 字段中选择 **组**，请在 **物料关系** 字段中选择物料组。
- **帐户代码** 和 **帐户/组编号** - 可以为所有客户、单个客户或一组客户定义收入价格。 如果您在 **帐户代码** 字段中选择 **所有**，则将对所有客户使用该价格。 如果您在 **帐户代码** 字段中选择 **表**，请在 **帐户/组编号** 字段中选择客户。 如果您在 **帐户代码** 字段中选择 **组**，请在 **帐户/组编号** 字段中选择客户组。
- **货币** - 您必须为输入销售订单所采用的每个币种输入单独的收入价格。 例如，如果您当前以美元、加元和欧元销售，则必须以所有三个币种定义收入价格。 收入价格不会从一个币种（例如记帐币种）转换为您所使用的任何其他交易币种。
- **标价金额或百分比** - 指定将收入价格设置为标价的金额还是百分比。 如果您选择 **标价百分比**，则用户可以输入中间价格作为标价百分比而不是金额。 **标价百分比** 值仅用于设置为 PCS 物料的已发布产品。
- **收入分配价格** - 根据您在 **标价金额或百分比** 字段中选择的值，输入金额或百分比以表示用于在销售订单上的元素之间分配收入的收入价格。
- **开始日期** 和 **结束日期** - 输入收入价格所适用于的有效日期范围。 这些字段是可选的。

如果将 **总帐参数** 页面上的 **启用折扣分配方法** 选项设置为 **是**，以及如果将针对已发布产品的 **收入类型** 字段设置为 **过帐合同支持**，还必须指定已发布产品支持的物料。 此设置在 **设置基础** 页面（转到 **收入确认 \> 设置 \> 库存设置 \> 已发布产品**，然后在操作窗格的 **销售** 选项卡的 **收入确认** 组中，选择 **设置基础**）上进行。

在 **设置基础** 页面上，为物料支持的每个物料组添加一条记录。 发生收入分配时，将在 PCS 物料的基本和非基本部分之间分配收入价格。

### <a name="posting-profiles"></a>过帐模板

三种支持收入延期功能的其他过帐类型。 这些过帐类型在 **过帐** 页面（**收入确认 \> 设置 \> 库存和产品设置 \> 过帐**）的 **销售订单** 选项卡上设置。

- **延期收入** - 输入过帐到延期收入（而不是收入）的收入价格的主科目。 如果销售订单行具有收入计划，则将延期收入价格。
- **延期所售货物成本** - 如果还将延期收入，则输入将过帐到延期所售货物成本的所售货物成本金额的主科目。
- **部分发票收入结算** - 输入在对销售订单部分开票或者发生重新分配时所用结算科目的主科目。 当对销售订单完全开票时，此科目中的余额将恢复为 0（零）。

### <a name="bundles"></a>捆绑

捆绑物料是进行设置以便包括组件的唯一已发布产品。 此设置使用物料清单 (BOM) 功能进行。 当在销售订单上输入捆绑物料时，将使用各个组件确定收入价格和收入计划。 但是，客户的打印单据（例如销售订单和发票）将反映捆绑物料。

#### <a name="bundle-components"></a>捆绑组件

捆绑中包括的组件必须在 **已发布产品** 页面（**收入确认 \> 设置 \> 库存和产品设置 \> 已发布产品**）上进行设置。 这些组件为已发布的产品，并且它们必须以与物料清单中包括的产品相同的方式进行设置。 例如，某个已发布的产品可以是 **物料** 类型或 **服务** 类型的物料，但是它必须被分配到 **贮存的产品** 选项设置为 **是** 的物料模型组。 有关详细信息，请参阅物料清单物料的设置文档。

此外，还必须为收入确认设置组件，就像它们是可以在销售订单中单独销售的产品一样。 例如，确保为每个组件定义正确的收入价格，并且应为 PCS 物料设置价格基准。

#### <a name="bundle-items"></a>捆绑物料

设置捆绑物料时，必须在 **已发布产品** 页面（**收入确认 \> 设置 \> 库存和产品设置 \> 已发布产品**）上设置两个字段：

- 在 **工程师** 快速选项卡的 **生产类型** 字段中，必须将物料设置为物料清单物料。
- 在 **常规** 快速选项卡的 **捆绑** 字段中，必须将物料标记为捆绑物料。

然后，必须在 **物料清单版本** 页面（转到 **收入确认 \> 设置 \> 库存和产品设置 \> 已发布产品**，然后在操作窗格的 **工程师** 选项卡的 **物料清单** 组中，选择 **物料清单版本**）上将组件分配到捆绑/物料清单父物料。 有关详细信息，请参阅物料清单的设置文档。

[![已发布产品、物料清单计划。](./media/revenue-recognition-bom-scheduleds.jpg)](./media/revenue-recognition-bom-scheduleds.jpg)

如果设置捆绑销售父物料和捆绑销售组件以进行分配，则捆绑销售收入价格将基于其收入贡献百分比而分配到组件。

## <a name="project-setup"></a>项目设置

收入确认也可用于通过时间和材料项目创建的销售订单。 对于源自项目的销售订单，您必须在用于过帐项目发票的项目过帐模板中定义主科目。 主科目在 **分类帐过帐设置** 页面（**收入确认 \> 设置 \> 项目设置 \> 分类帐过帐设置**）中定义。

- **延期发票收入**（在 **收入科目** 下）- 输入将过帐到延期收入（而不是收入）的收入价格的主科目。 如果销售订单行具有收入计划，则将延期收入价格。
- **延期成本**（在 **成本科目** 下）- 如果还将延期收入，则输入将过帐到延期所售货物成本的所售货物成本金额的主科目。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]