---
title: 计费计划功能
description: 本主题介绍了计费计划的功能，如定价方法、提价和折扣、对齐日期、按比例分配、反向计费和拆分物料组。
author: JodiChristiansen
ms.date: 11/04/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: twheeloc
ms.custom: 539093
ms.search.region: Global
ms.author: jchrist
ms.search.validFrom: 2021-11-05
ms.dyn365.ops.version: 10.0.24
ms.openlocfilehash: 0ce323565a94e8e70d90a65b7a3143e984a1c159
ms.sourcegitcommit: a58dfb892e43921157014f0784bd411f5c40e454
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/04/2022
ms.locfileid: "8700715"
---
# <a name="billing-schedule-features"></a>计费计划功能

[!include [banner](../includes/banner.md)]

本主题介绍计费计划和计费计划行的功能。 其中介绍了用于定价的不同方法、如何使用提价和折扣以及如何冲销计费周期。 另外还包括按比例分配计算和拆分物料组的示例。

## <a name="pricing-methods"></a>定价方法

您可以使用以下定价方法之一来计算物料的单价：

* 平面
* 标准
* 层
* 固定层级

### <a name="flat-pricing"></a>固定定价

使用固定定价方法时，可以将 **所有计费计划** 页面上的计费计划行物料的单价编辑为您需要的任何值。 **计价单位** 值始终为 **1**。 因此，物料的 **单价** 和 **净额** 值是相同的。

### <a name="standard-pricing-without-a-trade-agreement"></a>标准定价（无贸易协议）

在没有贸易协议的情况下使用标准定价方法时，您可以通过在 **发布产品详细信息** 页面上选择 **产品信息管理** 来设置计费计划行物料的单价。 单价显示在 **基本销售价** 部分。 它的计算方式为 *价格* &divide; *价格数量*。

### <a name="standard-pricing-with-a-trade-agreement"></a>标准定价（有贸易协议）

以下示例显示了存在贸易协议时的标准定价计算。 您可以从 **发布产品详细信息** 页面创建贸易协议。

这两个示例都使用具有以下价格范围的物料。

| 最少数量 | 最多数量 | 度量单位 | 价格 | 计价单位 |
|---|---|---|---|---|
| 0 | 100 | 每个 | 1.50 | 1 |
| 100 | 200 | 每个 | 1.25 | 1 |
| 200 | 999999 | 每个 | 1.00 | 1 |

**示例 1**

发票数量为 250，采用标准定价方法。 由于数量在 200–999,999 价格数量范围内，因此单价为 1.00。 

净额按以下方式计算：

*净额* = (*数量* &times; *价格*) &divide; *价格单位* = (250 &times; 1.00) &divide; 1 = 250

**示例 2**

发票数量为 100，采用标准定价方法。 由于发票数量在 0–100 价格数量范围内，因此单价为 1.50。

> [!NOTE]
> 发票数量在 0-100 范围内而不是 100-200 范围内，因为在标准数量匹配行为中，如果数量 *大于或等于*“最少”数量并 *小于*“最多”数量。

净额按以下方式计算：

*净额* = (100 &times; 1.50) &divide; 1 = 150

### <a name="tier-pricing"></a>分层定价

对于以下示例，物料具有以下价格范围。

| 最少数量 | 最多数量 | 度量单位 | 价格 | 计价单位 |
|---|---|---|---|---|
| 0 | 100 | 每个 | 1.50 | 10 |
| 100 | 200 | 每个 | 1.25 | 10 |
| 200 | 999999 | 每个 | 1.00 | 10 |

如果发票数量为 250，使用分层定价方法，物料的价格根据定价范围按以下方式计算：

- **前 100 个物料：** 100 &times; 1.50 = 150.00
- **下 100 个物料：** 100 &times; 1.25 = 125.00
- **其余物料：** 50 &times; 1.00 = 50.00

净额按以下方式计算：

*净额* = (150.00 &divide; 10) + (125.00 &divide; 10) + (50.00 &divide; 10) = 15.00 + 12.50 + 5.00 = 32.50

计算净额后，将净额与数量相除计算单价：

*单价* = 32.50 &divide; 250 = 0.13

### <a name="flat-tier-pricing"></a>固定分层定价

对于以下示例，物料具有以下价格范围。

| 最少数量 | 最多数量 | 度量单位 | 固定层级金额 | 计价单位 |
|---|---|---|---|---|
| 0 | 50 | 每个 | 100.00 | 50 |
| 50 | 200 | 每个 | 150.00 | 200 |

下表显示了购买的不同数量的发票和单价。 先计算了净额，后计算了单价。

| 发票 | 已采购的数量 | 单位价格 | 净额 |
|---|---|---|---|
| 1 | 25 | 2.00 &divide; 25 = 0.08 | 100 &divide; 50 = 2.00 |
| 2 | 20 | 2.00 &divide; 20 = 0.10 | 100 &divide; 50 = 2.00 |
| 3 | 50 | 2.00 &divide; 50 = 0.04 | 100 &divide; 50 = 2.00 |
| 4 | 60 | 0.75 &divide; 60 = 0.0125 = 0.01 | 150 &divide; 200 = 0.75 |

## <a name="escalations-and-discounts"></a>提价和折扣

*提价* 是尚未为其创建发票的未来计费周期的价格上涨。 *折扣* 是尚未为其创建发票的未来计费周期的价格下降。

在订阅计费中，提价和折扣不能追溯应用于计费计划。 例如，您不能将提价应用到三个月前的计费计划并进行处理。 换言之，您不能应用三个月前发生的价格上涨。

您可以在以下任一位置对计费计划或计费计划行应用提价或折扣：

- **所有/有效计费计划** 列表页
- 某个计费计划
- 某个计费计划行

### <a name="apply-an-escalation-or-discount"></a>应用提价或折扣

要将提价或折扣应用于计费计划，请按照以下步骤操作。

1. 选择计费计划或计费计划行。
2. 在 **提价和折扣** 选项卡或计费计划行中选择 **提价和折扣**。
3. 如果使用消费者价格指数来计算提价或折扣，在 **消费者价格指数计算** 字段中选择一个值。
4. 选择 **新建** 添加提价或折扣行。
5. 对于折扣，选择 **折扣** 复选框。 对于提价，保留 **折扣** 复选框清除状态不变。
6. 设置 **开始日期** 和 **频率** 字段。
7. 对于使用未计费收入功能的延期物料，设置 **结束日期** 字段。
8. 设置 **百分比**、**金额** 或 **消费者价格指数计划** 字段。
9. 设置 **结束日期** 字段。
10. 选择 **确定**。
11. 对您需要的每个额外的提价或折扣行重复步骤 4 到 10。

### <a name="fields-on-the-billing-schedule-lines-page"></a>计费计划行页面上的字段

**计费计划行** 页面包含以下字段。

| 字段 | Description |
|---|---|
| 物料编号 | 计费计划行的物料编号。 仅当从计费计划行物料打开页面时，此字段才可用。 |
| 消费者价格指数计算 | <p>选择用于计算消费者价格指数提价的方法：</p><ul><li>**先前消费者价格指数** – 使用之前的消费者价格指数值进行提价计算。</li><li>**基本消费者价格指数** – 使用基本消费者价格指数值进行提价计算。</li></ul> |
| **行** 网格 | |
| 折扣 | <p>设置复选框以指定金额的更改是提价还是折扣：</p><ul><li>**已选择** – 更改将折扣应用于计费计划或计费计划行。</li><li>**已清除** – 更改将提价应用于计费计划或计划行。</li></ul><p>对于使用未计费收入功能的物料，无法更改此复选框的设置。 此外，折扣不能应用于使用收入拆分的物料。</p> |
| 开始日期 | 选择提价或折扣的开始日期。 |
| 频率 | 选择提价或折扣的频率：**无**、**每月**、**每季度**、**每半年** 或 **每年**。 |
| 百分比 | 指定提价或折扣的百分比。 |
| 金额 | 指定提价或折扣的金额。 |
| 消费者价格指数计划 | 选择用于计算的消费者价格指数计划。 |
| 结束日期 | <p>选择提价或折扣的结束日期。</p><p>**注意：** 对于使用未计费收入功能的物料，此字段是必需的。</p> |
| 延期计划编号 | <p>延期计划编号。</p><p>仅当从计费计划行打开页面时，此字段才可用。</p> |
| 日记帐批处理号 | <p>日记帐的批处理号。</p><p>仅当从计费计划行打开页面时，此字段才可用。</p> |
| 总折扣金额 | <p>网格中所有行的折扣金额的总和。</p><p>仅当从计费计划行打开页面时，此字段才可用。</p> |
| 当前短期未计费收入金额 | <p>当前的短期未计费收入金额。</p><p>在 **定期合同计费参数** 页面上选择短期延期方法并且在 **未计费收入设置** 页面上设置了行物料的帐户时，将显示此金额。</p> |
| 当前长期未计费收入金额 | <p>当前的长期未计费收入金额。</p><p>在 **定期合同计费参数** 页面上选择短期延期方法并且在 **未计费收入设置** 页面上设置了行物料的帐户时，将显示此金额。</p> |

## <a name="proration-examples"></a>按比例分配示例

按比例分配计算可以基于天数或月数。 用于按比例分配计算的方法在 **定期合同计费参数** 页面上设置。 在以下情况下，按比例分配方法会影响计费计划的金额计算方式：

- 初始创建
- 应用提价或折扣
- 终止
- 放置或删除暂停
- 增加支持或续订

按比例分配方法还会影响每月定期收入 (MRR) 报表的计算。

### <a name="example-1"></a>示例 1

计费计划的年度金额是 $5,000。 开始日期为 2019 年 8 月 12 日，结束日期为 2019 年 12 月 22 日。 计费频率是每年。 按比例分配的金额按以下方式计算，具体取决于使用的是每日还是每月计算方法：

- **日常**

    - *天数* = *结束日期* – *开始日期* + 1 = 133 天
    - *一年中的天数* = 2020 年 8 月 11 日 – 2019 年 8 月 12 日 + 1 = 366 天
    - *按比例分配的金额* = 5,000 &times; (133 &divide; 366) = 1816.94

- **月度**

    - *开始月份部分* = (31 – 12 + 1) &divide; 31 = 20 &divide; 31
    - *中间月* = 3
    - *结束月份部分* = 22 &divide; 31
    - 按比例分配的金额 = 5,000 &divide; 12 &times; \[(20 &divide; 31) + 3 + (22 &divide; 31)\] = 1814.52

### <a name="example-2"></a>示例 2

计费计划的年度金额是 $12,000。 开始日期为 2019 年 8 月 1 日，结束日期为 2019 年 12 月 31 日。 计费频率是每年。 根据计算方法，按比例分配的金额按以下方式计算：

- **日常**

    - *天数* = *结束日期* – *开始日期* + 1 = 153 天
    - *一年中的天数* = 2020 年 7 月 31 日 – 2019 年 8 月 1 日 + 1 = 366 天
    - *按比例分配的金额* = 12,000 &times; (153 &divide; 366) = 5016.39

- **每月（整月）**

    - *月数* = 5
    - *总月数* = 12
    - *按比例分配的金额* = (12,000 &times; 5) &divide; 12 = 5,000

## <a name="reversing-a-period-billing"></a>冲销周期计费

对于此示例，计费计划只有一行：

- 从 1 月到 12 月的 12 个月，每月进行一次计费。
- 已为截至 4 月的所有期间创建了发票。

您想要冲销 4 月计费周期的发票。

如果还未为 4 月计费周期创建销售发票，您可以删除销售订单。 在这种情况下，详细信息的 **已计费** 状态将被删除。 但是，由于已为计费周期创建了发票，因此无法清除详细信息的 **已计费** 状态。 因此，要冲销 4 月的计费，您必须为该行创建抵消贷方通知单。

1. 在 **所有计费计划** 页面上，为同一个物料创建一个计划行。
2. 将物料的 **数量** 值更改为原始数量的负数。
3. 将 **计费频率** 字段设置为 **一次**。
4. 更新开始日期和结束日期，使其与您要为其创建贷方通知单的计费明细行的日期相匹配。 对于此示例，将开始日期设置为 2019 年 4 月 1 日，将结束日期设置为 2019 年 4 月 30 日。
5. 保存所做的更改。
6. 打开 **生成发票** 页面，创建包含指定期间的贷方通知单的销售订单。
7. 可选：过帐发票。

当您查看计费计划的行时，您会注意到新行具有指向贷方通知单的链接。 原始行仍将具有指向原始的 4 月发票的链接。

## <a name="split-item-group-examples"></a>拆分物料组示例

对于此示例，已设置以下设置：

- 在 **定期合同计费参数** 页面，选择了 **按物料组拆分**，**唯一计划类型** 字段设置为 **客户**。
- 创建了三个物料组：**PREFIX**、**DATAHUB** 和 **SPP**。
- 客户 US-001 有多个计费计划，其中的物料组为 PREFIX 或 DATAHUB。
- 客户 US-002 有多个计费计划，其中的物料组为 PREFIX 或 SPP。

| 计费计划编号 | 客户 | 物料组 |
|---|---|---|
| SCH001 | US-001 | PREFIX |
| SCH002 | US-001 | DATAHUB |
| SCH003 | US-002 | PREFIX |
| SCH004 | US-002 | SPP |

客户 US-001 购买了属于 PREFIX 物料组的续订物料。 此交易记录是一个新的销售订单。

| 销售订单编号 | 客户 | 主要物料 | 续订物料 | 续订物料组 | 计费计划编号 |
|---|---|---|---|---|---|
| SO0001 | US-001 | D0001 | D0002 | PREFIX | SCH001 |

过帐销售订单的发票时，会将续订物料添加到客户的现有计费计划 (SCH001)。 此计费计划使用 PREFIX 物料组。 属于同一物料组的所有续订物料都会被放入同一计费计划。

**页眉**
 
| 计费计划编号 | 客户 | 物料组 |
|---|---|---| 
| SCH001 | US-001 | PREFIX |

**行**

| 计费计划编号 | 客户 | 物料组 |
|---|---|---|
| SCH001 | US-001 | D0002 |

客户 US-001 现在购买了属于 SPP 物料组的续订物料。 此交易记录是一个新的销售订单。

| 销售订单编号 | 客户 | 主要物料 | 续订物料 | 续订物料组 | 计费计划编号 |
|---|---|---|---|---|---|
| SO0002 | US-001 | D0003 | D0004 | SPP | |

目前，客户 US-001 没有使用 SPP 物料组的计费计划。 因此，将创建新的计费计划。

**页眉**

| 计费计划编号| 客户 | 物料组 |
|---|---|---|
| SCH005 | US-001 | SPP |

**行**

| 计费计划编号 | 客户 | 物料组 |
|---|---|---|
| SCH005 | US-001 | D0004 |

### <a name="multiple-billing-schedules-for-the-same-end-user-and-customer"></a>同一最终用户和客户的多个计费计划

对于此示例，已设置以下设置：

- 在 **定期合同计费参数** 页面，选择了 **按物料组拆分**，**唯一计划类型** 字段设置为 **最终用户**。
- 在 **最终用户** 页面上，设置了以下客户和最终用户关系。

    | 客户帐户 | 最终用户帐户 |
    |---|---|
    | US-001 | US-221 |

为客户和最终用户组合创建了多个计费计划。 由于在 **定期合同计费参数** 页面上选择了 **按物料组拆分**，因此可以为同一客户和最终用户关系创建多个计费计划。

| 计费计划编号 | 客户 | 最终用户帐户 | 标头物料组 |
|---|---|---|---|
| SCH005 | US-001 | US-221 | IG1 |
| SCH006 | US-001 | US-221 | IG2 |
| SCH007 | US-001 | US-221 | IG3 |

在 **物料设置** 页面上，您可以创建支持和续订物料关系。

| 物料代码 | 物料关系 | 支持项 | 续订物料 | 续订物料组 |
|---|---|---|---|---|
| 表 | D001 | ITEM27 | D007 | IG1 |
| 表 | D002 | ITEM28 | D005 | IG2 |
| 表 | D003 | ITEM29 | D006 | IG3 |

您现在将为客户 US-001 创建销售订单。 此销售订单包含来自 **物料设置** 页面的物料。 创建销售订单时，打开 **支持和续订流程** 页面，并设置 **最终用户帐户** 字段以及续订物料的任何其他的必需信息。

创建和过帐交易记录的发票时，会为客户/最终用户和物料组组合创建不同的计费计划。 可以将同一销售订单上的多个行分配给同一计费计划。

| 销售订单编号 | 客户 | 最终用户帐户 | 主要物料 | 支持项 | 续订物料 | 计费计划编号 |
|---|---|---|---|---|---|---|
| SO0001 | US-001 | US-221 | D001 | ITEM27 | D007 | SCH005 |
| SO0001 | US-001 | US-221 | D002 | ITEM28 | D005 | SCH006 |
| SO0001 | US-001 | US-221 | D003 | ITEM29 | D006 | SCH005 |
