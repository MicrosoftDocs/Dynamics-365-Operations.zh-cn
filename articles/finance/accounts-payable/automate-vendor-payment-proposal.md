---
title: 自动运行供应商付款方案
description: 本主题说明按重复执行的计划向供应商付款的组织如何自动运行生成供应商付款方案的流程。
author: kweekley
ms.date: 04/08/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 262034
ms.assetid: 9db38b3f-26b3-436e-8449-7ff243568a18
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2020-04-08
ms.dyn365.ops.version: 10.0.11
ms.openlocfilehash: 1c5012fdc4f3bfab3f91adfee1eab758dd9c1a0f
ms.sourcegitcommit: 5aecb04178e45e1fdea032b3ef3ce338332005dc
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/12/2022
ms.locfileid: "7966707"
---
# <a name="automate-vendor-payment-proposals"></a>自动运行供应商付款方案

[!include [banner](../includes/banner.md)]

按重复执行的计划向供应商付款的组织现在可以自动运行生成供应商付款方案的流程。 供应商付款方案自动化定义以下详细信息：

- 付款方案何时运行
- 使用哪些条件来选择应支付的账单
- 在哪个供应商付款日记帐中保存生成的付款

付款方案自动化不会自动过帐付款。 因此，您可以继续使用当前用于审核所创建付款的任何验证和工作流程。

> [!NOTE]
> 必须在功能管理中启用 **供应商付款方案自动化** 功能才能利用此功能。 

## <a name="define-the-occurrence-of-vendor-payment-proposals"></a>定义供应商付款方案的执行

供应商付款方案自动化使用流程自动化框架。 不同的业务流程使用此框架来定义所选流程的重复执行。 对于供应商付款方案，可以在 **应付帐款 \> 付款设置 \> 流程自动化** 下访问自动化。

首先，使用 **创建新流程** 自动化选项，然后选择 **供应商付款方案**。 然后，向导将指导您完成设置供应商付款方案的流程。

## <a name="general-page"></a>常规页面

在向导的 **常规** 页面上，输入要创建的供应商付款方案的名称。 例如，如果您在星期一通过支票向所有国内供应商付款，请输入描述性名称，如 **国内\_支票**。 您输入的名称显示在 **供应商付款** 工作区的流程自动化周视图中。

接下来，定义所创建的付款日记帐的所有者。 所有者通常是应付帐款 (AP) 付款职员，负责创建之后的付款日记帐。

此页面上的其余设置是通用的，用于定义此版本的供应商付款方案的执行模式。 例如，如果某个执行是针对星期一的支票付款，您可以对其进行定义以使其每周运行一次，并且可以选择“星期一”作为它运行的星期日期。 您还可以输入较早的计划时间，如凌晨 2:00，这样流程自动化将在下一个工作日开始之前完成。

您务必要了解您正在使用向导来定义何时处理供应商付款方案。 而不是在定义何时生成、打印和过帐供应商付款。 在周视图中，供应商付款方案的流程自动化会在在执行模式中选择的日期显示。

有关 **常规** 页面上其他字段的详细信息，请参阅流程自动化文档。

## <a name="vendor-payment-proposal-page"></a>供应商付款方案页

向导中的下一页是 **供应商付款方案** 页。 此页用于定义选择应支付的供应商账单的条件。 通常，在供应商付款日记帐的付款方案中可以找到相同选项。 不过，有一些例外。 例如，此页面上的所有日期都必须定义为相对日期，因为付款方案每次运行时付款方案日期都会更改。

### <a name="journal-name"></a>日记帐名称

**日记帐名称** 字段定义创建供应商付款的日记帐名称。 供应商付款方案自动化的结果将在定义的日记帐中创建付款，但日记帐不会过帐。

### <a name="from-date-and-to-date"></a>“开始”日期和“结束”日期

不是通过定义“开始”日期和“结束”日期来根据到期日或现金折扣日期选择发票，您必须使用 **定义结束日期条件** 选项和 **结束日期的调整天数** 字段定义“结束”日期。 付款方案自动化中没有“开始”日期的概念。

默认情况下，**定义结束日期条件** 选项设置为 **否**。 如果使用此默认值，流程将在运行时选择所有要付款的账单，因为未定义“结束”日期。

如果您将 **定义结束日期条件** 选择设置为 **是**，请使用 **结束日期的调整天数** 字段定义根据指定的流程运行日期之前或之后的天数选择账单的日期。 此数字可以是正数、负数或 0（零）。 然后，系统将支付其到期日或现金折扣日期是指定的流程运行日期之前或之后天数的账单。 例如，对于在星期五或星期五之前到期的所有账单，付款系列将在星期三创建通过支票支付所有供应商的付款。 在此例中，将 **结束日期的调整天数** 设置为 **2**。 当付款方案的执行在 3 月 25 日（星期三）运行时，将选择所有到期日期或现金折扣日期在 3 月 27 日或之前的账单进行付款。

### <a name="minimum-payment-date"></a>最小付款日期

在创建付款时，最早付款日期定义使用的最早日期。 您必须先将 **定义最早付款日期条件** 设置为 **是**。 此设置使您可以使用最早付款日期功能。 如果此选项设置为 **是**，则使用 **最早付款日期的调整天数** 字段来根据指定的流程运行日期之前或之后的天数定义最早付款日期。 此数字可以是正数、负数或 0（零）。 例如，付款系列在星期三生成付款，以包括最早付款日期为前一个星期一的所有付款。 在这种情况下，将 **最早付款日期的调整天数** 设置为 **-2**。

以下示例显示了“结束”日期字段和最早付款日期字段如何一起使用。 付款方案自动化设置为在星期三运行。 **结束日期的调整天数** 字段根据到期日期设置为 **1** 来定义“结束”日期。 **最早付款日期的调整天数** 设置为 **-2**。 如果付款流程自动化从 3 月 25 日（星期三）开始，所有在 3 月 26 日或之前到期的账单都将包含在付款方案中。 付款方案将通过以下方式生成：

- 所有 3 月 23 日或之前到期的账单的付款日期将为 3 月 23 日。
- 3 月 24 日到期的账单的付款日期将为 3 月 24 日。
- 3 月 25 日到期的账单的付款日期将为 3 月 25 日。
- 3 月 26 日到期的账单的付款日期将为 3 月 26 日。

### <a name="summarized-payment-date"></a>汇总付款日期

汇总付款日期仅在账单的付款方式的 **期间** 字段设置为 **总计** 时使用。 如果您的付款方式的 **期间** 字段设置为 **总计**，则必须将 **定义汇总付款日期条件** 选项设置为 **是**。 如果此选项设置为 **是**，则使用 **汇总付款日期的调整天数** 字段来根据指定的流程运行日期之前或之后的天数定义汇总付款日期。 此数字可以是正数、负数或 0（零）。 例如，系列在星期三生成付款，公司希望在星期三创建汇总付款。 在这种情况下，将 **汇总付款日期的调整天数** 设置为 **0**。

### <a name="records-to-include"></a>要包括的记录

这里仍然可以为付款方案定义筛选器选项。 如果定义了筛选器，向导页面不会显示筛选条件。 不过，可以通过重新打开筛选器来查看条件。

方案的其余字段与对供应商付款日记帐中的付款方案的作用一样。 有关其他字段的信息，请参阅[使用付款方案创建供应商付款](create-vendor-payments-payment-proposal.md)。

> [!NOTE]
> 某些国家/地区特定字段和某些公共部门字段在供应商付款方案自动化中尚不可用。

我们建议您根据需求评估自动化是否对您的组织有利。

## <a name="view-the-results-of-a-vendor-payment-proposal-automation"></a>查看供应商付款方案自动化结果

创建供应商付款方案自动化系列后，每项付款的执行将显示在流程自动化周视图中。 对于供应商付款，流程自动化周视图已经添加到 **供应商付款** 工作区和 **流程自动化** 页面。

[![供应商付款工作区中的流程自动化周视图。](./media/vendor-payment-proposal-1.png)](./media/vendor-payment-proposal-1.png)

**供应商付款** 工作区中的流程自动化周视图仅显示供应商付款方案自动化。 它显示登录用户具有安全权限的所有法人当前一周的所有付款执行。 例如，如果 AP 付款职员负责 USMF 和 USSI 公司的付款，其将看到这两家公司的供应商付款方案自动化的执行，但看不到其他公司的。

[![USMF 和 USSI 公司的流程自动化周视图。](./media/vendor-payment-proposal-2.png)](./media/vendor-payment-proposal-2.png)

每个执行将显示已创建或将创建付款日记帐的公司。 如果付款是使用集中付款创建的，显示的公司是将创建付款的公司。 执行并不一定显示将支付哪些公司的账单。

每个执行的名称也会显示，以帮助识别付款方案。

此外，还会显示每个执行的状态。 使用以下状态：

- **已计划** – 付款方案已计划，但尚未运行。
- **错误** – 付款方案已运行，但发生错误。 您可以通过选择 **查看结果** 按钮来查看错误。
- **已完成** – 付款方案已成功运行。 您可以通过选择 **查看付款** 链接来查看付款。 此链接将打开执行所创建的付款日记帐。

付款创建后，您可以在日记帐中查看付款金额。 金额以交易货币显示。 例如，如果付款日记帐同时包含美元和加元的付款，将显示每种货币的付款总计。 

通过流程自动化创建付款日记帐后，可以将其删除。 如果付款被完全删除，将发生以下事件：

- 当周的流程自动化状态保持为 **已完成**。
- 流程将删除付款总计，**查看付款** 链接将被替换为 **查看结果** 按钮。
- 当查看结果时，您会收到一条消息，指示原始日记帐已删除。

付款删除后，账单会再次打开进行付款。 然后可以创建新执行来重新支付账单。

## <a name="edit-a-vendor-payment-proposal-automation"></a>编辑供应商付款方案自动化

使用流程自动化框架，您可以编辑付款、系列以及为付款方案创建的执行。 系列可以从 **流程自动化** 页面或流程自动化周视图进行编辑。 例如，如果 AP 经理决定在星期三而不是星期一为国内供应商生成所有支票，其可以在周视图中找到一个执行，并可以选择 **查看/编辑 – 系列**。 如果编辑系列，系统会提示您指定是对所有现有执行还是仅对新执行进行更改。 状态为 **已完成** 的历史执行，或 **错误** 状态的执行不会被更改。

您还可以添加新执行或更改现有执行。 例如，下一次付款方案执行计划在 1 月 1 日（星期三）运行，但是此日期是假日。 您可以从流程自动化周视图或 **流程自动化** 页面更改此执行。 一个页面将打开，显示计划详细信息和付款方案的条件。 在这里，您可以编辑计划的时间和日期。 如果需要更改，您还可以编辑付款方案的条件。 例如，如果您将付款执行的计划日期从 1 月 1 日更改为 1 月 2 日，您可能还需要更改“结束”日期的相对日期。

您还可以禁用执行或系列。 要禁用执行并暂停它的处理，请在流程自动化周视图中选择它，然后选择 **禁用**。 您可以在 **流程自动化** 页面禁用系列。

## <a name="security-for-payment-proposal-automations"></a>付款方案自动化的安全性

已为供应商付款方案自动化添加了以下职责和特权。 这些职责和特权是默认的安全设置，但可以根据组织的要求进行更改。 例如，如果不仅 AP 经理而且 AP 付款职员也可以编辑和创建计划的重复执行，请为具有 AP 付款职员角色的人员分配 **维护计划执行** 职责。

| 责任                              | 角色                                                                       | 特权 |
|-----------------------------------|----------------------------------------------------------------------------|------------|
| 维护计划系列          | 应付帐款经理                                                   | 此职责通过以下特权授予创建和维护付款方案自动化系列及执行的权限：<ul><li>维护计划执行</li><li>维护计划系列</li><li>ProcessScheduleOccurrenceListMaintain</li><li>查看执行周视图</li></ul> |
| 计划执行查询 | 应付帐款付款职员、应付帐款集中付款职员 | 此职责通过以下特权授予查看付款方案自动化执行的权限：<ul><li>查看计划执行</li><li>查看执行周视图</li></ul> |
| 计划系列查询      | None                                                                       | 此职责通过以下特权授予查看系列和执行的设置的权限：<ul><li>查看计划执行</li><li>查看执行列表页</li><li>查看执行周视图</li></ul>|
| 维护计划执行     | None                                                                       | 此职责通过以下特权授予创建和维护执行的权限：<ul><li>维护计划执行</li><li>查看执行周视图</li></ul> |


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
