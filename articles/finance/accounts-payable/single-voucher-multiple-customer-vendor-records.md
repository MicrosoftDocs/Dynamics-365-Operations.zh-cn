---
title: 具有多个客户或供应商记录的一个凭证
description: 此主题概述了当您过帐具有多个客户或供应商记录的一个凭证时发生的情况。 此功能在将来发布的 Microsoft Dynamics 365 Finance 版本中将不再提供，因此，鉴于其对结算处理的会计影响，我们不建议使用这种过帐方法。
author: abruer
manager: AnnBe
ms.date: 08/22/2017
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 222534
ms.assetid: d4df11ce-4d36-4c66-8230-f5fc58e021bc
ms.search.region: global
ms.author: shpandey
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 01fd382a97f86e93e4ab91759d35c65fae7447c5
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/15/2021
ms.locfileid: "4971995"
---
# <a name="single-voucher-with-multiple-customer-or-vendor-records"></a>具有多个客户或供应商记录的一个凭证

[!include [banner](../includes/banner.md)]

此主题概述了当您过帐具有多个客户或供应商记录的一个凭证时发生的情况。 此功能在将来发布的版本中将不再提供，因此，鉴于其对结算处理的会计影响，我们不建议使用这种过帐方法。 

对多个客户或供应商使用一个凭证的一些常见示例包括在客户之间转移余额，以及同一组织中的客户与供应商之间的净余额结算。 

可以使用以下其中一种方法输入包含多个客户或供应商的凭证：

-   使用选择了 **仅一个凭证号** 选项的日记帐，以便添加到日记帐的每一行都包含在同一个凭证中。
-   使用包含多个客户或供应商的不具有对方会计科目的多行凭证。
-   输入科目和对方科目为供应商/供应商、客户/客户、供应商/客户或客户/供应商的凭证。

此主题说明对具有多个客户或供应商的一个凭证过帐时如何处理结算。 此外，此主题还提供了帮助您了解如何避免使用具有多个客户或供应商的一个凭证的解决方法。 具体而言，提供了一些示例说明由于使用具有多个客户或供应商的一个凭证而受到影响的两种常见的结算方案：

-   现金折扣会计
-   重估会计

## <a name="how-does-settlement-impact-single-voucher-usage"></a>结算如何影响单个凭证的使用
对含有多个客户或供应商记录的一个凭证过帐时，创建含有多个应收帐款或应付帐款余额的一个会计凭证。 在结算流程中，原始会计条目用于创建现金折扣、或有收益、已有损益和原始单据减免汇总科目的会计条目。 例如，如果在结算供应商向发票付款时使用现金折扣，则现金折扣会计必须从原始发票过帐到应付帐款会计科目。 如果原始发票在含有多个供应商记录的凭证中过帐，则对原始会计汇总。 在这种情况下，因为没有办法访问一个凭证中的每个供应商交易记录的详细会计条目，因此没有办法确定用户打算如何对现金折扣入帐。

### <a name="one-voucher-with-multiple-vendors-and-the-impact-on-cash-discount-accounting"></a>具有多个供应商的一个凭证以及对现金折扣会计的影响

在以下示例中，在 **普通日记帐** 页面中在一个凭证的总帐中记录多个供应商发票。 这些发票在多个科目维度之间分配。

| 凭证 | 帐户类型 | 科目  | 说明 | 借记 | 贷记 |
|-------------|------------------|--------------|-----------------|-----------|------------|
| GNJL001     | 供应商           | 1001         | INV1            |           | 100.00     |
| GNJL001     | 供应商           | 1001         | INV2            |           | 200.00     |
| GNJL001     | 供应商           | 1001         | INV3            |           | 300.00     |
| GNJL001     | 分类帐           | 606300-001-- | INV1            |   50.00   |            |
| GNJL001     | 分类帐           | 606300-002-- | INV1            |   50.00   |            |
| GNJL001     | 分类帐           | 606300-003-- | INV2            | 200.00    |            |
| GNJL001     | 分类帐           | 606300-004-- | INV3            | 300.00    |            |

在过帐后，创建一个凭证。

| 凭证 | 科目  | 过帐类型 | 用交易币种表示的金额 |
|-------------|--------------|------------------|------------------------------------|
| GNJL001     | 606300-001-- | 分类帐日记帐   | 50.00                              |
| GNJL001     | 606300-002-- | 分类帐日记帐   | 50.00                              |
| GNJL001     | 606300-003-- | 分类帐日记帐   | 200.00                             |
| GNJL001     | 606300-004-- | 分类帐日记帐   | 300.00                             |
| GNJL001     | 200110-001-  | 供应商余额   | -100.00                            |
| GNJL001     | 200110-001-  | 供应商余额   | -200.00                            |
| GNJL001     | 200110-001-  | 供应商余额   | -300.00                            |

注意凭证在单个凭证中包含供应商余额过帐类型的三个条目。 没有办法表示 606300-001 的 50.00 借记和 606300-002 的 50.00 借记打算用于抵消供应商余额条目 200110-001。 这是因为用户在一个凭证中输入多个供应商记录。

通过本例，我们可以分析使用一个凭证对下游结算会计的影响。 假设您支付 200.00 发票中的 197.00，使用现金折扣 3.00。 注意现金折扣帐户值在发票凭证的支出帐户的所有维度之间分配。 这是因为使用一个凭证对上述发票过帐，没有指示用户打算如何在一个凭证中将费用分配与供应商余额相关联。

| 凭证 | 科目  | 过帐类型     | 借记 | 贷记 |
|-------------|--------------|----------------------|-----------|------------|
| APPAYM001   | 200110-001-  | 供应商余额       | 197.00    |            |
| APPAYM001   | 110110-001-  | 银行                 |           | 197.00     |
| 14000056    | 520200-001-- | 供应商 - 现金折扣 |           | 0.25       |
| 14000056    | 520200-002-- | 供应商 - 现金折扣 |           | 0.25       |
| 14000056    | 520200-003-- | 供应商 - 现金折扣 |           | 1.00       |
| 14000056    | 520200-004-- | 供应商 - 现金折扣 |           | 1.50       |
| 14000056    | 200110-001-  | 供应商余额       | 3.00      |            |

如果用户不希望现金折扣在原始发票的所有费用分配中进行分配，则应使用多个凭证（而不是一个凭证）记录发票。 此示例说明如何在总帐中输入多个凭证（而不是使用一个凭证），如此示例开头所示。

| 凭证 | 帐户类型 | 科目  | 说明 | 借记 | 贷记 | 对方类型 | 对方科目 |
|-------------|------------------|--------------|-----------------|-----------|------------|-----------------|--------------------|
| GNJL001     | 供应商           | 1001         | INV1            |           | 100.00     | 分类帐          | &lt;空白&gt;      |
| GNJL001     | 分类帐           | 606300-001-- | INV1            |   50.00   |            | 分类帐          | &lt;空白&gt;      |
| GNJL001     | 分类帐           | 606300-002-- | INV1            |   50.00   |            | 分类帐          | &lt;空白&gt;      |
| GNJL002     | 供应商           | 1001         | INV2            |           | 200.00     | 分类帐          | 606300-003--       |
| GNJL003     | 供应商           | 1001         | INV3            |           | 300.00     | 分类帐          | 606300-004--       |

现在，INV2 支付后，将录入以下条目。 注意现金折扣的财务维度跟随相关费用的财务维度。

| 凭证 | 科目  | 过帐类型     | 借记 | 贷记 |
|-------------|--------------|----------------------|-----------|------------|
| APPAYM001   | 200110-001-  | 供应商余额       | 197.00    |            |
| APPAYM001   | 110110-001-  | 银行                 |           | 197.00     |
| 14000056    | 520200-003-- | 供应商 - 现金折扣 |           | 3.00       |
| 14000056    | 200110-001-  | 供应商余额       | 3.00      |            |

### <a name="one-voucher-with-multiple-vendors-and-the-impact-on-realized-gainloss-accounting"></a>具有多个供应商的一个凭证以及对已有损益的影响

| 凭证 | 帐户类型 | 科目 | 说明 | 借记 | 贷记 | 帐户类型 | 科目  |
|-------------|------------------|-------------|-----------------|-----------|------------|------------------|--------------|
| GNJL001     | 供应商           | 1001        | INV1            |           | 100.00     | 分类帐           | 606300-001-- |
| GNJL001     | 供应商           | 1001        | INV2            |           | 200.00     | 分类帐           | 606300-002-- |

在以下示例中，在 **普通日记帐** 页面中在一个凭证的总帐中记录多个供应商发票。 这些发票在多个科目维度之间分配。 在过帐后，创建一个凭证。

| 凭证 | 科目  | 过帐类型 | 用交易币种表示的金额（欧元） | 按记帐币种计算的金额（美元） |
|-------------|--------------|------------------|------------------------------------------|-----------------------------------------|
| GNJL001     | 606300-001-- | 分类帐日记帐   | 100.00                                   | 114.00                                  |
| GNJL001     | 606300-002-- | 分类帐日记帐   | 200.00                                   | 228.00                                  |
| GNJL001     | 200110-001-  | 供应商余额   | -100.00                                  | -114.00                                 |
| GNJL001     | 200110-001-  | 供应商余额   | -200.00                                  | -228.00                                 |

注意凭证在单个凭证中包含供应商余额过帐类型的两个条目。 没有办法确定 606300-001 的借记打算用于抵消 100.00 至 200110-001 的供应商余额条目。 这是因为用户在一个凭证中输入多个供应商记录。 

通过本例，我们可以分析使用一个凭证对下游结算会计的影响。 假设您的记帐币种是美元，而上述交易记录以交易记录币种欧元过帐。 假设您已完全付清 200.00 欧元发票，但由于在发票过帐和付款时的汇率差异，导致您遭受了已有损失。 注意已有损失帐户值在发票凭证的支出帐户的所有维度之间分配。 在这种情况下，维度 001 和 002 均进行分配，即使用户可能认为只有 002 属于正在结算的发票的支出帐户。 这是因为使用一个凭证对上述发票过帐，没有办法指示用户打算如何在一个凭证中将费用分配与供应商余额相关联。

| 凭证 | 科目 | 过帐类型   | 用交易币种表示的金额（欧元） | 按记帐币种计算的金额（美元） |
|-------------|-------------|--------------------|------------------------------------------|-----------------------------------------|
| APPAYM001   | 200110-001- | 供应商余额     | 200.00                                   | 230.00                                  |
| APPAYM001   | 110110-001- | 银行               | -200.00                                  | -230.00                                 |
| 14000056    | 801300-001- | 汇兑损失 | 0.00                                     | 0.67                                    |
| 14000056    | 801300-002- | 汇兑损失 | 0.00                                     | 1.33                                    |
| 14000056    | 200110-001- | 供应商余额     |                                          | -2.00                                   |

如果用户不希望汇率损失在原始发票的所有费用分配中进行分配，则应使用多个凭证（而不是一个凭证）记录发票。 此示例说明如何在总帐中输入多个凭证（而不是使用一个凭证），如此示例开头所示。

| 凭证 | 帐户类型 | 科目 | 说明 | 借记 | 贷记 | 对方类型 | 对方科目 |
|-------------|------------------|-------------|-----------------|-----------|------------|-----------------|--------------------|
| GNJL002     | 供应商           | 1001        | INV1            |           | 100.00     | 分类帐          | 606300-001--       |
| GNJL003     | 供应商           | 1001        | INV2            |           | 200.00     | 分类帐          | 606300-002--       |

现在，INV2 支付后，将录入以下条目。 注意汇率损失的财务维度跟随相关费用的财务维度。

| 凭证 | 科目 | 过帐类型   | 用交易币种表示的金额（欧元） | 按记帐币种计算的金额（美元） |
|-------------|-------------|--------------------|------------------------------------------|-----------------------------------------|
| APPAYM001   | 200110-001- | 供应商余额     | 200.00                                   | 230.00                                  |
| APPAYM001   | 110110-001- | 银行               | -200.00                                  | -230.00                                 |
| 14000056    | 801300-002- | 汇兑损失 | 0.00                                     | 2.00                                    |
| 14000056    | 200110-001- | 供应商余额     |                                          | -2.00                                   |

## <a name="one-voucher-for-balance-transfers-and-netting-scenarios"></a>一个凭证的余额转移和净额结算方案
使用包含多个客户或供应商的一个凭证的两种常用方案包括将余额从一个客户/供应商转移至另一个客户/供应商和对同一个组织的客户和供应商进行净额结算。 以下两个示例说明了输入这些方案（作为在一个凭证中输入这些方案的备选方案）的首选方法。 

*余额转移* 是为了将余额从一个客户转移到另一个客户（供应商也是如此）的目的而输入的具有多个客户的一个凭证。 当支付发票的责任转移到另一个当事方，例如子公司将责任转移到母公司时，会发生此方案。 

此示例假设客户在 10 内付款则有资格享受现金折扣的销售。 此示例中的客户使用保险公司负责支付账单。 保险公司在系统中被设置为第二客户。 原始客户的余额将转移至保险公司，由保险公司支付账单，并且在折扣期付款可享受 2% 的现金折扣。 

为了说明，假设对客户 ACME 进行以下销售。 以下会计条目表示销售。

| 会计科目 | 过帐类型 | 借记 | 贷记 |
|--------------------|------------------|-----------|------------|
| 401100-002-023-    | 收入          |           | 100        |
| 130100-002-        | 客户 - 余额 | 100       |            |

接下来，用户在应收帐款付款日记帐中的一个凭证中将 ACME 的结欠金额转移至保险公司。 保险公司设置为客户保险。

| 凭证 | 帐户类型 | 科目 | 说明 | 借记 | 贷记 | 对方类型 | 对方科目 |
|-------------|------------------|-------------|-----------------|-----------|------------|-----------------|--------------------|
| ARPAYM001   | 客户         | ACME        | 转移        |           | 100.00     | 客户        | 保险          |

注意上述条目包含在一个凭证中。 此凭证包含两个客户记录。 对以上总帐条目过帐时，将创建以下凭证。

| 凭证 | 科目 | 过帐类型 | 用交易币种表示的金额 |
|-------------|-------------|------------------|------------------------------------|
| ARPAYM001   | 130100-002- | 客户 - 余额 | 100.00                             |
| ARPAYM001   | 130100-002- | 客户 - 余额 | -100.00                            |

接下来，假设您收到保险客户支付的 98.00，并且您选择使用余额转移创建的发票结算付款。 这将导致以下凭证被过帐。 可能预计结算使用原始发票的财务维度，但这是不可能的，因为保险客户没有发票单据。 注意在默认情况下，现金折扣上的分配维度来自从转移创建的客户交易记录，而不是来自原始发票的收入帐户。 此默认设置是使用一个凭证转移余额的结果。

| 凭证 | 科目 | 过帐类型 | 借记 | 贷记 |
|-------------|-------------|------------------|-----------|------------|
| ARPAYM002   | 110110-002- | 银行             | 98.00     |            |
| ARPAYM002   | 130100-002- | 客户 - 余额 |           | 98.00      |

在相关的现金折扣凭证上，财务维度的默认值来自由转移创建的客户交易记录，因为转移具有多个客户。

| 凭证 | 科目 | 过帐类型       | 借记 | 贷记 |
|-------------|-------------|------------------------|-----------|------------|
| ARP-00001   | 403300-002- | 客户 - 现金折扣 | 2.00      |            |
| ARP-00001   | 130100-002- | 客户 - 余额       |           | 2.00       |

如果用户不满意现金折扣财务维度的默认值，则应使用多个凭证（而不是一个凭证）记录余额转移。 实现此方案的方法应当是为客户创建余额转出的贷项通知单，和为客户创建余额转入的借项通知单或发票。 以下示例显示了如何在应收帐款付款日记帐中输入转移余额的多个凭证，而不是使用一个凭证，正如此示例中先前所示。

| 凭证 | 帐户类型 | 科目 | 说明 | 借记 | 贷记 | 对方类型 | 对方科目 |
|-------------|------------------|-------------|-----------------|-----------|------------|-----------------|--------------------|
| ARPAYM001   | 客户         | ACME        |                 |           | 100.00     | 分类帐          | 401100-002-023-    |
| ARPAYM002   | 客户         | 保险   |                 | 100.00    |            | 分类帐          | 401100-002-023-    |

这意味着，当保险客户使用凭证 ARPAYM02 支付 98.00 时，将使用来自凭证 ARPAYM002 会计科目条目的正确财务维度。

| 凭证 | 科目 | 过帐类型 | 借记 | 贷记 |
|-------------|-------------|------------------|-----------|------------|
| ARPAYM003   | 110110-002- | 银行             | 98.00     |            |
| ARPAYM003   | 130100-002  | 客户 - 余额 |           | 98.00      |

在现金的相关折扣凭证上，将使用 ARPAYM002 凭证上显示的抵消收入科目的财务维度。

| 凭证 | 科目     | 过帐类型       | 借记 | 贷记 |
|-------------|-----------------|------------------------|-----------|------------|
| ARP-00001   | 403300-002-023- | 客户 - 现金折扣 | 2.00      |            |
| ARP-00001   | 130100-002-     | 客户 - 余额       |           | 2.00       |

### 

## <a name="one-voucher-with-a-netting-for-multiple-customers-and-vendors"></a>对多个客户和供应商进行净额结算的一个凭证
当组织与同一家公司进行采购和销售时，净额结算可能有用。 无需支付供应商发票并等待收到客户发票的付款，可以对供应商和客户发票进行净额结算。 对未付余额结算净额结算交易。 

为了说明，假设供应商 1001 和客户 US-008 是同一个实体，因此您的组织希望在支付/收取剩余余额前对应付余额和应收余额进行净额结算。 假设客户记录欠款 75.00 欧元，供应商记录欠款 100.00 欧元，这意味着您希望对余额进行净额结算，仅支付供应商 25.00 欧元。 进一步假设记帐币种为美元。 在这种情况下，在应付帐款付款日记帐中的一个凭证中输入净额结算交易记录。

| 凭证 | 帐户类型 | 科目 | 说明 | 借记 | 贷记 | 对方类型 | 对方科目 |
|-------------|------------------|-------------|-----------------|-----------|------------|-----------------|--------------------|
| APPAYM001   | 供应商           | 1001        | 净额结算         |  75.00    |            | 客户        | US-008             |

为了避免在将来结算此交易记录时引起不必要的问题，应在日记帐中输入多个凭证（而不是使用一个凭证）记录净额结算交易。 注意客户和供应商余额使用一个结算帐户进行抵消，以避免使用包含多个客户和供应商余额的一个凭证。

| 凭证 | 帐户类型 | 科目 | 说明 | 借记 | 贷记 | 对方类型 | 对方科目 |
|-------------|------------------|-------------|-----------------|-----------|------------|-----------------|--------------------|
| 001         | 客户         | US-008      |                 |           |  75.00     | 分类帐          | 999999---          |
| 002         | 供应商           | 1001        |                 |  75.00    |            | 分类帐          | 999999---          |





