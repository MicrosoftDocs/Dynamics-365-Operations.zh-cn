---
title: 创建全球化功能
description: 本文介绍如何创建全球化功能。
author: dkalyuzh
ms.date: 02/14/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: dkalyuzh
ms.search.validFrom: ''
ms.dyn365.ops.version: ''
ms.openlocfilehash: c622b350f79d36b8fda12598ceae57ee9c7095e9
ms.sourcegitcommit: 52b7225350daa29b1263d8e29c54ac9e20bcca70
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/03/2022
ms.locfileid: "8889821"
---
# <a name="create-a-globalization-feature"></a>创建全球化功能

[!include [banner](../includes/banner.md)]

您可以从头开始创建电子开票功能，也可以基于现有功能使用。 从头开始创建功能时，您必须手动添加电子报告 (ER) 配置和其他组件，如功能设置和应用程序设置详细信息。 当您创建基于现有功能的功能时，新功能会继承所有基本功能的配置和参数。 您可以查看从基本功能复制到新功能的功能。

## <a name="create-a-feature-from-scratch"></a>从头开始创建功能

本节说明当全局存储库中没有针对您的业务场景的现成的全球化功能时，如何创建电子开票功能。

要创建电子开票功能，请执行以下步骤。

1. 登录到您的 Regulatory Configuration Service (RCS) 帐户。
2. 在 **全球化功能** 工作区的 **功能** 部分中，选择 **电子开票** 磁贴。
3. 选择 **添加**，然后在下拉对话框中选择 **新建功能** 选项。
4. 为电子开票功能输入名称和说明。
5. 选择 **创建功能**。 新功能的第一个版本显示在页面右侧，状态为 **草稿**。

    接下来，必须添加 ER 配置和功能设置。 在添加新的或现有 ER 格式配置之前，请确保它们存在于您的本地 RCS 存储库中。

6. 选择您要使用的电子开票功能。
7. 在 **配置** 选项卡上，选择 **添加**。
8. 在 **配置** 网格中，浏览并选择处理管道所需的格式配置（例如，生成电子发票文件或处理来自外部 Web 服务的响应）。
9. 选择 **确定**。 您现在可以在处理管道的操作中使用配置了。 有关详细信息，请参阅[使用配置](e-invoicing-work-configurations.md)。
10. 要添加电子开票功能设置，在 **新建功能** 页面的 **设置** 选项卡上进行创建。 有关详细信息，请参阅[使用功能设置](e-invoicing-feature-setup.md)。
11. 完成设置，并将电子开票功能部署到服务环境。 有关详细信息，请参阅[完成、发布和部署全球化功能](e-invoicing-complete-publish-deploy-globalization-feature.md)。

### <a name="create-file-format-configurations-that-are-derived-from-the-existing-invoice-model"></a>创建源自现有发票模型的文件格式配置

如果您不必创建 ER 配置，而是可以重用现有版本作为基本版本，则可以跳过此节。

此过程说明如何创建您要创建的新电子开票功能所需的文件格式配置。 创建电子发票文件格式配置以及新电子开票功能所需的任何其他文件格式配置。

1. 登录您的 RCS 帐户。
2. 在 **电子申报** 工作区中，选择 **报告配置** 磁贴。
3. 选择 **发票模型**，对于巴西场景，选择 **会计模型**。
4. 选择 **创建配置**，然后在下拉对话框中选择 **基于数据模型发票的格式** 选项。
5. 为格式配置输入名称和描述。
6. 在 **格式类型** 字段中，选择文件扩展名类型。
7. 在 **数据模型定义** 字段中，选择要将格式映射到的根结构。 例如，**InvoiceCustomer** 用于客户发票格式。
8. 选择 **创建配置**。
9. 选择新的格式配置。
10. 选择 **设计器**，并使用格式设计器工具配置文件布局，使其符合文件格式规格。
11. 关闭该页面。
12. 在 **版本** 快速选项卡上，选择 **更改状态** \> **完成**。
13. 选择 **更改状态**\>**共享** 以将格式配置发布到全局存储库。

必须先与 Microsoft 域共享新文件格式配置，然后电子开票服务才能使用该配置。

1. 选择您正在处理的格式配置。 必须 **共享** 配置的状态。
2. 在 **版本** 选项卡上，选择 **高级共享**\>**全局存储库**。
3. 在 **共享对象** 选项卡上，选择 **组织**。
4. 在 **参数** 字段中，输入 **microsoft.com** 以与 Microsoft 域共享格式配置。
5. 选择 **确定**。

## <a name="create-a-feature-that-is-based-on-an-existing-feature"></a>创建基于现有功能的功能

1. 登录您的 RCS 帐户。
2. 在 **全球化功能** 工作区的 **功能** 部分中，选择 **电子开票** 磁贴。
3. 在 **配置提供程序** 字段中，确保选择了有效配置提供程序。 这样，新的电子开票功能将在创建后出现在列表中。 如果未选择有效配置提供程序，新功能将被从列表中筛出。
4. 选择 **添加**，然后在下拉对话框中选择 **基于现有版本** 选项。
5. 为功能输入名称和描述。
6. 在 **基本功能** 字段中，选择功能的基本版本。
7. 选择 **创建功能**。 功能将创建，状态为 **草稿**。
8. 查看功能组件确定是否需要更新：

    - 如果必须自定义 ER 格式及其与功能版本的格式映射的绑定，请查看配置。
    - 如果必须针对功能版本自定义 **操作** 选项卡、**适用性规则** 选项卡或 **变量** 选项卡，请查看设置。

9. 完成设置，并将电子开票功能部署到服务环境。 有关详细信息，请参阅[完成、发布和部署全球化功能](e-invoicing-complete-publish-deploy-globalization-feature.md)。
