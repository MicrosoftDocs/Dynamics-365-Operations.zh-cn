---
title: 电子消息
description: 此主题提供 Microsoft Dynamics 365 for Finance and Operations 中电子消息的概述和设置信息。
author: ShylaThompson
manager: AnnBe
ms.date: 11/16/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: shylaw
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: shylaw
ms.search.validFrom: 2018-10-28
ms.dyn365.ops.version: 8.0999999999999996
ms.openlocfilehash: 5326642553c7efcebc6c6af953e2dafe9e62e9ec
ms.sourcegitcommit: f6fc90585632918d9357a384b27028f2aebe9b5a
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/11/2019
ms.locfileid: "832187"
---
# <a name="electronic-messaging"></a><span data-ttu-id="e1697-103">电子消息</span><span class="sxs-lookup"><span data-stu-id="e1697-103">Electronic messaging</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="e1697-104">此主题提供 Microsoft Dynamics 365 for Finance and Operations 中电子消息的概述和设置信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-104">This topic provides overview and setup information for electronic messaging in Microsoft Dynamics 365 for Finance and Operations.</span></span>

<span data-ttu-id="e1697-105">最近，全世界各个国家和地区的政府与立法机构对在这些国家或地区注册的公司实施了报告要求。</span><span class="sxs-lookup"><span data-stu-id="e1697-105">Recently, the governments and legislative authorities of various countries and regions around the world have implemented reporting requirements for companies that are registered in those countries or regions.</span></span> <span data-ttu-id="e1697-106">要求的目的是支持数据以电子格式从这些公司、直接从具有、存储和处理数据的系统获取。</span><span class="sxs-lookup"><span data-stu-id="e1697-106">The purpose of the requirements is to enable data to be obtained from those companies in electronic format, directly from the systems where it was accounted, stored, and processed.</span></span>

<span data-ttu-id="e1697-107">Finance and Operations 中的电子消息功能支持在 Finance and Operations 与政府和立法机构为报告、提交和接收官方信息提供的系统之间进行各种电子互操作流程。</span><span class="sxs-lookup"><span data-stu-id="e1697-107">The Electronic messages functionality in Finance and Operations supports various processes for electronic interoperation between Finance and Operations and the systems that governments and legislative authorities offer for reporting, submitting, and receiving official information.</span></span>

<span data-ttu-id="e1697-108">电子消息功能已与**电子报告** (ER) 模块集成。</span><span class="sxs-lookup"><span data-stu-id="e1697-108">The Electronic messages functionality is integrated with the **Electronic Reporting** (ER) module.</span></span> <span data-ttu-id="e1697-109">因此，您可以为电子消息设置 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="e1697-109">Therefore, you can set up ER formats for electronic messages.</span></span> <span data-ttu-id="e1697-110">有关详细信息，请参阅[电子报告 (ER)](https://docs.microsoft.com/en-us/dynamics365/unified-operations/dev-itpro/analytics/general-electronic-reporting)。</span><span class="sxs-lookup"><span data-stu-id="e1697-110">For more information, see [Electronic reporting (ER)](https://docs.microsoft.com/en-us/dynamics365/unified-operations/dev-itpro/analytics/general-electronic-reporting).</span></span>

<span data-ttu-id="e1697-111">电子消息基于以下实体：</span><span class="sxs-lookup"><span data-stu-id="e1697-111">Electronic messaging is based on the following entities:</span></span>

- <span data-ttu-id="e1697-112">**电子消息** – 应该在内部报告和/或传输的报表或申报。</span><span class="sxs-lookup"><span data-stu-id="e1697-112">**Electronic message** – A report or declaration that should be reported and/or transmitted internally.</span></span> <span data-ttu-id="e1697-113">示例是发送给税务局的报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-113">An example is a report that is sent to a tax office.</span></span>
- <span data-ttu-id="e1697-114">**电子消息项** – 应包括在报告的消息中的记录。</span><span class="sxs-lookup"><span data-stu-id="e1697-114">**Electronic message items** – Records that should be included in the message that is reported.</span></span>
- <span data-ttu-id="e1697-115">**电子消息处理** – 应运行以收集所需的数据、生成报表、在 Microsoft Azure Blob 存储中存储数据、在系统之外传输报表、从系统外部获取响应以及基于收到的信息更新数据库的行动链（链接或未链接）。</span><span class="sxs-lookup"><span data-stu-id="e1697-115">**Electronic message processing** – A chain of actions, either linked or unlinked, that should be run to collect the required data, generate reports, store data in Microsoft Azure Blob storage, transmit reports outside the system, get responses from outside the system, and update the database, based on the information that is received.</span></span>

<span data-ttu-id="e1697-116">下图显示电子消息的数据流。</span><span class="sxs-lookup"><span data-stu-id="e1697-116">The following illustration shows the flow of data for electronic messaging.</span></span>

![电子消息数据流](media/electronic-messaging-data-flow.png)

<span data-ttu-id="e1697-118">电子消息功能支持以下场景：</span><span class="sxs-lookup"><span data-stu-id="e1697-118">The Electronic messages functionality supports the following scenarios:</span></span>

- <span data-ttu-id="e1697-119">手动创建消息和生成基于不同类型的关联导出 ER 格式的报表：Microsoft Excel、XML、JavaScript Object Notation (JSON)、PDF、文本和 Microsoft Word。</span><span class="sxs-lookup"><span data-stu-id="e1697-119">Manually create messages and generate reports that are based on associated exporting ER formats of various types: Microsoft Excel, XML, JavaScript Object Notation (JSON), PDF, text, and Microsoft Word.</span></span>
- <span data-ttu-id="e1697-120">自动创建和处理基于通过关联导入 ER 格式从当局请求和获取的信息的消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-120">Automatically create and process messages that are based on information that was requested and obtained from an authority via an associated importing ER format.</span></span>
- <span data-ttu-id="e1697-121">作为消息项收集和处理来自数据源（Finance and Operations 表）的信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-121">Collect and process information from a data source (Finance and Operations table) as message items.</span></span>
- <span data-ttu-id="e1697-122">存储附加信息，并通过调用有关消息或消息项的专门定义的可执行类评估不同值。</span><span class="sxs-lookup"><span data-stu-id="e1697-122">Store additional information, and evaluate various values by calling specifically defined executable classes in relation to messages or message items.</span></span>
- <span data-ttu-id="e1697-123">聚合在消息项中收集的信息，按消息拆分该信息，然后生成关联导出 ER 格式的报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-123">Aggregate information that is collected in message items, split that information by message, and generate reports that are in associated exporting ER formats.</span></span>
- <span data-ttu-id="e1697-124">传输使用存储在 Azure Key Vault 中的安全信息生成到 Web 服务的报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-124">Transmit reports that are generated to a web service by using security information that is stored in Azure Key Vault.</span></span>
- <span data-ttu-id="e1697-125">从 Web 服务获取响应、解释响应、根据需要更新 Finance and Operations 中的数据。</span><span class="sxs-lookup"><span data-stu-id="e1697-125">Get a response from a web service, interpret the response, and update data in Finance and Operations as appropriate.</span></span>
- <span data-ttu-id="e1697-126">存储和查看生成的所有报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-126">Store and review all the reports that are generated.</span></span>
- <span data-ttu-id="e1697-127">存储和查看与为消息或消息项运行的行动有关的所有日志信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-127">Store and review all the log information that is related to actions that are run for a message or message item.</span></span>
- <span data-ttu-id="e1697-128">通过各个消息状态和消息项状态控制处理。</span><span class="sxs-lookup"><span data-stu-id="e1697-128">Control the processing through various message statuses and message item statuses.</span></span>

## <a name="set-up-electronic-messaging"></a><span data-ttu-id="e1697-129">设置电子消息</span><span class="sxs-lookup"><span data-stu-id="e1697-129">Set up electronic messaging</span></span>

<span data-ttu-id="e1697-130">电子消息可以帮助您维护不同文档类型的不同电子报告流程。</span><span class="sxs-lookup"><span data-stu-id="e1697-130">Electronic messaging can help you maintain different electronic reporting processes for different document types.</span></span> <span data-ttu-id="e1697-131">在一些复杂的场景中，电子消息被设置为包含很多消息状态、消息项状态、行动、额外字段和可执行类的组合。</span><span class="sxs-lookup"><span data-stu-id="e1697-131">In some complex scenarios, electronic messaging is set up to have a combination of many message statuses, message items statuses, actions, additional fields, and executable classes.</span></span> <span data-ttu-id="e1697-132">对于这些场景，数据实体包可以导入。</span><span class="sxs-lookup"><span data-stu-id="e1697-132">For these scenarios, packages of data entities are available for import.</span></span> <span data-ttu-id="e1697-133">如果您使用这些数据实体包，您应使用数据管理工具将其导入到法人。</span><span class="sxs-lookup"><span data-stu-id="e1697-133">If you use these data entity packages, you should import them to a legal entity by using the Data management tool.</span></span> <span data-ttu-id="e1697-134">有关如何使用数据管理工具的详细信息，请参阅[数据管理](../../dev-itpro/data-entities/data-entities-data-packages.md)。</span><span class="sxs-lookup"><span data-stu-id="e1697-134">For more information about how to use the Data management tool, see [Data management](../../dev-itpro/data-entities/data-entities-data-packages.md).</span></span>

<span data-ttu-id="e1697-135">如果您不导入数据实体包，您可以手动设置电子消息功能。</span><span class="sxs-lookup"><span data-stu-id="e1697-135">If you don't import a data entity package, you can manually set up the Electronic messages functionality.</span></span> <span data-ttu-id="e1697-136">在这种情况下，必须设置以下元素：</span><span class="sxs-lookup"><span data-stu-id="e1697-136">In this case, you must set up the following elements:</span></span> 

- [<span data-ttu-id="e1697-137">编号规则</span><span class="sxs-lookup"><span data-stu-id="e1697-137">Number sequences</span></span>](#number-sequences)
- [<span data-ttu-id="e1697-138">消息项类型和状态</span><span class="sxs-lookup"><span data-stu-id="e1697-138">Message item types and statuses</span></span>](#message-item-types-and-statuses)
- [<span data-ttu-id="e1697-139">消息状态</span><span class="sxs-lookup"><span data-stu-id="e1697-139">Message statuses</span></span>](#message-statuses)
- [<span data-ttu-id="e1697-140">附加字段</span><span class="sxs-lookup"><span data-stu-id="e1697-140">Additional fields</span></span>](#additional-fields)
- [<span data-ttu-id="e1697-141">可执行类设置</span><span class="sxs-lookup"><span data-stu-id="e1697-141">Executable class settings</span></span>](#executable-class-settings)
- [<span data-ttu-id="e1697-142">填充记录行为</span><span class="sxs-lookup"><span data-stu-id="e1697-142">Populate records actions</span></span>](#populate-records-actions)
- [<span data-ttu-id="e1697-143">Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="e1697-143">Web applications</span></span>](#web-applications)
- [<span data-ttu-id="e1697-144">Web 服务设置</span><span class="sxs-lookup"><span data-stu-id="e1697-144">Web service settings</span></span>](#web-service-settings)
- [<span data-ttu-id="e1697-145">消息处理操作</span><span class="sxs-lookup"><span data-stu-id="e1697-145">Message processing actions</span></span>](#message-processing-actions)
- [<span data-ttu-id="e1697-146">电子消息处理</span><span class="sxs-lookup"><span data-stu-id="e1697-146">Electronic message processing</span></span>](#electronic-message-processing)

<span data-ttu-id="e1697-147">以下部分提供有关每个元素的详细信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-147">The following sections provide more information about each of these elements.</span></span>

### <a name="number-sequences"></a><span data-ttu-id="e1697-148">编号规则</span><span class="sxs-lookup"><span data-stu-id="e1697-148">Number sequences</span></span>

<span data-ttu-id="e1697-149">为消息和消息项设置编号规则。</span><span class="sxs-lookup"><span data-stu-id="e1697-149">Set up number sequences for both messages and message items.</span></span> <span data-ttu-id="e1697-150">编号规则用于自动对消息和消息项编号，分配的编号将用作系统中消息和消息项的唯一标识符。</span><span class="sxs-lookup"><span data-stu-id="e1697-150">The number sequences are used to automatically number the messages and the message items, and the numbers that are assigned will be used as unique identifiers for the messages and message items in the system.</span></span> <span data-ttu-id="e1697-151">您可以在**总帐参数**页（**总帐** \> **分类帐设置** \> **总帐参数**）上为电子消息设置编号规则。</span><span class="sxs-lookup"><span data-stu-id="e1697-151">You can set up number sequences for electronic messaging on the **General ledger parameters** page (**General ledger** \> **Ledger setup** \> **General ledger parameters**).</span></span>

### <a name="message-item-types-and-statuses"></a><span data-ttu-id="e1697-152">消息项类型和状态</span><span class="sxs-lookup"><span data-stu-id="e1697-152">Message item types and statuses</span></span>

<span data-ttu-id="e1697-153">消息项类型标识将在电子消息中使用的记录的类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-153">Message item types identify the types of records that will be used in electronic messages.</span></span> <span data-ttu-id="e1697-154">您可以在**消息项类型**页（**税** \> **设置** \> **电子消息** \> **消息项类型**）设置消息项类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-154">You can set up message item types on the **Message item types** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message item types**).</span></span>

<span data-ttu-id="e1697-155">消息项状态标识将应用于您正在设置的处理中的消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-155">Message item statuses identify the statuses that will apply to message items in the processing that you're setting up.</span></span> <span data-ttu-id="e1697-156">您可以在**消息项状态**页（**税** \> **设置** \> **电子消息** \> **消息项状态**）设置消息项类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-156">You can set up message item types on the **Message item statuses** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message item statuses**).</span></span>

<span data-ttu-id="e1697-157">消息项状态的**允许删除**参数定义是否允许用户通过**电子消息**窗体或**电子消息项**窗体删除此状态的消息项。</span><span class="sxs-lookup"><span data-stu-id="e1697-157">**Allow delete** parameter of a message item status defines whether user will be allowed to delete a message item in this status via **Electronic messages** form or **Electronic message items** form.</span></span> 

### <a name="message-statuses"></a><span data-ttu-id="e1697-158">消息状态</span><span class="sxs-lookup"><span data-stu-id="e1697-158">Message statuses</span></span>

<span data-ttu-id="e1697-159">设置应该在消息处理中呈现的消息状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-159">Set up the message statuses that should be available in message processing.</span></span> <span data-ttu-id="e1697-160">您可以在**消息状态**页（**税** \> **设置** \> **电子消息** \> **消息状态**）设置消息状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-160">You can set up message statuses on the **Message statuses** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message statuses**).</span></span>

<span data-ttu-id="e1697-161">字段说明：</span><span class="sxs-lookup"><span data-stu-id="e1697-161">Fields description:</span></span>

| <span data-ttu-id="e1697-162">字段名称</span><span class="sxs-lookup"><span data-stu-id="e1697-162">Field name</span></span>           | <span data-ttu-id="e1697-163">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-163">Description</span></span> |
|----------------------|-------------|
|<span data-ttu-id="e1697-164">消息状态</span><span class="sxs-lookup"><span data-stu-id="e1697-164">Message status</span></span>        | <span data-ttu-id="e1697-165">电子消息状态的唯一名称，用于描述消息在各时刻的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-165">Unique name of an electronic message status which characterizes state of a message in each moment of time.</span></span> <span data-ttu-id="e1697-166">此名称在电子消息窗体中和与电子消息有关的日志中显示。</span><span class="sxs-lookup"><span data-stu-id="e1697-166">This name is shown in Electronic messages form and in a Log related to electronic message.</span></span> |
|<span data-ttu-id="e1697-167">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-167">Description</span></span>           | <span data-ttu-id="e1697-168">与电子消息状态有关的说明</span><span class="sxs-lookup"><span data-stu-id="e1697-168">Description related to the status of electronic message</span></span>      |
|<span data-ttu-id="e1697-169">响应类型</span><span class="sxs-lookup"><span data-stu-id="e1697-169">Response type</span></span>         | <span data-ttu-id="e1697-170">处理中的某些操作可能生成多种响应类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-170">Some actions in a processing may result more than one response type.</span></span> <span data-ttu-id="e1697-171">例如，**Web 服务**类型的操作可能生成**已成功执行**或**技术错误**响应类型，具体取决于其执行结果。</span><span class="sxs-lookup"><span data-stu-id="e1697-171">As for example, action of **Web service** type may result either **Successfully executed** or **Technical error** response type depending on result of its execution.</span></span> <span data-ttu-id="e1697-172">在此案例中，必须同时定义这两种响应类型的消息状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-172">In this case message status for both response types must be defined.</span></span> <span data-ttu-id="e1697-173">有关操作类型及相关响应类型的详细信息，请参阅[消息处理操作类型](#message-processing-action-types)。</span><span class="sxs-lookup"><span data-stu-id="e1697-173">Refer [Message processing action types](#message-processing-action-types) for more information about action types and related to them types of response.</span></span> |
|<span data-ttu-id="e1697-174">消息项状态</span><span class="sxs-lookup"><span data-stu-id="e1697-174">Message item status</span></span>   |<span data-ttu-id="e1697-175">有时电子消息状态必须相应影响相关消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-175">There are cases when electronic message status must influence respectively on statuses of related message items.</span></span> <span data-ttu-id="e1697-176">请关联此类消息项状态，方法是在查找中选择该状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-176">Associate such message item status in this field by selecting it from lookup.</span></span> |
|<span data-ttu-id="e1697-177">允许删除</span><span class="sxs-lookup"><span data-stu-id="e1697-177">Allow delete</span></span>          | <span data-ttu-id="e1697-178">电子消息状态的**允许删除**参数定义是否允许用户通过**电子消息**窗体删除此状态的电子消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-178">**Allow delete** parameter of an electronic message status defines whether user will be allowed to delete an electronic message in this status via **Electronic messages** form.</span></span>            |

### <a name="additional-fields"></a><span data-ttu-id="e1697-179">附加字段</span><span class="sxs-lookup"><span data-stu-id="e1697-179">Additional fields</span></span>

<span data-ttu-id="e1697-180">电子消息功能让您可以填充交易表中的记录。</span><span class="sxs-lookup"><span data-stu-id="e1697-180">The Electronic messages functionality lets you populate records from a transactional table.</span></span> <span data-ttu-id="e1697-181">这样，您可以为报告准备记录，然后报告它们。</span><span class="sxs-lookup"><span data-stu-id="e1697-181">In this way, you can prepare the records for reporting and then report them.</span></span> <span data-ttu-id="e1697-182">有时，交易表中没有足够的信息来根据报表要求报告记录。</span><span class="sxs-lookup"><span data-stu-id="e1697-182">Sometimes, there isn't enough information in the transactional table to report a record according to the report requirements.</span></span> <span data-ttu-id="e1697-183">您可以通过设置附加字段来填写必须为记录报告的所有信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-183">You can fill in all the information that must be reported for a record by setting up additional fields.</span></span> <span data-ttu-id="e1697-184">附加字段可与消息和消息项关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-184">Additional fields can be associated with both messages and message items.</span></span> <span data-ttu-id="e1697-185">您可以在**附加字段**页（**税** \> **设置** \> **电子消息** \> **附加字段**）设置附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-185">You can set up additional fields on the **Additional fields** page (**Tax** \> **Setup** \> **Electronic messages** \> **Additional fields**).</span></span>

<span data-ttu-id="e1697-186">下表描述**附加字段**页的常规字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-186">The following table describes the general fields on the **Additional fields** page:</span></span>

| <span data-ttu-id="e1697-187">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-187">Field</span></span>                | <span data-ttu-id="e1697-188">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-188">Description</span></span> |
|----------------------|-------------|
| <span data-ttu-id="e1697-189">字段名称</span><span class="sxs-lookup"><span data-stu-id="e1697-189">Field name</span></span>           | <span data-ttu-id="e1697-190">输入与此流程相关的消息项的其他属性的名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-190">Enter the name of an additional attribute of message items that are related to the process.</span></span> <span data-ttu-id="e1697-191">在处理流程时，此名称显示在用户界面中。</span><span class="sxs-lookup"><span data-stu-id="e1697-191">This name is shown in the user interface while you work with the process.</span></span> <span data-ttu-id="e1697-192">它还可以用于与流程相关的 ER 配置。</span><span class="sxs-lookup"><span data-stu-id="e1697-192">It can also be used in ER configurations that are related to the process.</span></span> |
| <span data-ttu-id="e1697-193">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-193">Description</span></span>          | <span data-ttu-id="e1697-194">输入与此流程相关的消息项的其他属性的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-194">Enter a description of the additional attribute of message items that are related to the process.</span></span> |
| <span data-ttu-id="e1697-195">用户编辑</span><span class="sxs-lookup"><span data-stu-id="e1697-195">User edit</span></span>            | <span data-ttu-id="e1697-196">如果用户必须可以更改用户界面中的额外字段的值，请将此复选框设置为**是**，否则设置为**否**。</span><span class="sxs-lookup"><span data-stu-id="e1697-196">In a case when a user must be able to change value of the additional filed from user inteface, set up this check box **Yes**, otherwise **No**.</span></span> |
| <span data-ttu-id="e1697-197">计数器</span><span class="sxs-lookup"><span data-stu-id="e1697-197">Counter</span></span>              | <span data-ttu-id="e1697-198">当额外字段中必须包含电子消息内的序列号时，请选中此复选框。</span><span class="sxs-lookup"><span data-stu-id="e1697-198">When the additional field must contain a sequence number within an electronic message, mark this check box.</span></span> <span data-ttu-id="e1697-199">运行“电子报告导出”类型的操作期间，将自动填写额外字段的值。</span><span class="sxs-lookup"><span data-stu-id="e1697-199">Values of the additional field will be filled in automatically during running an action of “Electronic reporting export” type.</span></span>  |
| <span data-ttu-id="e1697-200">隐藏</span><span class="sxs-lookup"><span data-stu-id="e1697-200">Hidden</span></span>               | <span data-ttu-id="e1697-201">如果必须在用户界面中隐藏这个额外字段，请选中此复选框。</span><span class="sxs-lookup"><span data-stu-id="e1697-201">When the additional field must be hidden from the user interface, mark this check box.</span></span>  |

<span data-ttu-id="e1697-202">对于此项处理，每个额外字段都可能有不同的值。</span><span class="sxs-lookup"><span data-stu-id="e1697-202">Each additional field may have different values for the processing.</span></span> <span data-ttu-id="e1697-203">可以通过“值”快速选项卡定义这些值：</span><span class="sxs-lookup"><span data-stu-id="e1697-203">You may define these values on Values fast tab:</span></span>

| <span data-ttu-id="e1697-204">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-204">Field</span></span>                | <span data-ttu-id="e1697-205">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-205">Description</span></span> |
|----------------------|-------------|
| <span data-ttu-id="e1697-206">字段值</span><span class="sxs-lookup"><span data-stu-id="e1697-206">Field value</span></span>          | <span data-ttu-id="e1697-207">在报告过程中输入要使用的与消息或消息项相关的字段值。</span><span class="sxs-lookup"><span data-stu-id="e1697-207">Enter the field value to use in relation to a message or message item during reporting.</span></span> |
| <span data-ttu-id="e1697-208">字段描述</span><span class="sxs-lookup"><span data-stu-id="e1697-208">Field description</span></span>    | <span data-ttu-id="e1697-209">在报告过程中输入要使用的与消息或消息项相关的字段值的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-209">Enter a description of the field value to use in relation to a message or message item during reporting.</span></span> |
| <span data-ttu-id="e1697-210">科目类型</span><span class="sxs-lookup"><span data-stu-id="e1697-210">Account type</span></span>         | <span data-ttu-id="e1697-211">有些附加字段值可能被限制为特定科目类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-211">Some additional fields values might be limited to specific account types.</span></span> <span data-ttu-id="e1697-212">选择以下值之一：**所有**、**客户**或**供应商**。</span><span class="sxs-lookup"><span data-stu-id="e1697-212">Select one of the following values: **All**, **Customer**, or **Vendor**.</span></span> |
| <span data-ttu-id="e1697-213">帐户编码</span><span class="sxs-lookup"><span data-stu-id="e1697-213">Account code</span></span>         | <span data-ttu-id="e1697-214">如果您在**科目类型**字段中选择了**客户**或**供应商**，您可以进一步将字段值的使用限定为特定组或表。</span><span class="sxs-lookup"><span data-stu-id="e1697-214">If you selected **Customer** or **Vendor** in the **Account type** field, you can further limit the use of field values to a specific group or table.</span></span> |
| <span data-ttu-id="e1697-215">帐户/组编号</span><span class="sxs-lookup"><span data-stu-id="e1697-215">Account/Group number</span></span> | <span data-ttu-id="e1697-216">如果您在**科目类型**字段中选择了**客户**或**供应商**，并且如果您在**帐户编码**字段中输入了组或表，您可以在此字段中输入特定组或票务代理。</span><span class="sxs-lookup"><span data-stu-id="e1697-216">If you selected **Customer** or **Vendor** in the **Account type** field, and if you entered a group or table in the **Account code** field, you can enter a specific group or counteragent in this field.</span></span> |
| <span data-ttu-id="e1697-217">生效</span><span class="sxs-lookup"><span data-stu-id="e1697-217">Effective</span></span>            | <span data-ttu-id="e1697-218">指定应该开始考虑值的日期。</span><span class="sxs-lookup"><span data-stu-id="e1697-218">Specify the date when the value should start to be considered.</span></span> |
| <span data-ttu-id="e1697-219">到期</span><span class="sxs-lookup"><span data-stu-id="e1697-219">Expiration</span></span>           | <span data-ttu-id="e1697-220">指定应该停止考虑值的日期。</span><span class="sxs-lookup"><span data-stu-id="e1697-220">Specify the date when the value should stop being considered.</span></span> |

<span data-ttu-id="e1697-221">默认情况下，**帐户/组编号**、**帐户编码**、**生效**、**到期**中定义的条件组合影响选择的额外字段值，但是可以在可执行类中用于实施额外字段值的某些特定计算逻辑。</span><span class="sxs-lookup"><span data-stu-id="e1697-221">Combinations of criteria defined in **Account/Group number**, **Account code**, **Effective**, **Expiration** doesn’t influence by default on selection of value for additional field but can be used in executable class to implement some specific logic of calculation of an additional field value.</span></span>

### <a name="executable-class-settings"></a><span data-ttu-id="e1697-222">可执行类设置</span><span class="sxs-lookup"><span data-stu-id="e1697-222">Executable class settings</span></span>

<span data-ttu-id="e1697-223">可执行类是一个 X++ 方法或类，如果流程需要一些评估，电子消息处理可以对行动调用它。</span><span class="sxs-lookup"><span data-stu-id="e1697-223">An executable class is an X++ method or class that the electronic message processing can call in relation to an action if some evaluation is required for the process.</span></span>

<span data-ttu-id="e1697-224">您可以在**可执行类设置**页（**税** \> **设置**\> **电子消息** \> **可执行类设置**）手动设置可执行类。</span><span class="sxs-lookup"><span data-stu-id="e1697-224">You can manually set up an executable class on the **Executable class settings** page (**Tax** \> **Setup** \> **Electronic messages** \> **Executable class settings**).</span></span> <span data-ttu-id="e1697-225">创建行，并设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-225">Create a line, and set the following fields.</span></span>

| <span data-ttu-id="e1697-226">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-226">Field</span></span>                 | <span data-ttu-id="e1697-227">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-227">Description</span></span> |
|-----------------------|-------------|
| <span data-ttu-id="e1697-228">可执行类</span><span class="sxs-lookup"><span data-stu-id="e1697-228">Executable class</span></span>      | <span data-ttu-id="e1697-229">输入将在设置此类为其调用的消息处理行动期间使用的名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-229">Enter the name that will be used during the setup of a message processing action that this class is called in relation to.</span></span> |
| <span data-ttu-id="e1697-230">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-230">Description</span></span>           | <span data-ttu-id="e1697-231">输入可执行类的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-231">Enter a description of the executable class.</span></span> |
| <span data-ttu-id="e1697-232">可执行类名称</span><span class="sxs-lookup"><span data-stu-id="e1697-232">Executable class name</span></span> | <span data-ttu-id="e1697-233">选择 X++ 可执行类。</span><span class="sxs-lookup"><span data-stu-id="e1697-233">Select an X++ executable class.</span></span> |
| <span data-ttu-id="e1697-234">执行级别</span><span class="sxs-lookup"><span data-stu-id="e1697-234">Execution level</span></span>       | <span data-ttu-id="e1697-235">因为应为选择的可执行类预定义此字段，因此此字段将自动设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-235">This field is set automatically, because the value should be predefined for the selected executable class.</span></span> <span data-ttu-id="e1697-236">此字段限制相关评估运行的级别。</span><span class="sxs-lookup"><span data-stu-id="e1697-236">This field limits the level that related evaluation is run on.</span></span> |
| <span data-ttu-id="e1697-237">类描述</span><span class="sxs-lookup"><span data-stu-id="e1697-237">Class description</span></span>     | <span data-ttu-id="e1697-238">因为应为选择的可执行类预定义此字段，因此此字段将自动设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-238">This field is set automatically, because the value should be predefined for the selected executable class.</span></span> |

<span data-ttu-id="e1697-239">某些可执行类可能有必需参数，必须在首次运行该可执行类之前定义。</span><span class="sxs-lookup"><span data-stu-id="e1697-239">Some executable classes may have mandatory parameters which must be defined before the executable class is run for the first time.</span></span> <span data-ttu-id="e1697-240">若要定义此类参数，请单击“操作”窗格中的**参数**按钮，设置对话窗口中的相应值和字段，然后单击**确定**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1697-240">To define such parameters, click **Parameters** button on Action pane, setup corresponding values and the fields in dialog window and click **OK** button.</span></span> <span data-ttu-id="e1697-241">此处务必单击**确定**按钮，否则将不会把参数保存到库，从而不能正确调用可执行类。</span><span class="sxs-lookup"><span data-stu-id="e1697-241">It is important to click **OK** button here as otherwise parameters will not be saved to the base and executable class will not be called properly.</span></span>

### <a name="populate-records-actions"></a><span data-ttu-id="e1697-242">填充记录行为</span><span class="sxs-lookup"><span data-stu-id="e1697-242">Populate records actions</span></span>

<span data-ttu-id="e1697-243">您使用填充记录操作设置将记录添加到消息项表以使其可以添加到电子消息的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-243">You use populate records actions to set up actions that add records to the Message items table so that they can be added to an electronic message.</span></span> <span data-ttu-id="e1697-244">例如，如果您的电子消息必须报告客户发票，则必须设置在**客户发票日记帐**表中链接的**填充记录**操作（在**数据源**字段中）。</span><span class="sxs-lookup"><span data-stu-id="e1697-244">For example, if your electronic message must report customer invoices, you must set up a **Populate records** action that is linked on **Customer invoice journal** table (in **Data source** field).</span></span> <span data-ttu-id="e1697-245">您可以在**填充记录行动**页（**税** \> **设置**\> **电子消息** \> **填充记录行动**）设置填充记录行动。</span><span class="sxs-lookup"><span data-stu-id="e1697-245">You can set up populate records actions on the **Populate records action** page (**Tax** \> **Setup** \> **Electronic messages** \> **Populate records actions**).</span></span> <span data-ttu-id="e1697-246">为应将记录添加到表的每个操作创建新记录，然后设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-246">Create a new record for every action that should add records to the table, and set the following fields.</span></span>

| <span data-ttu-id="e1697-247">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-247">Field</span></span>       | <span data-ttu-id="e1697-248">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-248">Description</span></span>                                                               |
|-------------|---------------------------------------------------------------------------|
| <span data-ttu-id="e1697-249">姓名</span><span class="sxs-lookup"><span data-stu-id="e1697-249">Name</span></span>        | <span data-ttu-id="e1697-250">为在您的流程中填充记录的操作输入名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-250">Enter a name for the action that populates records in your process.</span></span>       |
| <span data-ttu-id="e1697-251">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-251">Description</span></span> | <span data-ttu-id="e1697-252">输入在您的流程中填充记录的操作的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-252">Enter a description of the action that populates records in your process.</span></span> |

<span data-ttu-id="e1697-253">在**数据源设置**快速选项卡上，为用于流程的每个数据源添加一个行，并设置以下字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-253">On the **Datasources setup** FastTab, add a line for every data source that is used for the process, and set the following fields.</span></span>

| <span data-ttu-id="e1697-254">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-254">Field</span></span>                  | <span data-ttu-id="e1697-255">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-255">Description</span></span> |
|------------------------|-------------|
| <span data-ttu-id="e1697-256">姓名</span><span class="sxs-lookup"><span data-stu-id="e1697-256">Name</span></span>                   | <span data-ttu-id="e1697-257">输入数据源的名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-257">Enter a name for the data source.</span></span> |
| <span data-ttu-id="e1697-258">消息项类型</span><span class="sxs-lookup"><span data-stu-id="e1697-258">Message item type</span></span>      | <span data-ttu-id="e1697-259">选择在为数据源创建记录时应使用的消息项的类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-259">Select the type of message item that should be used when records are created for the data source.</span></span> |
| <span data-ttu-id="e1697-260">科目类型</span><span class="sxs-lookup"><span data-stu-id="e1697-260">Account type</span></span>           | <span data-ttu-id="e1697-261">选择应与来自数据源的记录关联的科目的类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-261">Select the type of account that should be associated with records from the data source.</span></span> |
| <span data-ttu-id="e1697-262">主表名称</span><span class="sxs-lookup"><span data-stu-id="e1697-262">Master table name</span></span>      | <span data-ttu-id="e1697-263">选择应是数据源的 Finance and Operations 中的表。</span><span class="sxs-lookup"><span data-stu-id="e1697-263">Select the table in Finance and Operations that should be a data source.</span></span> |
| <span data-ttu-id="e1697-264">单据编号字段</span><span class="sxs-lookup"><span data-stu-id="e1697-264">Document number field</span></span>  | <span data-ttu-id="e1697-265">在所选表中选择应从中获取单据编号的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-265">Select the field that the document number should be taken from in the selected table.</span></span> |
| <span data-ttu-id="e1697-266">单据日期字段</span><span class="sxs-lookup"><span data-stu-id="e1697-266">Document date field</span></span>    | <span data-ttu-id="e1697-267">在所选表中选择应从中获取单据日期的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-267">Select the field that the document date should be taken from in the selected table.</span></span> |
| <span data-ttu-id="e1697-268">文档帐户字段</span><span class="sxs-lookup"><span data-stu-id="e1697-268">Document account field</span></span> | <span data-ttu-id="e1697-269">在所选表中选择应从中获取单据科目的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-269">Select the field that the document account should be taken from in the selected table.</span></span> |
| <span data-ttu-id="e1697-270">用户查询</span><span class="sxs-lookup"><span data-stu-id="e1697-270">User query</span></span>             | <span data-ttu-id="e1697-271">如果选中此复选框，则可以通过选择网格上方的**编辑查询**来设置查询。</span><span class="sxs-lookup"><span data-stu-id="e1697-271">If this check box is selected, you can set up a query by selecting **Edit query** above the grid.</span></span> <span data-ttu-id="e1697-272">否则，所有记录将从数据源填充。</span><span class="sxs-lookup"><span data-stu-id="e1697-272">Otherwise, all the records will be populated from the data source.</span></span> |

### <a name="web-applications"></a><span data-ttu-id="e1697-273">Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="e1697-273">Web applications</span></span>

<span data-ttu-id="e1697-274">可使用 Web 应用程序页面设置 Web 应用程序的参数，以便支持开放标准 OAuth 2.0，后者用于供用户在不共享自己的访问凭证的情况下，为该应用程序授予代表自己的“安全委托访问权限”。</span><span class="sxs-lookup"><span data-stu-id="e1697-274">You use web applications page to set up parameters of a web application to support open standard OAuth 2.0 which lets users grant  "secure delegated access" to the application on their behalf, without sharing their access credentials.</span></span> <span data-ttu-id="e1697-275">也可以通过此页面获取授权码和访问令牌来了解授权流程。</span><span class="sxs-lookup"><span data-stu-id="e1697-275">From this page you can also go through the authorization process by getting an authorization code and access token.</span></span> <span data-ttu-id="e1697-276">您可以在 **Web 应用程序**页（**税** \> **设置** \> **电子消息** \> **Web 应用程序**）设置 Web 应用程序设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-276">You can set up web application settings on the **Web applications** page (**Tax** \> **Setup** \> **Electronic messages** \> **Web applications**).</span></span>

<span data-ttu-id="e1697-277">下表描述 **Web 应用程序**页的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-277">The following table describes the fields on the **Web applications** page.</span></span>

| <span data-ttu-id="e1697-278">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-278">Field</span></span>                         | <span data-ttu-id="e1697-279">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-279">Description</span></span> |
|-------------------------------|-------------|
| <span data-ttu-id="e1697-280">应用程序名称</span><span class="sxs-lookup"><span data-stu-id="e1697-280">Application name</span></span>              | <span data-ttu-id="e1697-281">为 Web 应用程序输入名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-281">Enter a name for the web application.</span></span> |
| <span data-ttu-id="e1697-282">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-282">Description</span></span>                   | <span data-ttu-id="e1697-283">输入 Web 应用程序的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-283">Enter a description of the web application.</span></span> |
| <span data-ttu-id="e1697-284">基 URL</span><span class="sxs-lookup"><span data-stu-id="e1697-284">Base URL</span></span>                      | <span data-ttu-id="e1697-285">输入 Web 应用程序的基 Internet 地址。</span><span class="sxs-lookup"><span data-stu-id="e1697-285">Enter the base internet address of the web application.</span></span> |
| <span data-ttu-id="e1697-286">授权 URL 路径</span><span class="sxs-lookup"><span data-stu-id="e1697-286">Authorization URL path</span></span>        | <span data-ttu-id="e1697-287">指定构成用于进行授权的 URL 的路径。</span><span class="sxs-lookup"><span data-stu-id="e1697-287">Specify the path to compose URL for authorization.</span></span>  |
| <span data-ttu-id="e1697-288">令牌 URL 路径</span><span class="sxs-lookup"><span data-stu-id="e1697-288">Token URL path</span></span>                | <span data-ttu-id="e1697-289">指定构成令牌的 URL 的路径。</span><span class="sxs-lookup"><span data-stu-id="e1697-289">Specify the path to compose URL for token.</span></span>  |
| <span data-ttu-id="e1697-290">重定向 URL</span><span class="sxs-lookup"><span data-stu-id="e1697-290">Redirect URL</span></span>                  | <span data-ttu-id="e1697-291">输入重定向 URL。</span><span class="sxs-lookup"><span data-stu-id="e1697-291">Enter the redirect URL.</span></span>  |
| <span data-ttu-id="e1697-292">客户端 ID</span><span class="sxs-lookup"><span data-stu-id="e1697-292">Client ID</span></span>                     | <span data-ttu-id="e1697-293">输入 Web 应用程序的客户端 ID。</span><span class="sxs-lookup"><span data-stu-id="e1697-293">Enter the Client ID of the web application.</span></span>  |
| <span data-ttu-id="e1697-294">客户端密钥</span><span class="sxs-lookup"><span data-stu-id="e1697-294">Client secret</span></span>                 | <span data-ttu-id="e1697-295">输入 Web 应用程序的客户端密钥。</span><span class="sxs-lookup"><span data-stu-id="e1697-295">Enter the Client secret of the web application.</span></span>  |
| <span data-ttu-id="e1697-296">服务器令牌</span><span class="sxs-lookup"><span data-stu-id="e1697-296">Server token</span></span>                  | <span data-ttu-id="e1697-297">输入 Web 应用程序的服务器令牌。</span><span class="sxs-lookup"><span data-stu-id="e1697-297">Enter the server token of the web application.</span></span>  |
| <span data-ttu-id="e1697-298">授权格式映射</span><span class="sxs-lookup"><span data-stu-id="e1697-298">Authorization format mapping</span></span>  | <span data-ttu-id="e1697-299">选择要用于生成授权请求的电子申报 (ER) 格式。</span><span class="sxs-lookup"><span data-stu-id="e1697-299">Select an Electronic Reporting (ER) format to be used to generate the request for authorization.</span></span>   |
| <span data-ttu-id="e1697-300">导入令牌模型映射</span><span class="sxs-lookup"><span data-stu-id="e1697-300">Import token model mapping</span></span>    | <span data-ttu-id="e1697-301">选择要用于存储访问令牌的 ER 导入模型。</span><span class="sxs-lookup"><span data-stu-id="e1697-301">Select an ER importing model mapping to be used to store access token.</span></span>  |
| <span data-ttu-id="e1697-302">授予的范围      访问令牌的到期前时间</span><span class="sxs-lookup"><span data-stu-id="e1697-302">Granted scope      Access token will expire in</span></span>  | <span data-ttu-id="e1697-303">此字段将自动更新。</span><span class="sxs-lookup"><span data-stu-id="e1697-303">This field will be updated automatically.</span></span> <span data-ttu-id="e1697-304">其值显示授予的 Web 应用程序请求范围。</span><span class="sxs-lookup"><span data-stu-id="e1697-304">Its value shows granted scope of requests to the web application.</span></span>  |
| <span data-ttu-id="e1697-305">接受</span><span class="sxs-lookup"><span data-stu-id="e1697-305">Accept</span></span>                        | <span data-ttu-id="e1697-306">指定 Web 请求接受属性。</span><span class="sxs-lookup"><span data-stu-id="e1697-306">Sepecify the web request accept property.</span></span> <span data-ttu-id="e1697-307">例如，“application/vnd.hmrc.1.0+json”。</span><span class="sxs-lookup"><span data-stu-id="e1697-307">For example, "application/vnd.hmrc.1.0+json".</span></span>  |
| <span data-ttu-id="e1697-308">内容类型</span><span class="sxs-lookup"><span data-stu-id="e1697-308">Content type</span></span>           | <span data-ttu-id="e1697-309">指定内容类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-309">Specify content type.</span></span> <span data-ttu-id="e1697-310">例如，“application/json”。</span><span class="sxs-lookup"><span data-stu-id="e1697-310">For example, "application/json".</span></span>  |

<span data-ttu-id="e1697-311">**Web 应用程序**中提供以下功能为授权流程提供支持：</span><span class="sxs-lookup"><span data-stu-id="e1697-311">Following functions are available from **Web applications** page to support authorization process:</span></span>
-   <span data-ttu-id="e1697-312">**获取授权代码** - 初始化 Web 应用程序的授权。</span><span class="sxs-lookup"><span data-stu-id="e1697-312">**Get authorization code** - to initialize authorization of the web application.</span></span>
-   <span data-ttu-id="e1697-313">**获取访问令牌** - 初始化访问令牌的获取。</span><span class="sxs-lookup"><span data-stu-id="e1697-313">**Obtain access token** - to initialize getting of an access token.</span></span>
-   <span data-ttu-id="e1697-314">**刷新访问令牌** - 刷新访问令牌。</span><span class="sxs-lookup"><span data-stu-id="e1697-314">**Refresh access token** - to refresh an access token.</span></span>

<span data-ttu-id="e1697-315">可将以加密格式存储在系统数据库中的 Web 应用程序访问令牌用于请求 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="e1697-315">When an access token to a web application stored in the data base of the system in encrypted format it can be used for requests to a web service.</span></span> <span data-ttu-id="e1697-316">出于安全目的，只有必须允许解决这些请求的安全角色才能访问这些访问令牌。</span><span class="sxs-lookup"><span data-stu-id="e1697-316">For the security purposes access to the access token must be restricted for only those security roles which must be allowed to address those requests.</span></span> <span data-ttu-id="e1697-317">当不属于该安全组的用户尝试解决请求时，将通过异常来通知该用户不允许其通过所选 Web 应用程序进行互操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-317">When a user outside of the security group is trying to address a request, an exception will inform user that he(she) is not allowed to interoperate via selected web application.</span></span>
<span data-ttu-id="e1697-318">请使用“税 > 设置 > 电子消息 > Web 应用程序“页的**安全角色**快速选项卡设置必须可以访问访问令牌的角色。</span><span class="sxs-lookup"><span data-stu-id="e1697-318">Use **Security roles** fast table of the Tax > Setup > Electronic messages > Web applications page to set up roles which must have access to access token.</span></span> <span data-ttu-id="e1697-319">如果不为 Web 应用程序定义安全角色，则只有系统管理员可以通过此 Web 应用程序互操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-319">When Security roles are not defined for a web application, a system administrator only will be able to interoperate via this web application.</span></span>

### <a name="web-service-settings"></a><span data-ttu-id="e1697-320">Web 服务设置</span><span class="sxs-lookup"><span data-stu-id="e1697-320">Web service settings</span></span>

<span data-ttu-id="e1697-321">您使用 Web 服务设置对传输到 Web 服务的直接数据传输进行设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-321">You use web service settings to set up direct data transmission to a web service.</span></span> <span data-ttu-id="e1697-322">您可以在 **Web 服务设置**页（**税** \> **设置** \> **电子消息** \> **Web 服务设置**）设置 Web 服务设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-322">You can set up web service settings on the **Web service settings** page (**Tax** \> **Setup** \> **Electronic messages** \> **Web service settings**).</span></span>

<span data-ttu-id="e1697-323">下表描述 **Web 服务设置**页的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-323">The following table describes the fields on the **Web service settings** page.</span></span>

| <span data-ttu-id="e1697-324">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-324">Field</span></span>                   | <span data-ttu-id="e1697-325">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-325">Description</span></span> |
|-------------------------|-------------|
| <span data-ttu-id="e1697-326">Web 服务</span><span class="sxs-lookup"><span data-stu-id="e1697-326">Web service</span></span>             | <span data-ttu-id="e1697-327">为 Web 服务输入名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-327">Enter a name for the web service.</span></span> |
| <span data-ttu-id="e1697-328">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-328">Description</span></span>             | <span data-ttu-id="e1697-329">输入 Web 服务的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-329">Enter a description of the web service.</span></span> |
| <span data-ttu-id="e1697-330">Internet 地址</span><span class="sxs-lookup"><span data-stu-id="e1697-330">Internet address</span></span>        | <span data-ttu-id="e1697-331">输入 Web 服务的 Internet 地址。</span><span class="sxs-lookup"><span data-stu-id="e1697-331">Enter the internet address of the web service.</span></span> <span data-ttu-id="e1697-332">如果为 Web 服务指定了 Web 应用程序，并且 Internet 地址应该与为所选 Web 应用程序定义的相同，则请单击**复制基 URL** 按钮将**基 URL** 从 Web 应用程序复制到 Web 服务的 **Internet 地址**字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-332">If a web application is specified for a web servise and the internet address should be the same as the one defined for the selected web application, click **Copy base URL** button to copy the **Base URL** from web application to **Internet address** field of web service.</span></span>  |
| <span data-ttu-id="e1697-333">证书</span><span class="sxs-lookup"><span data-stu-id="e1697-333">Certificate</span></span>             | <span data-ttu-id="e1697-334">选择此前设置的密钥保管库证书。</span><span class="sxs-lookup"><span data-stu-id="e1697-334">Select a Key Vault certificate that has previously been set up.</span></span> |
| <span data-ttu-id="e1697-335">Web 应用程序</span><span class="sxs-lookup"><span data-stu-id="e1697-335">Web application</span></span>         | <span data-ttu-id="e1697-336">选择此前设置的密钥保管库证书。</span><span class="sxs-lookup"><span data-stu-id="e1697-336">Select a Key Vault certificate that has previously been set up.</span></span> |
| <span data-ttu-id="e1697-337">响应类型 - XML</span><span class="sxs-lookup"><span data-stu-id="e1697-337">The response type – XML</span></span> | <span data-ttu-id="e1697-338">如果响应类型是 XML，将此选项设置为**是**。</span><span class="sxs-lookup"><span data-stu-id="e1697-338">Set this option to **Yes** if the response type is XML.</span></span> |
| <span data-ttu-id="e1697-339">请求方法</span><span class="sxs-lookup"><span data-stu-id="e1697-339">Request method</span></span>          | <span data-ttu-id="e1697-340">指定请求的方法。</span><span class="sxs-lookup"><span data-stu-id="e1697-340">Specify the method of the request.</span></span> <span data-ttu-id="e1697-341">HTTP 定义指示应该为给定资源执行的操作的一组请求方法。</span><span class="sxs-lookup"><span data-stu-id="e1697-341">HTTP defines a set of request methods that indicate the action that should be performed for a given resource.</span></span> <span data-ttu-id="e1697-342">方法可以是 **GET**、**POST**，或其他 HTTP 方法。</span><span class="sxs-lookup"><span data-stu-id="e1697-342">The method can be **GET**, **POST**, or another HTTP method.</span></span> |
| <span data-ttu-id="e1697-343">请求标题</span><span class="sxs-lookup"><span data-stu-id="e1697-343">Request headers</span></span>         | <span data-ttu-id="e1697-344">指定请求标题。</span><span class="sxs-lookup"><span data-stu-id="e1697-344">Specify request headers.</span></span> <span data-ttu-id="e1697-345">请求标题是可以在 HTTP 请求中使用但与消息内容不相关的 HTTP 标题。</span><span class="sxs-lookup"><span data-stu-id="e1697-345">A request header is an HTTP header that can be used in an HTTP request, and that isn't related to the content of the message.</span></span> |
| <span data-ttu-id="e1697-346">接受</span><span class="sxs-lookup"><span data-stu-id="e1697-346">Accept</span></span>                  | <span data-ttu-id="e1697-347">指定 Web 请求接受属性。</span><span class="sxs-lookup"><span data-stu-id="e1697-347">Specify web request accept property.</span></span> |
| <span data-ttu-id="e1697-348">接受编码</span><span class="sxs-lookup"><span data-stu-id="e1697-348">Accept encoding</span></span>         | <span data-ttu-id="e1697-349">指定接受编码。</span><span class="sxs-lookup"><span data-stu-id="e1697-349">Specify the Accept-Encoding.</span></span> <span data-ttu-id="e1697-350">接受编码请求 HTTP 标题给予客户可以了解的内容编码的建议。</span><span class="sxs-lookup"><span data-stu-id="e1697-350">The Accept-Encoding request HTTP header advertises the content encoding that the client can understand.</span></span> <span data-ttu-id="e1697-351">此内容编码通常是压缩算法。</span><span class="sxs-lookup"><span data-stu-id="e1697-351">This content encoding is usually a compression algorithm.</span></span> |
| <span data-ttu-id="e1697-352">内容类型</span><span class="sxs-lookup"><span data-stu-id="e1697-352">Content type</span></span>            | <span data-ttu-id="e1697-353">指定内容类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-353">Specify the content type.</span></span> <span data-ttu-id="e1697-354">内容类型实体标题指示资源的媒体类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-354">The Content-Type entity header indicates the media type of the resource.</span></span> |
| <span data-ttu-id="e1697-355">成功的响应代码</span><span class="sxs-lookup"><span data-stu-id="e1697-355">Successful response code</span></span>   | <span data-ttu-id="e1697-356">指定用于指示请求已成功的 HTTP 状态代码。</span><span class="sxs-lookup"><span data-stu-id="e1697-356">Specify HTTP status codeindicating that the request was successful.</span></span> |
| <span data-ttu-id="e1697-357">请求标题格式映射</span><span class="sxs-lookup"><span data-stu-id="e1697-357">Request headers format mapping</span></span>  | <span data-ttu-id="e1697-358">选择 ER 格式以生成 Web 请求标题。</span><span class="sxs-lookup"><span data-stu-id="e1697-358">Select the ER format for generation of web request headers.</span></span> |

### <a name="message-processing-actions"></a><span data-ttu-id="e1697-359">消息处理操作</span><span class="sxs-lookup"><span data-stu-id="e1697-359">Message processing actions</span></span>

<span data-ttu-id="e1697-360">您使用消息处理操作创建流程的操作和设置操作参数。</span><span class="sxs-lookup"><span data-stu-id="e1697-360">You use message processing actions to create actions for your processes and set up their parameters.</span></span> <span data-ttu-id="e1697-361">您可以在**消息处理操作**页（**税** \> **设置** \> **电子消息** \> **消息处理操作**）设置消息处理操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-361">You can set up message processing actions on the **Message processing actions** page (**Tax** \> **Setup** \> **Electronic messages** \> **Message processing actions**).</span></span>

<span data-ttu-id="e1697-362">下表描述**消息处理操作**页的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-362">The following tables describe the fields on the **Message processing actions** page.</span></span>

#### <a name="general-fasttab"></a><span data-ttu-id="e1697-363">常规快速选项卡</span><span class="sxs-lookup"><span data-stu-id="e1697-363">General FastTab</span></span>

| <span data-ttu-id="e1697-364">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-364">Field</span></span>                   | <span data-ttu-id="e1697-365">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-365">Description</span></span> |
|-------------------------|-------------|
| <span data-ttu-id="e1697-366">操作类型</span><span class="sxs-lookup"><span data-stu-id="e1697-366">Action type</span></span>             | <span data-ttu-id="e1697-367">选择操作的类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-367">Select the type of action.</span></span> <span data-ttu-id="e1697-368">有关可用选项的信息，请参阅[消息处理操作类型](#message-processing-action-types)部分。</span><span class="sxs-lookup"><span data-stu-id="e1697-368">For information about the available options, see the [Message processing action types](#message-processing-action-types) section.</span></span> |
| <span data-ttu-id="e1697-369">格式映射</span><span class="sxs-lookup"><span data-stu-id="e1697-369">Format mapping</span></span>          | <span data-ttu-id="e1697-370">选择应为操作调用的 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="e1697-370">Select the ER format that should be called for the action.</span></span> <span data-ttu-id="e1697-371">此字段仅可用于**电子报告导出**、**电子报告导入**、**电子报告导出消息**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-371">This field is available only for actions of the **Electronic reporting export**, **Electronic reporting import**, **Electronic reporting export message** types.</span></span> |
| <span data-ttu-id="e1697-372">URL 路径的格式映射</span><span class="sxs-lookup"><span data-stu-id="e1697-372">Format mapping for URL path</span></span> | <span data-ttu-id="e1697-373">选择应为操作调用的 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="e1697-373">Select the ER format that should be called for the action.</span></span> <span data-ttu-id="e1697-374">此字段仅适用于 **Web 服务**类型的操作，用于构成将添加到为所选 Web 服务器指定的基 Internet 地址的 URL 地址的路径。</span><span class="sxs-lookup"><span data-stu-id="e1697-374">This field is available only for actions of the **Web service** types and is used to compose path of the URL address which will be added to the base internet address specified for the selected web server.</span></span> |
| <span data-ttu-id="e1697-375">消息项类型</span><span class="sxs-lookup"><span data-stu-id="e1697-375">Message item type</span></span>       | <span data-ttu-id="e1697-376">选择应为其评估操作的记录的类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-376">Select the type of records that the action should be evaluated for.</span></span> <span data-ttu-id="e1697-377">此字段可用于**消息项执行级别**、**电子报告导出**、**电子报告导入**、**Web 服务**以及其他一些类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-377">This field is available for actions of the **Message item execution level**, **Electronic reporting export**, and **Electronic reporting import** types, **Web service** and also some other types.</span></span> <span data-ttu-id="e1697-378">如果将此字段留空，为消息处理定义的所有消息项类型都将进行评估。</span><span class="sxs-lookup"><span data-stu-id="e1697-378">If you leave this field blank, all the message item types that are defined for the message processing are evaluated.</span></span> |
| <span data-ttu-id="e1697-379">可执行类</span><span class="sxs-lookup"><span data-stu-id="e1697-379">Executable class</span></span>        | <span data-ttu-id="e1697-380">选择以前创建的可执行类设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-380">Select executable class settings that were previously created.</span></span> <span data-ttu-id="e1697-381">此字段仅可用于**消息项执行级别**和**消息项执行级别**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-381">This field is available only for actions of the **Message item execution level** and **Message item execution level** types.</span></span> |
| <span data-ttu-id="e1697-382">填充记录行为</span><span class="sxs-lookup"><span data-stu-id="e1697-382">Populate records action</span></span> | <span data-ttu-id="e1697-383">选择此前设置的填充记录操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-383">Select a populate records action that was previously set up.</span></span> <span data-ttu-id="e1697-384">此字段仅可用于**填充记录**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-384">This field is available only for actions of the **Populate records** type.</span></span> |
| <span data-ttu-id="e1697-385">Web 服务</span><span class="sxs-lookup"><span data-stu-id="e1697-385">Web service</span></span>  | <span data-ttu-id="e1697-386">选择此前设置的 Web 服务。</span><span class="sxs-lookup"><span data-stu-id="e1697-386">Select a web service that was previously set up.</span></span> <span data-ttu-id="e1697-387">此字段仅可用于 **Web 服务**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-387">This field is available only for actions of the  **Web service** type.</span></span>  |
| <span data-ttu-id="e1697-388">文件名</span><span class="sxs-lookup"><span data-stu-id="e1697-388">File name</span></span>  | <span data-ttu-id="e1697-389">指定将因为响应 Web 服务器或生成报告而生成操作的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-389">Specify the name of the file which will result the action as a response from web server or generation of a report.</span></span> <span data-ttu-id="e1697-390">此操作仅适用于 **Web 服务**和**电子报告导出消息**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-390">This field is available only for actions of the  **Web service** and **Electronic reporting export message** type.</span></span>   |
| <span data-ttu-id="e1697-391">显示对话框</span><span class="sxs-lookup"><span data-stu-id="e1697-391">Show dialog</span></span>  | <span data-ttu-id="e1697-392">如果必须在生成报告之前向用户显示对话框，请选中此复选框。</span><span class="sxs-lookup"><span data-stu-id="e1697-392">Mark this check box if a dialog must be shown to a user before report generation.</span></span> <span data-ttu-id="e1697-393">此操作仅适用于**电子报告导出消息**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-393">This field is available only for actions of the  **Electronic reporting export message** type.</span></span>   |

##### <a name="message-processing-action-types"></a><span data-ttu-id="e1697-394">消息处理操作类型</span><span class="sxs-lookup"><span data-stu-id="e1697-394">Message processing action types</span></span>

<span data-ttu-id="e1697-395">**操作类型**字段中具有以下选项：</span><span class="sxs-lookup"><span data-stu-id="e1697-395">The following options are available in the **Action type** field:</span></span>

- <span data-ttu-id="e1697-396">**创建消息** – 使用此类型允许用户在**电子消息**页手动创建消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-396">**Create message** – Use this type to let users manually create messages on the **Electronic message** page.</span></span> <span data-ttu-id="e1697-397">无法为此类型的操作设置初始状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-397">An initial status can't be set up for an action of this type.</span></span>
- <span data-ttu-id="e1697-398">**填充记录** – **填充记录**操作必须在以前设置。</span><span class="sxs-lookup"><span data-stu-id="e1697-398">**Populate records** – A **Populate records** action must previously be set up.</span></span> <span data-ttu-id="e1697-399">将其与**填充记录**类型的操作关联以使其包括在处理中。</span><span class="sxs-lookup"><span data-stu-id="e1697-399">Associate it with an action of the **Populate records** type to enable it to be included in processing.</span></span> <span data-ttu-id="e1697-400">假设此操作类型用于消息处理中的第一个操作（当未提前创建电子消息时），或用作向之前创建的消息（通过**创建消息**类型的操作）添加消息项这一操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-400">It's assumed that this action type is used either for the first action in message processing (when no electronic message is created in advance) or as an action adding message items to a previously created message (by an action of **Create message** type).</span></span> <span data-ttu-id="e1697-401">因此，只能为此类型的操作设置仅消息项的结果状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-401">Therefore, result status of only message items can be set up for an action of this type.</span></span> <span data-ttu-id="e1697-402">只能为消息设置初始状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-402">An initial status can be set up for message only.</span></span>
- <span data-ttu-id="e1697-403">**消息执行级别** – 使用此类型设置应在消息级别评估的可执行类。</span><span class="sxs-lookup"><span data-stu-id="e1697-403">**Message execution level** – Use this type to set up an executable class that should be evaluated at the message level.</span></span>
- <span data-ttu-id="e1697-404">**消息项执行级别** – 使用此类型设置应在消息项级别评估的可执行类。</span><span class="sxs-lookup"><span data-stu-id="e1697-404">**Message item execution level** – Use this type to set up an executable class that should be evaluated at the message item level.</span></span>
- <span data-ttu-id="e1697-405">**电子报告导出** – 为应基于消息项级别的导出 ER 配置生成报表的操作使用此类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-405">**Electronic reporting export** – Use this type for actions that should generate a report that is based on an exporting ER configuration at the message item level.</span></span>
- <span data-ttu-id="e1697-406">**电子报告导出消息** – 为应基于消息级别的导出 ER 配置生成报表的操作使用此类型（例如，当消息不包含任何消息项时）。</span><span class="sxs-lookup"><span data-stu-id="e1697-406">**Electronic reporting export message** – Use this type for actions that should generate a report that is based on an exporting ER configuration at the message level (for example, when a message doesn't have any message items).</span></span>
- <span data-ttu-id="e1697-407">**电子报告导入** – 为应基于导入 ER 配置生成报表的操作使用此类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-407">**Electronic reporting import** – Use this type for actions that should generate a report that is based on an importing ER configuration.</span></span>
- <span data-ttu-id="e1697-408">**消息级别用户处理** – 为假定一些用户手动操作的操作使用此类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-408">**Message level user processing** – Use this type for actions that assume some manual actions by the user.</span></span> <span data-ttu-id="e1697-409">例如，用户可能更新消息的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-409">For example, the user might update the status of messages.</span></span>
- <span data-ttu-id="e1697-410">**用户处理** – 为假定一些用户手动操作的操作使用此类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-410">**User processing** – Use this type for actions that assume some manual action by the user.</span></span> <span data-ttu-id="e1697-411">例如，用户可能更新消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-411">For example, the user might update the status of messages items.</span></span>
- <span data-ttu-id="e1697-412">**Web 服务** – 为应将生成的报表传输到 Web 服务的操作使用此类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-412">**Web service** – Use this type for actions that should transmit a generated report to a web service.</span></span> <span data-ttu-id="e1697-413">此操作类型不用于“意大利采购和销售发票通信”报告。</span><span class="sxs-lookup"><span data-stu-id="e1697-413">This action type isn't used for Italian Purchase and Sales Invoices Communication reporting.</span></span> <span data-ttu-id="e1697-414">对于 **Web 服务**类型的操作，可在**消息处理操作**的**杂项详细信息**快速选项卡上指定**确认文本**。</span><span class="sxs-lookup"><span data-stu-id="e1697-414">For actions of **Web service** type you can specify a **Confirmation text** on **Miscellaneous details** fast tab of **Message processing actions**.</span></span> <span data-ttu-id="e1697-415">将在解决对所选 Web 服务的请求之前，向用户显示此确认文本。</span><span class="sxs-lookup"><span data-stu-id="e1697-415">This confirmation text will be show to the user before the request to the selected web service will be addressed.</span></span>
- <span data-ttu-id="e1697-416">**请求验证** – 使用此类型从服务器请求验证。</span><span class="sxs-lookup"><span data-stu-id="e1697-416">**Request verification** – Use this type to request verification from a server.</span></span>

#### <a name="initial-statuses-fasttab"></a><span data-ttu-id="e1697-417">初始状态快速选项卡</span><span class="sxs-lookup"><span data-stu-id="e1697-417">Initial statuses FastTab</span></span>

> [!NOTE]
> <span data-ttu-id="e1697-418">**初始状态**快速选项卡不可用于具有**创建消息**初始类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-418">The **Initial statuses** FastTab isn't available for actions that have an initial type of **Create message**.</span></span>

| <span data-ttu-id="e1697-419">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-419">Field</span></span>               | <span data-ttu-id="e1697-420">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-420">Description</span></span>                                                                                         |
|---------------------|-----------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e1697-421">消息项状态</span><span class="sxs-lookup"><span data-stu-id="e1697-421">Message item status</span></span> | <span data-ttu-id="e1697-422">选择应为其评估所选的消息处理操作的消息项状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-422">Select the message item status that the selected message processing action should be evaluated for.</span></span> |
| <span data-ttu-id="e1697-423">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-423">Description</span></span>         | <span data-ttu-id="e1697-424">所选消息项状态的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-424">A description of the selected message item status.</span></span>                                                  |

#### <a name="result-statuses-fasttab"></a><span data-ttu-id="e1697-425">结果状态快速选项卡</span><span class="sxs-lookup"><span data-stu-id="e1697-425">Result statuses FastTab</span></span>

| <span data-ttu-id="e1697-426">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-426">Field</span></span>               | <span data-ttu-id="e1697-427">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-427">Description</span></span> |
|---------------------|-------------|
| <span data-ttu-id="e1697-428">消息状态</span><span class="sxs-lookup"><span data-stu-id="e1697-428">Message status</span></span>      | <span data-ttu-id="e1697-429">选择应为其评估所选的消息处理操作的消息状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-429">Select the message statuses that the selected message processing action should be evaluated for.</span></span> <span data-ttu-id="e1697-430">此字段仅可用于在消息级别评估的消息处理操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-430">This field is available only for message processing actions that are evaluated at the message level.</span></span> <span data-ttu-id="e1697-431">例如，它不可用于**电子报告导出**和**电子报告导入**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-431">For example, it's available for actions of the **Electronic reporting export** and **Electronic reporting import** types.</span></span> <span data-ttu-id="e1697-432">它不可用于**用户处理**和**消息项执行级别**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-432">It isn't available for actions of the **User processing** and **Message item execution level** types.</span></span> |
| <span data-ttu-id="e1697-433">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-433">Description</span></span>         | <span data-ttu-id="e1697-434">所选消息状态的描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-434">A description of the selected message status.</span></span> |
| <span data-ttu-id="e1697-435">响应类型</span><span class="sxs-lookup"><span data-stu-id="e1697-435">Response type</span></span>       | <span data-ttu-id="e1697-436">所选消息状态的响应类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-436">The response type of the selected message status.</span></span> |
| <span data-ttu-id="e1697-437">消息项状态</span><span class="sxs-lookup"><span data-stu-id="e1697-437">Message item status</span></span> | <span data-ttu-id="e1697-438">选择应在评估所选消息处理操作后可用的生成的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-438">Select the resulting statuses that should be available after the selected message processing action is evaluated.</span></span> <span data-ttu-id="e1697-439">此字段仅可用于在消息项级别评估的消息处理操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-439">This field is available only for message processing actions that are evaluated at the message item level.</span></span> <span data-ttu-id="e1697-440">例如，它可用于**用户处理**和**消息项执行级别**类型的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-440">For example, it's available for actions of the **User processing** and **Message item execution level** types.</span></span> <span data-ttu-id="e1697-441">对于在消息级别评估的消息处理操作，此字段显示为所选消息状态设置的消息项状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-441">For message processing actions that are evaluated at the message level, this field shows the message item status that was set up for the selected message status.</span></span> |

<span data-ttu-id="e1697-442">下表介绍必须设置与操作类型有关的哪些结果状态：</span><span class="sxs-lookup"><span data-stu-id="e1697-442">The following table illustrates what result statuses must be setup in respect to types of actions:</span></span>

| <span data-ttu-id="e1697-443">电子消息操作类型\响应类型</span><span class="sxs-lookup"><span data-stu-id="e1697-443">Electronic message action type \ Response type</span></span>  | <span data-ttu-id="e1697-444">已成功执行</span><span class="sxs-lookup"><span data-stu-id="e1697-444">Successfully executed</span></span>  | <span data-ttu-id="e1697-445">业务错误</span><span class="sxs-lookup"><span data-stu-id="e1697-445">Business error</span></span>  | <span data-ttu-id="e1697-446">技术错误</span><span class="sxs-lookup"><span data-stu-id="e1697-446">Technical error</span></span>  | <span data-ttu-id="e1697-447">用户定义的</span><span class="sxs-lookup"><span data-stu-id="e1697-447">User defined</span></span>  | <span data-ttu-id="e1697-448">取消</span><span class="sxs-lookup"><span data-stu-id="e1697-448">Cancel</span></span>  |
|-------------------------------------------------|--------------|---------|-------|-----|-----------------|
| <span data-ttu-id="e1697-449">创建消息</span><span class="sxs-lookup"><span data-stu-id="e1697-449">Create message</span></span>                                  | <span data-ttu-id="e1697-450">X</span><span class="sxs-lookup"><span data-stu-id="e1697-450">X</span></span>            |         |       |     |                 |
| <span data-ttu-id="e1697-451">电子报告导出</span><span class="sxs-lookup"><span data-stu-id="e1697-451">Electronic reporting export</span></span>                     | <span data-ttu-id="e1697-452">X</span><span class="sxs-lookup"><span data-stu-id="e1697-452">X</span></span>            |         |       |     |                 |
| <span data-ttu-id="e1697-453">电子报告导入</span><span class="sxs-lookup"><span data-stu-id="e1697-453">Electronic reporting import</span></span>                     |              |         |       |     |                 |
| <span data-ttu-id="e1697-454">Web 服务</span><span class="sxs-lookup"><span data-stu-id="e1697-454">Web service</span></span>                                     | <span data-ttu-id="e1697-455">X</span><span class="sxs-lookup"><span data-stu-id="e1697-455">X</span></span>            |         | <span data-ttu-id="e1697-456">X</span><span class="sxs-lookup"><span data-stu-id="e1697-456">X</span></span>     |     |                 |
| <span data-ttu-id="e1697-457">用户处理</span><span class="sxs-lookup"><span data-stu-id="e1697-457">User processing</span></span>                                 |              |         |       |     |                 |
| <span data-ttu-id="e1697-458">消息执行级别</span><span class="sxs-lookup"><span data-stu-id="e1697-458">Message execution level</span></span>                         |              |         |       |     |                 |
| <span data-ttu-id="e1697-459">填充记录</span><span class="sxs-lookup"><span data-stu-id="e1697-459">Populate records</span></span>                                |              |         |       |     |                 |
| <span data-ttu-id="e1697-460">消息项执行级别</span><span class="sxs-lookup"><span data-stu-id="e1697-460">Message item execution level</span></span>                    |              |         |       |     |                 |
| <span data-ttu-id="e1697-461">请求验证</span><span class="sxs-lookup"><span data-stu-id="e1697-461">Request verification</span></span>                            | <span data-ttu-id="e1697-462">X</span><span class="sxs-lookup"><span data-stu-id="e1697-462">X</span></span>            |  <span data-ttu-id="e1697-463">X</span><span class="sxs-lookup"><span data-stu-id="e1697-463">X</span></span>      | <span data-ttu-id="e1697-464">X</span><span class="sxs-lookup"><span data-stu-id="e1697-464">X</span></span>     |     |                 |
| <span data-ttu-id="e1697-465">电子报告导出消息</span><span class="sxs-lookup"><span data-stu-id="e1697-465">Electronic reporting export message</span></span>             | <span data-ttu-id="e1697-466">X</span><span class="sxs-lookup"><span data-stu-id="e1697-466">X</span></span>            |         |       |     |                 |
| <span data-ttu-id="e1697-467">消息级别用户处理</span><span class="sxs-lookup"><span data-stu-id="e1697-467">Message level user processing</span></span>                   |              |         |       |     |                 |

### <a name="electronic-message-processing"></a><span data-ttu-id="e1697-468">电子消息处理</span><span class="sxs-lookup"><span data-stu-id="e1697-468">Electronic message processing</span></span>

<span data-ttu-id="e1697-469">电子消息处理是电子消息功能的基本概念。</span><span class="sxs-lookup"><span data-stu-id="e1697-469">Electronic message processing is a basic concept of the Electronic messages functionality.</span></span> <span data-ttu-id="e1697-470">它聚合应为电子消息评估的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-470">It aggregates actions that should be evaluated for the electronic message.</span></span> <span data-ttu-id="e1697-471">操作可以通过初始状态和结果状态链接。</span><span class="sxs-lookup"><span data-stu-id="e1697-471">The actions can be linked via an initial status and a result status.</span></span> <span data-ttu-id="e1697-472">或者，**用户处理**类型的操作可以独立启动。</span><span class="sxs-lookup"><span data-stu-id="e1697-472">Alternatively, actions of the **User processing** type can be started independently.</span></span> <span data-ttu-id="e1697-473">在**电子消息处理**页（**税** \> **设置** \> **电子消息** \> **电子消息处理**），还可以选择应在消息级或消息项级为处理支持的附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-473">On the **Electronic message processing** page (**Tax** \> **Setup** \> **Electronic messages** \> **Electronic message processing**), you can also select additional fields that should be supported for the processing either on message level or message items level.</span></span>

<span data-ttu-id="e1697-474">**操作**快速选项卡让您可以将预定义的操作添加到处理。</span><span class="sxs-lookup"><span data-stu-id="e1697-474">The **Action** FastTab lets you add predefined actions to the processing.</span></span> <span data-ttu-id="e1697-475">您可以指定是否必须单独运行操作，或者它是否可以通过处理启动。</span><span class="sxs-lookup"><span data-stu-id="e1697-475">You can specify whether an action must be run separately, or whether it can be initiated by the processing.</span></span> <span data-ttu-id="e1697-476">若要定义是否只能由用户初始化操作，请在处理中为操作选中**单独运行**复选框。</span><span class="sxs-lookup"><span data-stu-id="e1697-476">To define whether the action can be initialized by a user only, mark **Run separately** check box for the action in the processing.</span></span> <span data-ttu-id="e1697-477">如果对于定义为操作初始状态的状态的消息或消息项，希望通过处理来启动此操作，请取消选中**单独运行**参数。</span><span class="sxs-lookup"><span data-stu-id="e1697-477">Unmark the  **Run separately** parameter if you want that the action to be started by processing when for messages or message items in the status defined as initial status for this action.</span></span> <span data-ttu-id="e1697-478">**用户操作**类型的操作必须单独运行。</span><span class="sxs-lookup"><span data-stu-id="e1697-478">Action of **User action** type must only be run separately.</span></span> 

<span data-ttu-id="e1697-479">有时可能需要将多项操作聚合为序列，即使其中的第一个操作定义为要单独运行。</span><span class="sxs-lookup"><span data-stu-id="e1697-479">Sometimes it can be needed to aggregate several actions into a sequence even when the first of them is defined to be run separably.</span></span> <span data-ttu-id="e1697-480">例如，当要求必须由用户初始化报表生成，但是报表一生成，就会立即发送给 Web 服务，并且必须在系统中反映 Web 服务的响应时。</span><span class="sxs-lookup"><span data-stu-id="e1697-480">For example, when it is required that report generation must be initialized by a user but once generated report must be immediately sent to a web service and the response from the web service must be reflected in the system.</span></span> <span data-ttu-id="e1697-481">对于此类用途，可使用**不可分序列**。</span><span class="sxs-lookup"><span data-stu-id="e1697-481">You can use for such purpose **Inseparable sequence**.</span></span> <span data-ttu-id="e1697-482">方法是单击**电子消息处理**页的**操作**快速选项卡“操作”窗格中的**不可分序列**按钮，创建序列，在必须始终一起运行的操作的**不可分序列**列中选择该序列。</span><span class="sxs-lookup"><span data-stu-id="e1697-482">To do so, click on **Inseparable sequence** button on the Action pane of **Action** fast tab of **Electronic message processing** page, create a sequence and select it in the **Inseparable sequence** column for those actions which must be run always together.</span></span> <span data-ttu-id="e1697-483">可将此情况中的第一个操作设置为**单独运行**，但其他所有操作不可以。</span><span class="sxs-lookup"><span data-stu-id="e1697-483">The first action in this case can be setup as **Run separately** but all the others no.</span></span>

<span data-ttu-id="e1697-484">**消息项附加字段**快速选项卡让您可以添加与消息项相关的预定义附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-484">The **Message item additional fields** FastTab lets you add predefined additional fields that are related to message items.</span></span> <span data-ttu-id="e1697-485">您必须为与字段相关的每个消息项类型添加附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-485">You must add additional fields for each type of message item that the fields are related to.</span></span>

<span data-ttu-id="e1697-486">**消息附加字段**快速选项卡让您可以添加与消息相关的预定义附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-486">The **Message additional fields** FastTab lets you add predefined additional fields that are related to messages.</span></span>

<span data-ttu-id="e1697-487">**安全角色**快速选项卡允许您设置在进行特定处理的系统中预定义的安全角色。</span><span class="sxs-lookup"><span data-stu-id="e1697-487">The **Security roles** FastTab lets you set up the security roles that are predefined in the system for specific processing.</span></span> <span data-ttu-id="e1697-488">具有特定角色的用户将只看到为该角色定义的处理。</span><span class="sxs-lookup"><span data-stu-id="e1697-488">Users who have a specific role will see only processing that is defined for that role.</span></span>

<span data-ttu-id="e1697-489">**批处理**快速选项卡让您可以设置在批处理制度中执行的处理。</span><span class="sxs-lookup"><span data-stu-id="e1697-489">The **Batch** FastTab lets you set up processing to work in a batch regime.</span></span>

## <a name="work-with-electronic-messages-functionality"></a><span data-ttu-id="e1697-490">使用电子消息功能</span><span class="sxs-lookup"><span data-stu-id="e1697-490">Work with Electronic messages functionality</span></span>

<span data-ttu-id="e1697-491">如果您在消息级别工作，**电子消息**页（**税** \> **查询和报表** \> **电子消息** \> **电子消息**）更有用。</span><span class="sxs-lookup"><span data-stu-id="e1697-491">If you're working at the message level, the **Electronic messages** page (**Tax** \> **Inquiries and reports** \> **Electronic messages** \> **Electronic messages**) is more useful.</span></span> <span data-ttu-id="e1697-492">如果您在数据收集（消息项）级别运行，**电子消息项**页（**税** \> **查询和报表** \> **电子消息** \> **电子消息项**）更有用。</span><span class="sxs-lookup"><span data-stu-id="e1697-492">If you're operating at the data collection (message item) level, the **Electronic message items** page (**Tax** \> **Inquires and reports** \> **Electronic messages** \> **Electronic message items**) is more useful.</span></span>

### <a name="electronic-messages"></a><span data-ttu-id="e1697-493">电子消息</span><span class="sxs-lookup"><span data-stu-id="e1697-493">Electronic messages</span></span>

<span data-ttu-id="e1697-494">**电子消息**页根据您的角色显示对您可用的处理。</span><span class="sxs-lookup"><span data-stu-id="e1697-494">The **Electronic messages** page presents the processing that is available to you, based on your role.</span></span> <span data-ttu-id="e1697-495">安全角色与该处理的设置中的处理关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-495">Security roles are associated with processing in the setup of that processing.</span></span> <span data-ttu-id="e1697-496">对于每个您可用的处理，此页显示电子消息和与之相关的信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-496">For each processing that is available to you, the page shows electronic messages and information that is related to them.</span></span>

<span data-ttu-id="e1697-497">**消息**快速选项卡显示所选处理的电子消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-497">The **Messages** FastTab shows electronic messages for the selected processing.</span></span> <span data-ttu-id="e1697-498">根据所选消息和预定义处理的状态，您可以通过选择网格上方的按钮运行一些操作：</span><span class="sxs-lookup"><span data-stu-id="e1697-498">Depending on the status of the selected message and predefined processing, you can run some actions by selecting the buttons above the grid:</span></span>

- <span data-ttu-id="e1697-499">**新建** – 此按钮与**创建消息**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-499">**New** – This button is associated with actions of the **Create message** type.</span></span>
- <span data-ttu-id="e1697-500">**删除** – 如果选择了所选消息的当前状态的**允许删除**复选框，此按钮可用。</span><span class="sxs-lookup"><span data-stu-id="e1697-500">**Delete** – This button is available if the **Allow delete** check box is selected for the current status of the selected message.</span></span>
- <span data-ttu-id="e1697-501">**收集数据** - 此按钮与**填充记录**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-501">**Collect data** - This button is associated with action of the **Populate records** type.</span></span>
- <span data-ttu-id="e1697-502">**生成报表** – 此按钮与**电子报告导出消息**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-502">**Generate report** – This button is associated with actions of the **Electronic reporting export message** type.</span></span>
- <span data-ttu-id="e1697-503">**发送报表** – 此按钮与 **Web 服务**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-503">**Send report** – This button is associated with actions of the **Web service** type.</span></span>
- <span data-ttu-id="e1697-504">**导入响应** – 此按钮与**电子报告导入**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-504">**Import response** - This button is assocoated with actions of the **Electronic reporting import** type.</span></span>
- <span data-ttu-id="e1697-505">**更新状态** – 此按钮与**消息级别用户处理**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-505">**Update status** – This button is associated with actions of the **Message level user processing** type.</span></span>
- <span data-ttu-id="e1697-506">**消息项** – 打开**电子消息项**页。</span><span class="sxs-lookup"><span data-stu-id="e1697-506">**Message items** – Open the **Electronic message items** page.</span></span>

<span data-ttu-id="e1697-507">**操作日志**快速选项卡显示有关为所选消息运行的所有操作的信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-507">The **Action log** FastTab shows information about all the actions that have been run for the selected message.</span></span> <span data-ttu-id="e1697-508">如果操作产生了错误，将在相关“操作”日志行中附加有关该错误的信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-508">If an action resulted an error, information about the error will be attached to the related Action log line.</span></span> <span data-ttu-id="e1697-509">选择行并单击页中右上角的**剪辑**按钮可查看有关错误的信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-509">Select the line and click on **clip** button on the top right corner on the page to review the information about the error.</span></span>

<span data-ttu-id="e1697-510">**消息附加字段**快速选项卡显示为处理设置中的消息定义的所有附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-510">The **Message additional fields** FastTab shows all the additional fields that are defined for messages in the processing setup.</span></span> <span data-ttu-id="e1697-511">它还显示这些附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="e1697-511">It also shows the values of those additional fields.</span></span>

<span data-ttu-id="e1697-512">**消息项**快速选项卡显示与所选消息相关的所有消息项。</span><span class="sxs-lookup"><span data-stu-id="e1697-512">The **Message items** FastTab shows all the message items that are related to the selected message.</span></span> <span data-ttu-id="e1697-513">可对各消息项使用以下功能，具体取决于此消息项的状态：</span><span class="sxs-lookup"><span data-stu-id="e1697-513">For each of the messge item folliwing fynction can be used depending on status of this message item:</span></span>

- <span data-ttu-id="e1697-514">**删除** – 如果选择了所选消息项的当前状态的**允许删除**复选框，此按钮可用。</span><span class="sxs-lookup"><span data-stu-id="e1697-514">**Delete** – This button is available if the **Allow delete** check box is selected for the current status of the selected message item.</span></span>
- <span data-ttu-id="e1697-515">**更新状态** – 此按钮与**用户处理**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-515">**Update status** – This button is associated with actions of the **User processing** type.</span></span>
- <span data-ttu-id="e1697-516">**原始凭证** - 用户可通过此按钮打开包含所选消息原始凭证的页面。</span><span class="sxs-lookup"><span data-stu-id="e1697-516">**Original document** - This button allows user to open a page with the original document of the selected message.</span></span>

<span data-ttu-id="e1697-517">您可以查看所选消息的所有附件。</span><span class="sxs-lookup"><span data-stu-id="e1697-517">You can review all the attachments for the selected message.</span></span> <span data-ttu-id="e1697-518">这些附件是已生成并接收的报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-518">These attachments are reports that have already been generated and received.</span></span> <span data-ttu-id="e1697-519">选择要查看其附件的消息，然后选择操作窗格上的**附件**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1697-519">Select the message to review attachments for, and then select the **Attachment** button on the Action Pane.</span></span>

![“附件”按钮](media/attachment-icon.png)

<span data-ttu-id="e1697-521">**附件**页显示与消息相关的所有附件。</span><span class="sxs-lookup"><span data-stu-id="e1697-521">The **Attachments** page shows all the attachments that are related to the message.</span></span> <span data-ttu-id="e1697-522">若要查看文件，请在左侧列表中选择它，然后选择操作窗格上的**打开**。</span><span class="sxs-lookup"><span data-stu-id="e1697-522">To view a file, select it in the list on the left, and then select **Open** on the Action Pane.</span></span>

![“打开”按钮](media/open-button.png)

<span data-ttu-id="e1697-524">若要查看与以前为消息运行的特定操作相关的附件，请选择**电子消息**页上的消息，然后，在**操作日志**快速选项卡上，选择该操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-524">To review an attachment that is related to a specific action that was previously run for a message, select the message on the **Electronic messages** page, and then, on **Action log** FastTab, select the action.</span></span> <span data-ttu-id="e1697-525">然后选择操作窗格上的**附件**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1697-525">Then select the **Attachment** button on the Action Pane.</span></span>

<span data-ttu-id="e1697-526">您还可以通过选择操作窗格上的**运行处理**运行整个处理或特定操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-526">You can also run either the whole processing or just a specific action by selecting **Run processing** on the Action Pane.</span></span>

### <a name="electronic-message-items"></a><span data-ttu-id="e1697-527">电子消息项</span><span class="sxs-lookup"><span data-stu-id="e1697-527">Electronic message items</span></span>

<span data-ttu-id="e1697-528">**电子消息项**页显示所有消息项，以及为每个消息项运行的操作的日志。</span><span class="sxs-lookup"><span data-stu-id="e1697-528">The **Electronic message items** page presents all message items and a log of the actions that have been run for each message item.</span></span> <span data-ttu-id="e1697-529">它还显示为消息项定义的附加字段，以及这些附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="e1697-529">It also shows the additional fields that are defined for the message items, and the values of those additional fields.</span></span>

<span data-ttu-id="e1697-530">下表描述**消息项**选项卡的字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-530">The following table describes the fields on the **Message items** tab.</span></span>

<table>
<thead>
<tr>
<th><span data-ttu-id="e1697-531">字段</span><span class="sxs-lookup"><span data-stu-id="e1697-531">Field</span></span></th>
<th><span data-ttu-id="e1697-532">说明</span><span class="sxs-lookup"><span data-stu-id="e1697-532">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span data-ttu-id="e1697-533">处理中</span><span class="sxs-lookup"><span data-stu-id="e1697-533">Processing</span></span></td>
<td><span data-ttu-id="e1697-534">用于创建消息项的处理的名称。</span><span class="sxs-lookup"><span data-stu-id="e1697-534">The name of the processing that was used to create the message item.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-535">消息项</span><span class="sxs-lookup"><span data-stu-id="e1697-535">Message item</span></span></td>
<td><span data-ttu-id="e1697-536">消息项的 ID。</span><span class="sxs-lookup"><span data-stu-id="e1697-536">The ID of the message item.</span></span> <span data-ttu-id="e1697-537">此 ID 基于在<strong>总帐参数</strong>页定义的<strong>消息项</strong>编号规则自动分配。</span><span class="sxs-lookup"><span data-stu-id="e1697-537">This ID is assigned automatically, based on the <strong>Message item</strong> number sequence that is defined on the <strong>General ledger parameters</strong> page.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-538">消息项日期</span><span class="sxs-lookup"><span data-stu-id="e1697-538">Message item date</span></span></td>
<td><span data-ttu-id="e1697-539">创建消息项的日期。</span><span class="sxs-lookup"><span data-stu-id="e1697-539">The date when the message item was created.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-540">消息项类型</span><span class="sxs-lookup"><span data-stu-id="e1697-540">Message item type</span></span></td>
<td><span data-ttu-id="e1697-541">消息项的类型。</span><span class="sxs-lookup"><span data-stu-id="e1697-541">The type of message item.</span></span> <span data-ttu-id="e1697-542">可以为同一个处理设置多个消息项类型（例如，<strong>传入发票</strong>和<strong>传出发票</strong>）。</span><span class="sxs-lookup"><span data-stu-id="e1697-542">Several types of messages items can be set up for the same processing (for example, <strong>Incoming invoices</strong> and <strong>Outgoing invoices</strong>).</span></span> <span data-ttu-id="e1697-543">只有当发票被添加到消息项表时，此字段才会自动填充。</span><span class="sxs-lookup"><span data-stu-id="e1697-543">This field can be filled in automatically only when an invoice is added to the Message items table.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-544">消息项状态</span><span class="sxs-lookup"><span data-stu-id="e1697-544">Message item status</span></span></td>
<td><span data-ttu-id="e1697-545">消息项的实际状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-545">The actual status of the message item.</span></span> <span data-ttu-id="e1697-546">可用状态随消息项类型而变化。</span><span class="sxs-lookup"><span data-stu-id="e1697-546">The available statuses vary, depending on the type of message item.</span></span> <span data-ttu-id="e1697-547">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="e1697-547">Here are some examples:</span></span>
<ul>
<li><span data-ttu-id="e1697-548"><strong>已填充</strong> – 记录已添加到消息项表中。</span><span class="sxs-lookup"><span data-stu-id="e1697-548"><strong>Populated</strong> – A record was added to the Message items table.</span></span></li>
<li><span data-ttu-id="e1697-549"><strong>已评估</strong> – 已为消息项计算其他属性。</span><span class="sxs-lookup"><span data-stu-id="e1697-549"><strong>Evaluated</strong> – Additional attributes were calculated for the message item.</span></span></li>
<li><span data-ttu-id="e1697-550"><strong>已报告</strong> – 消息项已成功添加到报表中。</span><span class="sxs-lookup"><span data-stu-id="e1697-550"><strong>Reported</strong> – The message item was successfully added to a report.</span></span></li>
<li><span data-ttu-id="e1697-551"><strong>已排除</strong> – 如果您必须在导出报表前从报表中排除一些消息项，此状态可能有用。</span><span class="sxs-lookup"><span data-stu-id="e1697-551"><strong>Excluded</strong> – This status can be useful if you must exclude some message items from a report before it's exported.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="e1697-552">传输日期</span><span class="sxs-lookup"><span data-stu-id="e1697-552">Transmission date</span></span></td>
<td><span data-ttu-id="e1697-553">对于在系统外自动传输生成的报表的处理，为传输消息项的日期。</span><span class="sxs-lookup"><span data-stu-id="e1697-553">For processing that automatically transmits a generated report outside the system, the date when the message item was transmitted.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-554">文档编号</span><span class="sxs-lookup"><span data-stu-id="e1697-554">Document number</span></span></td>
<td><span data-ttu-id="e1697-555">此字段基于填充记录操作的设置自动填充。</span><span class="sxs-lookup"><span data-stu-id="e1697-555">This field is filled in automatically, based on the setup of the populate records action.</span></span> <span data-ttu-id="e1697-556">只有当发票被添加到消息项表时，此字段才会自动填充。</span><span class="sxs-lookup"><span data-stu-id="e1697-556">This field can be filled in automatically only when an invoice is added to the Message items table.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-557">帐号</span><span class="sxs-lookup"><span data-stu-id="e1697-557">Account number</span></span></td>
<td><span data-ttu-id="e1697-558">客户或供应商的帐号（或其他字段值，根据在<strong>填充记录</strong>操作上定义的字段）。</span><span class="sxs-lookup"><span data-stu-id="e1697-558">The account number of a customer or vendor (or another field value, depending on the field that is defined on the <strong>Populate records</strong> action).</span></span> <span data-ttu-id="e1697-559">只有当发票被添加到消息项表时，此字段才会自动填充。</span><span class="sxs-lookup"><span data-stu-id="e1697-559">This field can be filled in automatically only when an invoice is added to the Message items table.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-560">消息</span><span class="sxs-lookup"><span data-stu-id="e1697-560">Message</span></span></td>
<td><span data-ttu-id="e1697-561">消息的编号。</span><span class="sxs-lookup"><span data-stu-id="e1697-561">The number of the message.</span></span> <span data-ttu-id="e1697-562">此编号基于在<strong>总帐参数</strong>页定义的<strong>消息</strong>编号规则自动分配。</span><span class="sxs-lookup"><span data-stu-id="e1697-562">This number is assigned automatically, based on the <strong>Message</strong> number sequence that is defined on the <strong>General ledger parameters</strong> page.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-563">消息状态</span><span class="sxs-lookup"><span data-stu-id="e1697-563">Message status</span></span></td>
<td><span data-ttu-id="e1697-564">电子消息的实际状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-564">The actual status of the electronic message.</span></span></td>
</tr>
<tr>
<td><span data-ttu-id="e1697-565">后续操作</span><span class="sxs-lookup"><span data-stu-id="e1697-565">Next action</span></span></td>
<td><span data-ttu-id="e1697-566">可以为消息项的当前状态启动的下一个操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-566">The next actions that can be initiated for the current status of the message item.</span></span></td>
</tr>
</tbody>
</table>

<span data-ttu-id="e1697-567">**附加字段**选项卡显示所选消息项的附加字段及其值。</span><span class="sxs-lookup"><span data-stu-id="e1697-567">The **Additional fields** tab shows the additional fields for the selected message item, and their values.</span></span>

#### <a name="run-processing"></a><span data-ttu-id="e1697-568">运行处理</span><span class="sxs-lookup"><span data-stu-id="e1697-568">Run processing</span></span>

<span data-ttu-id="e1697-569">选择操作窗格上的**运行处理**运行消息项的处理。</span><span class="sxs-lookup"><span data-stu-id="e1697-569">Select **Run processing** on the Action Pane to run the processing for message items.</span></span> <span data-ttu-id="e1697-570">若要运行特定操作，在**运行处理**对话框中，将**选择操作**选项设置为**是**，然后选择操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-570">To run a specific action, in the **Run processing** dialog box, set the **Select action** option to **Yes**, and then select an action.</span></span> <span data-ttu-id="e1697-571">若要运行整个处理，则将**选择操作**选项保留为**否**。</span><span class="sxs-lookup"><span data-stu-id="e1697-571">To run the whole processing, leave the **Select action** option set to **No**.</span></span>

#### <a name="generate-report"></a><span data-ttu-id="e1697-572">生成报表</span><span class="sxs-lookup"><span data-stu-id="e1697-572">Generate report</span></span>

<span data-ttu-id="e1697-573">选择操作窗格上的**生成报表**生成报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-573">Select **Generate report** on the Action Pane to generate a report.</span></span> <span data-ttu-id="e1697-574">此按钮与**电子报告导出**类型的操作关联。</span><span class="sxs-lookup"><span data-stu-id="e1697-574">This button is associated with actions of the **Electronic reporting export** type.</span></span>

#### <a name="update-status"></a><span data-ttu-id="e1697-575">更新状态</span><span class="sxs-lookup"><span data-stu-id="e1697-575">Update status</span></span>

<span data-ttu-id="e1697-576">选择操作窗格上的**更新状态**更新一个或多个消息项的状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-576">Select **Update status** on the Action Pane to update the status of one or more message items.</span></span> <span data-ttu-id="e1697-577">在**更新状态**对话框中，使用**要包括的记录**快速选项卡选择要更新的消息项。</span><span class="sxs-lookup"><span data-stu-id="e1697-577">In the **Update status** dialog box, use the **Records to include** FastTab to select message items for update.</span></span> <span data-ttu-id="e1697-578">请确保正确定义选择条件，因为消息项状态将根据这些条件、所选操作的初始状态以及您设置的**新状态**更新。</span><span class="sxs-lookup"><span data-stu-id="e1697-578">Make sure that you correctly define the selection criteria, because message item statuses will be updated according to these criteria, the initial status of the selected action, and the **New status** value that you set.</span></span> <span data-ttu-id="e1697-579">在完成状态更新后，将很难确定更新了哪些项目。</span><span class="sxs-lookup"><span data-stu-id="e1697-579">After a status update is completed, it will be difficult to determine which items were just updated.</span></span> <span data-ttu-id="e1697-580">因此将很难回滚状态更新。</span><span class="sxs-lookup"><span data-stu-id="e1697-580">Therefore, it will be difficult to roll back status updates.</span></span>

#### <a name="electronic-messages"></a><span data-ttu-id="e1697-581">电子消息</span><span class="sxs-lookup"><span data-stu-id="e1697-581">Electronic messages</span></span>

<span data-ttu-id="e1697-582">选择操作窗格上的**电子消息**查看与所选消息项相关的电子消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-582">Select **Electronic message** on the Action Pane to review an electronic message that is related to the selected message item.</span></span>

<span data-ttu-id="e1697-583">您还可以查看与该消息项对应的所有文件。</span><span class="sxs-lookup"><span data-stu-id="e1697-583">You can also review all the files that correspond to the message item.</span></span> <span data-ttu-id="e1697-584">选择消息项的**消息**字段，或选择操作窗格上的**电子消息**。</span><span class="sxs-lookup"><span data-stu-id="e1697-584">Select the **Message** field of the message item, or select **Electronic message** on the Action Pane.</span></span> <span data-ttu-id="e1697-585">在**电子消息**页，选择要查看其报表的消息，然后选择操作窗格上的**附件**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1697-585">On the **Electronic message** page, select the message to review a report for, and then select the **Attachment** button on the Action Pane.</span></span>

![“附件”按钮](media/attachment-icon.png)

<span data-ttu-id="e1697-587">**附件**页显示与消息相关的所有附件。</span><span class="sxs-lookup"><span data-stu-id="e1697-587">The **Attachments** page shows all the attachments that are related to the message.</span></span> <span data-ttu-id="e1697-588">若要查看文件，请在左侧列表中选择它，然后选择操作窗格上的**打开**。</span><span class="sxs-lookup"><span data-stu-id="e1697-588">To view a file, select it in the list on the left, and then select **Open** on the Action Pane.</span></span>

![“打开”按钮](media/open-button.png)

#### <a name="original-document"></a><span data-ttu-id="e1697-590">原始凭证</span><span class="sxs-lookup"><span data-stu-id="e1697-590">Original document</span></span>

<span data-ttu-id="e1697-591">选择操作窗格上的**原始单据**打开所选消息项的原始单据。</span><span class="sxs-lookup"><span data-stu-id="e1697-591">Select **Original document** on the Action Pane to open the original document for the selected message item.</span></span>

## <a name="example"></a><span data-ttu-id="e1697-592">示例</span><span class="sxs-lookup"><span data-stu-id="e1697-592">Example</span></span>

<span data-ttu-id="e1697-593">在创建您的 ER 格式后，将其映射到数据源，然后完成它，您可以使用**电子报告**工作区来运行它。</span><span class="sxs-lookup"><span data-stu-id="e1697-593">After you've created your ER format, mapped it to data sources, and completed it, you can run it by using the **Electronic reporting** workspace.</span></span> <span data-ttu-id="e1697-594">生成一个可以保存在本地的报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-594">A report is generated that you can save locally.</span></span>

<span data-ttu-id="e1697-595">若要控制报告流程的以下方面，必须设置电子消息处理：</span><span class="sxs-lookup"><span data-stu-id="e1697-595">To control the following aspects of the reporting process, you must set up electronic messaging processing:</span></span>

- <span data-ttu-id="e1697-596">记录有关生成报表人员的信息。</span><span class="sxs-lookup"><span data-stu-id="e1697-596">Log information about who generated the report.</span></span>
- <span data-ttu-id="e1697-597">记录报表生成时间。</span><span class="sxs-lookup"><span data-stu-id="e1697-597">Log when the report was generated.</span></span>
- <span data-ttu-id="e1697-598">保存为以前期间生成的报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-598">Save the reports that were generated for previous periods.</span></span>

<span data-ttu-id="e1697-599">本部分提供显示如何设置电子消息功能来建立报告流程的示例。</span><span class="sxs-lookup"><span data-stu-id="e1697-599">This section provides an example that shows how you might set up the Electronic messages functionality to build a reporting process.</span></span>

### <a name="set-up-and-run-processing-to-call-a-simple-er-exporting-format-to-generate-an-excel-report"></a><span data-ttu-id="e1697-600">设置并运行处理以调用简单的 ER 导出格式来生成 Excel 报表</span><span class="sxs-lookup"><span data-stu-id="e1697-600">Set up and run processing to call a simple ER exporting format to generate an Excel report</span></span>

<span data-ttu-id="e1697-601">本部分提供显示如何设置电子消息以基于 Excel 的导出 ER 格式生成报表的示例。</span><span class="sxs-lookup"><span data-stu-id="e1697-601">This section provides an example that shows how you can set up electronic messaging to generate a report that is based on an exporting ER format for Excel.</span></span> <span data-ttu-id="e1697-602">要按此示例操作，必须已经创建了 ER Excel 导出格式，并映射到数据源并且完成。</span><span class="sxs-lookup"><span data-stu-id="e1697-602">To follow this example, the ER Excel exporting format must already be created, mapped to data sources, and completed.</span></span> <span data-ttu-id="e1697-603">必须为电子消息设置了编号规则。</span><span class="sxs-lookup"><span data-stu-id="e1697-603">A number sequence must already be set up for electronic messages.</span></span>

<span data-ttu-id="e1697-604">在您创建处理时，如果您首先定义将设置的处理操作和状态将会很有用。</span><span class="sxs-lookup"><span data-stu-id="e1697-604">When you build processing, it's helpful if you first define the processing actions and statuses that will be set up.</span></span> <span data-ttu-id="e1697-605">下图显示此示例的处理看起来如何。</span><span class="sxs-lookup"><span data-stu-id="e1697-605">The following illustration shows what the processing looks like for this example.</span></span>

![处理方案](media/processing-scheme.png)

#### <a name="create-message-statuses"></a><span data-ttu-id="e1697-607">创建消息状态</span><span class="sxs-lookup"><span data-stu-id="e1697-607">Create message statuses</span></span>

1. <span data-ttu-id="e1697-608">转到**税 \> 设置 \> 电子消息 \> 消息状态**。</span><span class="sxs-lookup"><span data-stu-id="e1697-608">Go to **Tax \> Setup \> Electronic messages \> Message statuses**.</span></span>
2. <span data-ttu-id="e1697-609">创建以下消息状态：</span><span class="sxs-lookup"><span data-stu-id="e1697-609">Create the following message statuses:</span></span>

    - <span data-ttu-id="e1697-610">新建</span><span class="sxs-lookup"><span data-stu-id="e1697-610">New</span></span>
    - <span data-ttu-id="e1697-611">已准备</span><span class="sxs-lookup"><span data-stu-id="e1697-611">Prepared</span></span>
    - <span data-ttu-id="e1697-612">已生成</span><span class="sxs-lookup"><span data-stu-id="e1697-612">Generated</span></span>

    ![消息状态](media/message-statuses.png)

3. <span data-ttu-id="e1697-614">在**新**状态的行中，选择**允许删除**复选框以让用户可以删除此状态的消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-614">On the line for the **New** status, select the **Allow delete** check box to let users delete messages that have this status.</span></span>

#### <a name="create-additional-fields"></a><span data-ttu-id="e1697-615">创建附加字段</span><span class="sxs-lookup"><span data-stu-id="e1697-615">Create additional fields</span></span>

1. <span data-ttu-id="e1697-616">转到**税 \> 设置 \> 电子消息 \> 附加字段**。</span><span class="sxs-lookup"><span data-stu-id="e1697-616">Go to **Tax \> Setup \> Electronic messages \> Additional fields**.</span></span>
2. <span data-ttu-id="e1697-617">添加附加字段及其值。</span><span class="sxs-lookup"><span data-stu-id="e1697-617">Add an additional field and its values.</span></span> <span data-ttu-id="e1697-618">下面是一个示例。</span><span class="sxs-lookup"><span data-stu-id="e1697-618">Here is an example.</span></span>

    ![附加字段](media/additional-fields.png)

3. <span data-ttu-id="e1697-620">将**用户编辑**选项设置为**是**以允许用户编辑此字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-620">Set the **User edit** option to **Yes** to let users edit the field.</span></span>

#### <a name="create-message-processing-actions"></a><span data-ttu-id="e1697-621">创建消息处理操作</span><span class="sxs-lookup"><span data-stu-id="e1697-621">Create message processing actions</span></span>

<span data-ttu-id="e1697-622">对于本例，将创建以下操作：</span><span class="sxs-lookup"><span data-stu-id="e1697-622">For this example, you will create the following actions:</span></span>

- <span data-ttu-id="e1697-623">**创建消息**</span><span class="sxs-lookup"><span data-stu-id="e1697-623">**Create message**</span></span>
- <span data-ttu-id="e1697-624">**更新为已准备**</span><span class="sxs-lookup"><span data-stu-id="e1697-624">**Update to Prepared**</span></span>
- <span data-ttu-id="e1697-625">**生成报表**</span><span class="sxs-lookup"><span data-stu-id="e1697-625">**Generate report**</span></span>
- <span data-ttu-id="e1697-626">**更新为初始状态**（可选）</span><span class="sxs-lookup"><span data-stu-id="e1697-626">**Update to initial status** (optional)</span></span>

1. <span data-ttu-id="e1697-627">转到**税 \> 设置 \> 电子消息 \> 消息处理操作**。</span><span class="sxs-lookup"><span data-stu-id="e1697-627">Go to **Tax \> Setup \> Electronic messages \> Message processing actions**.</span></span>
2. <span data-ttu-id="e1697-628">创建名为**创建消息**的操作。</span><span class="sxs-lookup"><span data-stu-id="e1697-628">Create an action that is named **Create message**.</span></span> <span data-ttu-id="e1697-629">在**常规**快速选项卡上，在**操作类型**字段中，选择**创建消息**。</span><span class="sxs-lookup"><span data-stu-id="e1697-629">On the **General** FastTab, in the **Action type** field, select **Create message**.</span></span>
3. <span data-ttu-id="e1697-630">创建名为**更新为已准备**的操作，然后设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="e1697-630">Create an action that is named **Update to Prepared**, and set the following fields:</span></span>

    - <span data-ttu-id="e1697-631">在**常规**快速选项卡上，在**操作类型**字段中，选择**消息级别用户处理**。</span><span class="sxs-lookup"><span data-stu-id="e1697-631">On the **General** FastTab, in the **Action type** field, select **Message level user processing**.</span></span>
    - <span data-ttu-id="e1697-632">在**初始状态**快速选项卡上，在**消息状态**字段中，选择**新**。</span><span class="sxs-lookup"><span data-stu-id="e1697-632">On the **Initial statuses** FastTab, in the **Message status** field, select **New**.</span></span>
    - <span data-ttu-id="e1697-633">在**结果状态**快速选项卡上，在**消息状态**字段中，选择**已准备**。</span><span class="sxs-lookup"><span data-stu-id="e1697-633">On the **Result statuses** FastTab, in the **Message status** field, select **Prepared**.</span></span> <span data-ttu-id="e1697-634">在**响应类型**字段中，输入**已成功执行**。</span><span class="sxs-lookup"><span data-stu-id="e1697-634">In the **Response type** field, enter **Successfully executed**.</span></span>

4. <span data-ttu-id="e1697-635">创建名为**生成报表**的操作，然后设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="e1697-635">Create an action that is named **Generate report**, and set the following fields:</span></span>

    - <span data-ttu-id="e1697-636">在**常规**快速选项卡上，在**操作类型**字段中，选择**电子报告导出**。</span><span class="sxs-lookup"><span data-stu-id="e1697-636">On the **General** FastTab, in the **Action type** field, select **Electronic reporting export**.</span></span> <span data-ttu-id="e1697-637">在**格式映射**字段中，选择导出 ER 格式。</span><span class="sxs-lookup"><span data-stu-id="e1697-637">In the **Format mapping** field, select the exporting ER format.</span></span> <span data-ttu-id="e1697-638">选项有 **Excel**、**XML**、**JSON**、**文本**和**其他**。</span><span class="sxs-lookup"><span data-stu-id="e1697-638">The options are **Excel**, **XML**, **JSON**, **Text**, and **Other**.</span></span>
    - <span data-ttu-id="e1697-639">在**初始状态**快速选项卡上，在**消息状态**字段中，选择**已准备**。</span><span class="sxs-lookup"><span data-stu-id="e1697-639">On the **Initial statuses** FastTab, in the **Message status** field, select **Prepared**.</span></span>
    - <span data-ttu-id="e1697-640">在**结果状态**快速选项卡上，在**消息状态**字段中，选择**已生成**。</span><span class="sxs-lookup"><span data-stu-id="e1697-640">On the **Result statuses** FastTab, in the **Message status** field, select **Generated**.</span></span> <span data-ttu-id="e1697-641">在**响应类型**字段中，输入**已成功执行**。</span><span class="sxs-lookup"><span data-stu-id="e1697-641">In the **Response type** field, enter **Successfully executed**.</span></span>

    ![生成报表操作](media/generate-report-action.png)

5. <span data-ttu-id="e1697-643">可选：若要使用户能够多次重新生成报表，您可以创建**更新为初始状态**操作并设置以下字段：</span><span class="sxs-lookup"><span data-stu-id="e1697-643">Optional: To let users regenerate a report several times, you can create an **Update to initial status** action and set the following fields:</span></span>

    - <span data-ttu-id="e1697-644">在**常规**快速选项卡上，在**操作类型**字段中，选择**消息级别用户处理**。</span><span class="sxs-lookup"><span data-stu-id="e1697-644">On the **General** FastTab, in the **Action type** field, select **Message level user processing**.</span></span>
    - <span data-ttu-id="e1697-645">在**初始状态**快速选项卡上，在**消息状态**字段中，选择**已生成**。</span><span class="sxs-lookup"><span data-stu-id="e1697-645">On the **Initial statuses** FastTab, in the **Message status** field, select **Generated**.</span></span>
    - <span data-ttu-id="e1697-646">在**结果状态**快速选项卡上，在**消息状态**字段中，选择**已准备**或（和）**新**。</span><span class="sxs-lookup"><span data-stu-id="e1697-646">On the **Result statuses** FastTab, in the **Message status** field, select **Prepared** or (and) **New**.</span></span> <span data-ttu-id="e1697-647">在**响应类型**字段中，输入**已成功执行**。</span><span class="sxs-lookup"><span data-stu-id="e1697-647">In the **Response type** field, enter **Successfully executed**.</span></span>

#### <a name="electronic-message-processing"></a><span data-ttu-id="e1697-648">电子消息处理</span><span class="sxs-lookup"><span data-stu-id="e1697-648">Electronic message processing</span></span>

<span data-ttu-id="e1697-649">在此示例中，应设置所有操作，以便其单独运行。</span><span class="sxs-lookup"><span data-stu-id="e1697-649">In this example, all the actions should be set up so that they run separately.</span></span> <span data-ttu-id="e1697-650">假定每个操作都将由用户初始化。</span><span class="sxs-lookup"><span data-stu-id="e1697-650">The assumption is that every action will be initialized by the user.</span></span>

1. <span data-ttu-id="e1697-651">转到**税 \> 设置 \> 电子消息 \> 电子消息处理**。</span><span class="sxs-lookup"><span data-stu-id="e1697-651">Go to **Tax \> Setup \> Electronic messages \> Electronic message processing**.</span></span>
2. <span data-ttu-id="e1697-652">为您的处理添加记录，添加所有先前定义的操作和附加字段。</span><span class="sxs-lookup"><span data-stu-id="e1697-652">Add a record for your processing, and add all previously defined actions and an additional field.</span></span>
3. <span data-ttu-id="e1697-653">可选：在**安全角色**快速选项卡上，为您的处理定义安全角色以限制对特定报告的访问。</span><span class="sxs-lookup"><span data-stu-id="e1697-653">Optional: On the **Security roles** FastTab, define security roles for your processing to restrict access to specific reporting.</span></span>
4. <span data-ttu-id="e1697-654">转到**税 \> 查询和报表 \> 电子消息 \> 电子消息**。</span><span class="sxs-lookup"><span data-stu-id="e1697-654">Go to **Tax \> Inquires and reports \> Electronic messages \> Electronic messages**.</span></span>
5. <span data-ttu-id="e1697-655">选择**新建**创建消息。</span><span class="sxs-lookup"><span data-stu-id="e1697-655">Select **New** to create a message.</span></span> <span data-ttu-id="e1697-656">此时，您可以添加日期和描述。</span><span class="sxs-lookup"><span data-stu-id="e1697-656">At this point, you can add dates and a description.</span></span> <span data-ttu-id="e1697-657">您还可以根据需要更新附加字段的值。</span><span class="sxs-lookup"><span data-stu-id="e1697-657">You can also update the value of the additional field as you require.</span></span>

    ![创建电子消息](media/create-electronic-message.png)

<span data-ttu-id="e1697-659">**操作日志**快速选项卡上的网格将自动填充为对消息执行的所有操作的日志。</span><span class="sxs-lookup"><span data-stu-id="e1697-659">The grid on the **Action log** FastTab is automatically filled in with a log of all actions that are performed on the message.</span></span>

<span data-ttu-id="e1697-660">您现在可以删除或更新消息状态。</span><span class="sxs-lookup"><span data-stu-id="e1697-660">You can now either delete or update the message status.</span></span> <span data-ttu-id="e1697-661">若要更新消息状态，选择**更新状态**，然后在**新状态**字段中，选择**已准备**。</span><span class="sxs-lookup"><span data-stu-id="e1697-661">To update the message status, select **Update status**, and then, in the **New status** field, select **Prepared**.</span></span> <span data-ttu-id="e1697-662">然后选择**确定**。</span><span class="sxs-lookup"><span data-stu-id="e1697-662">Then select **OK**.</span></span>

![更新消息状态](media/update-status.png)

<span data-ttu-id="e1697-664">消息状态更新为**已准备**，现在，您可以通过选择**生成报表**生成报表。</span><span class="sxs-lookup"><span data-stu-id="e1697-664">The message status is updated to **Prepared**, and you can now generate the report by selecting **Generate report**.</span></span> <span data-ttu-id="e1697-665">将生成报表，消息状态和操作日志将更新。</span><span class="sxs-lookup"><span data-stu-id="e1697-665">The report is generated, and the message status and action log are updated.</span></span> <span data-ttu-id="e1697-666">若要查看生成的报表，请选择操作窗格上的**附件**按钮。</span><span class="sxs-lookup"><span data-stu-id="e1697-666">To view the generated report, select the **Attachment** button on the Action Pane.</span></span>
