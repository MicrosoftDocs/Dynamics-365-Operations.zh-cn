---
title: 在 POS 中创建退货
description: 本主题介绍了如何在 Microsoft Dynamics 365 Commerce 销售点 (POS) 应用程序中为现金和结转交易或客户订单启动退货。
author: hhainesms
ms.date: 06/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-20
ms.dyn365.ops.version: Release 10.0.20
ms.openlocfilehash: c7be9e2d32384df23a4609d82216804fc945061a
ms.sourcegitcommit: c08a9d19eed1df03f32442ddb65a2adf1473d3b6
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/06/2021
ms.locfileid: "6345176"
---
# <a name="create-returns-in-pos"></a>在 POS 中创建退货

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

本主题介绍了如何在 Microsoft Dynamics 365 Commerce 销售点 (POS) 应用中为现金和结转交易或客户订单启动退货。

> [!NOTE]
> 在 Commerce 版本 10.0.20 及更高版本中，提供了名为 **POS 中的统一退货处理体验** 的新功能。 此功能在 POS 中提供更加一致和统一的退货流程，无论交易类型（现金和结转交易或客户订单）或创建订单的原始渠道如何。 我们建议所有组织都打开此新功能，以帮助提高通过 POS 进行退货处理的整体可靠性。
>
> 该功能在打开后，无法关闭。

## <a name="process-returns-by-using-the-return-transaction-operation"></a>使用退货交易操作处理退货

我们建议您将退货交易操作添加到您的 POS [屏幕布局](pos-screen-layouts.md)。 在 Commerce 版本 10.0.20 之前的版本中，退货交易操作仅正确支持现金和结转交易的退货处理。 打开 Commerce 版本 10.0.20 或更高版本中的 **POS 的统一退货处理体验** 功能后，退货交易操作还支持源自客户订单（例如已开具发票的“领料”或“送货上门”订单）的退货处理。

在退货交易操作中，用户可以通过输入以下四个搜索条件中的任何一个来搜索针对其进行退货的现金和结转交易或客户订单。 用户可以使用设备键盘、屏幕键盘或条码扫描仪输入这些条件。

- 收据 ID
- 转移单编号
- 渠道引用 ID（也称为订单确认 ID）
- 发票 ID

如果找到符合搜索条件的交易或订单，将显示 **可退货产品** 页面。 在该页面中，用户可以指定要退回的物料。 他们还可以输入退货数量和原因代码。

对于可退货产品列表中的每个订单行，POS 会显示有关原始采购数量和先前处理的任何退货数量的信息。 用户为订单行输入的退货数量必须小于或等于 **可以退货** 字段的值。

![可退货产品页面。](media/returnslist.png)

在退货处理期间，如果用户有实物产品，并且该产品有条码，用户可以扫描条码进行退货登记。 每扫描一次条码，退货数量就会增加一件。 但是，如果条码标签具有嵌入的数量，该数量将在 **立即退回** 字段中输入。

用户还可以在 **可退货产品** 页面上手动选择要返回的物料，然后使用右侧的详细信息窗格更新 **立即退回** 字段。

如果为交易指定了可用的最大 **立即退回** 数量，用户可以在 POS 应用栏上选择 **全选** 操作以在所有行上设置最大可退回数量。

对于具有 **立即退回** 数量的每一行，用户必须使用详细信息窗格选择退货原因代码。 对于现金和结转交易的退货，退货原因代码配置为商店的功能配置文件中的信息代码。 对于客户订单的退货，在 Dynamics 365 Commerce Headquarters 中的 **退货原因代码** 页面上配置退货原因代码。

为每个必须退货的物料设置退货数量和原因代码后，用户可以在 POS 原因上选择 **退货** 操作以继续处理。 将显示 POS 交易页面，其中已将在上一页面上选定的可退货物料添加到购物车。 物料的 **立即退回** 数量在交易上显示为负数量行，并将计算总退款。

如果用户正在创建交换订单，他们可以将行添加到退货交易。 用户还可以针对已添加的选定正数量销售行使用 **退货产品** 操作，将更多临时退货物料添加到退货交易。

> [!NOTE]
> POS 中的 **退货产品** 操作不针对任何原始交易提供任何验证，并允许退回任何产品。 因此，我们建议只允许授权用户执行此操作，或者如果使用此操作，则需要经理替代功能。

如果在结帐时退款到期，组织可以配置[退款付款策略](refund_policy_returns.md)，以限制可用于向客户退款的付款方式。 如果使用信用卡支付了原始交易，根据付款处理器和系统配置，用户可以选择[将退款发放到原卡](dev-itpro/linked-refunds.md)。 在这种情况下，无需客户再次刷信用卡即可处理退款。 原始付款令牌用于发放退款。

## <a name="other-return-options-in-pos"></a>POS 中的其他退货选项

当打开 **POS 中的统一退货处理体验** 功能时，用户还可以在 POS 中使用 **显示日记帐** 操作以为现金和结转交易或客户订单启动退货。 然后，他们可以在日记帐中选择一个交易，随后在 POS 应用栏上选择 **退货** 操作。 此操作仅在订单上有可退货行时可用。 它启动与 **退货交易** 操作相同的用户体验。

用户还可以在 POS 中使用 **撤回订单** 操作以搜索和撤回客户订单。 （此操作不能用于现金和结转交易）。 在这种情况下，在选择客户订单后，POS 应用栏上的 **退货** 操作可用于为客户订单启动退货。 此操作仅在订单上有可退货行时可用。 它启动与 **退货交易** 或 **显示日记帐** 操作相同的用户体验。

## <a name="return-orders-are-posted-to-commerce-headquarters-as-sales-orders"></a>退货订单作为销售订单过帐到 Commerce Headquarters 

当打开 **POS 中的统一退货处理体验** 功能时，在 POS 中创建的所有退货将作为具有负行的销售订单写入 Commerce Headquarters。 在 Commerce 版本 10.0.20 之前的版本中，用户可以选择退货订单应作为具有负行的销售订单过帐，还是应作为通过退货授权 (RMA) 流程创建的退货订单过帐。 

在 **POS 中的统一退货处理体验** 功能中，使用 RMA 流程在 POS 中创建退货的选项已弃用。 打开此功能后，所有退货都将创建为具有负行的销售订单。

## <a name="offline-return-processing-improvements"></a>脱机退货处理改进

在大多数情况下，当在 POS 中处理退货时，系统会尝试向 Commerce Headquarters 发出实时服务 (RTS) 呼叫以验证当前可用于退货的数量。 此验证有助于防止出现客户试图在多个地点退回同一物料的欺诈情况。

若要处理由于网络或连接问题而无法发出 RTS 呼叫的情况，已经实施了一个流程来定期将退货数量数据从 Commerce Headquarters 同步到商店的渠道数据库。 此渠道端退货跟踪有助于确保 POS 中显示的 **可以退货** 数量相当准确，即使 POS 处于脱机状态。 它还确保 POS 可以继续验证渠道端信息，以帮助防止欺诈性退货。

若要以适当的方式使用脱机退货流程，组织应在 Commerce Headquarters 中计划 **更新退货数量** 批处理作业，以便其频繁运行。 我们建议此作业的运行频率与将新交易从 Commerce 渠道拉入 Commerce Headquarters 的 P 作业相同。

**更新退货数量** 作业计算可用于在 Commerce Headquarters 中找到的所有销售订单的退货的数量。 然后，必须将作业计算的数据发送到渠道数据库，以便可以更新商店渠道。 出于此目的，使用 **退货数量** (1200) 分发作业。 因为从 Commerce Headquarters 同步有关可退货数量的数据，因此如果在 POS 中处理退货，但无法发出 RTS 呼叫，则 POS 可以使用渠道端退货信息验证给定销售行的 **可以退货** 数量。

当无法发出 RTS 呼叫，并且 POS 正在使用渠道端数据进行退货验证时，将显示一条警告消息，通知用户他们正在创建“脱机”退货。 因此，他们意识到，POS 中显示的 **可以退货** 数量可能已过时且不再准确，具体取决于 **更新退货数量** 作业上次处理并同步到渠道的时间。

例如，客户最近在另一个渠道中处理了订单行的退货，但该数据尚未通过 **更新退货数量** 作业同步到渠道数据库。 然后，客户前往另一家商店并尝试再次退回相同的物料。 在这种情况下，如果商店无法向 Commerce Headquarters 发出 RTS 呼叫来获取实时退货数据，POS 将允许再次退回该物料。 但是，用户将收到警告，用于验证的退货的信息可能已过时。 用户收到的消息只是一条警告消息。 它不会阻止用户继续处理退货。

如果渠道端信息出于某种原因不是最新的，并且针对超出实际 **可以退货** 数量的数量处理脱机退货，在运行对帐单过帐以在 Commerce Headquarters 中创建交易时，可能会生成一个错误。

> [!NOTE]
> 当打开 **POS 中的统一退货处理体验** 功能时，支持验证序列化产品退货的新可选功能变得可用。 有关详细信息，请参阅[在销售点 (POS) 中退回序列号控制的产品](POS-serial-returns.md)。

## <a name="enable-proper-tax-calculation-for-returns-with-partial-quantity"></a>对具有部分数量的退货启用正确的税金计算

此功能可确保在使用多个发票进行订单退货时，最终的税金等于最初收取的税额。
1.  转到 **功能管理** 工作区并搜索 **对具有部分数量的退货启用正确的税金计算**。
2.  选择 **对具有部分数量的退货启用正确的税金计算**，然后单击 **启用**。


## <a name="additional-resources"></a>其他资源

[在销售点 (POS) 中退回序列号控制的产品](POS-serial-returns.md)

[以前批准和确认的交易的关联退款](dev-itpro/linked-refunds.md)

[创建和更新渠道的退货和退款政策](refund_policy_returns.md)

[POS 用户界面视觉效果配置](pos-screen-layouts.md)
