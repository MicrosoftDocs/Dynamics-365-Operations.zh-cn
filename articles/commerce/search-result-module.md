---
title: 搜索结果模块
description: 本文介绍搜索结果模块和如何将其添加到 Microsoft Dynamics 365 Commerce 中的站点页。
author: anupamar-ms
ms.date: 05/18/2022
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgriffin
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.8
ms.search.industry: ''
ms.search.form: ''
ms.openlocfilehash: d10e9ed78dfc90833ff3c09021f863f6ef0b80d9
ms.sourcegitcommit: 87e727005399c82cbb6509f5ce9fb33d18928d30
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/12/2022
ms.locfileid: "9286802"
---
# <a name="search-results-module"></a>搜索结果模块

[!include [banner](includes/banner.md)]

本文介绍搜索结果模块和如何将其添加到 Microsoft Dynamics 365 Commerce 中的站点页。

搜索结果模块返回产品搜索结果和产品的适用优化器列表。 Dynamics 365 Commerce 站点上的搜索结果模块可用于呈现以下场景的页面：

- 由用户搜索发起的搜索结果
- 显示一组特定产品的搜索结果，如“购买外观相似的商品”
- 属于某个类别的产品的列表

有关类别和搜索结果页面的详细信息，请参阅[默认类别登陆页面和搜索结果页面概览](category-search-page-overview.md)。

下图显示了 Fabrikam 站点上某个类别的搜索结果页面的示例。

![Fabrikam 站点上的搜索结果页面的示例。](./media/SimpleCategoryLandingDressCategory.png)

## <a name="search-results-module-properties"></a>搜索结果模块属性

下表列出了搜索结果模块的属性，以及它们的值和描述。

| 属性 | 值 | 说明 |
|----------|--------|-------------|
| 每页的项数 | 整数 | 每页上应显示的项目数。 |
| 允许在 PDP 上后退 | **True** 或 **False** | 如果将此属性设置为 **True**，当用户在搜索结果页面上选择产品时，打开的产品详细信息页 (PDP) 上的痕迹导航将显示“返回到结果”链接。 |
| 扩展精简项 | **所有**、**1**、**2**、**3** 或 **4** | 加载页面时应该展开的排在前面的优化器的数量。 例如，如果此属性设置为 **3**，页面上的前三个优化器将展开。 |
| 隐藏类别层次结构显示 | **True** 或 **False** | 如果将此属性设置为 **True**，页面上显示的类别层次结构将被隐藏。 如果您使用 [痕迹导航模块](add-breadcrumb.md)显示类别层次结构，此属性应设置为 **True**。|
| 在搜索结果中包括产品属性 | **True** 或 **False** | 如果将此属性设置为 **True**，将在搜索结果中返回产品的属性。 虽然这些属性可以在 Commerce 站点上显示，但需要扩展。|
| 显示隶属关系价格 | **True** 或 **False** | 如果将此属性设置为 **True**，登录用户浏览页面时，产品的从属价格将显示在搜索结果中。 |
| 更新优化器面板 | **True** 或 **False** | 如果此属性设置为 **True**，选择优化器时，将更新优化器面板。 在此模式下，当优化器面板更新时，某些多选优化器的行为将类似于单选优化器。 |

> [!IMPORTANT]
> 在 Commerce 版本 10.0.16 及更高版本中，**显示从属价格** 配置可用于在页面上显示从属价格。
>
> 在 Commerce 版本 10.0.20 和更高版本中，**更新优化器面板** 配置可以用于在优化器选择期间更新优化器面板。

## <a name="supported-modules"></a>支持的模块

搜索结果模块支持[快速查看模块](quick-view-module.md)，让用户可以查看产品信息并将产品从搜索结果页面添加到购物车。

## <a name="add-a-search-results-module-to-a-category-page"></a>将搜索结果模块添加到类别页面

要将搜索结果模块添加到站点构建器中的类别页面，请按照下列步骤操作。

1. 转到 **模板**，选择 **新建** 创建新模板。
1. 在 **新建模板** 对话框中，输入名称 **搜索结果**，然后选择 **确定**。
1. 在 **正文** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **选择模块** 对话框中，选择 **默认页面** 模块，然后选择 **确定**。
1. 在 **默认页** 模块的 **主** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **选择模块** 对话框中，选择 **容器** 模块，然后选择 **确定**。
1. 在 **容器** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **选择模块** 对话框中，选择 **痕迹导航** 模块，然后选择 **确定**。
1. 在 **痕迹导航** 属性窗格中，为 **最小发生次数** 输入值 **1**。
1. 在 **容器** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **选择模块** 对话框中，选择 **搜索结果** 模块，然后选择 **确定**。
1. 在 **搜索结果** 属性窗格中，为 **最小发生次数** 输入值 **1**，然后为搜索结果模块设置任何其他必需的属性。 通过在模板中设置这些属性，可以确保对特定类别页面进行的任何自定义都会自动包括这些设置。
1. 选择 **完成编辑**，然后选择 **发布** 以发布模板。
1. 转到 **页面**，选择 **新建** 创建新页面。
1. 在 **创建新页面** 对话框的 **页面名称** 下，输入 **类别页面**，然后选择 **下一步**。
1. 在 **选择模板** 下面，选择您创建的 **搜索结果** 模板，然后选择 **下一步**。
1. 在 **选择布局** 下面，选择页面布局（例如，**灵活布局**），然后选择 **下一步**。
1. 在 **查看并完成** 下面，查看页面配置。 如果您需要编辑页面信息，请选择 **返回**。 如果页面信息正确，请选择 **创建页面**。
1. 选择 **完成编辑** 签入页面，然后选择 **发布** 进行发布。

## <a name="enable-inventory-awareness-for-the-search-results-module"></a>为搜索结果模块启用库存意识

客户通常希望电子商务网站在整个浏览体验中都能感知库存，以便在产品没有库存时他们可以决定该做什么。 可以将搜索结果模块配置为包含库存数据并提供以下体验：

- 随产品显示库存可用性标签。
- 从产品列表中隐藏库存不足的产品。
- 在产品列表末尾显示库存不足的产品。
- 按库存级别在搜索结果中筛选产品。

若要启用这些体验，您必须首先在 **功能管理** 工作区中启用 **用于了解库存的增强型电子商务产品发现** 功能。

> [!NOTE]
> **用于了解库存的增强型电子商务产品发现** 功能在 Commerce 版本 10.0.20 及更高版本中可用。

库存感知产品搜索使用产品属性来获取库存可用性信息。 作为该功能的先决条件，必须创建专用的产品属性，必须为其输入库存数据，并且必须将它们添加到在线渠道。 

要创建专用产品属性以支持库存感知搜索结果模块，请执行以下步骤。

1. 在 Headquarters 中，转到 **Retail 和 Commerce \> Retail 和 Commerce IT \> 产品和库存**。
1. 选择并打开 **使用库存水平填充产品属性**。
1. 在此对话框中，输入以下信息：

    1. 在 **产品属性和类型名称** 字段中，为将创建以获取库存数据的专用产品属性指定名称。
    1. 在 **库存可用性依据** 字段中，选择库存水平计算应基于的数量类型（例如，**实际可用**）。 

1. 在后台运行作业。 由于产品库存在全渠道环境中不断变化，因此我们强烈建议您将此作业安排为批处理。

> [!NOTE]
> 为了在您的电子商务网站上的页面和模块之间一致地计算库存水平，请确保为 Commerce Headquarters 中的 **库存可用性依据** 设置和 Commerce 站点构建器中的 **库存水平依据** 设置选择相同的数量类型。 有关站点构建器中库存设置的详细信息，请参阅[应用库存设置](inventory-settings.md)。

若要为在线渠道配置产品属性，请执行以下步骤。 

1. 在 Headquarters 中，转到 **Retail 和 Commerce \> 渠道设置 \> 渠道类别和产品属性**。
1. 选择一个要为其启用库存感知搜索结果模块的在线渠道。
1. 选择并打开关联的属性组，然后将新创建的产品属性添加到其中。
1. 对于 10.0.27 之前的 Commerce 版本，选择 **设置属性元数据**，选择新添加的产品属性，然后启用 **在渠道上显示属性**、**可检索**、**可细化**、**可查询** 选项。
1. 转到 **Retail 和 Commerce \> Retail 和 Commerce IT \> 配送计划**，运行 **1150（目录）** 作业。 如果您将 **使用库存水平填充产品属性** 安排为批处理，我们建议您还将 1150 作业安排为以相同频率运行的批处理。

> [!NOTE]
> 对于搜索结果模块中显示的产品，库存级别在主产品级别而不是单个变型级别显示。 它只有两个可能的值：“有货”和“库存不足”。 此值的实际标签从[库存级别配置文件](inventory-buffers-levels.md)定义中检索。 仅当主产品的所有变型都库存不足时，才将其视为库存不足。

完成上述所有配置步骤后，搜索结果页面上的优化器将显示基于库存的筛选器，搜索结果模块将在后台检索库存数据。 然后，您可以在 Commerce 站点构建器中配置 **产品列表页的库存设置** 设置，以控制搜索结果模块显示库存不足产品的方式。 有关详细信息，请参阅[应用库存设置](inventory-settings.md)。

## <a name="additional-resources"></a>其他资源

[默认类别登陆页面和搜索结果页面概览](category-search-page-overview.md)

[模块库概览](starter-kit-overview.md)

[快速查看模块](quick-view-module.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
