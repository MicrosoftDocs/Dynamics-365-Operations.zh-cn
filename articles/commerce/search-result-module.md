---
title: 搜索结果模块
description: 此主题介绍搜索结果模块和如何将其添加到 Microsoft Dynamics 365 Commerce 中的站点页。
author: anupamar-ms
ms.date: 10/15/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: ''
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.8
ms.openlocfilehash: dc4a01e520379a74ca3b21c1d588531412e762be
ms.sourcegitcommit: 9e8d7536de7e1f01a3a707589f5cd8ca478d657b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/18/2021
ms.locfileid: "7647504"
---
# <a name="search-results-module"></a>搜索结果模块

[!include [banner](includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

此主题介绍搜索结果模块和如何将其添加到 Microsoft Dynamics 365 Commerce 中的站点页。

搜索结果模块返回产品搜索结果和产品的适用优化器列表。 Dynamics 365 Commerce 站点上的搜索结果模块可用于呈现以下场景的页面：

- 由用户搜索发起的搜索结果
- 显示一组特定产品的搜索结果，如“购买外观相似的商品”
- 属于某个类别的产品的列表

有关类别和搜索结果页面的详细信息，请参阅[默认类别登陆页面和搜索结果页面概览](category-search-page-overview.md)。

下图显示了 Fabrikam 站点上某个类别的搜索结果页面的示例。

![Fabrikam 站点上的搜索结果页面的示例。](./media/SimpleCategoryLandingDressCategory.png)

## <a name="search-results-module-properties"></a>搜索结果模块属性

下表列出了搜索结果模块的属性，以及它们的值和描述。

| 属性 | 值 | 说明 |
|----------|--------|-------------|
| 每页的项数 | 整数 | 每页上应显示的项目数。 |
| 允许在 PDP 上后退 | **True** 或 **False** | 如果将此属性设置为 **True**，当用户在搜索结果页面上选择产品时，打开的产品详细信息页 (PDP) 上的痕迹导航将显示“返回到结果”链接。 |
| 扩展精简项 | **所有**、**1**、**2**、**3** 或 **4** | 加载页面时应该展开的排在前面的优化器的数量。 例如，如果此属性设置为 **3**，页面上的前三个优化器将展开。 |
| 隐藏类别层次结构显示 | **True** 或 **False** | 如果将此属性设置为 **True**，页面上显示的类别层次结构将被隐藏。 如果您使用 [痕迹导航模块](add-breadcrumb.md)显示类别层次结构，此属性应设置为 **True**。|
| 在搜索结果中包括产品属性 | **True** 或 **False** | 如果将此属性设置为 **True**，将在搜索结果中返回产品的属性。 虽然这些属性可以在 Commerce 站点上显示，但需要扩展。|
| 显示隶属关系价格 | **True** 或 **False** | 如果将此属性设置为 **True**，登录用户浏览页面时，产品的从属价格将显示在搜索结果中。 |
| 更新优化器面板 | **True** 或 **False** | 如果此属性设置为 **True**，选择优化器时，将更新优化器面板。 在此模式下，当优化器面板更新时，某些多选优化器的行为将类似于单选优化器。 |

> [!IMPORTANT]
> 在 Commerce 版本 10.0.16 及更高版本中，**显示从属价格** 配置可用于在页面上显示从属价格。
>
> 在 Commerce 版本 10.0.20 和更高版本中，**更新优化器面板** 配置可以用于在优化器选择期间更新优化器面板。

## <a name="supported-modules"></a>支持的模块

搜索结果模块支持[快速查看模块](quick-view-module.md)，让用户可以查看产品信息并将产品从搜索结果页面添加到购物车。

## <a name="add-a-search-results-module-to-a-category-page"></a>将搜索结果模块添加到类别页面

要将搜索结果模块添加到类别页面，请执行以下步骤。

1. 转到 **模板**，选择 **新建** 创建新模板。
1. 在 **新建模板** 对话框中，输入名称 **搜索结果**，然后选择 **确定**。
1. 在 **正文** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **添加模块** 对话框中，选择 **默认页面** 模块，然后选择 **确定**。
1. 在 **默认页** 模块的 **主** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **添加模块** 对话框中，选择 **容器** 模块，然后选择 **确定**。
1. 在 **容器** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **添加模块** 对话框中，选择 **痕迹导航** 模块，然后选择 **确定**。
1. 在 **痕迹导航** 属性窗格中，为 **最小发生次数** 输入值 **1**。
1. 在 **容器** 插槽中，选择省略号 (...)，然后选择 **添加模块**。
1. 在 **添加模块** 对话框中，选择 **搜索结果** 模块，然后选择 **确定**。
1. 在 **搜索结果** 属性窗格中，为 **最小发生次数** 输入值 **1**，然后为搜索结果模块设置任何其他必需的属性。 通过在模板中设置这些属性，可以确保对特定类别页面进行的任何自定义都会自动包括这些设置。
1. 选择 **完成编辑**，然后选择 **发布** 以发布模板。
1. 转到 **页面**，选择 **新建** 创建新页面。
1. 在 **选择模板** 对话框中，选择您创建的 **搜索结果** 模板，为 **页面名称** 输入 **类别页**，然后选择 **确定**。 由于所有值都在模板中设置，因此页面已准备好发布。
1. 选择 **完成编辑** 签入页面，然后选择 **发布** 进行发布。

## <a name="enable-inventory-awareness-for-the-search-results-module"></a>为搜索结果模块启用库存意识

客户通常希望电子商务站点在整个浏览体验中都能感知库存，以便在产品没有库存时他们可以决定该做什么。 可以增强搜索结果模块，使其包含库存数据并提供以下体验：

- 随产品显示库存可用性标签。
- 隐藏库存不足的产品。
- 在搜索结果列表末尾显示库存不足的产品。
    
要启用这些体验，您必须在 Commerce Headquarters 中配置以下必备设置。

### <a name="enable-the-enhanced-e-commerce-product-discovery-to-be-inventory-aware-feature"></a>启用“用于了解库存的增强型电子商务产品发现”功能

> [!NOTE]
> **用于了解库存的增强型电子商务产品发现** 功能从 Commerce 版本 10.0.20 开始可用。

要在 Commerce Headquarters 中启用 **用于了解库存的增强型电子商务产品发现** 功能，请按照以下步骤操作。

1. 转到 **工作区 \> 功能管理**。
1. 搜索 **用于了解库存的增强型电子商务产品发现** 功能，然后启用它。

### <a name="configure-the-populate-product-attributes-with-inventory-level-job"></a>配置“使用库存水平填充产品属性”作业

**使用库存水平填充产品属性** 作业会创建一个新的产品属性来捕获库存可用性，然后将该属性设置为每个主产品的最新库存水平值。 由于销售的产品或分类的库存可用性不断变化，我们强烈建议您将此作业计划为批处理。

要在 Commerce Headquarters 中配置 **使用库存水平填充产品属性** 作业，请按照以下步骤操作。

1. 转到 **Retail 和 Commerce \> Retail 和 Commerce IT \> 产品和库存**。
1. 选择 **使用库存水平填充产品属性**。
1. 在 **使用库存水平填充产品属性** 对话框中，执行以下步骤：

    1. 在 **参数** 下的 **产品属性和类型名称** 字段中，为将创建以获取库存可用性的专用产品属性指定名称。
    1. 在 **参数** 下，在 **库存可用性依据** 字段中，选择库存水平计算应基于的数量（例如，**实际可用**）。
    1. 在 **在后台运行下** 下，将作业配置为在后台运行，可以选择打开 **批处理** 选项。 

> [!NOTE]
> 为了在您的电子商务站点上的 PDP 和产品列表页面之间一致地计算库存水平，请确保为 Commerce Headquarters 中的 **库存可用性依据** 设置和 Commerce 站点构建器中的 **库存水平依据** 设置选择相同的数量选项。 有关站点构建器中库存设置的详细信息，请参阅[应用库存设置](inventory-settings.md)。

### <a name="configure-the-new-product-attribute"></a>配置新产品属性

在 **使用库存水平填充产品属性** 作业运行后，您必须在要为搜索结果模块启用库存意识的电子商务站点上配置新创建的产品属性。

要在 Commerce headquarters 中配置新产品属性，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce \> 渠道设置 \> 渠道类别和产品属性**，选择一个电子商务站点。
1. 选择并打开关联的属性组，将新创建的产品属性添加到其中，然后关闭页面。
1. 选择 **设置属性元数据**，选择新添加的产品属性，然后启用 **在渠道上显示属性**、**可检索**、**可细化**、**可查询** 选项。

> [!NOTE]
> 对于搜索结果模块中显示的产品，库存级别在主产品级别而不是单个变型级别输入。 它只有两个可能的值：“有货”和“库存不足”。 这些值的实际文本从[库存级别配置文件](inventory-buffers-levels.md)定义中检索。 仅当主产品的所有变型都库存不足时，才将其视为库存不足。 变型的库存水平根据产品的库存水平配置文件定义确定。 

完成上述所有配置步骤后，搜索结果页面上的优化器将显示基于库存的筛选器，搜索结果模块将在后台检索库存数据。 然后，您可以在 Commerce 站点构建器中配置 **产品列表页的库存设置** 设置，以控制搜索结果模块显示库存不足产品的方式。 有关详细信息，请参阅[应用库存设置](inventory-settings.md)。

## <a name="additional-resources"></a>其他资源

[默认类别登陆页面和搜索结果页面概览](category-search-page-overview.md)

[模块库概览](starter-kit-overview.md)

[快速查看模块](quick-view-module.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
