---
title: 销售点 (POS) 中的产品搜索和客户搜索
description: 此主题概述 Dynamics 365 Commerce 中的产品和客户搜索的增强功能。
author: ShalabhjainMSFT
manager: AnnBe
ms.date: 07/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2017-06-30
ms.dyn365.ops.version: Retail April 2017 update
ms.openlocfilehash: 1de8373471ff8187bd476305c9ed0b26beaa52d5
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/15/2021
ms.locfileid: "4965270"
---
# <a name="product-search-and-customer-search-in-the-point-of-sale-pos"></a>销售点 (POS) 中的产品搜索和客户搜索

[!include [banner](includes/banner.md)]

现代销售点 (MPOS) 和云销售点 (CPOS) 提供易于使用的搜索功能，便于搜索产品和客户。 由于搜索栏始终显示在 MPOS 和 CPOS 窗口顶部，因此员工可以快速搜索产品和客户。

员工可以在与当前商店关联的分类和目录中搜索产品。 还可以在与公司其他任何商店关联的分类和目录中搜索。 因此，出纳可以销售和退回商店分类以外的产品。 同样，员工可以搜索与当前商店或公司中的任何其他商店关联的客户。 此外，员工可以搜索与父组织中的不同公司关联的客户。

## <a name="product-search"></a>产品搜索

默认情况下，对商店分类执行产品搜索。 此类搜索被称为 *本地产品搜索*。 但是，员工可以轻松切换到与当前商店关联的任何目录，或在不同商店中进行搜索。 此类搜索被称为 *远程产品搜索*。 若要更改目录，请选择页面左侧的 **类别** 按钮。 在显示的窗格顶部，选择 **更改目录** 按钮，然后选择一个可用的目录进行浏览。 系统将在选定目录中搜索产品。

在 **更改目录** 页上，员工可以轻松选择任何商店，或者可以跨所有商店搜索产品。

![更改目录](./media/Changecatalog.png "更改目录")

本地产品搜索在以下产品属性中进行搜索：

- 产品编号
- 产品名称
- 说明
- 维度
- 条码
- 搜索名称

### <a name="enhancements-to-local-product-searches"></a>本地产品搜索增强功能

本地产品搜索的体验现在对用户更加方便。 我们实现了以下增强功能：

- 在搜索栏中添加了产品和客户下拉菜单，使员工在执行搜索前可以选择 **产品** 或 **客户**。 默认情况下，选择 **产品**，如下图中所示。
- 对于多个关键字搜索（即使用搜索词的搜索），零售商可以配置搜索结果是否包括匹配 *任何* 搜索词的结果或仅包括匹配 *所有* 搜索词的结果。 此功能的设置在 POS 功能配置文件中命名为 **产品搜索** 的新组中可用。 默认设置为 **匹配任何搜索词**。 此设置也是建议的设置。 如果使用 **匹配任何搜索词** 设置，将把完全或部分匹配一个或多个搜索词的所有产品作为结果返回。 这些结果将自动按照关键字匹配项（完全或部分）最多的产品的升序排序。

    **匹配所有搜索词** 设置仅返回（完全或部分）匹配所有搜索词的产品。 当产品名称较长，且员工只想查看搜索结果中的有限产品时，此设置有用。 但是，该搜索类型有两个限制：

    - 对单独的产品属性进行搜索。 例如，仅返回在至少一个产品属性中具有所有搜索关键字的产品。
    - 不搜索维度。

- 零售商现在可以将产品搜索配置为当用户键入产品名称时显示搜索建议。 此功能的新设置在 POS 功能配置文件中命名为 **产品搜索** 的组中可用。 设置命名为 **在键入时显示搜索建议**。 此功能使员工无需手动键入全部名称，因此可以帮助员工快速查找其搜索的产品。
- 产品搜索算法现在可以搜索在产品的 **搜索名称** 属性中搜索的词语。

![产品建议](./media/Productsuggestions.png "产品建议")

## <a name="customer-search"></a>客户搜索

客户搜索用于根据不同目的查找客户。 例如，出纳可能想要查看客户的愿望列表或购买历史记录，或将客户添加到交易记录。 搜索算法将搜索词与以下客户属性中的值进行比较：

- 姓名
- 电子邮件地址
- 电话号码
- 会员卡号
- 地址
- 帐号

在这些属性中，名称为多关键字搜索贡献的灵活性最大，因为算法会返回与任何搜索关键字匹配的所有客户。 匹配最多关键字的客户显示在结果的顶部。 这种行为在以下情况下可以帮助收银员：键入全名进行搜索，但是最初录入数据时截断了姓氏和名字。 但是，出于性能原因，其他所有属性会保持搜索关键字的顺序。 因此，如果搜索关键字的顺序与数据的存储顺序不匹配，则不返回任何结果。

默认情况下，客户搜索在与商店关联的客户通讯簿中执行。 此类搜索被称为 *本地客户搜索*。 但是，员工也可以搜索全局客户。 换而言之，他们可以跨公司及所有其他法人的商店进行搜索。 此类搜索被称为 *远程客户搜索*。

要执行全局搜索，员工可以选择页面底部的 **筛选结果** 按钮，然后选择 **搜索所有商店** 选项，如下图中所示。 在这种情况下，不止返回客户。 也返回属于总部中的任何通讯簿的所有类型的相关方。 这些相关方包括工作人员、供应商、联系人和竞争对手。

> [!NOTE]
> 远程客户搜索中必须输入至少四个字符才能返回结果。

在远程客户搜索中，不显示来自其他法人的客户的客户 ID，因为没有在当前公司为这些相关方创建客户 ID。 但是，如果员工打开客户详细信息页，系统将自动为相关方生成一个客户 ID，且将商店的客户通讯簿与该客户相关联。 因此，该客户将在以后执行的本地商店搜索中可见。

![全局客户搜索](./media/Globalcustomersearch.png "全局客户搜索")

### <a name="enhancements-to-local-customer-search"></a>本地客户搜索增强功能

已简化了基于电话号码的搜索。 此类搜索现在忽略创建客户时可能添加的特殊字符，如空格、连字符和括号。 因此，收银员在进行搜索时无需担心电话号码格式。 例如，如果输入的客户电话号码为 **123-456-7890**，则收银员可以通过键入 **1234567890** 来搜索客户，也可以通过输入电话号码的前几个数字来搜索客户。

> [!NOTE]
> 一个客户可以有多个电话号码和多个电子邮件。 客户搜索算法也会搜索这些辅助电子邮件和电话号码，但是客户搜索结果页仅显示主要电子邮件和电话号码。 这可能会造成一些混乱，因为返回的客户结果将不会显示搜索到的电子邮件或电话号码。 在将来的版本中，我们计划改进客户搜索结果屏幕来显示此信息。

传统的客户搜索可能很费时间，因为要在多个字段中进行搜索。 不过，收银员现在可在单个客户属性（如姓名、电子邮件地址或电话号码）中进行搜索。 客户搜索算法使用的属性统称为 *客户搜索条件*。 系统管理员可以轻松地将一个或多个条件配置为 POS 中显示的快捷方式。 因为搜索限制为单个条件，所以将仅显示相关搜索结果，而性能则比标准客户搜索的性能好得多。 下图显示 POS 中的客户搜索快捷方式。

![客户搜索快捷方式](./media/SearchShortcutsPOS.png "客户搜索快捷方式")

若要设置搜索条件快捷方式，管理员必须在 Commerce 中打开 **商业参数** 页，然后在 **POS 搜索条件** 选项卡上选择所有应显示为快捷方式的条件。

![配置搜索快捷方式](./media/ConfigureShortcutsAX.png "配置搜索快捷方式")

> [!NOTE]
> 如果添加的快捷方式过多，POS 中搜索栏上的下拉菜单将变得杂乱不堪，从而可能影响员工的搜索体验。 建议仅根据需要添加快捷方式。

**显示顺序** 字段确定快捷方式在 POS 中的显示顺序。 显示的条件是客户搜索算法用于搜索客户的自带属性。 但是，合作伙伴可以添加自定义属性作为搜索快捷方式。 若要将自定义属性添加为搜索快捷方式，系统管理员必须扩展用于客户搜索条件的可扩展枚举，然后将合作伙伴的自定义属性标记为快捷方式。 合作伙伴负责编写代码以在其自定义快捷方式用于搜索时查找结果。

> [!NOTE]
> 添加到枚举的自定义属性不影响标准客户搜索算法。 换言之，客户搜索算法不在自定义属性中进行搜索。 仅当自定义属性添加为快捷方式时或替代了默认搜索算法时，用户才能将该自定义属性用于搜索。

在即将推出的 Commerce 版本中，零售商可以将 POS 中的默认客户搜索模式设置为 **搜索所有商店**。 如果必须立即搜索在 POS 外部创建的客户（例如，即使在运行配送作业之前），则此配置可能非常有用。 POS 功能配置文件中将增加一个新的 **默认客户搜索模式** 选项。 如果将其设置为 **开**，将把默认搜索模式设置为 **搜索所有商店**。 然后，每次尝试搜索客户都会实时调用总部。

为了帮助避免意外的性能问题，此配置隐藏在名称为 **CUSTOMERSEARCH_ENABLE_DEFAULTSEARCH_FLIGHTING** 的战旗后面。 因此，若要在设置用户界面 (UI) 时显示 **默认客户搜索模式**，零售商应该为其用户接受测试 (UAT) 环境和生产环境创建支持工单。 收到工单后，工程团队将与零售商合作，以确保零售商在非生产环境中进行测试来评估性能和实施需要的所有优化。

