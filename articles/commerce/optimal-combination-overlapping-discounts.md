---
title: 确定叠加折扣的最佳组合
description: 折扣叠加时，必须确定将产生最低交易记录总额或最高折扣总额的叠加折扣组合。 当折扣金额根据购买的产品价格变化时（如常见的“第二件打折”(BOGO) 零售折扣），此过程就成为了组合优化问题。
author: kfend
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailParameters, RetailPeriodicDiscount,
audience: Application User, IT Pro
ms.reviewer: josaw
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 3c7dafe55fc7072aa12b98ff42ed7d9e4719f4cd
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/31/2021
ms.locfileid: "5804689"
---
# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a><span data-ttu-id="2ed8f-104">确定叠加折扣的最佳组合</span><span class="sxs-lookup"><span data-stu-id="2ed8f-104">Determine the optimal combination of overlapping discounts</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="2ed8f-105">折扣叠加时，必须确定将产生最低交易记录总额或最高折扣总额的叠加折扣组合。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-105">When discounts overlap, you must determine the combination of overlapping discounts that will produce the lowest transaction total or the highest total discount.</span></span> <span data-ttu-id="2ed8f-106">当折扣金额根据购买的产品价格变化时（如常见的“第二件打折 (BOGO) 零售折扣），此过程就成为了组合优化问题。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-106">When the discount amount varies according to the price of the products that are purchased, such as in the common "Buy 1, get 1 X percent off" (BOGO) retail discount, this process becomes an issue of combinatorial optimization.</span></span>

<span data-ttu-id="2ed8f-107">本文适用于带 KB 3105973 的 Microsoft Dynamics AX 2012 R3（发布日期为 2015 年 11 月 2 日），以及 Dynamics 365 Commerce。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-107">This article applies to Microsoft Dynamics AX 2012 R3 with KB 3105973 (released November 2, 2015) or later, and to Dynamics 365 Commerce.</span></span> <span data-ttu-id="2ed8f-108">要确定要及时应用的叠加折扣组合，我们引入了一种应用叠加折扣的方法。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-108">To determine the combination overlapping discounts to apply in a timely manner, we have introduced a method for applying overlapping discounts.</span></span> <span data-ttu-id="2ed8f-109">我们把这种方法称为 **临界值分级**。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-109">We call this new method **marginal value ranking**.</span></span> <span data-ttu-id="2ed8f-110">当评估叠加折扣的可行组合所需时间超过了可在 **Commerce 参数** 页面上配置的阈值时，使用临界值方法。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-110">Marginal value ranking is used when the time that is required in order to evaluate the possible combinations of overlapping discounts exceeds a threshold that is configurable on the **Commerce parameters** page.</span></span> <span data-ttu-id="2ed8f-111">在临界值分级方法中，将通过使用共享产品的折扣值，计算各叠加折扣的值。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-111">In the marginal value ranking method, a value is calculated for each overlapping discount by using the discount's value on the shared products.</span></span> <span data-ttu-id="2ed8f-112">然后将叠加折扣从最高相对值应用于最低相对值。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-112">The overlapped discounts are then applied from the highest relative value to the lowest relative value.</span></span> <span data-ttu-id="2ed8f-113">有关这种新方法的详细信息，请参阅本文后面的“临界值”部分。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-113">For details about the new method, see the "Marginal value" section, later in this article.</span></span> <span data-ttu-id="2ed8f-114">产品的折扣金额不受交易记录中的其他产品影响时，不使用临界值分级。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-114">Marginal value ranking isn't used when the discount amounts for a product aren't affected by another product in the transaction.</span></span> <span data-ttu-id="2ed8f-115">例如，此方法不用于两个简单折扣，也不用于一个简单折扣加单一产品数量折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-115">For example, this method isn't used for two simple discounts, or for a simple discount and a single product quantity discount.</span></span>

## <a name="discount-examples"></a><span data-ttu-id="2ed8f-116">折扣示例</span><span class="sxs-lookup"><span data-stu-id="2ed8f-116">Discount examples</span></span>

<span data-ttu-id="2ed8f-117">您可为一组普通产品创建数量不受限制的折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-117">You can create an unlimited number of discounts on a common set of products.</span></span> <span data-ttu-id="2ed8f-118">但是，由于没有限制，所以尝试计算应对多种产品使用的折扣时，可能发生性能问题。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-118">However, because there is no limit, performance issues can occur when you try to calculate the discounts that should be used on the various products.</span></span> <span data-ttu-id="2ed8f-119">以下示例更详细地说明此问题。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-119">The following examples illustrate this issue in more detail.</span></span> <span data-ttu-id="2ed8f-120">在示例 1 中，首先是两件产品和两个叠加折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-120">In example 1, we start with two products and two overlapping discounts.</span></span> <span data-ttu-id="2ed8f-121">然后在示例 2 中，我们显示随着添加更多产品，问题如何发展。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-121">Then, in example 2, we show how the issue evolves as more products are added.</span></span>

### <a name="example-1-two-products-and-two-discounts"></a><span data-ttu-id="2ed8f-122">示例 1：两件产品和两种折扣</span><span class="sxs-lookup"><span data-stu-id="2ed8f-122">Example 1: Two products and two discounts</span></span>

<span data-ttu-id="2ed8f-123">在此示例中，需要两件产品都符合各折扣的资格，并且折扣不能组合。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-123">In this example, two products are required in order to qualify for each discount, and the discounts can't be combined.</span></span> <span data-ttu-id="2ed8f-124">此示例中的折扣为 **最优价格** 折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-124">The discounts in this example are **Best price** discounts.</span></span> <span data-ttu-id="2ed8f-125">两件产品都符合两种折扣的资格。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-125">Both products qualify for both discounts.</span></span> <span data-ttu-id="2ed8f-126">这里是两种折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-126">Here are the two discounts.</span></span>

![两个最佳价格折扣的示例](./media/overlapping-discount-combo-01.jpg)

<span data-ttu-id="2ed8f-128">对于任意两件产品，这两个折扣中更优惠的取决于这两件产品的价格。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-128">For any two products, the better of these two discounts depends on the prices of the two products.</span></span> <span data-ttu-id="2ed8f-129">两件产品的价格相等或几乎相等时，折扣 1 更优惠。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-129">When the price of both products is equal or almost equal, discount 1 is better.</span></span> <span data-ttu-id="2ed8f-130">当一件产品的价格比另一件产品的价格低得多时，折扣 2 更优惠。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-130">When the price of one product is significantly less than the price of the other product, discount 2 is better.</span></span> <span data-ttu-id="2ed8f-131">下面是针对彼此评估这两个折扣的数学规则。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-131">Here is the mathematical rule for evaluating these two discounts against each other.</span></span>

![有关评估折扣的规则](./media/overlapping-discount-combo-02.jpg)

> [!NOTE]
> <span data-ttu-id="2ed8f-133">产品 1 的价格等于产品 2 价格的三分之二时，这两个折扣相等。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-133">When the price of product 1 is equal to two-thirds of the price of product 2, the two discounts are equal.</span></span> <span data-ttu-id="2ed8f-134">在此示例中，折扣 1 的有效折扣百分比多种多样，从较小百分比（当两件产品的价格相差很大时）到最大 25%（当两件产品价格相同时）。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-134">In this example, the effective discount percentage for discount 1 varies from a few percent (when the prices of the two products are far apart) to a maximum of 25 percent (when the two products have the same price).</span></span> <span data-ttu-id="2ed8f-135">折扣 2 的有效折扣百分比是固定值。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-135">The effective discount percentage for discount 2 is fixed.</span></span> <span data-ttu-id="2ed8f-136">始终为 20%。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-136">It's always 20 percent.</span></span> <span data-ttu-id="2ed8f-137">因为折扣 1 的有效折扣百分比的范围可以大于或小于折扣 2，所以最优折扣取决于必须打折的两件产品的价格。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-137">Because the effective discount percentage for discount 1 has a range that can be more than or less than discount 2, the best discount depends on the prices of the two products that must be discounted.</span></span> <span data-ttu-id="2ed8f-138">在此示例中，计算的完成速度很快，因为仅对两件产品应用两个折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-138">In this example, the calculation is completed quickly, because only two discounts are applied on only two products.</span></span> <span data-ttu-id="2ed8f-139">只能有两种组合：一折扣 1 应用一次，折扣 2 应用一次。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-139">There are only two possible combinations: one application of discount 1 or one application of discount 2.</span></span> <span data-ttu-id="2ed8f-140">没有要计算的序列。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-140">There are no permutations to calculate.</span></span> <span data-ttu-id="2ed8f-141">每个折扣的值通过同时使用两件产品计算，并使用最优折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-141">The value of each discount is calculated by using both products, and the best discount is used.</span></span>

### <a name="example-2-four-products-and-two-discounts"></a><span data-ttu-id="2ed8f-142">示例 2：四件产品和两种折扣</span><span class="sxs-lookup"><span data-stu-id="2ed8f-142">Example 2: Four products and two discounts</span></span>

<span data-ttu-id="2ed8f-143">接下来，我们将使用四件产品和同样的两种折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-143">Next, we will use four products and the same two discounts.</span></span> <span data-ttu-id="2ed8f-144">所有四件产品都符合两种折扣的资格。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-144">All four products qualify for both discounts.</span></span> <span data-ttu-id="2ed8f-145">可以有 12 种组合。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-145">There are twelve possible combinations.</span></span> <span data-ttu-id="2ed8f-146">最后，将通过以下三种组合之一为交易记录应用两种折扣：折扣 1 应用两次，折扣 2 应用两次，或者折扣 1 应用一次，折扣 2 应用一次。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-146">In the end, two discounts will be applied to the transaction in one of three combinations: two applications of discount 1, two applications of discount 2, or one application of discount 1 and one application of discount 2.</span></span> <span data-ttu-id="2ed8f-147">为了演示可行组合，我们将查看具有不同价格的四件产品的两个不同组合：</span><span class="sxs-lookup"><span data-stu-id="2ed8f-147">To illustrate the possible combinations, we will look at two different sets of four products that have different prices:</span></span>

- <span data-ttu-id="2ed8f-148">所有四件产品的价格都相同，为 15.00 美元。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-148">All four products have the same price, $15.00.</span></span> <span data-ttu-id="2ed8f-149">在这种情况下，最优折扣组合为折扣 1 应用两次。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-149">In this case, the best discount combination is two applications of discount 1.</span></span> <span data-ttu-id="2ed8f-150">两件产品为全价，两件为五折。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-150">Two products will be full price, and two will be 50 percent off.</span></span> <span data-ttu-id="2ed8f-151">交易记录的折扣后总额为 45 美元 (15 + 15 + 7.50 + 7.50)，其中的 15 美元 (25%) 是正价 60 美元的折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-151">The discounted total for the transaction is $45 (15 + 15 + 7.50 + 7.50), which is $15 (25 percent) off the undiscounted total of $60.</span></span> <span data-ttu-id="2ed8f-152">折扣 2 为仅 12 美元 (20%)。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-152">Discount 2 is only $12 (20 percent).</span></span>
- <span data-ttu-id="2ed8f-153">两件产品分别 20 美元，一件产品 15 美元，一件产品 5 美元。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-153">Two products are $20 each, one product is $15, and one product is $5.</span></span> <span data-ttu-id="2ed8f-154">在这种情况下，最优折扣组合为折扣 2 应用一次，折扣 1 应用一次。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-154">In this case, the best discount combination is one application of discount 2 and one application of discount 1.</span></span> <span data-ttu-id="2ed8f-155">下面的表演示这些折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-155">The following tables illustrates the discounts.</span></span>

<span data-ttu-id="2ed8f-156">要理解这些表，请使用一行中的一件产品和一列中的一件产品。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-156">To read the tables, use one product from a row and one product from a column.</span></span> <span data-ttu-id="2ed8f-157">例如，在折扣 1 的表中，组合两个 20 美元的产品时，折扣为 10 美元。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-157">For example, in the table for discount 1, when you combine the two $20 products, you get $10 off.</span></span> <span data-ttu-id="2ed8f-158">在折扣 2 的表中，组合 15 美元的产品和 5 美元的产品时，折扣为 4 美元。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-158">In the table for discount 2, when you combine the $15 product and the $5 product, you get $4 off.</span></span>

![对相同的两个折扣使用四个产品的示例](./media/overlapping-discount-combo-03.jpg)

<span data-ttu-id="2ed8f-160">首先，我们通过使用其中一种折扣找到任意两件产品的最大可行折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-160">First, we find the largest discount that is available from any two products by using either discount.</span></span> <span data-ttu-id="2ed8f-161">两个表显示两件产品所有组合的折扣金额。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-161">The two tables show the discount amount for all combinations of the two products.</span></span> <span data-ttu-id="2ed8f-162">表的阴影部分表示产品与自身配对的情况（这种情况无法实现），或者产生相同折扣金额并且可以忽略的两件产品交换配对。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-162">The shaded portions of the tables represent either cases where a product is paired with itself, which we can't do, or a reverse pairing of two products that produces the same discount amount and can be ignored.</span></span> <span data-ttu-id="2ed8f-163">通过查看表，可以发现两件 20 美元物料的折扣 1 是所有四件产品其中一种折扣的最大可行折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-163">By looking at the tables, you can see that discount 1 for the two $20 items is the largest discount that is available for either discount on all four products.</span></span> <span data-ttu-id="2ed8f-164">（此折扣在第一个表中以绿色突出显示。）这样仅保留 15 美元的产品和 5 美元的产品。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-164">(This discount is highlighted in green in the first table.) That leaves only the $15 product and the $5 product.</span></span> <span data-ttu-id="2ed8f-165">通过再次查看这两个表，可以发现对于这两件产品，折扣 1 的折扣为 2.50 美元，而折扣 2 的折扣为 4 美元。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-165">By looking at the two tables again, you can see that, for these two products, discount 1 gives a $2.50 discount, whereas discount 2 gives a $4 discount.</span></span> <span data-ttu-id="2ed8f-166">因此，我们选择折扣 2。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-166">Therefore, we select discount 2.</span></span> <span data-ttu-id="2ed8f-167">折扣总额为 14 美元。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-167">The total discount is $14.</span></span> <span data-ttu-id="2ed8f-168">要使此折扣更容易可视化，下面还有两个表，其中显示折扣 1 和 折扣 2 所有两个可行产品组合的有效折扣百分比。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-168">To make this discussion easier to visualize, here are two additional tables that show the effective discount percentage for all possible two-product combinations for both discount 1 and discount 2.</span></span> <span data-ttu-id="2ed8f-169">仅包括组合列表中的一半，因为对于这两种折扣，这两种产品的折扣顺序没有影响。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-169">Only half the list of combinations is included, because, for these two discounts, the order in which the two products are put into the discount doesn't matter.</span></span> <span data-ttu-id="2ed8f-170">最高有效折扣 (25%) 以绿色突出显示，而最低有效折扣 (10%) 以红色突出显示。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-170">The highest effective discount (25 percent) is highlighted in green, and the lowest effective discount (10 percent) is highlighted in red.</span></span>

![两个折扣的所有两个产品组合的有效折扣百分比](./media/overlapping-discount-combo-04.jpg)

> [!NOTE]
> <span data-ttu-id="2ed8f-172">价格多种多样，并且两种或多种折扣竞争时，只能通过评估和比较折扣才能确保最优折扣组合。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-172">When prices vary, and two or more discount compete, the only way to guarantee the best combination of discounts is to evaluate both discounts and compare them.</span></span>

## <a name="total-possible-combinations"></a><span data-ttu-id="2ed8f-173">可行组合总数</span><span class="sxs-lookup"><span data-stu-id="2ed8f-173">Total possible combinations</span></span>

<span data-ttu-id="2ed8f-174">本部分继续使用上一部分的示例。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-174">This section continues the example from the previous section.</span></span> <span data-ttu-id="2ed8f-175">我们将增加更多产品和一种折扣，并了解必须计算和比较多少种组合。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-175">We will add more products and another discount, and see how many combinations must be calculated and compared.</span></span> <span data-ttu-id="2ed8f-176">下表显示随着产品数量增加产生的可行折扣组合数量。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-176">The following table shows the number of possible discount combinations as the product quantity increases.</span></span> <span data-ttu-id="2ed8f-177">此表显示有两种叠加折扣（如上一个示例中）和有三种叠加折扣时的结果。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-177">The table shows what happens both when there are two overlapping discounts, as in the previous example, and when there are three overlapping discounts.</span></span> <span data-ttu-id="2ed8f-178">必须评估的可行折扣组合数量很快超过其计算和比较性能足以让零售交易记录接受的快速计算机的承受能力。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-178">The number of possible discount combinations that must be evaluated soon exceeds what even a fast computer can calculate and compare quickly enough to be acceptable for retail transactions.</span></span>

![随着产品数量增加产生的可行折扣组合数量](./media/overlapping-discount-combo-05.jpg)

<span data-ttu-id="2ed8f-180">应用甚至更大的数量或更多叠加折扣时，可行折扣组合总数很快将变为百万级，并且快速评估和选择最优可行组合所需时间将变得引人瞩目。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-180">When even larger quantities or more overlapping discounts are applied, the total number of possible discount combinations quickly goes into the millions, and the time that is required in order to evaluate and select the best possible combination quickly becomes noticeable.</span></span> <span data-ttu-id="2ed8f-181">已经在价格引擎中执行了一些优化，以便减少必须评估的组合的总数。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-181">Some optimizations have been done in the price engine to reduce the total number of combinations that must be evaluated.</span></span> <span data-ttu-id="2ed8f-182">但是，因为交易记录中的叠加折扣数量和产品数量不受限制，所以只要存在叠加折扣，就必须评估大量组合。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-182">However, because the number overlapping discounts and the quantities in a transaction aren't limited, a large number of combinations will always have to be evaluated whenever there are overlapping discounts.</span></span> <span data-ttu-id="2ed8f-183">临界值方法可以解决这个问题。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-183">This issue is the issue that the marginal value ranking method addresses.</span></span>

## <a name="marginal-value-method"></a><span data-ttu-id="2ed8f-184">临界值方法</span><span class="sxs-lookup"><span data-stu-id="2ed8f-184">Marginal value method</span></span>

<span data-ttu-id="2ed8f-185">若要解决必须评估的组合数量呈指数增长这一问题，可以通过优化来计算可应用两种或多种折扣的产品集的每个折扣的共享产品的值。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-185">To resolve the issue of an exponentially increasing number of combinations that must be evaluated, an optimization exists that calculates the value per shared product of each discount on the set of products that two or more discounts can be applied to.</span></span> <span data-ttu-id="2ed8f-186">我们将该值称为共享产品的折扣的 **临界值**。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-186">We refer to this value as the **marginal value** of the discount for the shared products.</span></span> <span data-ttu-id="2ed8f-187">临界值是在每种折扣中计算共享产品时，折扣总额中每个产品增长的平均值。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-187">The marginal value is the average per product increase in the total discount amount when the shared products are included in each discount.</span></span> <span data-ttu-id="2ed8f-188">临界值的计算方法是，采用折扣总额 (DTotal),，减去不含共享产品的折扣金额 (DMinus\\ Shared)，然后将差除以共享产品数量 (ProductsShared)。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-188">The marginal value is calculated by taking the total discount amount (DTotal), subtracting the discount amount without the shared products (DMinus\\ Shared), and dividing that difference by the number of shared products (ProductsShared).</span></span>

![用于计算临界值的公式](./media/overlapping-discount-combo-06.jpg)

<span data-ttu-id="2ed8f-190">计算了一组共享产品的每种折扣的临界值之后，将按照从最高临界值到最低临界值的顺序，依次将折扣详尽地应用于共享产品。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-190">After the marginal value of each discount on a shared set of products is calculated, the discounts are applied to the shared products in order, exhaustively, from highest marginal value to lowest marginal value.</span></span> <span data-ttu-id="2ed8f-191">对于此方法，应用了一种折扣的单个实例之后，不会每次都比较其余可行折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-191">For this method, all remaining discount possibilities aren't compared every time after a single instance of a discount is applied.</span></span> <span data-ttu-id="2ed8f-192">而是比较一次叠加折扣，然后依次应用这些折扣。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-192">Instead, the overlapping discounts are compared one time and then applied in order.</span></span> <span data-ttu-id="2ed8f-193">无需再执行任何比较。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-193">No additional comparisons are done.</span></span> <span data-ttu-id="2ed8f-194">可以在 **Commerce 参数** 页面的 **折扣** 选项卡上配置阈值以切换到临界值方法。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-194">You can configure the threshold to switch to the marginal value method on the **Discount** tab of the **Commerce parameters** page.</span></span> <span data-ttu-id="2ed8f-195">零售行业中计算折扣总额所用可接受时间多种多样。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-195">The acceptable time to calculate the total discount varies across retail industries.</span></span> <span data-ttu-id="2ed8f-196">但是，此时间的范围通常为几十毫秒到一秒。</span><span class="sxs-lookup"><span data-stu-id="2ed8f-196">However, this time generally falls in the range of tens of milliseconds to one second.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]