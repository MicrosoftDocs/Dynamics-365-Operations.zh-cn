---
title: 设备、市场和地理位置目标定位
description: 本主题介绍如何使用设备、市场和地理位置信息在 Microsoft Dynamics 365 Commerce 站点生成器中创建、编辑和管理受众和目标。
author: sushma-rao
ms.date: 07/30/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail
ms.author: sushmar
ms.search.validFrom: 2021-07-31
ms.dyn365.ops.version: AX 10.0.21
ms.openlocfilehash: 3ecc04c97b42b17f257aa40f665136c70de398748b9bda0da860c7000c062807
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/05/2021
ms.locfileid: "6730843"
---
# <a name="device-market-and-geolocation-targeting"></a>设备、市场和地理位置目标定位

[!include [banner](includes/banner.md)]

本主题介绍如何使用设备、市场和地理位置信息在 Microsoft Dynamics 365 Commerce 站点生成器中创建、编辑和管理受众和目标。

Dynamics 365 Commerce 允许您针对特定客户组（称为 *受众*）个性化页面内容（称为 *目标*）的变体，以帮助提高用户参与度和满意度。 您可以先创建受众或目标。 但是，成功的目标体验需要这两个组件。

您根据客户数据（如位置、设备信息、登录状态和其他来自客户 Web 请求的动态派生信息）在 Commerce 站点生成器中创建和管理受众。 您还在 Commerce 站点生成器中的电子商务模块和片段上创建和管理目标。

**免责声明：** 您有责任根据所有适用的法律和法规（包括与目标和分析相关的法律和法规）使用此功能。 

## <a name="audiences"></a>受众

受众是一组用户，并且组中的成员身份由一组动态规则决定。 这些规则是根据客户请求或其他可用客户细分中可用的信息运行的简单逻辑测试。 您可以使用与/或运算符合并多个规则。

Commerce 以本机方式支持基本客户细分，如设备信息、登录状态、引用者和查询字符串参数。 它还通过第三方提供程序连接来支持可扩展的客户细分。

### <a name="basic-segments"></a>基本客户细分

默认情况下，以下客户细分可用，并且可以包括在受众定义中：

- **登录状态** - 测试是否已对用户进行身份验证。
- **设备平台** - 测试以下设备类型：

    - 移动电话
    - 台式计算机
    - 平板电脑
    - 其他

- **设备操作系统** - 测试以下操作系统：

    - Windows
    - Linux
    - iOS
    - Android，其他

- **查询字符串参数** - 测试请求 URL 的查询字符串参数中是否存在键值对。 例如，对于 URL `www.fabrikam.com/en-us/request?promo=true`，可以写入规则以测试 **促销** 参数是否具有 **true** 值。
- **Cookie** - 测试为请求 URL 中的域设置的 Cookie 值。 例如，Fabrikam.com 请求可能包括名为 **CustomLayout** 且值为 **1** 的 Cookie。 Cookie 测试检查 Cookie 是否存在，但未显式创建 Cookie。 在上一个示例中，JavaScript 必须以前已从其他模块或其他某个业务流程中设置 **CustomLayout** Cookie。

    > [!NOTE]
    > 确保您对 Cookie 的使用符合适用法律。

- **引用者** - 如果用户单击某个链接以请求页面，则引用者是托管该链接的页面的 URL。

### <a name="extensible-segments"></a>可扩展的客户细分

Commerce 允许您通过连接到第三方细分提供程序来扩展可用客户细分列表。 细分提供程序将描述可用客户细分的类型。 有关如何连接到地理位置或细分提供程序的详细信息，请参阅[配置并启用连接器](e-commerce-extensibility/connectors.md)。

> [!NOTE]
> - 如果启用了外部提供程序，则它可能会连接到性能不可预知的服务。 为了帮助确保更好的用户体验，如果用户请求包含目标的页面，并且该页面引用了检查第三方客户细分提供程序的受众，则显示页面的默认版本。
> - 用户必须同意允许 Cookie。 然后，用户的浏览器从相关提供程序请求所有客户细分，结果将放入返回给用户的 Cookie 中。 对页面的后续请求将使用此信息向用户提供目标内容。 有关 Cookie 合规性的详细信息，请参阅 [Cookie 合规性](cookie-compliance.md)。

**免责声明：** 如果启用此功能，您的数据将与您选择的第三方系统共享。 您控制向第三方提供的数据（如果有）。 您明白第三方的数据处理和合规性标准可能不同于 Microsoft Dynamics 365 Commerce 的标准。 Microsoft 非常注重您的隐私。 要了解详细信息，请阅读我们的[隐私和 Cookie 声明](https://privacy.microsoft.com/privacystatement)。

### <a name="create-an-audience-in-site-builder"></a>在站点生成器中创建受众

若要在 Commerce 站点生成器中创建新受众，请执行以下步骤。

1. 在左侧导航窗格中，选择 **受众**。
1. 选择 **新建**。
1. 输入受众的名称。 您也可以选择性地添加标记和说明。
1. 选择 **创建**，然后 **添加新规则块**。 规则块是由与条件联接的规则集合。 您还可以创建多个在它们之间具有或条件的规则块。
1. 为您的客户细分选择数据源，然后指定客户细分名称、运算符和值。 您可以在规则块中创建和删除更多规则，也可以创建和删除整个规则块。 您还可以根据需要向上或向下移动规则块。

    > [!NOTE]
    > 列表中最多可以包含 100 个值，每个列表项最多可包含 50 个字符。

1. 当您对受众配置感到满意时，请选择 **完成编辑**。 然后，您可以选择 **发布** 以使受众可用于实时目标。 或者，您可以与目标一起发布受众。 

若要编辑受众，请在 **受众** 选项卡上为其选择超链接，然后在显示的受众编辑器中选择 **编辑**。 若要查看引用受众的目标和页面的列表，请在受众列表视图中选择受众，然后选择 **查看分配**。 若要删除受众列表视图或受众编辑器中的受众，请在已发布受众时取消发布该受众，然后在命令栏上选择 **删除**。

> [!NOTE]
> 受众是 Commerce 站点生成器中的站点级别概念。 您可以在多个目标中共享相同的受众。

## <a name="targets"></a>目标

目标是向一个或多个所选受众的成员显示的用户体验。 它可以在页面或片段中包含一个或多个模块的变体。 

您可以为目标定义一个计划，以指定目标应保持活动状态的时间。 请注意，此操作与计划用于确定何时发布内容集合的发布组的操作不同。 您还可以预览目标，以查看在所选受众成员看来它们是什么样的。 此外，您可以确定目标的优先级，以指定在发生冲突时应显示的目标。

### <a name="create-a-target"></a>创建目标

要在 Commerce 站点构建器中为页面模块创建目标外壳，请按照下列步骤操作。

1. 在左侧导航窗格中，选择 **页面**。 然后为具有您要定位的模块的页面选择超链接。
1. 选择 **编辑** 以检查要编辑的页面。
1. 在 **目标** 菜单上，选择 **新目标** 以创建新的目标外壳。 您可以根据需要在页面上创建多个目标。
1. 为目标输入名称和描述，然后选择 **下一步**。
1. 选择 **添加** 以包括将看到目标内容的受众或排除受众。 然后选择 **下一步**。

    > [!NOTE]
    > 在创建目标期间，受众分配是可选步骤。 但是，在发布目标之前，必须至少包括一个受众，以确保预期的用户组将看到目标内容。

1. 通过选择时区以及开始和结束日期和时间来定义显示目标的时间窗口。 您可以设置目标，以便在窗口期间随时显示目标，也可以选择特定的天数和时间。 当您完成时，选择 **下一步**。

    > [!NOTE]
    > 您指定的时间和时区是全局时间和时区。 如果要在不同的时间或不同的时区中确定不同目标位置，则必须创建不同的目标，并为每个位置定义所需的计划。

1. 查看详细信息，当一切看起来正确时，选择 **创建目标体验**，然后选择 **转到目标**。 系统已创建目标外壳。 您现在可以向其添加模块。
1. 选择要定位的模块，选择省略号（**...**），然后选择 **添加到当前目标**。 当您将父模块作为目标时，其所有子级都将成为该目标的一部分。 目标模块以绿色突出显示。
1. 对目标模块进行必要的内容更新，并根据需要向目标添加更多模块。 然后，选择 **保存** 以保存您的所有更改。
1. 发布目标之前，请务必在命令栏上选择 **预览版** 以对其进行审核。 然后，您可以选择以下选项之一：

    - **基本预览** - 选择此选项以仅预览所选变体（默认页面或目标），而不包含任何关联的受众。
    - **高级预览** - 如果您在页面上具有多个目标，并且要以属于所选受众集的用户身份或在特定日期/时间预览这些目标，请选择此选项。 选择 **下一步** 以从相关受众列表中进行选择。 您还可以删除筛选器以在所有受众中选择。

1. 当您对目标配置感到满意时，必须发布页面以启用目标。 选择 **发布** 以立即启用目标。 或者，您可以使用发布组计划页面推出时间。 有关发布组的信息，请参阅[使用发布组](publish-groups.md)。

您还可以确定目标片段。 过程是相似的。 但是，在步骤 1 中，您选择的是 **片段** 而不是左侧导航窗格中的 **页面**。

> [!NOTE]
> 要避免对指标产生任何负面影响，您可以在页面或片段中具有试验或目标。 您不能同时具有试验和目标。

### <a name="manage-targets"></a>管理目标

若要编辑、复制或删除目标，请转到默认页面或片段，然后执行这些步骤。

1. 在下拉菜单上，选择 **目标**，然后选择 **管理目标**。
1. 选择要编辑、复制或删除的目标。
1. 如果您在同一模块中具有多个目标，或者多个目标具有冲突的计划，请选择 **设置目标优先级** 以指定应显示目标的顺序。 如果在页面上或片段中添加了多个目标，则 **设置目标优先级** 按钮还将显示在通知栏中，以提醒您确定目标的优先级。 如果未指定优先级，则默认情况下会选择最近的目标。

### <a name="localize-targets"></a>本地化目标

导出和导入 XLIFF 文件以进行本地化时，将自动包括页面和片段中的目标。 但是，如果不需要任何区域设置，您可以在导入本地化的 XLIFF 文件后删除它们的目标。

> [!NOTE]
> 目标按渠道和区域设置进行管理。 您对一个渠道或区域设置中的目标所做的更改不会自动转移到其他渠道或区域设置。

[!INCLUDE[footer-include](../includes/footer-banner.md)]
