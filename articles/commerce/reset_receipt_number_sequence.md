---
title: 重置收据编号
description: 本主题介绍如何重置在所需日期（例如，会计年度或日历年）用于各种操作的收据编号。
author: ShalabhjainMSFT
manager: AnnBe
ms.date: 03/12/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-Commerce
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail, Commerce
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail, Commerce
ms.author: asharchw
ms.search.validFrom: 2020-01-14
ms.dyn365.ops.version: Application update 10.0.9
ms.openlocfilehash: e3243a69b98aae25ad8514890fb984c8a0d9f694
ms.sourcegitcommit: 218e22014a964b8b52fc0152e355b07b0b84ae2c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/16/2020
ms.locfileid: "3456565"
---
# <a name="reset-receipt-numbers"></a>重置收据编号 

[!include [banner](includes/banner.md)]

> [!NOTE]
> 在使用此功能之前，我们需要您在功能配置文件中为所有收据类型选择**独立序列**属性。 另外，使用 POS 的设备的系统时区应与相应的商店时区相匹配。 我们正在努力在将来的版本中去除这些限制。 在生产中使用此功能之前，请联系 Microsoft 支持部门。

零售商为商店中的各种操作（例如现金和结转交易、退货交易、客户订单、报价和付款）生成收据编号。 尽管零售商定义了他们自己的收据格式，但是某些国家或地区的法规对这些收据格式进行了限制。 例如，这些法规可能会限制收据上的字符数、要求使用连续的收据编号、限制某些特殊字符，或者要求在年初重置收据编号。 Microsoft Dynamics 365 Commerce 使收据编号的管理过程非常灵活，可以帮助零售商满足法规要求。 本主题说明如何使用此功能来重置收据编号。

在 Commerce 中，收据格式可以是字母数字。 您可以在其中放置静态内容和动态内容。 静态内容包括字母字符、数字和特殊字符。 动态内容包括一个或多个字符，这些字符表示诸如商店编号、终端编号、日期、月份、年份和自动递增的数字序列之类的信息。 格式在功能配置文件的**收据编号**部分中定义。 下表描述了代表动态内容的字符。

| 字符数 | 说明 |
|------------|-------------|
| 六          | 字符 **S** 用于商店编号。 例如，如果商店编号为 HOUSTON1，则 **SSS** 格式会在收据上显示“ON1”。 **SSSSS** 格式会在收据上显示“STON1”。 |
| T          | 字符 **T** 用于终端编号。 例如，如果终端编号为 0001，则 **TTTT** 格式会在收据上显示“0001”。 |
| C          | 字符 **C** 用于职员 ID 编号。 例如，如果某个职员的 ID 为 000160，则 **CCCC** 格式会在收据上显示“0160”。 |
| ddd        | 字符 **ddd** 对应于一年中的某天（从 1 到 366）。 例如，在 1 月 15 日，**ddd** 格式会在收据上显示“015”。 |
| MM         | 字符 **MM** 用于两位数月份。 例如，在 1 月，**MM** 格式会在收据上显示“01”。 |
| DD         | 字符 **DD** 用于两位数月份日期。 例如，在 1 月 15 日，**DD** 格式会在收据上显示“15”。 |
| YY         | 字符 **YY** 用于两位年份。 例如，在 2020 年的任何月份中，**YY** 格式会在收据上显示“20”。 |
| \#         | 数字符号 (**\#**) 用于顺序编号。 例如，**####** 格式会在收据上显示“0001”、“0002”、“0003”等。 |

您可以在特定日期重置收据的顺序编号。 然后，对于在所选重置日期的 12:00 AM 之后发生的第一笔交易，系统会将收据的编号顺序重置为 1。 您还可以指定重置是仅发生一次还是每年发生一次。 如果指定了每年重复一次，则重置将每年自动进行一次，直到零售商选择停止为止。 

若要开启重置，请执行以下步骤。

1. 转至 **Retail 和 Commerce \> 渠道设置 \> POS 设置 \> POS 配置文件 \> 功能配置文件**。
1. 在**收据编号**快速选项卡上，选择**重置编号重置日期**。
1. 在下拉对话框内的**重设日期**字段中，选择应发生重置的将来日期。
1. 在**重置收据类型**字段中，选择**仅一次**或**每年**。
1. 选择**确定**。

![选择收据重置日期](media/Enable_receipt_reset.png "选择收据重置日期")

选择日期后，它会出现在**下一次收据编号重置日期**列中。 重置日期适用于所有收据交易类型。 因此，将为所有收据类型重置收据编号顺序。

当重置日期到来时，将为每种类型的第一笔交易重置收据编号。 此外，在功能配置文件中，重置日期会从**下一个收据编号重置日期**列移到**当前收据编号重置日期**列。 此更改表明，如果在重置日期未使用收银机，则收据编号将在下次*使用*收银机时重置。 例如，在 2019 年 12 月 3 日，您选择 **2020 年 1 月 1 日**作为重置日期。 在 1 月 1 日，收银机进行首次交易时，收据编号将重置。 但是，一个收银机在 12 月和 1 月期间根本未使用，而是在 2 月开始使用的。 在这种情况下，因为定义了重置操作，所以当收银机在 2 月进行第一次交易时，该收银机的收据编号将被重置。

您可以使用**清除重置日期**功能清除未来重置日期。 但是，如果重置日期是过去的日期，则无法撤消。 因此，对于所有尚未发生重置的收银机，仍将发生重置。

> [!NOTE]
> 根据您选择的重置日期和收据格式，您可能会有重复的收据编号。 尽管销售点 (POS) 系统可以处理这些情况，但它们会增加处理退货所需的时间，因为销售助理必须在重复的收据中进行选择。 如果重复的收据不是计划的结果，则可能会发生与数据清理相关的其他复杂情况。 因此，我们建议您使用动态日期字符（例如 **ddd**、**MM**、**DD** 和 **YY**），以帮助防止重置后出现重复的收据编号。
