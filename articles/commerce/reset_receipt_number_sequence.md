---
title: 重置收据编号
description: 本主题介绍如何重置在所需日期（例如，会计年度或日历年）用于各种操作的收据编号。
author: ShalabhjainMSFT
manager: AnnBe
ms.date: 10/06/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-Commerce
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Retail, Commerce
ms.author: asharchw
ms.search.validFrom: 2020-01-14
ms.dyn365.ops.version: Application update 10.0.9
ms.openlocfilehash: 97ec85ebccacd3a827e8a016098939134823dceb
ms.sourcegitcommit: eaf330dbee1db96c20d5ac479f007747bea079eb
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/15/2021
ms.locfileid: "5243687"
---
# <a name="reset-receipt-numbers"></a><span data-ttu-id="52bc8-103">重置收据编号</span><span class="sxs-lookup"><span data-stu-id="52bc8-103">Reset receipt numbers</span></span> 

[!include [banner](includes/banner.md)]

> [!NOTE]
> <span data-ttu-id="52bc8-104">在使用此功能之前，我们需要您在功能配置文件中为所有收据类型选择 **独立序列** 属性。</span><span class="sxs-lookup"><span data-stu-id="52bc8-104">We require that you select the **Independent sequence** property for all receipt types in the functionality profile before using this feature.</span></span> <span data-ttu-id="52bc8-105">另外，使用 POS 的设备的系统时区应与相应的商店时区相匹配。</span><span class="sxs-lookup"><span data-stu-id="52bc8-105">Also, the system time zone of the device, where the POS is being used, should match the corresponding store time zone.</span></span> <span data-ttu-id="52bc8-106">由于这些限制，我们建议您在生产中不要使用此功能，而我们会在将来的版本中修复这些问题。</span><span class="sxs-lookup"><span data-stu-id="52bc8-106">Due to these limitations, we recommend that you do not use this feature in production while we work to fix these issues in a future release.</span></span> 

<span data-ttu-id="52bc8-107">零售商为商店中的各种操作（例如现金和结转交易、退货交易、客户订单、报价和付款）生成收据编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-107">Retailers generate receipt numbers for various actions in the store, such as cash and carry transactions, return transactions, customer orders, quotations, and payments.</span></span> <span data-ttu-id="52bc8-108">尽管零售商定义了他们自己的收据格式，但是某些国家或地区的法规对这些收据格式进行了限制。</span><span class="sxs-lookup"><span data-stu-id="52bc8-108">Although retailers define their own receipt formats, some countries or regions have regulations that put restrictions on these receipt formats.</span></span> <span data-ttu-id="52bc8-109">例如，这些法规可能会限制收据上的字符数、要求使用连续的收据编号、限制某些特殊字符，或者要求在年初重置收据编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-109">For example, these regulations might limit the number of characters on the receipt, require consecutive receipt numbers, restrict some special characters, or require a reset of receipt numbers at the beginning of the year.</span></span> <span data-ttu-id="52bc8-110">Microsoft Dynamics 365 Commerce 使收据编号的管理过程非常灵活，可以帮助零售商满足法规要求。</span><span class="sxs-lookup"><span data-stu-id="52bc8-110">Microsoft Dynamics 365 Commerce makes the process of managing receipt numbers very flexible, to help retailers meet regulatory requirements.</span></span> <span data-ttu-id="52bc8-111">本主题说明如何使用此功能来重置收据编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-111">This topic explains how to use the functionality for resetting receipt numbers.</span></span>

<span data-ttu-id="52bc8-112">在 Commerce 中，收据格式可以是字母数字。</span><span class="sxs-lookup"><span data-stu-id="52bc8-112">In Commerce, receipt formats can be alphanumeric.</span></span> <span data-ttu-id="52bc8-113">您可以在其中放置静态内容和动态内容。</span><span class="sxs-lookup"><span data-stu-id="52bc8-113">You can put both static content and dynamic content in them.</span></span> <span data-ttu-id="52bc8-114">静态内容包括字母字符、数字和特殊字符。</span><span class="sxs-lookup"><span data-stu-id="52bc8-114">Static content includes alphabetic character, numbers, and special characters.</span></span> <span data-ttu-id="52bc8-115">动态内容包括一个或多个字符，这些字符表示诸如商店编号、终端编号、日期、月份、年份和自动递增的数字序列之类的信息。</span><span class="sxs-lookup"><span data-stu-id="52bc8-115">Dynamic content includes one or more characters that represent information such as the store number, terminal number, date, month, year, and number sequences that are automatically incremented.</span></span> <span data-ttu-id="52bc8-116">格式在功能配置文件的 **收据编号** 部分中定义。</span><span class="sxs-lookup"><span data-stu-id="52bc8-116">The formats are defined in the **Receipt numbering** section of the functionality profile.</span></span> <span data-ttu-id="52bc8-117">下表描述了代表动态内容的字符。</span><span class="sxs-lookup"><span data-stu-id="52bc8-117">The following table describes the characters that represent the dynamic content.</span></span>

| <span data-ttu-id="52bc8-118">字符数</span><span class="sxs-lookup"><span data-stu-id="52bc8-118">Characters</span></span> | <span data-ttu-id="52bc8-119">说明</span><span class="sxs-lookup"><span data-stu-id="52bc8-119">Description</span></span> |
|------------|-------------|
| <span data-ttu-id="52bc8-120">六</span><span class="sxs-lookup"><span data-stu-id="52bc8-120">S</span></span>          | <span data-ttu-id="52bc8-121">字符 **S** 用于商店编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-121">The character **S** is used for the store number.</span></span> <span data-ttu-id="52bc8-122">例如，如果商店编号为 HOUSTON1，则 **SSS** 格式会在收据上显示“ON1”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-122">For example, if a store is numbered HOUSTON1, the format **SSS** shows "ON1" on the receipt.</span></span> <span data-ttu-id="52bc8-123">**SSSSS** 格式会在收据上显示“STON1”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-123">The format **SSSSS** shows "STON1" on the receipt.</span></span> |
| <span data-ttu-id="52bc8-124">T</span><span class="sxs-lookup"><span data-stu-id="52bc8-124">T</span></span>          | <span data-ttu-id="52bc8-125">字符 **T** 用于终端编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-125">The character **T** is used for the terminal number.</span></span> <span data-ttu-id="52bc8-126">例如，如果终端编号为 0001，则 **TTTT** 格式会在收据上显示“0001”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-126">For example, if a terminal is numbered 0001, the format **TTTT** shows "0001" on the receipt.</span></span> |
| <span data-ttu-id="52bc8-127">C</span><span class="sxs-lookup"><span data-stu-id="52bc8-127">C</span></span>          | <span data-ttu-id="52bc8-128">字符 **C** 用于职员 ID 编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-128">The character **C** is used for the staff ID number.</span></span> <span data-ttu-id="52bc8-129">例如，如果某个职员的 ID 为 000160，则 **CCCC** 格式会在收据上显示“0160”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-129">For example, if a staff member has an ID of 000160, the format **CCCC** shows "0160" on the receipt.</span></span> |
| <span data-ttu-id="52bc8-130">ddd</span><span class="sxs-lookup"><span data-stu-id="52bc8-130">ddd</span></span>        | <span data-ttu-id="52bc8-131">字符 **ddd** 对应于一年中的某天（从 1 到 366）。</span><span class="sxs-lookup"><span data-stu-id="52bc8-131">The characters **ddd** correspond to the day of the year, from 1 through 366.</span></span> <span data-ttu-id="52bc8-132">例如，在 1 月 15 日，**ddd** 格式会在收据上显示“015”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-132">For example, on January 15, the format **ddd** shows "015" on the receipt.</span></span> |
| <span data-ttu-id="52bc8-133">MM</span><span class="sxs-lookup"><span data-stu-id="52bc8-133">MM</span></span>         | <span data-ttu-id="52bc8-134">字符 **MM** 用于两位数月份。</span><span class="sxs-lookup"><span data-stu-id="52bc8-134">The characters **MM** are used for the two-digit month.</span></span> <span data-ttu-id="52bc8-135">例如，在 1 月，**MM** 格式会在收据上显示“01”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-135">For example, in January, the format **MM** show "01" on the receipt.</span></span> |
| <span data-ttu-id="52bc8-136">DD</span><span class="sxs-lookup"><span data-stu-id="52bc8-136">DD</span></span>         | <span data-ttu-id="52bc8-137">字符 **DD** 用于两位数月份日期。</span><span class="sxs-lookup"><span data-stu-id="52bc8-137">The characters **DD** are used for the two-digit day of the month.</span></span> <span data-ttu-id="52bc8-138">例如，在 1 月 15 日，**DD** 格式会在收据上显示“15”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-138">For example, on January 15, the format **DD** shows "15" on the receipt.</span></span> |
| <span data-ttu-id="52bc8-139">YY</span><span class="sxs-lookup"><span data-stu-id="52bc8-139">YY</span></span>         | <span data-ttu-id="52bc8-140">字符 **YY** 用于两位年份。</span><span class="sxs-lookup"><span data-stu-id="52bc8-140">The characters **YY** are used for the two-digit year.</span></span> <span data-ttu-id="52bc8-141">例如，在 2020 年的任何月份中，**YY** 格式会在收据上显示“20”。</span><span class="sxs-lookup"><span data-stu-id="52bc8-141">For example, in any month during the year 2020, the format **YY** shows "20" on the receipt.</span></span> |
| \#         | <span data-ttu-id="52bc8-142">数字符号 (**\#**) 用于顺序编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-142">A number sign (**\#**) is used for sequential numbering.</span></span> <span data-ttu-id="52bc8-143">例如，**####** 格式会在收据上显示“0001”、“0002”、“0003”等。</span><span class="sxs-lookup"><span data-stu-id="52bc8-143">For example, the format **####** shows "0001," "0002," "0003," and so on, on the receipt.</span></span> |

<span data-ttu-id="52bc8-144">您可以在特定日期重置收据的顺序编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-144">You can reset the sequential numbering of the receipt on a specific date.</span></span> <span data-ttu-id="52bc8-145">然后，对于在所选重置日期的 12:00 AM 之后发生的第一笔交易，系统会将收据的编号顺序重置为 1。</span><span class="sxs-lookup"><span data-stu-id="52bc8-145">Then, for the first transaction that occurs after 12:00 AM on the selected reset date, the system resets the receipt's number sequence to 1.</span></span> <span data-ttu-id="52bc8-146">您还可以指定重置是仅发生一次还是每年发生一次。</span><span class="sxs-lookup"><span data-stu-id="52bc8-146">You can also specify whether the reset occurs only one time, or whether it recurs every year.</span></span> <span data-ttu-id="52bc8-147">如果指定了每年重复一次，则重置将每年自动进行一次，直到零售商选择停止为止。</span><span class="sxs-lookup"><span data-stu-id="52bc8-147">If yearly recurrence is specified, the reset automatically occurs every year until the retailer chooses to stop it.</span></span> 

<span data-ttu-id="52bc8-148">若要开启重置，请执行以下步骤。</span><span class="sxs-lookup"><span data-stu-id="52bc8-148">To turn on the reset, follow these steps.</span></span>

1. <span data-ttu-id="52bc8-149">转至 **Retail 和 Commerce \> 渠道设置 \> POS 设置 \> POS 配置文件 \> 功能配置文件**。</span><span class="sxs-lookup"><span data-stu-id="52bc8-149">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="52bc8-150">在 **收据编号** 快速选项卡上，选择 **重置编号重置日期**。</span><span class="sxs-lookup"><span data-stu-id="52bc8-150">On the **Receipt numbering** FastTab, select **Reset number reset date**.</span></span>
1. <span data-ttu-id="52bc8-151">在下拉对话框内的 **重设日期** 字段中，选择应发生重置的将来日期。</span><span class="sxs-lookup"><span data-stu-id="52bc8-151">In the drop-down dialog box, in the **Reset date** field, select a future date when the reset should occur.</span></span>
1. <span data-ttu-id="52bc8-152">在 **重置收据类型** 字段中，选择 **仅一次** 或 **每年**。</span><span class="sxs-lookup"><span data-stu-id="52bc8-152">In the **Reset receipt type** field, select **One time only** or **Yearly**.</span></span>
1. <span data-ttu-id="52bc8-153">选择 **确定**。</span><span class="sxs-lookup"><span data-stu-id="52bc8-153">Select **OK**.</span></span>

<span data-ttu-id="52bc8-154">![选择收据重置日期](media/Enable_receipt_reset.png "选择收据重置日期")</span><span class="sxs-lookup"><span data-stu-id="52bc8-154">![Selecting a receipt reset date](media/Enable_receipt_reset.png "Selecting a receipt reset date")</span></span>

<span data-ttu-id="52bc8-155">选择日期后，它会出现在 **下一次收据编号重置日期** 列中。</span><span class="sxs-lookup"><span data-stu-id="52bc8-155">After you select a date, it appears in the **Next receipt number reset date** column.</span></span> <span data-ttu-id="52bc8-156">重置日期适用于所有收据交易类型。</span><span class="sxs-lookup"><span data-stu-id="52bc8-156">The reset date is applicable to all receipt transaction types.</span></span> <span data-ttu-id="52bc8-157">因此，将为所有收据类型重置收据编号顺序。</span><span class="sxs-lookup"><span data-stu-id="52bc8-157">Therefore, the receipt number sequence will be reset for all receipt types.</span></span>

<span data-ttu-id="52bc8-158">当重置日期到来时，将为每种类型的第一笔交易重置收据编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-158">When the reset date arrives, the receipt number is reset for the first transaction of each type.</span></span> <span data-ttu-id="52bc8-159">此外，在功能配置文件中，重置日期会从 **下一个收据编号重置日期** 列移到 **当前收据编号重置日期** 列。</span><span class="sxs-lookup"><span data-stu-id="52bc8-159">In addition, in the functionality profile, the reset date is moved from the **Next receipt number reset date** column to the **Current receipt number reset date** column.</span></span> <span data-ttu-id="52bc8-160">此更改表明，如果在重置日期未使用收银机，则收据编号将在下次 *使用* 收银机时重置。</span><span class="sxs-lookup"><span data-stu-id="52bc8-160">This change indicates that if a register isn't used on the reset date, the receipt number will be reset the next time that the register *is* used.</span></span> <span data-ttu-id="52bc8-161">例如，在 2019 年 12 月 3 日，您选择 **2020 年 1 月 1 日** 作为重置日期。</span><span class="sxs-lookup"><span data-stu-id="52bc8-161">For example, on December 3, 2019, you select **January 1, 2020**, as the reset date.</span></span> <span data-ttu-id="52bc8-162">在 1 月 1 日，收银机进行首次交易时，收据编号将重置。</span><span class="sxs-lookup"><span data-stu-id="52bc8-162">On January 1, when the registers make their first transaction, the receipt number are reset.</span></span> <span data-ttu-id="52bc8-163">但是，一个收银机在 12 月和 1 月期间根本未使用，而是在 2 月开始使用的。</span><span class="sxs-lookup"><span data-stu-id="52bc8-163">However, one register isn't used at all during December and January, but then starts to be used in February.</span></span> <span data-ttu-id="52bc8-164">在这种情况下，因为定义了重置操作，所以当收银机在 2 月进行第一次交易时，该收银机的收据编号将被重置。</span><span class="sxs-lookup"><span data-stu-id="52bc8-164">In this case, because a reset action was defined, the receipt number for that register will be reset when the register makes its first transaction in February.</span></span>

<span data-ttu-id="52bc8-165">您可以使用 **清除重置日期** 功能清除未来重置日期。</span><span class="sxs-lookup"><span data-stu-id="52bc8-165">You can use the **Clear reset date** functionality to clear future reset dates.</span></span> <span data-ttu-id="52bc8-166">但是，如果重置日期是过去的日期，则无法撤消。</span><span class="sxs-lookup"><span data-stu-id="52bc8-166">However, if the reset date occurred in the past, it can't be undone.</span></span> <span data-ttu-id="52bc8-167">因此，对于所有尚未发生重置的收银机，仍将发生重置。</span><span class="sxs-lookup"><span data-stu-id="52bc8-167">Therefore, the reset will still occur for all registers where the reset hasn't yet occurred.</span></span>

> [!NOTE]
> <span data-ttu-id="52bc8-168">根据您选择的重置日期和收据格式，您可能会有重复的收据编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-168">Depending on the reset date that you select, and the receipt format, you might have duplicate receipt numbers.</span></span> <span data-ttu-id="52bc8-169">尽管销售点 (POS) 系统可以处理这些情况，但它们会增加处理退货所需的时间，因为销售助理必须在重复的收据中进行选择。</span><span class="sxs-lookup"><span data-stu-id="52bc8-169">Although the point of sale (POS) system can handle these situations, they increase the amount of time that is required to process returns, because sales associates must select among the duplicate receipts.</span></span> <span data-ttu-id="52bc8-170">如果重复的收据不是计划的结果，则可能会发生与数据清理相关的其他复杂情况。</span><span class="sxs-lookup"><span data-stu-id="52bc8-170">Other complications that are related to data cleanup can occur if the duplicate receipts weren't a planned consequence.</span></span> <span data-ttu-id="52bc8-171">因此，我们建议您使用动态日期字符（例如 **ddd**、**MM**、**DD** 和 **YY**），以帮助防止重置后出现重复的收据编号。</span><span class="sxs-lookup"><span data-stu-id="52bc8-171">Therefore, we recommend that you use dynamic date characters (for example, **ddd**, **MM**, **DD**, and **YY**) to help prevent duplicate receipt numbers after a reset.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]