---
title: 客户服务解决方案概述
description: 此主题提供商店应用程序中可用的新客户服务解决方案功能的概览。
author: bebeale
ms.date: 02/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: josaw
ms.custom: 260624
ms.assetid: a4f9d315-9951-451c-8ee6-37f9b3b15ef0
ms.search.region: global
ms.search.industry: Retail
ms.author: shajain
ms.search.validFrom: 2018-10-01
ms.dyn365.ops.version: Version 10.0.7
ms.openlocfilehash: 8a809b81504fdc31d8f9e0529048269dd7e0c5cc
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/31/2021
ms.locfileid: "5800439"
---
# <a name="clienteling-overview"></a><span data-ttu-id="1e82c-103">客户服务解决方案概览</span><span class="sxs-lookup"><span data-stu-id="1e82c-103">Clienteling overview</span></span>

[!include [banner](includes/banner.md)]


<span data-ttu-id="1e82c-104">许多零售商，尤其是高端专业零售商，都希望其销售助理与重要客户建立长期关系。</span><span class="sxs-lookup"><span data-stu-id="1e82c-104">Many retailers, especially high-end specialty retailers, want their sales associates to form long-term relationships with their key customers.</span></span> <span data-ttu-id="1e82c-105">助理需要了解这些客户的好恶、购买历史、产品偏好以及重要日期，例如周年纪念日和生日。</span><span class="sxs-lookup"><span data-stu-id="1e82c-105">The associates are expected to know about these customers' likes and dislikes, purchase history, product preferences, and important dates, such as anniversaries and birthdays.</span></span> <span data-ttu-id="1e82c-106">助理需要一个可以捕获这些信息并在需要时轻松找到它们的地方。</span><span class="sxs-lookup"><span data-stu-id="1e82c-106">Associates need a place where they can capture this information and easily find it when it's required.</span></span> <span data-ttu-id="1e82c-107">如果可以在单个视图中获得这些信息，助理则可以轻松地定位满足特定条件的客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-107">If this information is available in a single view, the associates can easily target customers who meet specific criteria.</span></span> <span data-ttu-id="1e82c-108">例如，他们可以找到所有喜欢购买手提包的客户，或者近期有重要事件（例如生日或周年纪念日）的客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-108">For example, they can find all customers who prefer to shop for handbags, or customers who have an important event approaching, such as a birthday or anniversary.</span></span>

## <a name="client-book"></a><span data-ttu-id="1e82c-109">客户端帐簿</span><span class="sxs-lookup"><span data-stu-id="1e82c-109">Client book</span></span>

<span data-ttu-id="1e82c-110">在 Microsoft Dynamics 365 Commerce 中，零售商可以使用客户手册功能来帮助售货员与重要客户建立长期关系。</span><span class="sxs-lookup"><span data-stu-id="1e82c-110">In Microsoft Dynamics 365 Commerce, retailers can use the client book functionality to help store associates form long-term relationships with key customers.</span></span>

<span data-ttu-id="1e82c-111">客户手册包括显示每个客户联系方式的客户卡，以及另外三个零售商在 Headquarters 中定义和配置的属性。</span><span class="sxs-lookup"><span data-stu-id="1e82c-111">The client book includes customer cards that show contact information for each customer, together with three more properties that are defined by the retailer and configured in Headquarters.</span></span> <span data-ttu-id="1e82c-112">零售商可以决定销售助理应了解的关于客户的三个最重要事项。</span><span class="sxs-lookup"><span data-stu-id="1e82c-112">Retailers can decide the three most important things that sales associates should know about customers.</span></span> <span data-ttu-id="1e82c-113">例如，珠宝零售商可能希望包括重要的日期，例如周年纪念日或生日，因为这些日期是人们可能会购买更多珠宝的场合。</span><span class="sxs-lookup"><span data-stu-id="1e82c-113">For example, a jewelry retailer might want to include important dates such as anniversaries or birthdays, because these dates are occasions when people might buy more jewelry.</span></span> <span data-ttu-id="1e82c-114">同样，时装零售商可能希望包括顾客的首选购物兴趣和品牌。</span><span class="sxs-lookup"><span data-stu-id="1e82c-114">Similarly, a fashion retailer might want to include the customer's preferred shopping interests and brands.</span></span>

<span data-ttu-id="1e82c-115">客户手册还允许销售助理筛选列表，以便它仅显示满足特定条件的客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-115">The client book also lets sale associates filter the list so that it shows only customers who meet specific criteria.</span></span> <span data-ttu-id="1e82c-116">例如，新的鞋子系列已经到达商店，助理想通知想要购买鞋子的客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-116">For example, a new collection of shoes has arrived in the store, and an associate wants to inform customers who like to buy shoes.</span></span> <span data-ttu-id="1e82c-117">在这种情况下，助理可以筛选客户手册以找到相关客户，然后采取进一步的措施。</span><span class="sxs-lookup"><span data-stu-id="1e82c-117">In this case, the associate can filter the client book to find the relevant customers and then take further action.</span></span>

<span data-ttu-id="1e82c-118">如果由于某个原因不再将某个客户视为重要客户，因此不应对其进行密切管理，销售助理可以将其从客户手册中删除。</span><span class="sxs-lookup"><span data-stu-id="1e82c-118">If any customers are no longer considered key customers for some reason, and therefore should not be closely managed, sales associates can remove them from their client book.</span></span>

<span data-ttu-id="1e82c-119">一些零售商不想在销售助理级别管理客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-119">Some retailers don't want to manage customers at the sales associate level.</span></span> <span data-ttu-id="1e82c-120">而是希望在商店级别管理重要客户的列表。</span><span class="sxs-lookup"><span data-stu-id="1e82c-120">Instead, they want to manage a list of key customers at the store level.</span></span> <span data-ttu-id="1e82c-121">这些零售商可以从商店客户手册中查看客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-121">These retailers can view customers from store client books.</span></span> <span data-ttu-id="1e82c-122">通过使用此选项，零售商可以从通讯簿与当前商店的通讯簿匹配的所有销售助理的客户手册中查看客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-122">By using this option, retailers can view the customers from the client books of all the sales associates whose address book matches the address book of the current store.</span></span> <span data-ttu-id="1e82c-123">这样，如果助理在法人的多个商店工作，客户手册将显示所有这些商店的客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-123">In this way, if an associate works in multiple stores of the legal entity, the client book shows the customers from all those stores.</span></span> <span data-ttu-id="1e82c-124">此功能支持其他功能。</span><span class="sxs-lookup"><span data-stu-id="1e82c-124">This functionality supports additional capabilities.</span></span> <span data-ttu-id="1e82c-125">例如，可以将客户从一个助理重新分配给另一个助理。</span><span class="sxs-lookup"><span data-stu-id="1e82c-125">For example, customers can be reassigned from one associate to another associate.</span></span> <span data-ttu-id="1e82c-126">当助理转岗或离开公司时，此功能很有用。</span><span class="sxs-lookup"><span data-stu-id="1e82c-126">This capability is useful when associates are transferred or leave the company.</span></span>

<span data-ttu-id="1e82c-127">每个销售助理可以在每个法人有一个客户手册，助理可以在其客户手册中添加一个或多个客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-127">Each sales associate can have one client book per legal entity, and associates can add one or more customers to their client book.</span></span> <span data-ttu-id="1e82c-128">在 Commerce 中，每个客户当前只能被添加到一个客户手册中。</span><span class="sxs-lookup"><span data-stu-id="1e82c-128">In Commerce, each customer can currently be added to only one client book.</span></span> <span data-ttu-id="1e82c-129">但是，Microsoft 计划增加功能，使一个客户可以被添加到多个客户手册中。</span><span class="sxs-lookup"><span data-stu-id="1e82c-129">However, Microsoft plans to add functionality that lets a single customer be added to multiple client books.</span></span>

> [!NOTE]
> <span data-ttu-id="1e82c-130">与客户搜索不同，客户手册不会根据商店的通讯簿筛选客户记录。</span><span class="sxs-lookup"><span data-stu-id="1e82c-130">Unlike customer search, the client book doesn't filter customer records based on the store's address books.</span></span>

## <a name="activities-and-notes"></a><span data-ttu-id="1e82c-131">活动和注释</span><span class="sxs-lookup"><span data-stu-id="1e82c-131">Activities and notes</span></span>

<span data-ttu-id="1e82c-132">在线渠道为零售商提供了了解客户偏好的方式，而无需客户明确提供这些信息。</span><span class="sxs-lookup"><span data-stu-id="1e82c-132">Online channels give retailers ways to learn about customer preferences without requiring that customers explicitly provide this information.</span></span> <span data-ttu-id="1e82c-133">与之相比，当客户与商店中的销售助理互动时，他们会明确共享有关其偏好的信息。</span><span class="sxs-lookup"><span data-stu-id="1e82c-133">By contrast, when customers interact with sales associates in the store, they explicitly share information about their preferences.</span></span> <span data-ttu-id="1e82c-134">遗憾的是，销售结束后，这些信息可能会丢失。</span><span class="sxs-lookup"><span data-stu-id="1e82c-134">Unfortunately, this information can be lost after the sale is over.</span></span> <span data-ttu-id="1e82c-135">但是，如果记录了这些信息，则可以帮助零售商更好地了解客户，从而帮助他们提供更好的建议和更好的整体购物体验。</span><span class="sxs-lookup"><span data-stu-id="1e82c-135">However, if this information is recorded, it can help retailers better understand customers, and therefore help them provide better recommendations and a better overall shopping experience.</span></span>

<span data-ttu-id="1e82c-136">为了捕获客户共享的关键信息，销售助理不仅可以使用客户手册属性，还可以使用活动和注释功能。</span><span class="sxs-lookup"><span data-stu-id="1e82c-136">To capture the critical information that customers share, sales associates can use not only the client book attributes, but also use the activities and notes functionality.</span></span> <span data-ttu-id="1e82c-137">零售商可以配置活动类型，例如有关进店、电子邮件地址，电话号码和约会的信息。</span><span class="sxs-lookup"><span data-stu-id="1e82c-137">Retailers can configure the activity types, such as information about the store visit, email address, phone number, and appointments.</span></span> <span data-ttu-id="1e82c-138">可以在销售点 (POS) 以时间线格式查看助理创建的活动。</span><span class="sxs-lookup"><span data-stu-id="1e82c-138">Activities that associates create can be viewed in a timeline format at the point of sale (POS).</span></span> <span data-ttu-id="1e82c-139">也可以在“总部”的 **所有客户 \> 常规** 页面上的 **活动** 选项卡上查看它们。</span><span class="sxs-lookup"><span data-stu-id="1e82c-139">They can also be viewed on the **Activities** tab on the **All customers \> General** page in Headquarters.</span></span>

<span data-ttu-id="1e82c-140">销售助理还可以使用注释来捕获可以在每次交互之前参考的一般客户信息。</span><span class="sxs-lookup"><span data-stu-id="1e82c-140">Sales associates can also use notes to capture generic customer information that can be referenced before every interaction.</span></span> <span data-ttu-id="1e82c-141">这些注释保存在“总部”中，可以在客户资料或呼叫中心的客户详细信息页面查看。</span><span class="sxs-lookup"><span data-stu-id="1e82c-141">These notes are saved in Headquarters, and can be viewed in the customer profile or on the customer details page in the call center.</span></span>

> [!NOTE]
> <span data-ttu-id="1e82c-142">当前，为法人工作的任何销售助理都可以查看所有注释和活动，并且可以查看客户详细信息页面。</span><span class="sxs-lookup"><span data-stu-id="1e82c-142">Currently, all notes and activities can be viewed by any sales associate who works for the legal entity and can view customer details pages.</span></span> <span data-ttu-id="1e82c-143">注释和活动不仅限于将客户添加到客户手册中的助理。</span><span class="sxs-lookup"><span data-stu-id="1e82c-143">Notes and activities aren't limited to the associate who added a customer to the client book.</span></span>

## <a name="integration-with-dynamics-365-customer-insights"></a><span data-ttu-id="1e82c-144">与 Dynamics 365 Customer Insights 的集成</span><span class="sxs-lookup"><span data-stu-id="1e82c-144">Integration with Dynamics 365 Customer Insights</span></span>

<span data-ttu-id="1e82c-145">通过使用 Dynamics 365 Customer Insights 应用程序，零售商可以聚合来自客户用来与零售商品牌进行交互的各个系统的数据。</span><span class="sxs-lookup"><span data-stu-id="1e82c-145">By using the Dynamics 365 Customer Insights application, retailers can aggregate data from the various systems that customers use to interact with the retailer's brand.</span></span> <span data-ttu-id="1e82c-146">然后，可以使用此数据生成客户的单一视图并获得见解。</span><span class="sxs-lookup"><span data-stu-id="1e82c-146">They can then use this data to generate a single view of the customer and derive insights.</span></span> <span data-ttu-id="1e82c-147">Customer Insights 与 Commerce 的集成使零售商可以选择一种或多种应在客户手册的客户卡上显示的度量。</span><span class="sxs-lookup"><span data-stu-id="1e82c-147">The integration of Customer Insights with Commerce lets retailers select one or more measures that should be shown on the customer card in the client book.</span></span> <span data-ttu-id="1e82c-148">例如，零售商可以使用 Customer Insights 中的数据来计算客户的“流失概率”，并定义“下一个最佳行为”。</span><span class="sxs-lookup"><span data-stu-id="1e82c-148">For example, retailers can use the data in Customer Insights to calculate the "churn probability" for a customer and define the "next best action."</span></span> <span data-ttu-id="1e82c-149">如果将这些值定义为度量，它们可以显示在客户卡上，并可以向销售助理提供重要信息。</span><span class="sxs-lookup"><span data-stu-id="1e82c-149">If these values are defined as measures, they can be shown on the customer card and can provide crucial information to sales associates.</span></span> <span data-ttu-id="1e82c-150">有关 Customer Insights 的详细信息，请参阅 [Dynamics 365 Customer Insights](https://docs.microsoft.com/dynamics365/ai/customer-insights/overview) 文档。</span><span class="sxs-lookup"><span data-stu-id="1e82c-150">For more information about Customer Insights, see the [Dynamics 365 Customer Insights](https://docs.microsoft.com/dynamics365/ai/customer-insights/overview) documentation.</span></span> <span data-ttu-id="1e82c-151">有关度量的详细信息，请参阅[度量](https://docs.microsoft.com/dynamics365/ai/customer-insights/pm-measures)。</span><span class="sxs-lookup"><span data-stu-id="1e82c-151">For more information about measures, see [Measures](https://docs.microsoft.com/dynamics365/ai/customer-insights/pm-measures).</span></span>

## <a name="set-up-clienteling"></a><span data-ttu-id="1e82c-152">设置客户服务解决方案</span><span class="sxs-lookup"><span data-stu-id="1e82c-152">Set up clienteling</span></span>

<span data-ttu-id="1e82c-153">要打开您环境中的客户服务解决方案功能，请按照下列步骤操作。</span><span class="sxs-lookup"><span data-stu-id="1e82c-153">To turn on the clienteling functionality in your environment, follow these steps.</span></span>

1. <span data-ttu-id="1e82c-154">在 **功能管理** 工作区，按 **零售和商业** 模块筛选功能。</span><span class="sxs-lookup"><span data-stu-id="1e82c-154">In the **Feature management** workspace, filter the features by the **Retail and commerce** module.</span></span>

    <span data-ttu-id="1e82c-155">![Commerce 模块的功能列表中的客户服务解决方案](./media/Enable_clienteling.png "“零售和商业”模块的功能列表中的客户服务解决方案")</span><span class="sxs-lookup"><span data-stu-id="1e82c-155">![Clienteling in the list of features for the Commerce module](./media/Enable_clienteling.png "Clienteling in the list of features for the Retail and commerce module")</span></span>

2. <span data-ttu-id="1e82c-156">通过选择 **立即启用**，开启 **客户服务解决方案** 功能。</span><span class="sxs-lookup"><span data-stu-id="1e82c-156">Turn on the **Clienteling** feature by selecting **Enable now**.</span></span>
3. <span data-ttu-id="1e82c-157">在 **商业参数** 页面上的 **编号规则** 选项卡上，选择 **客户手册标识符** 行。</span><span class="sxs-lookup"><span data-stu-id="1e82c-157">On the **Commerce Parameters** page, on the **Number sequence** tab, select the **Client book identifier** row.</span></span> <span data-ttu-id="1e82c-158">然后，在 **编号规则代码** 字段中，选择一个编号规则。</span><span class="sxs-lookup"><span data-stu-id="1e82c-158">Then, in the **Number sequence code** field, select a number sequence.</span></span> <span data-ttu-id="1e82c-159">系统将使用此编号规则为客户手册分配 ID。</span><span class="sxs-lookup"><span data-stu-id="1e82c-159">The system will use this number sequence to assign an ID to client books.</span></span>
4. <span data-ttu-id="1e82c-160">选择 **保存**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-160">Select **Save**.</span></span>
5. <span data-ttu-id="1e82c-161">创建一个新的属性组，其中包含要为客户手册中管理的客户捕获的属性。</span><span class="sxs-lookup"><span data-stu-id="1e82c-161">Create a new attribute group that contains the attributes that you want to capture for customers who are managed in client books.</span></span> <span data-ttu-id="1e82c-162">相关说明请参阅[属性和属性组](https://docs.microsoft.com/dynamics365/retail/attribute-attributegroups-lifecycle)。</span><span class="sxs-lookup"><span data-stu-id="1e82c-162">For instructions, see [Attributes and attribute groups](https://docs.microsoft.com/dynamics365/retail/attribute-attributegroups-lifecycle).</span></span>

    - <span data-ttu-id="1e82c-163">将所需的属性定义为 **可细化**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-163">Define the required attributes as **Can be refined**.</span></span> <span data-ttu-id="1e82c-164">然后，销售助理可以使用这些属性来筛选其客户手册。</span><span class="sxs-lookup"><span data-stu-id="1e82c-164">Sales associates can then use these attributes to filter their client book.</span></span>
    - <span data-ttu-id="1e82c-165">设置这些属性的显示顺序。</span><span class="sxs-lookup"><span data-stu-id="1e82c-165">Set the display order for these attributes.</span></span> <span data-ttu-id="1e82c-166">此显示顺序确定应在客户手册的客户卡上显示哪些属性。</span><span class="sxs-lookup"><span data-stu-id="1e82c-166">This display order determines which attributes should be shown on the customer card in the client book.</span></span> <span data-ttu-id="1e82c-167">显示顺序 1 被视为比显示顺序 2 更高。</span><span class="sxs-lookup"><span data-stu-id="1e82c-167">A display order of 1 is considered higher than a display order of 2.</span></span> <span data-ttu-id="1e82c-168">因此，显示顺序为 1 的属性将显示在显示顺序为 2 的属性之前。</span><span class="sxs-lookup"><span data-stu-id="1e82c-168">Therefore, the attribute that has a display order of 1 will be shown before to the attribute that has a display order of 2.</span></span>

    > [!NOTE]
    > <span data-ttu-id="1e82c-169">您可以在同一页面上提供 Customer Insights。</span><span class="sxs-lookup"><span data-stu-id="1e82c-169">You can make Customer Insights available from the same page.</span></span> <span data-ttu-id="1e82c-170">但是，出于身份验证目的，必须创建一个 Azure 应用程序 ID 和密钥。</span><span class="sxs-lookup"><span data-stu-id="1e82c-170">However, an Azure application ID and secret must be created, for authentication purposes.</span></span> <span data-ttu-id="1e82c-171">（有关要求的信息，请参阅本主题后面[打开 Customer Insights 与 Commerce 的集成](#turn-on-the-integration-of-customer-insights-with-commerce)的部分。）如果 Customer Insights 已打开，并且您选择了应在客户卡上显示的一个或多个度量，则这些度量将首先显示。</span><span class="sxs-lookup"><span data-stu-id="1e82c-171">(For information about the requirements, see the [Turn on the integration of Customer Insights with Commerce](#turn-on-the-integration-of-customer-insights-with-commerce) section later in this topic.) If Customer Insights is turned on, and you select one or more measures that should be shown on the customer card, those measures will be shown first.</span></span> <span data-ttu-id="1e82c-172">接下来，将基于显示顺序显示客户手册属性组。</span><span class="sxs-lookup"><span data-stu-id="1e82c-172">Next, client book attribute groups will be shown, based on the display order.</span></span> <span data-ttu-id="1e82c-173">例如，如果您从 Customer Insights 选择两个度量，这两个度量和一个客户手册属性将显示在客户卡上。</span><span class="sxs-lookup"><span data-stu-id="1e82c-173">For example, if you select two measures from Customer Insights, those two measures and one client book attribute will be shown on the customer card.</span></span> <span data-ttu-id="1e82c-174">（显示的客户手册属性将是显示顺序最高的属性。）</span><span class="sxs-lookup"><span data-stu-id="1e82c-174">(The client book attribute that is shown will be the attribute that has the highest display order.)</span></span>

6. <span data-ttu-id="1e82c-175">在 **商业参数** 页面上，在 **客户服务解决方案** 选项卡上的 **客户手册属性组** 字段中，选择刚才创建的属性组。</span><span class="sxs-lookup"><span data-stu-id="1e82c-175">On the **Commerce parameters** page, on the **Clienteling** tab, in the **Client book attribute group** field, select the attribute group that you just created.</span></span>

    <span data-ttu-id="1e82c-176">![已选择客户手册属性组](./media/Client%20book%20attributes.png "已选择客户手册属性组")</span><span class="sxs-lookup"><span data-stu-id="1e82c-176">![Client book attribute group selected](./media/Client%20book%20attributes.png "Client book attribute group selected")</span></span>

7. <span data-ttu-id="1e82c-177">要捕获 POS 上发生的活动，请在 **活动类型** 页面定义活动类型（**Retail 和 Commerce \> 客户 \> 活动类型**）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-177">To capture activities that occur at the POS, define the activity types on the **Activity types** page (**Retail and Commerce \> Customers \> Activity types**).</span></span>

    > [!NOTE]
    > <span data-ttu-id="1e82c-178"> Commerce Scale Unit 在首次进行实时调用时会提取活动类型。</span><span class="sxs-lookup"><span data-stu-id="1e82c-178">Activity types are pulled by the Commerce Scale Unit when it makes a real-time call for the first time.</span></span> <span data-ttu-id="1e82c-179">提取活动后，它们将被缓存几个小时。</span><span class="sxs-lookup"><span data-stu-id="1e82c-179">After the activities are pulled, they are cached for a few hours.</span></span> <span data-ttu-id="1e82c-180">如果更改活动类型，请等待直到缓存不再有效。</span><span class="sxs-lookup"><span data-stu-id="1e82c-180">If you change the activity types, wait until the cache is no longer valid.</span></span> <span data-ttu-id="1e82c-181">或者，对于非生产环境，重新启动 Commerce Scale Unit 服务。</span><span class="sxs-lookup"><span data-stu-id="1e82c-181">Alternatively, for non-production environments, restart the Commerce Scale Unit service.</span></span>

8. <span data-ttu-id="1e82c-182">在适当的 POS 屏幕布局中添加两个按钮，以便销售助理可以查看自己的客户手册和商店客户手册。</span><span class="sxs-lookup"><span data-stu-id="1e82c-182">Add two buttons to the appropriate POS screen layout, so that sales associates can view their own client book and the store client book.</span></span> <span data-ttu-id="1e82c-183">（商店客户手册包括与商店共享通讯簿的所有助理的所有客户手册中的客户。）相应的操作被分别命名为 **查看客户手册中的客户** 和 **查看商店客户手册中的客户**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-183">(Store client books include clients from all client books of all associates who share an address book with the store.) The corresponding operations are named **View customers in client book** and **View customers from store client books**, respectively.</span></span> <span data-ttu-id="1e82c-184">与客户手册有关的三个其他操作可用。</span><span class="sxs-lookup"><span data-stu-id="1e82c-184">Three additional operations that are related to client books are available.</span></span> <span data-ttu-id="1e82c-185">这些操作确定哪些助理可以从客户手册中添加、删除和重新分配客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-185">These operations determine which associates can add, remove, and reassign customers from the client book.</span></span> <span data-ttu-id="1e82c-186">它们分别被命名为 **将客户添加到客户手册中**、**从客户手册中删除客户** 和 **将客户重新分配到客户手册**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-186">They are named **Add customer to client book**, **Remove customers from client book**, and **Reassign customers to a client book**, respectively.</span></span>
9. <span data-ttu-id="1e82c-187">运行以下配送计划作业：1040、1150、1110 和 1090。</span><span class="sxs-lookup"><span data-stu-id="1e82c-187">Run the following distribution schedule jobs: 1040, 1150, 1110, and 1090.</span></span>

<span data-ttu-id="1e82c-188">完成此过程后，销售助理可以在 POS 上打开客户详细信息页面，然后将客户添加到他们的客户手册中，查看和捕获客户的活动和注释，并通过使用客户和客户手册属性筛选客户手册来定位客户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-188">After you've completed this procedure, sales associates can open the customer details page at the POS, and add customers to their client book, view and capture activities and notes for customers, and target customers by using customer and client book attributes to filter the client book.</span></span> <span data-ttu-id="1e82c-189">下图显示了一个客户手册的示例。</span><span class="sxs-lookup"><span data-stu-id="1e82c-189">The following illustration shows an example of a client book.</span></span>

<span data-ttu-id="1e82c-190">![客户手册的示例](./media/client_book.png "客户手册的示例")</span><span class="sxs-lookup"><span data-stu-id="1e82c-190">![Example of a client book](./media/client_book.png "Example of a client book")</span></span>

## <a name="turn-on-the-integration-of-customer-insights-with-commerce"></a><span data-ttu-id="1e82c-191">打开 Customer Insights 与 Commerce 的集成</span><span class="sxs-lookup"><span data-stu-id="1e82c-191">Turn on the integration of Customer Insights with Commerce</span></span>

<span data-ttu-id="1e82c-192">要打开 Customer Insights 与 Commerce 的集成，必须确保在预配 Commerce 的租户中有一个 Customer Insights 的活动实例。</span><span class="sxs-lookup"><span data-stu-id="1e82c-192">To turn on the integration of Customer Insights with Commerce, you must make sure that you have an active instance of Customer Insights in the tenant where Commerce is provisioned.</span></span> <span data-ttu-id="1e82c-193">您还必须有具有 Azure 订阅的 Azure Active Directory (Azure AD) 用户帐户。</span><span class="sxs-lookup"><span data-stu-id="1e82c-193">You must also have an Azure Active Directory (Azure AD) user account that has an Azure subscription.</span></span>

<span data-ttu-id="1e82c-194">请按照以下步骤设置集成。</span><span class="sxs-lookup"><span data-stu-id="1e82c-194">Follow these steps to set up the integration.</span></span>

1. <span data-ttu-id="1e82c-195">在 Azure 门户中，注册一个新应用程序并记下应用程序名称、应用程序 ID 和密码。</span><span class="sxs-lookup"><span data-stu-id="1e82c-195">In the Azure portal, register a new application and make a note of the application name, application ID, and secret.</span></span> <span data-ttu-id="1e82c-196">此信息将用于 Commerce 和 Customer Insights 之间的服务对服务身份验证。</span><span class="sxs-lookup"><span data-stu-id="1e82c-196">This information will be used for service-to-service authentication between Commerce and Customer Insights.</span></span> <span data-ttu-id="1e82c-197">请以安全方式记下密码，在密钥保管库中进行保存时需要用到。</span><span class="sxs-lookup"><span data-stu-id="1e82c-197">Note the secret safely, as it will be required to save it in the key vault.</span></span> <span data-ttu-id="1e82c-198">对于以下示例，请分别将 CI_Access_name、CI_Access_AppID、CI_Access_Secret 用作应用程序名称、应用程序 ID 和密码。</span><span class="sxs-lookup"><span data-stu-id="1e82c-198">For the following example, use CI_Access_name, CI_Access_AppID, CI_Access_Secret for the application name, application ID, and secret respectively.</span></span> <span data-ttu-id="1e82c-199">有关详细信息，请参阅[快速入门：向 Microsoft 身份平台注册应用程序](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app)。</span><span class="sxs-lookup"><span data-stu-id="1e82c-199">For more information, see [Quickstart: Register an application with the Microsoft identity platform](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app).</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="1e82c-200">采取措施，以便您记住在密钥到期之前对其进行更改。</span><span class="sxs-lookup"><span data-stu-id="1e82c-200">Take steps so that you will remember to change the secret before it expires.</span></span> <span data-ttu-id="1e82c-201">否则，集成将意外停止。</span><span class="sxs-lookup"><span data-stu-id="1e82c-201">Otherwise, the integration will unexpectedly stop.</span></span>

2. <span data-ttu-id="1e82c-202">转到您的 Customer Insights 实例并搜索上面创建的应用程序的名称（在本示例中为“CI_Access_name”）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-202">Go to your Customer Insights instance and search for the name of the application created above (in this example, "CI_Access_name").</span></span>
3. <span data-ttu-id="1e82c-203">创建一个 Azure 密钥保管库，并记下名称和 URL（在此示例中为“KeyVaultName”、“KeyVaultURL”）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-203">Create an Azure key vault, and take a note of the name and URL (in this example, "KeyVaultName", "KeyVaultURL").</span></span> <span data-ttu-id="1e82c-204">有关说明，请参阅[快速入门：使用 Azure 门户设置密钥以及从 Azure 密钥保管库检索密钥](https://docs.microsoft.com/azure/key-vault/quick-create-portal)。</span><span class="sxs-lookup"><span data-stu-id="1e82c-204">For instructions, see [Quickstart: Set and retrieve a secret from Azure Key Vault using the Azure portal](https://docs.microsoft.com/azure/key-vault/quick-create-portal).</span></span>
4. <span data-ttu-id="1e82c-205">将密码（在本示例中为“CI_Access_Secret”）保存在保管库中。</span><span class="sxs-lookup"><span data-stu-id="1e82c-205">Save the secret (in this example, "CI_Access_Secret") in the vault.</span></span> <span data-ttu-id="1e82c-206">当此密码存储在保管库中时，密码将获得一个名称。</span><span class="sxs-lookup"><span data-stu-id="1e82c-206">When this secret is stored in the vault, the secret gets a name.</span></span> <span data-ttu-id="1e82c-207">记下密码的名称（在此示例中为“SecretName”）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-207">Note the secret name (in this example, 'SecretName").</span></span>
5. <span data-ttu-id="1e82c-208">若要从 Azure 密钥保管库访问密码，您需要使用应用程序 ID 和密码（在本示例中为“KeyVault_Access_AppID”和“KeyVault_Access_Secret”）创建另一个应用程序。</span><span class="sxs-lookup"><span data-stu-id="1e82c-208">To access the secret from Azure Key Vault, you need to create another application with an application ID and secret (in this example, "KeyVault_Access_AppID" and "KeyVault_Access_Secret").</span></span> <span data-ttu-id="1e82c-209">以安全方式记下密码，它不会再显示。</span><span class="sxs-lookup"><span data-stu-id="1e82c-209">Note the secret safely, as it will not be displayed again.</span></span>
6. <span data-ttu-id="1e82c-210">接下来，您需要授予应用程序使用 API 从 Commerce 访问密钥保管库的权限。</span><span class="sxs-lookup"><span data-stu-id="1e82c-210">Next, you need to give permissions to the application to access the Key Vault from Commerce using APIs.</span></span> <span data-ttu-id="1e82c-211">在 Azure 门户中转到应用程序页面。</span><span class="sxs-lookup"><span data-stu-id="1e82c-211">Go to the application page in Azure portal.</span></span> <span data-ttu-id="1e82c-212">在 **管理** 部分下，选择 **API 权限**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-212">Under the **Manage** section, select **API permissions**.</span></span> <span data-ttu-id="1e82c-213">添加权限以访问 **Azure 密钥保管库**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-213">Add the permission to access **Azure key vault**.</span></span> <span data-ttu-id="1e82c-214">为此权限，选择 **访问政策**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-214">For this permission, select **Access policy**.</span></span> <span data-ttu-id="1e82c-215">模板选择 **密码管理**，然后选择 **获取**、**列出**、**解密** 和 **加密** 选项。</span><span class="sxs-lookup"><span data-stu-id="1e82c-215">Select the template as **Secret management**, and select the **Get**, **List**, **Decrypt**, and **Encrypt** options.</span></span> 
5. <span data-ttu-id="1e82c-216">在 Commerce headquarters 中，转到 **系统管理 \> 设置 \> 密钥保管库参数**，然后输入密钥保管库所需的信息。</span><span class="sxs-lookup"><span data-stu-id="1e82c-216">In Commerce headquarters, go to **System administration \> Setup \> Key Vault parameters**, and enter the required information for the key vault.</span></span> <span data-ttu-id="1e82c-217">然后，在 **密钥保管库客户端** 字段中，输入您在步骤 4 中使用的应用程序 ID，以便 Commerce 可以访问密钥保管库中的密钥。</span><span class="sxs-lookup"><span data-stu-id="1e82c-217">Then, in the **Key Vault client** field, enter the application ID that you used in step 4, so that Commerce can access the secrets in the key vault.</span></span>
6. <span data-ttu-id="1e82c-218">要将您在步骤 1 中创建的应用程序添加到安全应用程序列表（有时称为安全列表）中，请转到 Customer Insights，并选择对应用程序的 **查看** 访问权限。</span><span class="sxs-lookup"><span data-stu-id="1e82c-218">To add the application that you created in step 1 to the list of safe applications (sometimes referred to as a safe list), go to Customer Insights, and select **View** access to the application.</span></span> <span data-ttu-id="1e82c-219">有关说明，请参阅[权限](https://docs.microsoft.com/dynamics365/ai/customer-insights/pm-permissions)。</span><span class="sxs-lookup"><span data-stu-id="1e82c-219">For instructions, see [Permissions](https://docs.microsoft.com/dynamics365/ai/customer-insights/pm-permissions).</span></span>
7. <span data-ttu-id="1e82c-220">在 Commerce HQ 中的 **系统管理 > 设置 > 密钥保管库参数** 页，如下所述更新字段：</span><span class="sxs-lookup"><span data-stu-id="1e82c-220">On the **System administration > Setup > Key Vault parameters** page in Commerce HQ, update the fields as described below:</span></span> 

- <span data-ttu-id="1e82c-221">**密钥保管库 URL**：“KeyVaultURL”（来自上面的步骤 3）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-221">**Key Vault url**: "KeyVaultURL" (from step 3 above).</span></span>
- <span data-ttu-id="1e82c-222">**密钥保管库客户端**：“KeyVault_Access_AppID”（来自上面的步骤 5）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-222">**Key Vault client**: "KeyVault_Access_AppID" (from step 5 above).</span></span>
- <span data-ttu-id="1e82c-223">**密钥保管库密钥**：“KeyVault_Access_Secret”（来自上面的步骤 5）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-223">**Key Vault secret key**: "KeyVault_Access_Secret" (from step 5 above).</span></span>
- <span data-ttu-id="1e82c-224">在 **密码** 部分下：</span><span class="sxs-lookup"><span data-stu-id="1e82c-224">Under **Secrets** section:</span></span>
    - <span data-ttu-id="1e82c-225">**名称**：任何名称，例如，“CISecret”。</span><span class="sxs-lookup"><span data-stu-id="1e82c-225">**Name**: Any name, for example "CISecret".</span></span>
    - <span data-ttu-id="1e82c-226">**描述**：任何值。</span><span class="sxs-lookup"><span data-stu-id="1e82c-226">**Description**: Any value.</span></span>
    - <span data-ttu-id="1e82c-227">**密码**：**vault**://<Name of key vault>/<name of secret>> 在此示例中将为“vault://KeyVaultName/SecretName”。</span><span class="sxs-lookup"><span data-stu-id="1e82c-227">**Secret**: **vault**://<Name of key vault>/<name of secret>> In this  example it will be "vault://KeyVaultName/SecretName".</span></span>

<span data-ttu-id="1e82c-228">更新字段后，选择 **验证** 确保密码可以被 Commerce 应用程序访问。</span><span class="sxs-lookup"><span data-stu-id="1e82c-228">After you update the fields, select **Validate** to ensure the secret can be accessed by the Commerce application.</span></span>

8. <span data-ttu-id="1e82c-229">在 Commerce 中，在 **Commerce 参数** 页上的 **客户服务解决方案** 选项卡上，在 **Dynamics 365 Customer Insights** 快速选项卡上，将 **应用程序 ID** 设置为“CI_Access_AppID”（来自上面的步骤 1）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-229">In Commerce, on the **Commerce parameters** page, on the **Clienteling** tab, on the **Dynamics 365 Customer Insights** FastTab, set the **Application ID** to "CI_Access_AppID" (from step 1 above).</span></span> <span data-ttu-id="1e82c-230">对于 **密码名称**，选择在上面的步骤 7 中输入的密码的名称（“CISecret”）。</span><span class="sxs-lookup"><span data-stu-id="1e82c-230">For **Secret name**, select the name of the secret entered in step 7 above ("CISecret").</span></span> <span data-ttu-id="1e82c-231">将 **启用 Customer Insights** 选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-231">Set the **Enable Customer Insights** option to **Yes**.</span></span> <span data-ttu-id="1e82c-232">如果由于任何原因设置失败，将显示一条错误消息，此选项将设置为 **否**。</span><span class="sxs-lookup"><span data-stu-id="1e82c-232">If the setup is unsuccessful for any reason, an error message will be displayed, and this option will be set to **No**.</span></span> 

<span data-ttu-id="1e82c-233">您可以在 Customer Insights 中拥有多个环境，例如测试和生产环境。</span><span class="sxs-lookup"><span data-stu-id="1e82c-233">You can have multiple environments in Customer Insights, such as test and production environments.</span></span> <span data-ttu-id="1e82c-234">在 **环境实例 ID** 字段中，输入适当的环境。</span><span class="sxs-lookup"><span data-stu-id="1e82c-234">In the **Environment instance ID** field, enter the appropriate environment.</span></span> <span data-ttu-id="1e82c-235">在 **备用客户 ID** 字段中，在 Customer Insights 中输入映射到客户帐号的属性。</span><span class="sxs-lookup"><span data-stu-id="1e82c-235">In the **Alternate customer ID** field, enter the property in Customer Insights that is mapped to the customer account number.</span></span> <span data-ttu-id="1e82c-236">（在 Commerce 中，客户帐号是客户 ID。）其余三个属性是将显示在客户手册中客户卡上的度量。</span><span class="sxs-lookup"><span data-stu-id="1e82c-236">(In Commerce, the customer account number is the customer ID.) The remaining three properties are the measures that will be shown on the customer card in the client book.</span></span> <span data-ttu-id="1e82c-237">您最多可以选择三个度量在客户卡上显示。</span><span class="sxs-lookup"><span data-stu-id="1e82c-237">You can select up to three measures to show on the customer card.</span></span> <span data-ttu-id="1e82c-238">不过，您无需选择任何度量。</span><span class="sxs-lookup"><span data-stu-id="1e82c-238">However, you are not required to select any measures.</span></span> <span data-ttu-id="1e82c-239">如前所述，系统将首先显示这些值，然后显示客户手册属性组的值。</span><span class="sxs-lookup"><span data-stu-id="1e82c-239">As mentioned previously, the system shows these values first, and then it shows the values for the client book attribute group.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
