---
title: POS 外围设备和服务的运行状况检查
description: 此主题概述销售点 (POS) 中的运行状况检查操作。
author: rubendel
manager: AnnBe
ms.date: 03/06/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: e23e944c-15de-459d-bcc5-ea03615ebf4c
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-03-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 86f0964b6d929d0434a8bf04aaefc173bee21c6f
ms.sourcegitcommit: d77e902b1ab436e5ff3e78c496f5a70ef38e737c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/15/2020
ms.locfileid: "4410610"
---
# <a name="health-check-for-pos-peripherals-and-services"></a><span data-ttu-id="cbfb8-103">POS 外围设备和服务的运行状况检查</span><span class="sxs-lookup"><span data-stu-id="cbfb8-103">Health check for POS peripherals and services</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="cbfb8-104">此主题介绍销售点 (POS) 中的运行状况检查操作。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-104">This topic describes the health check operation in the point of sale (POS).</span></span>

## <a name="overview"></a><span data-ttu-id="cbfb8-105">概览</span><span class="sxs-lookup"><span data-stu-id="cbfb8-105">Overview</span></span>

<span data-ttu-id="cbfb8-106">零售商店可以是使用大量应用程序和设备的复杂环境。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-106">Retail stores can be complex environments where many applications and devices are used.</span></span> <span data-ttu-id="cbfb8-107">随着经营规模扩大，可能很难确保经营始终平稳开展，例如，因为依赖的外围设备可能在一天内损坏或被意外拔下。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-107">As operations grow, it can become difficult to ensure that operations always run smoothly, because of dependencies on, for example, peripherals that can break or accidentally become unplugged over the course of a day.</span></span> <span data-ttu-id="cbfb8-108">对于较大规模的商家来说，诊断与设备和服务有关的问题可能成本很高，而对于较小规模的经营来说，同样会让人烦心。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-108">Troubleshooting for issues that are related to devices and services can be costly for larger merchants and equally frustrating for smaller operations.</span></span>

<span data-ttu-id="cbfb8-109">Microsoft Dynamics 365 Commerce 版本 10.0.10 及更高版本中有一项运行状况检查操作，可帮助部分避免这样的成本和烦恼。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-109">Microsoft Dynamics 365 Commerce versions 10.0.10 and later include a health check operation that can help prevent some of this cost and frustration.</span></span> <span data-ttu-id="cbfb8-110">此操作提供在正常经营外直接从 POS 测试设备的方法。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-110">This operation provides a method for testing devices directly from the POS outside of normal operations.</span></span> <span data-ttu-id="cbfb8-111">因此，可以帮助零售商提前检测问题。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-111">Therefore, it can help retailers detect issues before they occur.</span></span>

## <a name="key-terms"></a><span data-ttu-id="cbfb8-112">重要术语</span><span class="sxs-lookup"><span data-stu-id="cbfb8-112">Key terms</span></span>

| <span data-ttu-id="cbfb8-113">术语</span><span class="sxs-lookup"><span data-stu-id="cbfb8-113">Term</span></span> | <span data-ttu-id="cbfb8-114">说明</span><span class="sxs-lookup"><span data-stu-id="cbfb8-114">Description</span></span> |
|---|---|
| <span data-ttu-id="cbfb8-115">外围设备</span><span class="sxs-lookup"><span data-stu-id="cbfb8-115">Peripheral</span></span> | <span data-ttu-id="cbfb8-116">POS 应用程序用于促成交易和商店中的其他操作的任何设备。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-116">Any device that the POS application uses to facilitate transactions and other operations in the store.</span></span> <span data-ttu-id="cbfb8-117">例如，收银箱、条形码扫描仪和付款终端。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-117">Examples include cash drawers, bar code scanners, and payment terminals.</span></span> |
| <span data-ttu-id="cbfb8-118">服务</span><span class="sxs-lookup"><span data-stu-id="cbfb8-118">Service</span></span> | <span data-ttu-id="cbfb8-119">在此主题中，服务是 POS 应用程序用于执行交易和日常经营的辅助应用程序。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-119">In this topic, a service is an ancillary application that the POS application depends on to perform transactions and daily operations.</span></span> <span data-ttu-id="cbfb8-120">例如，帮助计算税或装运费用的应用。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-120">Examples include apps that help with tax or shipping calculations.</span></span> |

## <a name="health-check-operation"></a><span data-ttu-id="cbfb8-121">运行状况检查操作</span><span class="sxs-lookup"><span data-stu-id="cbfb8-121">Health check operation</span></span>

<span data-ttu-id="cbfb8-122">运行状况检查操作是 Commerce Headquarters 中 **POS 操作** 页内的操作 717。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-122">The health check operation is operation 717 on the **POS Operations** page in Commerce Headquarters.</span></span> <span data-ttu-id="cbfb8-123">其可在 POS 处于非银箱模式时使用。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-123">It can be used while the POS is in non-drawer mode.</span></span> <span data-ttu-id="cbfb8-124">但是，必须有一个硬件工作站处于活动状态。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-124">However, a hardware station must be active.</span></span>

<span data-ttu-id="cbfb8-125">默认情况下，运行状况检查经测试收银机的当前活动硬件工作站的硬件配置文件中配置的设备。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-125">By default, the health check tests only devices that are configured in the hardware profile for the hardware station that is currently active for a register.</span></span> <span data-ttu-id="cbfb8-126">如果收银机在一天内使用多个硬件工作站，若要对所有这些硬件工作站执行运行状况检查，该收银机同时只能连接到一个硬件工作站。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-126">If a register uses multiple hardware stations over the course of a day, to do health checks for all of them, it must connect to one hardware station at a time.</span></span> <span data-ttu-id="cbfb8-127">不存在商店级运行状况检查。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-127">There is no store-level health check.</span></span> <span data-ttu-id="cbfb8-128">但是，可以通过 Commerce Server 扩展执行这种检查。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-128">However, it's possible that this type of check can be done through Commerce Server extensibility.</span></span>

### <a name="out-of-box-health-checks"></a><span data-ttu-id="cbfb8-129">自带运行状况检查</span><span class="sxs-lookup"><span data-stu-id="cbfb8-129">Out-of-box health checks</span></span>

| <span data-ttu-id="cbfb8-130">类型</span><span class="sxs-lookup"><span data-stu-id="cbfb8-130">Type</span></span> | <span data-ttu-id="cbfb8-131">连接</span><span class="sxs-lookup"><span data-stu-id="cbfb8-131">Connection</span></span> | <span data-ttu-id="cbfb8-132">明细</span><span class="sxs-lookup"><span data-stu-id="cbfb8-132">Details</span></span> |
|---|---|---|
| <span data-ttu-id="cbfb8-133">打印机</span><span class="sxs-lookup"><span data-stu-id="cbfb8-133">Printer</span></span> | <span data-ttu-id="cbfb8-134">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-134">OPOS</span></span> | <span data-ttu-id="cbfb8-135">此项检查测试 POS (OPOS) 功能的链接和嵌入。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-135">This check tests basic object linking and embedding for POS (OPOS) functions.</span></span> <span data-ttu-id="cbfb8-136">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-136">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-137">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-137">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-138">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-138">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> |
| <span data-ttu-id="cbfb8-139">行显示内容</span><span class="sxs-lookup"><span data-stu-id="cbfb8-139">Line display</span></span> | <span data-ttu-id="cbfb8-140">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-140">OPOS</span></span> | <span data-ttu-id="cbfb8-141">此项检查测试基本 OPOS 功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-141">This check tests basic OPOS functions.</span></span> <span data-ttu-id="cbfb8-142">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-142">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-143">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-143">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-144">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-144">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> |
| <span data-ttu-id="cbfb8-145">双显示器</span><span class="sxs-lookup"><span data-stu-id="cbfb8-145">Dual display</span></span> | <span data-ttu-id="cbfb8-146">窗口</span><span class="sxs-lookup"><span data-stu-id="cbfb8-146">Windows</span></span> | <span data-ttu-id="cbfb8-147">此项检查确保操作系统检测第二个 Windows 显示器。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-147">This check ensures that the operating system detects a second Windows display.</span></span> | 
| <span data-ttu-id="cbfb8-148">MSR</span><span class="sxs-lookup"><span data-stu-id="cbfb8-148">MSR</span></span> | <span data-ttu-id="cbfb8-149">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-149">OPOS</span></span> | <span data-ttu-id="cbfb8-150">此项检查测试基本 OPOS 功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-150">This check tests basic OPOS functions.</span></span> <span data-ttu-id="cbfb8-151">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-151">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-152">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-152">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-153">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-153">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> |
| <span data-ttu-id="cbfb8-154">银箱</span><span class="sxs-lookup"><span data-stu-id="cbfb8-154">Drawer</span></span> | <span data-ttu-id="cbfb8-155">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-155">OPOS</span></span> | <span data-ttu-id="cbfb8-156">此项检查测试基本 OPOS 功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-156">This check tests basic OPOS functions.</span></span> <span data-ttu-id="cbfb8-157">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-157">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-158">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-158">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-159">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-159">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> | 
| <span data-ttu-id="cbfb8-160">扫描仪</span><span class="sxs-lookup"><span data-stu-id="cbfb8-160">Scanner</span></span> | <span data-ttu-id="cbfb8-161">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-161">OPOS</span></span> | <span data-ttu-id="cbfb8-162">此项检查测试基本 OPOS 功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-162">This check tests basic OPOS functions.</span></span> <span data-ttu-id="cbfb8-163">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-163">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-164">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-164">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-165">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-165">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> | 
| <span data-ttu-id="cbfb8-166">比例</span><span class="sxs-lookup"><span data-stu-id="cbfb8-166">Scale</span></span> | <span data-ttu-id="cbfb8-167">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-167">OPOS</span></span> | <span data-ttu-id="cbfb8-168">此项检查测试基本 OPOS 功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-168">This check tests basic OPOS functions.</span></span> <span data-ttu-id="cbfb8-169">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-169">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-170">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-170">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-171">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-171">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> |
| <span data-ttu-id="cbfb8-172">PIN 小键盘</span><span class="sxs-lookup"><span data-stu-id="cbfb8-172">PIN pad</span></span> | <span data-ttu-id="cbfb8-173">OPOS</span><span class="sxs-lookup"><span data-stu-id="cbfb8-173">OPOS</span></span> | <span data-ttu-id="cbfb8-174">此项检查测试基本 OPOS 功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-174">This check tests basic OPOS functions.</span></span> <span data-ttu-id="cbfb8-175">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="cbfb8-175">Here are some examples:</span></span><ul><li><span data-ttu-id="cbfb8-176">打开：**Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-176">Open: **Open** &gt; **ClaimDevice** &gt; **DeviceEnabled=True**</span></span></li><li><span data-ttu-id="cbfb8-177">关闭：**DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span><span class="sxs-lookup"><span data-stu-id="cbfb8-177">Close: **DeviceEnabled=False** &gt; **ReleaseDevice** &gt; **Close**</span></span></li></ul> |
| <span data-ttu-id="cbfb8-178">付款终端</span><span class="sxs-lookup"><span data-stu-id="cbfb8-178">Payment terminal</span></span> | <span data-ttu-id="cbfb8-179">付款 SDK</span><span class="sxs-lookup"><span data-stu-id="cbfb8-179">Payments SDK</span></span> | <span data-ttu-id="cbfb8-180">此项检查测试付款 SDK 提供的基本付款终端功能。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-180">This check tests basic payment terminal functions provided by the Payments SDK.</span></span> <ul><li><span data-ttu-id="cbfb8-181">锁定</span><span class="sxs-lookup"><span data-stu-id="cbfb8-181">Lock</span></span></li><li><span data-ttu-id="cbfb8-182">BeginTransaction</span><span class="sxs-lookup"><span data-stu-id="cbfb8-182">BeginTransaction</span></span></li><li><span data-ttu-id="cbfb8-183">EndTransaction</span><span class="sxs-lookup"><span data-stu-id="cbfb8-183">EndTransaction</span></span></li><li><span data-ttu-id="cbfb8-184">ReleaseDevice</span><span class="sxs-lookup"><span data-stu-id="cbfb8-184">ReleaseDevice</span></span></li><li><span data-ttu-id="cbfb8-185">期结</span><span class="sxs-lookup"><span data-stu-id="cbfb8-185">Close</span></span></li></ul> |

### <a name="using-the-health-check-operation-in-the-pos"></a><span data-ttu-id="cbfb8-186">在 POS 中使用运行状况检查操作</span><span class="sxs-lookup"><span data-stu-id="cbfb8-186">Using the health check operation in the POS</span></span>

<span data-ttu-id="cbfb8-187">在 POS 中启动运行状况检查操作之后，右侧的窗格将列出配置的设备，并显示各设备的状态。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-187">When the health check operation is initiated in the POS, a pane on the right lists the configured devices and shows the status of each device.</span></span> <span data-ttu-id="cbfb8-188">若要对一个设备执行运行状况检查，请选择该设备，然后选择 **测试选定设备**。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-188">To do a health check for a single device, select the device, and then select **Test selected**.</span></span> <span data-ttu-id="cbfb8-189">若要对所有设备执行运行状况检查，请选择 **全部测试**。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-189">To do a health check for all devices, select **Test all**.</span></span> <span data-ttu-id="cbfb8-190">**全部测试** 功能一次一个测试所有设备，并更新 **状态** 列中各设备的状态。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-190">The **Test all** function tests all the devices, one at a time, and updates the status of each device in the **Status** column.</span></span>

<span data-ttu-id="cbfb8-191">**上次检查** 列 显示上次对每个设备执行运行状况检查的时间。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-191">The **Last check** column shows when the health check was last done for each device.</span></span>

<span data-ttu-id="cbfb8-192">如果通过了某个设备的运行状况检查（即未遇到任何错误），该设备的状态将为 **正常**。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-192">If the health check for a device passes (that is, if no errors are encountered), the device's status will be **OK**.</span></span> <span data-ttu-id="cbfb8-193">如果运行状况检查失败，则状态将指示存在错误。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-193">If the health check fails, the status will indicate that there was an error.</span></span> <span data-ttu-id="cbfb8-194">在此情况下，右侧的窗格提供与错误有关的详细信息，或指示用户联系系统管理员。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-194">In this case, the pane on the right provides details that are related to the error, or it instructs the user to contact the system admin.</span></span>

<span data-ttu-id="cbfb8-195">某些设备（如 OPOS 键锁）没有自带运行状况检查测试。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-195">Some devices, such as the OPOS keylock, don't have out-of-box health check tests.</span></span> <span data-ttu-id="cbfb8-196">如果没有为使用的任何设备检测到运行状况检查测试，状态将为 **不支持**。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-196">If a health check test isn't detected for any device that is used, the status will be **Not supported**.</span></span>

### <a name="extending-health-checks"></a><span data-ttu-id="cbfb8-197">扩展运行状况检查</span><span class="sxs-lookup"><span data-stu-id="cbfb8-197">Extending health checks</span></span>

<span data-ttu-id="cbfb8-198">自带运行状况检查测试被配置为为典型错误提供一些用户容易明白的消息。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-198">The out-of-box health check tests are configured to provide some user-friendly messages for typical errors.</span></span> <span data-ttu-id="cbfb8-199">但是，并未涵盖所有方案。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-199">However, not all scenarios are covered.</span></span> <span data-ttu-id="cbfb8-200">通过扩展，商家可以将用户容易明白的消息映射到可能特定于其环境的错误。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-200">Through extensibility, merchants can map user-friendly messages to errors that might be specific to their environment.</span></span>

<span data-ttu-id="cbfb8-201">也可以创建自定义的运行状况检查来测试自带不支持的设备，或测试 POS 依赖的服务。</span><span class="sxs-lookup"><span data-stu-id="cbfb8-201">Custom health checks can also be created to test devices that aren't supported out of the box, or to test any services that the POS depends on.</span></span>

## <a name="related-articles"></a><span data-ttu-id="cbfb8-202">相关文章</span><span class="sxs-lookup"><span data-stu-id="cbfb8-202">Related articles</span></span>

[<span data-ttu-id="cbfb8-203">Modern POS (MPOS) 触发器和打印</span><span class="sxs-lookup"><span data-stu-id="cbfb8-203">Modern POS (MPOS) triggers and printing</span></span>](dev-itpro/pos-trigger-printing.md)
