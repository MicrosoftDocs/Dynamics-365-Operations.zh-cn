---
title: 销售点 (POS) 中的客户订单
description: 本主题提供有关销售点 (POS) 中客户订单的信息。 客户订单也称为特殊订单。 此主题中包含对相关参数和交易记录流的讨论。
author: josaw1
ms.date: 01/06/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFunctionalityProfile
audience: Application User
ms.reviewer: josaw
ms.custom: 260594
ms.assetid: 6fc835ef-d62e-4f23-9d49-50299be642ca
ms.search.region: global
ms.search.industry: Retail
ms.author: anpurush
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: Release 10.0.14
ms.openlocfilehash: a310c7067b399fb35ccc8a1b17d8bd6822a27a62
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/01/2021
ms.locfileid: "5821000"
---
# <a name="customer-orders-in-point-of-sale-pos"></a><span data-ttu-id="90f1b-105">销售点 (POS) 中的客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-105">Customer orders in Point of Sale (POS)</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="90f1b-106">本主题提供有关如何在销售点 (POS) 中创建和管理客户订单的信息。</span><span class="sxs-lookup"><span data-stu-id="90f1b-106">This topic provides information about how to create and manage customer orders in Point of Sale (POS).</span></span> <span data-ttu-id="90f1b-107">客户订单可用于捕获购物者希望以后提货，从其他位置提货或将商品发给客户的销售。</span><span class="sxs-lookup"><span data-stu-id="90f1b-107">Customer orders can be used to capture sales where shoppers want to pick up products on a later date, pick up products from a different location, or have items shipped to them.</span></span> 

<span data-ttu-id="90f1b-108">在全渠道商业环境中，许多零售商提供客户订单（即特殊订单）选项，以满足各种产品和履行要求。</span><span class="sxs-lookup"><span data-stu-id="90f1b-108">In an omni-channel commerce world, many retailers provide the option of customer orders, or special orders, to meet various product and fulfillment requirements.</span></span> <span data-ttu-id="90f1b-109">下面是一些典型方案：</span><span class="sxs-lookup"><span data-stu-id="90f1b-109">Here are some typical scenarios:</span></span>

- <span data-ttu-id="90f1b-110">客户希望将产品在特定日期发到特定地址。</span><span class="sxs-lookup"><span data-stu-id="90f1b-110">A customer wants products to be delivered to a specific address on a specific date.</span></span>
- <span data-ttu-id="90f1b-111">客户希望从非购买产品的商店或位置取货。</span><span class="sxs-lookup"><span data-stu-id="90f1b-111">A customer wants to pick up products from a store or location that differs from the store or location where the customer purchased those products.</span></span>
- <span data-ttu-id="90f1b-112">商店内的一位客户希望当天订购产品，以后再从同一家商店提货。</span><span class="sxs-lookup"><span data-stu-id="90f1b-112">A customer inside a store location wants to order products today and pick them up from the same store location on a later date.</span></span>

<span data-ttu-id="90f1b-113">零售商可以使用客户订单将库存不足可能导致的失单降到最低，因为可以在其他时间或位置发货或提货。</span><span class="sxs-lookup"><span data-stu-id="90f1b-113">Retailers can use customer orders to minimize lost sales that stock outages might otherwise cause, because the merchandise can be delivered or picked up at a different time or place.</span></span>

## <a name="set-up-customer-orders"></a><span data-ttu-id="90f1b-114">设置客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-114">Set up customer orders</span></span>
<span data-ttu-id="90f1b-115">尝试使用 POS 中的客户订单功能之前，请确保在 Commerce 总部中完成所有必需配置。</span><span class="sxs-lookup"><span data-stu-id="90f1b-115">Before you try to use customer order functionality in POS, make sure that you complete all the required configurations in Commerce headquarters.</span></span>

### <a name="configure-modes-of-delivery"></a><span data-ttu-id="90f1b-116">配置交货方式</span><span class="sxs-lookup"><span data-stu-id="90f1b-116">Configure modes of delivery</span></span>

<span data-ttu-id="90f1b-117">若要使用客户订单，必须配置商店渠道可以使用的交付方式。</span><span class="sxs-lookup"><span data-stu-id="90f1b-117">To use customer orders, you must configure modes of delivery that the store channel can use.</span></span> <span data-ttu-id="90f1b-118">必须定义至少一种在从商店向客户装运订单行时可使用的交货方式。</span><span class="sxs-lookup"><span data-stu-id="90f1b-118">You must define at least one mode of delivery that can be used when order lines are shipped to a customer from a store.</span></span> <span data-ttu-id="90f1b-119">还必须定义至少一种在从商店为订单行提货时可使用的交货提货方式。</span><span class="sxs-lookup"><span data-stu-id="90f1b-119">You must also define at least one pickup mode of delivery that can be used when order lines are picked up from the store.</span></span> <span data-ttu-id="90f1b-120">交货方式在 Commerce 总部中 **交货方式** 页面定义。</span><span class="sxs-lookup"><span data-stu-id="90f1b-120">Modes of delivery are defined on the **Modes of delivery** page in Commerce headquarters.</span></span> <span data-ttu-id="90f1b-121">有关如何为 Commerce 渠道设置交货方式的详细信息，请参阅[定义交货方式](https://docs.microsoft.com/dynamics365/commerce/configure-call-center-delivery#define-delivery-modes)。</span><span class="sxs-lookup"><span data-stu-id="90f1b-121">For more information about how to set up modes of delivery for Commerce channels, see [Define delivery modes](https://docs.microsoft.com/dynamics365/commerce/configure-call-center-delivery#define-delivery-modes).</span></span>

![“交货方式”页面](media/customer-order-modes-of-delivery.png)


### <a name="set-up-fulfillment-groups"></a><span data-ttu-id="90f1b-123">设置履行组</span><span class="sxs-lookup"><span data-stu-id="90f1b-123">Set up fulfillment groups</span></span>

<span data-ttu-id="90f1b-124">某些商店或仓库库位可能无法履行客户订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-124">Some stores or warehouse locations might not be able to fulfill customer orders.</span></span> <span data-ttu-id="90f1b-125">通过配置履行组，组织可以指定哪些商店和仓库库位对在 POS 中创建客户订单的用户显示为选项。</span><span class="sxs-lookup"><span data-stu-id="90f1b-125">By configuring fulfillment groups, an organization can specify which stores and warehouse locations are shown as options to users who create customer orders in POS.</span></span> <span data-ttu-id="90f1b-126">履行组在 **履行组** 页中定义。</span><span class="sxs-lookup"><span data-stu-id="90f1b-126">Fulfillment groups are configured on the **Fulfillment groups** page.</span></span> <span data-ttu-id="90f1b-127">组织可以根据需要创建任意数量的履行组。</span><span class="sxs-lookup"><span data-stu-id="90f1b-127">Organizations can create as many fulfillment groups as they require.</span></span> <span data-ttu-id="90f1b-128">定义履行组后，通过从 **商店** 页操作窗格上的 **设置** 选项卡中选择 **履行组分配** 将其链接到商店。</span><span class="sxs-lookup"><span data-stu-id="90f1b-128">After a fulfillment group is defined, link it to a store by selecting **Fulfillment group assignment** from the **Set up** tab on the Action Pane of the **Stores** page.</span></span>

<span data-ttu-id="90f1b-129">在 Commerce 版本 10.0.12 及更高版本中，组织可以定义是否可以将在履行组中定义的仓库或仓库与商店组合用于装运和/或提货。</span><span class="sxs-lookup"><span data-stu-id="90f1b-129">In Commerce version 10.0.12 and later, organizations can define whether the warehouse or warehouse and store combinations that are defined in fulfillment groups can be used for shipping, for pickup, or for both shipping and pickup.</span></span> <span data-ttu-id="90f1b-130">这为企业提供了更大的灵活性，让他们可以确定在为要装运的商品创建客户订单时可以选择哪些仓库，以及在为要提货的商品创建客户订单时可以选择哪些仓库。</span><span class="sxs-lookup"><span data-stu-id="90f1b-130">This allows for added flexibility for the business to determine which warehouses can be selected when creating a customer order for items to ship vs. which stores can be selected when creating a customer order for items to pick up.</span></span> <span data-ttu-id="90f1b-131">若要使用这些配置选项，请打开 **用于在履行组中将位置指定为已启用的装运或提货** 功能。</span><span class="sxs-lookup"><span data-stu-id="90f1b-131">To use these configuration options, turn on the **Ability to specify locations as "Shipping" or "Pickup" enabled within Fulfillment group** feature.</span></span> <span data-ttu-id="90f1b-132">如果链接到履行组的仓库不是商店，则只能将其配置为装运位置。</span><span class="sxs-lookup"><span data-stu-id="90f1b-132">If a warehouse that's linked to a fulfillment group isn't a store, it can be configured only as a shipping location.</span></span> <span data-ttu-id="90f1b-133">在 POS 中配置提货订单时不能使用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-133">It can't be used when orders for pickup are configured in POS.</span></span>

![“履行组”页面](media/customer-order-fulfillment-group.png)

### <a name="configure-channel-settings"></a><span data-ttu-id="90f1b-135">配置渠道设置</span><span class="sxs-lookup"><span data-stu-id="90f1b-135">Configure channel settings</span></span>

<span data-ttu-id="90f1b-136">在 POS 中处理客户订单时，必须考虑商店渠道的某些设置。</span><span class="sxs-lookup"><span data-stu-id="90f1b-136">When you work with customer orders in POS, you must consider some of the settings of the store channel.</span></span> <span data-ttu-id="90f1b-137">这些设置位于 Commerce 总部中的 **商店** 页面。</span><span class="sxs-lookup"><span data-stu-id="90f1b-137">These settings are found on the **Stores** page in Commerce headquarters.</span></span>

- <span data-ttu-id="90f1b-138">**仓库** – 此字段指示在减少与该商店相关的现金和结转以及客户提货订单的库存时将使用的仓库。</span><span class="sxs-lookup"><span data-stu-id="90f1b-138">**Warehouse** – This field indicates the warehouse that will be used when decrementing inventory for cash and carry and customer pickup orders tied to this store.</span></span> <span data-ttu-id="90f1b-139">作为最佳做法，我们鼓励为每个商店渠道使用唯一的仓库，以防止跨商店的业务逻辑冲突问题。</span><span class="sxs-lookup"><span data-stu-id="90f1b-139">As a best practice, we encourage the use of unique warehouses for each store channel, to prevent conflicting business logic issues across stores.</span></span>
- <span data-ttu-id="90f1b-140">**装运仓库** - 此字段指示在减少要从选定商店装运的客户订单的库存时将使用的仓库。</span><span class="sxs-lookup"><span data-stu-id="90f1b-140">**Shipping Warehouse** - This field indicates the warehouse that will be used when decrementing inventory for customer orders to be shipped from the selected store.</span></span> <span data-ttu-id="90f1b-141">如果已在环境中启用功能 **用于在履行组中将库位指定为已启用的“装运”或“提货”的功能**，POS 用户可以在 POS 中选择要从中装运的特定仓库，而不是选择要从中装运的商店。</span><span class="sxs-lookup"><span data-stu-id="90f1b-141">If the feature **Ability to specify locations as “Shipping” or “Pickup” enabled within Fulfillment group** has been enabled in your environment, POS users can choose a specific warehouse to ship from in POS, instead of choosing a store to ship from.</span></span> <span data-ttu-id="90f1b-142">因此，启用该功能后，将不再使用装运仓库，因为用户将在创建订单时选取要从中装运订单的特定仓库。</span><span class="sxs-lookup"><span data-stu-id="90f1b-142">Therefore, when that feature is enabled, the shipping warehouse is no longer utilized, since the user will pick the specific warehouse to ship the order from when the order is created.</span></span>
- <span data-ttu-id="90f1b-143">**履行组分配** – 选择此按钮（位于操作窗格中的 **设置** 选项卡上）将链接引用来在 POS 中创建客户订单时显示提货位置或装运来源的选项的履行组。</span><span class="sxs-lookup"><span data-stu-id="90f1b-143">**Fulfillment group assignment** – Select this button (on the **Set up** tab on the Action Pane) to link the fulfillment groups that are referenced to show options for pickup locations or shipment origins when customer orders are created in POS.</span></span>
- <span data-ttu-id="90f1b-144">**使用基于目的地的税金**  – 此选项指示是否使用装运地址来确定应用于要装运到客户地址的订单行的税组。</span><span class="sxs-lookup"><span data-stu-id="90f1b-144">**Use destination-based tax** – This option indicates whether the shipping address is used to determine the tax group that is applied to order lines that are shipped to the customer's address.</span></span>
- <span data-ttu-id="90f1b-145">**使用基于客户的税金**  – 此选项指示是否使用为客户的交货地址定义的税组对在 POS 中创建的要运送到客户家中的客户订单征税。</span><span class="sxs-lookup"><span data-stu-id="90f1b-145">**Use customer-based tax** – This option indicates whether the tax group that is defined for the customer's delivery address is used to tax customer orders that are created in POS for shipment to the customer's home.</span></span>

![“商店”页面中的商店渠道设置](media/customer-order-all-stores.png)

### <a name="set-up-customer-order-parameters"></a><span data-ttu-id="90f1b-147">设置客户订单参数</span><span class="sxs-lookup"><span data-stu-id="90f1b-147">Set up customer order parameters</span></span>

<span data-ttu-id="90f1b-148">尝试在 POS 中创建客户订单之前，必须在 Commerce 总部中配置适当的参数。</span><span class="sxs-lookup"><span data-stu-id="90f1b-148">Before you try to create customer orders in POS, you must configure the appropriate parameters in Commerce headquarters.</span></span> <span data-ttu-id="90f1b-149">这些参数位于 **Commerce 参数** 页面的 **客户订单** 选项卡中。</span><span class="sxs-lookup"><span data-stu-id="90f1b-149">These parameters can be found on the **Customer orders** tab of the **Commerce parameters** page.</span></span>

- <span data-ttu-id="90f1b-150">**默认订单类型**   –可以指定默认分配给在 POS 中创建的客户订单的订单类型。</span><span class="sxs-lookup"><span data-stu-id="90f1b-150">**Default order type** – You can specify the order type that is assigned by default to customer orders that are created in POS.</span></span> <span data-ttu-id="90f1b-151">这些客户订单可以是销售订单或报价订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-151">These customer orders can be either sales orders or quotation orders.</span></span> <span data-ttu-id="90f1b-152">无论哪种默认订单类型，用户都可以从 POS 创建销售订单和客户订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-152">Regardless of the default order type, users can still create both sales orders and customer orders from POS.</span></span>
- <span data-ttu-id="90f1b-153">**默认保证金百分比** – 指定确认订单前客户必须以存款的形式支付的订单总金额百分比。</span><span class="sxs-lookup"><span data-stu-id="90f1b-153">**Default deposit percentage** – Specify the percentage of the order total amount that the customer must pay as a deposit before an order can be confirmed.</span></span> <span data-ttu-id="90f1b-154">如果为交易记录屏幕布局在 POS 中配置了 **保证金覆盖** 操作，售货员可能可以根据自己的权限使用该操作覆盖此金额。</span><span class="sxs-lookup"><span data-stu-id="90f1b-154">Depending on their privileges, store associates might be able to override the amount by using the **Deposit override** operation in POS, if that operation is configured for the transaction screen layout.</span></span>
- <span data-ttu-id="90f1b-155">**交货的提货方式** – 指定应该在 POS 中为交货配置的销售订单行应用的交货方式。</span><span class="sxs-lookup"><span data-stu-id="90f1b-155">**Pickup mode of delivery** – Specify the mode of delivery that should be applied to sales order lines that are configured for pickup in POS.</span></span>
- <span data-ttu-id="90f1b-156">**交货的自提方式** – 指定应该应用于在创建混合购物车时视为自提订单行的销售订单行的交货方式，其中部分行将提货或装运，其他行则由立即自提。</span><span class="sxs-lookup"><span data-stu-id="90f1b-156">**Carryout mode of delivery** – Specify the mode of delivery that should be applied to sales order lines that are considered carryout order lines when a mixed cart is created, where some lines will be picked up or shipped, and other lines will be carried out by the customer immediately.</span></span>
- <span data-ttu-id="90f1b-157">**取消费百分比** – 如果取消客户订单时应收取费用，请指定这笔费用的金额。</span><span class="sxs-lookup"><span data-stu-id="90f1b-157">**Cancellation charge percentage** – If a charge should be applied when a customer order is canceled, specify the amount of that charge.</span></span>
- <span data-ttu-id="90f1b-158">**取消费代码**  – 指定在通过 POS 向取消的客户订单收取取消费时应使用的应收帐款费用代码。</span><span class="sxs-lookup"><span data-stu-id="90f1b-158">**Cancellation charge code** – Specify the Accounts receivable charge code that should be used when a cancellation charge is applied to canceled customer orders through POS.</span></span> <span data-ttu-id="90f1b-159">费用代码定义取消费的财务过帐逻辑。</span><span class="sxs-lookup"><span data-stu-id="90f1b-159">The charge code defines the financial posting logic for the cancellation charge.</span></span>
- <span data-ttu-id="90f1b-160">**装运费用代码**  – 如果 **使用高级自动收费** 选项设置为 **是** ，此参数设置无效。</span><span class="sxs-lookup"><span data-stu-id="90f1b-160">**Shipping charge code** – If the **Use advanced auto charges** option is set to **Yes**, this parameter setting has no effect.</span></span> <span data-ttu-id="90f1b-161">如果该选项设置为 **否** ，系统会提示用户在 POS 中创建客户订单时手动输入装运费用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-161">If that option is set to **No**, users will be prompted to manually enter a shipping charge when they create customer orders in POS.</span></span> <span data-ttu-id="90f1b-162">此参数用于映射在客户输入装运费用时应用于订单的应收帐款费用代码。</span><span class="sxs-lookup"><span data-stu-id="90f1b-162">Use this parameter to map an Accounts receivable charge code that will be applied to orders when users enter a shipping charge.</span></span> <span data-ttu-id="90f1b-163">费用代码定义装运费用的财务过帐逻辑。</span><span class="sxs-lookup"><span data-stu-id="90f1b-163">The charge code defines the financial posting logic for the shipping charge.</span></span>
- <span data-ttu-id="90f1b-164">**使用高级自动收费** – 将此选项设置为 **是** 将在 POS 中创建客户订单时使用系统计算的自动收费。</span><span class="sxs-lookup"><span data-stu-id="90f1b-164">**Use advanced auto charges** – Set this option to **Yes** to use system-calculated auto charges when customer orders are created in POS.</span></span> <span data-ttu-id="90f1b-165">这些自动收费可用于计算装运费用或其他订单或物料特定的费用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-165">These auto charges can be used to calculate shipping fees or other order or item-specific charges.</span></span> <span data-ttu-id="90f1b-166">有关如何设置和使用高级自动收费功能的详细信息，请参阅[全渠道高级自动收费](https://docs.microsoft.com/dynamics365/commerce/omni-auto-charges)。</span><span class="sxs-lookup"><span data-stu-id="90f1b-166">For more information about how to set up and use advanced auto charges, see [Omni-channel advanced auto charges](https://docs.microsoft.com/dynamics365/commerce/omni-auto-charges).</span></span>

![“Commerce 参数”页面中的“客户订单”选项卡](media/customer-order-parameters.png)

### <a name="update-transaction-screen-layouts-in-pos"></a><span data-ttu-id="90f1b-168">更新 POS 中的交易记录屏幕布局</span><span class="sxs-lookup"><span data-stu-id="90f1b-168">Update transaction screen layouts in POS</span></span>

<span data-ttu-id="90f1b-169">确保 POS 的[屏幕布局](https://docs.microsoft.com/dynamics365/commerce/pos-screen-layouts)配置为支持创建和管理客户订单，并且配置所有必需的 POS 操作。</span><span class="sxs-lookup"><span data-stu-id="90f1b-169">Make sure that the POS [screen layout](https://docs.microsoft.com/dynamics365/commerce/pos-screen-layouts) is configured to support the creation and management of customer orders, and that all required POS operations are configured.</span></span> <span data-ttu-id="90f1b-170">建议使用下面的一些 POS 操作来正确支持创建和管理客户订单：</span><span class="sxs-lookup"><span data-stu-id="90f1b-170">Here are some of the POS operations that are recommended to correctly support customer order creation and management:</span></span>
- <span data-ttu-id="90f1b-171">**装运所有产品** – 此操作用于指定将把交易记录购物车中的所有行装运到目的地。</span><span class="sxs-lookup"><span data-stu-id="90f1b-171">**Ship all products** – This operation is used to specify that all lines in the transaction cart will be shipped to a destination.</span></span>
- <span data-ttu-id="90f1b-172">**装运所选产品** – 此操作用于指定将把交易记录购物车中的所选行装运到目的地。</span><span class="sxs-lookup"><span data-stu-id="90f1b-172">**Ship selected products** – This operation is used to specify that selected lines in the transaction cart will be shipped to a destination.</span></span>
- <span data-ttu-id="90f1b-173">**提取所有产品** – 此操作用于指定交易记录购物车中将从所选商店位置提货的所有行。</span><span class="sxs-lookup"><span data-stu-id="90f1b-173">**Pick up all products** – This operation is used to specify that all lines in the transaction cart will be picked up from a selected store location.</span></span>
- <span data-ttu-id="90f1b-174">**提取所选产品** – 此操作用于指定交易记录购物车中将从所选商店位置提货的所选行。</span><span class="sxs-lookup"><span data-stu-id="90f1b-174">**Pick up selected products** – This operation is used to specify that selected lines in the transaction cart will be picked up from a selected store location.</span></span>
- <span data-ttu-id="90f1b-175">**自提所有产品** – 此操作用于指定交易记录购物车中将自提的所有行。如果在 POS 中使用此操作，将把客户订单转换为付款自提交易记录。</span><span class="sxs-lookup"><span data-stu-id="90f1b-175">**Carry out all products** – This operation is used to specify that all lines in the transaction cart will be carried out. If this operation is used in POS, the customer order will be converted to a cash-and-carry transaction.</span></span>
- <span data-ttu-id="90f1b-176">**自提所选产品** – 此操作用于指定交易记录购物车中客户将在购买时自提的所选行。</span><span class="sxs-lookup"><span data-stu-id="90f1b-176">**Carryout out selected products** – This operation is used to specify that selected lines in the transaction cart are being carried out by the customer at the time of purchase.</span></span> <span data-ttu-id="90f1b-177">此操作只有在[混合订单](https://docs.microsoft.com/dynamics365/commerce/hybrid-customer-orders)方案中才有用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-177">This operation is useful only in a [hybrid order](https://docs.microsoft.com/dynamics365/commerce/hybrid-customer-orders) scenario.</span></span>
- <span data-ttu-id="90f1b-178">**撤回订单** – 此操作用于搜索和检索客户订单，以便 POS 用户根据需要编辑、取消或对其执行与履行有关的操作。</span><span class="sxs-lookup"><span data-stu-id="90f1b-178">**Recall order** – This operation is used to search and retrieve customer orders so that POS users can edit, cancel, or perform fulfillment-related operations on them as required.</span></span>
- <span data-ttu-id="90f1b-179">**更改交货方式** – 此操作可用于快速更改已经配置为要装运的行的交货方式，无需用户再次完成“装运所有产品”或“装运所选产品”流。</span><span class="sxs-lookup"><span data-stu-id="90f1b-179">**Change mode of delivery** – This operation can be used to quickly change the mode of delivery for lines that are already configured for shipment, without requiring that users go through the "ship all products" or "ship selected products" flow again.</span></span>
- <span data-ttu-id="90f1b-180">**保证金覆盖** – 此操作可用于更改客户将为所选客户订单支付的保证金金额。</span><span class="sxs-lookup"><span data-stu-id="90f1b-180">**Deposit override** – This operation can be used to change the deposit amount that the customer will pay for the selected customer order.</span></span>

![POS 交易记录屏幕中的操作](media/customer-order-screen-layout.png)

## <a name="work-with-customer-orders-in-pos"></a><span data-ttu-id="90f1b-182">在 POS 中处理客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-182">Work with customer orders in POS</span></span>

> [!NOTE]
> <span data-ttu-id="90f1b-183">当前不支持在商业渠道（电子商务、POS、呼叫中心）中使用收入确认功能。</span><span class="sxs-lookup"><span data-stu-id="90f1b-183">Revenue recognition functionality isn't currently supported for use in Commerce channels (e-commerce, POS, call center).</span></span> <span data-ttu-id="90f1b-184">配置了收入确认的商品不应添加到在商业渠道中创建的订单中。</span><span class="sxs-lookup"><span data-stu-id="90f1b-184">Items configured with revenue recognition shouldn't be added to orders created in Commerce channels.</span></span> 

### <a name="create-a-customer-order-for-products-that-will-be-shipped-to-the-customer"></a><span data-ttu-id="90f1b-185">为将装运到客户的产品创建客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-185">Create a customer order for products that will be shipped to the customer</span></span>

1. <span data-ttu-id="90f1b-186">在 POS 交易记录屏幕中，向交易记录添加客户。</span><span class="sxs-lookup"><span data-stu-id="90f1b-186">On the POS transaction screen, add a customer to the transaction.</span></span>
2. <span data-ttu-id="90f1b-187">向购物车添加产品</span><span class="sxs-lookup"><span data-stu-id="90f1b-187">Add products to the cart.</span></span>
3. <span data-ttu-id="90f1b-188">选择 **装运所选** 或 **全部装运** 将产品装运到客户帐户中的地址。</span><span class="sxs-lookup"><span data-stu-id="90f1b-188">Select **Ship selected** or **Ship all** to ship the products to an address on the customer account.</span></span>
4. <span data-ttu-id="90f1b-189">选择用于创建客户订单的选项。</span><span class="sxs-lookup"><span data-stu-id="90f1b-189">Select the option to create a customer order.</span></span>
5. <span data-ttu-id="90f1b-190">确认或更改“发货”位置，确认或更改送货地址，然后选择发货方式。</span><span class="sxs-lookup"><span data-stu-id="90f1b-190">Confirm or change the "ship from" location, confirm or change the shipping address, and select a shipping method.</span></span>
6. <span data-ttu-id="90f1b-191">输入客户所需的订单装运日期。</span><span class="sxs-lookup"><span data-stu-id="90f1b-191">Enter the customer's desired order shipment date.</span></span>
7. <span data-ttu-id="90f1b-192">使用付款功能支付到期的所有计算金额，或使用 **保证金覆盖** 操作更改到期金额，然后应用付款。</span><span class="sxs-lookup"><span data-stu-id="90f1b-192">Use the payment functions to pay for any calculated amounts that are due, or use the **Deposit override** operation to change the amounts that are due, and then apply payment.</span></span>
8. <span data-ttu-id="90f1b-193">如果未支付全部订单总金额，请输入将在为订单开票时订单中的到期余额捕获的信用卡。</span><span class="sxs-lookup"><span data-stu-id="90f1b-193">If the full order total wasn't paid, enter a credit card that will be captured for the balance that is due on the order when it's invoiced.</span></span>

### <a name="create-a-customer-order-for-products-that-the-customer-will-pick-up"></a><span data-ttu-id="90f1b-194">为客户将提货的产品创建客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-194">Create a customer order for products that the customer will pick up</span></span>

1. <span data-ttu-id="90f1b-195">在 POS 交易记录屏幕中，向交易记录添加客户。</span><span class="sxs-lookup"><span data-stu-id="90f1b-195">On the POS transaction screen, add a customer to the transaction.</span></span>
2. <span data-ttu-id="90f1b-196">向购物车添加产品</span><span class="sxs-lookup"><span data-stu-id="90f1b-196">Add products to the cart.</span></span>
3. <span data-ttu-id="90f1b-197">选择 **提取所选产品** 或 **全部提货** 启动订单提货配置。</span><span class="sxs-lookup"><span data-stu-id="90f1b-197">Select **Pick up selected** or **Pick up all** to initiate the order pick up configuration.</span></span>
4. <span data-ttu-id="90f1b-198">选择客户提取所选产品的商店位置。</span><span class="sxs-lookup"><span data-stu-id="90f1b-198">Select the store location where the customer will pick up the selected products.</span></span>
5. <span data-ttu-id="90f1b-199">选择将提走商品的日期。</span><span class="sxs-lookup"><span data-stu-id="90f1b-199">Select a date when the item will be picked up.</span></span>
6. <span data-ttu-id="90f1b-200">使用付款功能支付到期的所有计算金额，或使用 **保证金覆盖** 操作更改到期金额，然后应用付款。</span><span class="sxs-lookup"><span data-stu-id="90f1b-200">Use the payment functions to pay for any calculated amounts that are due, or use the **Deposit override** operation to change the amounts that are due, and then apply payment.</span></span>
7. <span data-ttu-id="90f1b-201">如果未支付全部订单总金额，请选择客户将在以后（提货时）提供付款，还是立即标记化信用卡，然后在提货时使用和捕获。</span><span class="sxs-lookup"><span data-stu-id="90f1b-201">If the full order total wasn't paid, select whether the customer will provide payment later (at pick up), or whether a credit card will be tokenized now, and then used and captured at the time of pickup.</span></span>

### <a name="edit-an-existing-customer-order"></a><span data-ttu-id="90f1b-202">编辑现有客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-202">Edit an existing customer order</span></span>

<span data-ttu-id="90f1b-203">可以根据需要通过 POS 撤回和编辑在线或在商店渠道中创建的零售订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-203">Retail orders that are created in either the online or store channel can be recalled and edited through POS as required.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="90f1b-204">并非所有零售订单都可以通过 POS 应用程序进行编辑。</span><span class="sxs-lookup"><span data-stu-id="90f1b-204">Not all retail orders can be edited through the POS application.</span></span> <span data-ttu-id="90f1b-205">如果为呼叫中心渠道开启了[启用订单完成](https://docs.microsoft.com/dynamics365/commerce/set-up-order-processing-options#enable-order-completion)设置，则不能通过 POS 编辑该呼叫中心渠道中创建的订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-205">Orders that are created in a call center channel can't be edited through POS if the [Enable order completion](https://docs.microsoft.com/dynamics365/commerce/set-up-order-processing-options#enable-order-completion) setting is turned on for the call center channel.</span></span> <span data-ttu-id="90f1b-206">为了确保正确处理付款，必须通过 Commerce 总部中的呼叫中心应用程序编辑源自呼叫中心渠道并使用“启用订单完成功能”的订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-206">To ensure correct payment processing, orders that originated in a call center channel and that use Enable order completion functionality must be edited through the call center application in Commerce headquarters.</span></span>

<span data-ttu-id="90f1b-207">在版本 10.0.17 及更高版本中，用户可以通过 POS 应用程序编辑合格的订单，即使订单已部分履行。</span><span class="sxs-lookup"><span data-stu-id="90f1b-207">In version 10.0.17 and later, users can edit eligible orders through the POS application, even if the order is partially fulfilled.</span></span> <span data-ttu-id="90f1b-208">但是，仍然不能通过 POS 编辑已全部开票的订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-208">However, orders that are fully invoiced still can't be edited through POS.</span></span> <span data-ttu-id="90f1b-209">若要启用此功能，请在 **功能管理** 工作区中开启 **在销售点中编辑部分履行的订单** 功能。</span><span class="sxs-lookup"><span data-stu-id="90f1b-209">To enable this capability, turn on the **Edit partially fulfilled orders in Point of Sale** feature in the **Feature management** workspace.</span></span> <span data-ttu-id="90f1b-210">如果此功能未启用，或者您使用的是版本 10.0.16 或更早版本，只有订单完全打开时，用户才可以在 POS 中编辑客户订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-210">If this feature is not enabled, or if you're using version 10.0.16 or earlier, users will only be able to edit customer orders in POS if the order is fully open.</span></span> <span data-ttu-id="90f1b-211">此外，如果此功能启用，您可以限制哪些商店可以编辑部分履行的订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-211">Further, if the feature is enabled, you can limit which stores can edit partially fulfilled orders.</span></span> <span data-ttu-id="90f1b-212">针对特定商店禁用此功能的选项可以通过 **常规** 快速选项卡下的 **功能配置文件** 配置。</span><span class="sxs-lookup"><span data-stu-id="90f1b-212">The option to disable this capability for specific stores can be configured through the **Functionality profile** under the **General** FastTab.</span></span>


1. <span data-ttu-id="90f1b-213">选择 **撤回订单**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-213">Select **Recall order**.</span></span>
2. <span data-ttu-id="90f1b-214">使用 **搜索** 输入筛选器以查找订单，然后选择 **应用**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-214">Use **Search** to enter filters to find the order, and then select **Apply**.</span></span>
3. <span data-ttu-id="90f1b-215">在结果列表中选择订单，然后选择 **编辑**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-215">Select the order in the list of results, and then select **Edit**.</span></span> <span data-ttu-id="90f1b-216">如果 **编辑** 按钮不可用，则订单处于不可编辑状态。</span><span class="sxs-lookup"><span data-stu-id="90f1b-216">If the **Edit** button is unavailable, the order is in a state where it can't be edited.</span></span>
4. <span data-ttu-id="90f1b-217">在交易记录购物车中对客户订单进行必要的更改。</span><span class="sxs-lookup"><span data-stu-id="90f1b-217">From the transaction cart, make any necessary changes to the customer order.</span></span> <span data-ttu-id="90f1b-218">编辑过程中可能会禁止某些更改。</span><span class="sxs-lookup"><span data-stu-id="90f1b-218">Some changes might be prohibited during editing.</span></span>
5. <span data-ttu-id="90f1b-219">通过选择付款操作完成编辑过程。</span><span class="sxs-lookup"><span data-stu-id="90f1b-219">Complete the editing process by selecting a payment operation.</span></span>
6. <span data-ttu-id="90f1b-220">若要退出编辑过程但不保存任何更改，可以使用 **取消交易** 操作。</span><span class="sxs-lookup"><span data-stu-id="90f1b-220">To exit the editing process without saving any changes, you can use the **Void transaction** operation.</span></span>



### <a name="cancel-a-customer-order"></a><span data-ttu-id="90f1b-221">取消客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-221">Cancel a customer order</span></span>

1. <span data-ttu-id="90f1b-222">选择 **撤回订单**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-222">Select **Recall order**.</span></span>
2. <span data-ttu-id="90f1b-223">使用 **搜索** 输入筛选器以查找订单，然后选择 **应用**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-223">Use **Search** to enter filters to find the order, and then select **Apply**.</span></span>
3. <span data-ttu-id="90f1b-224">在结果列表中选择订单，然后选择 **取消**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-224">Select the order in the list of results, and then select **Cancel**.</span></span> <span data-ttu-id="90f1b-225">如果 **取消** 按钮不可用，则订单处于不可取消状态。</span><span class="sxs-lookup"><span data-stu-id="90f1b-225">If the **Cancel** button is unavailable, the order is in a state where it can no longer be canceled.</span></span>
4. <span data-ttu-id="90f1b-226">如果配置了取消费用，请确认这些费用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-226">If cancellation charges are configured, confirm them.</span></span> <span data-ttu-id="90f1b-227">确认取消费用之前，可以根据需要调整取消费用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-227">You can adjust the cancellation charges before you confirm them, as required.</span></span> 
5. <span data-ttu-id="90f1b-228">在交易记录购物车中，通过选择付款操作完成取消过程。</span><span class="sxs-lookup"><span data-stu-id="90f1b-228">From the transaction cart, complete the cancellation process by selecting a payment operation.</span></span> <span data-ttu-id="90f1b-229">如果支付的保证金超过了取消费用，退款付款可能到期。</span><span class="sxs-lookup"><span data-stu-id="90f1b-229">If deposits that were paid exceed the cancellation charge, refund payments might be due.</span></span>
6. <span data-ttu-id="90f1b-230">若要退出取消过程但不保存任何更改，可以使用 **取消交易** 操作。</span><span class="sxs-lookup"><span data-stu-id="90f1b-230">To exit the cancellation process without saving any changes, you can use the **Void transaction** operation.</span></span>

## <a name="finalizing-the-customer-order-shipment-or-pickup-from-pos"></a><span data-ttu-id="90f1b-231">从 POS 完成客户订单装运或提货</span><span class="sxs-lookup"><span data-stu-id="90f1b-231">Finalizing the customer order shipment or pickup from POS</span></span>

<span data-ttu-id="90f1b-232">创建订单后，物料将根据订单的配置由客户从商店提货或发货。</span><span class="sxs-lookup"><span data-stu-id="90f1b-232">After an order is created, the items will be picked up by the customer from a store location or shipped, depending on the configuration of the order.</span></span> <span data-ttu-id="90f1b-233">有关此过程的详细信息，请参阅[商店订单履行](https://docs.microsoft.com/dynamics365/commerce/order-fulfillment-overview)文档。</span><span class="sxs-lookup"><span data-stu-id="90f1b-233">For more information about this process, see the [store order fulfillment](https://docs.microsoft.com/dynamics365/commerce/order-fulfillment-overview) documentation.</span></span>

## <a name="asynchronous-transaction-flow-for-customer-orders"></a><span data-ttu-id="90f1b-234">客户订单的异步交易记录流</span><span class="sxs-lookup"><span data-stu-id="90f1b-234">Asynchronous transaction flow for customer orders</span></span>

<span data-ttu-id="90f1b-235">可以在同步模式或异步模式下，从 POS 创建客户订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-235">Customer orders can be created in POS in either synchronous mode or asynchronous mode.</span></span> <span data-ttu-id="90f1b-236">如果在 POS 中创建客户订单时发现了性能问题或用户延迟，请考虑开启异步订单创建功能。</span><span class="sxs-lookup"><span data-stu-id="90f1b-236">If you notice performance issues or user delays when you create customer orders in POS, consider turning on asynchronous order creation.</span></span>

### <a name="enable-customer-orders-to-be-created-in-asynchronous-mode"></a><span data-ttu-id="90f1b-237">将客户订单设置为可在异步模式下创建</span><span class="sxs-lookup"><span data-stu-id="90f1b-237">Enable customer orders to be created in asynchronous mode</span></span>

1. <span data-ttu-id="90f1b-238">在 Commerce 总部的 **功能配置文件** 页面中，选择与要配置的商店对应的功能配置文件。</span><span class="sxs-lookup"><span data-stu-id="90f1b-238">In Commerce headquarters, on the **Functionality profiles** page, select the functionality profile that corresponds to the store that you want to configure.</span></span>
2. <span data-ttu-id="90f1b-239">在 **常规** 快速选项卡上，将 **在异步模式下创建客户订单** 选项设置为 **是**。</span><span class="sxs-lookup"><span data-stu-id="90f1b-239">On the **General** FastTab, set the **Create customer order in async mode** option to **Yes**.</span></span>

<span data-ttu-id="90f1b-240">当 **在异步模式下创建客户订单** 选项设置为 **是**，将始终在异步模式下创建客户订单，即使 Retail Transaction Service (RTS) 可用。</span><span class="sxs-lookup"><span data-stu-id="90f1b-240">When the **Create customer order in async mode** option is set to **Yes**, customer orders are always created in asynchronous mode, even if Retail Transaction Service (RTS) is available.</span></span> <span data-ttu-id="90f1b-241">如果将此选项设置为 **否**，将始终通过使用 RTS 在同步模式下创建客户订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-241">If you set this option to **No**, customer orders are always created in synchronous mode by using RTS.</span></span> <span data-ttu-id="90f1b-242">如果客户订单是在异步模式下创建的，则这些订单是在 Commerce 总部中从 Commerce 提取 (P) 作业作为零食交易记录提取和创建的。</span><span class="sxs-lookup"><span data-stu-id="90f1b-242">When customer orders are created in asynchronous mode, they're pulled and created as retail transactions in Commerce headquarters from the Commerce Pull (P) jobs.</span></span> <span data-ttu-id="90f1b-243">手动或通过批处理流程运行 **同步订单** 时，将创建零售交易记录的相应销售订单。</span><span class="sxs-lookup"><span data-stu-id="90f1b-243">The corresponding sales orders for the retail transactions are created when **Synchronize orders** is run either manually or through a batch process.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="90f1b-244">其他资源</span><span class="sxs-lookup"><span data-stu-id="90f1b-244">Additional resources</span></span>

[<span data-ttu-id="90f1b-245">混合客户订单</span><span class="sxs-lookup"><span data-stu-id="90f1b-245">Hybrid customer orders</span></span>](hybrid-customer-orders.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
