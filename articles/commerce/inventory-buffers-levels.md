---
title: 配置库存缓冲区和库存级别
description: 本主题说明如何在 Microsoft Dynamics 365 Commerce 上配置确定库存可用性消息的库存缓冲区和库存级别。
author: boycezhu
ms.date: 06/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: global
ms.author: boycez
ms.search.validFrom: ''
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: ca6cea9e0e7f1fd3eba3082c5a33e8b2d6dec878
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/31/2021
ms.locfileid: "5798905"
---
# <a name="configure-inventory-buffers-and-inventory-levels"></a>配置库存缓冲区和库存级别

[!include [banner](includes/banner.md)]

本主题说明如何在 Microsoft Dynamics 365 Commerce 上配置确定有关库存可用性的消息的库存缓冲区和库存级别。

Dynamics 365 Commerce 总部保留库存数据和各个渠道，如销售点 (POS) 应用程序、电子商务店面，以及其他以异步方式拉取和推送库存的自定义集成应用程序。 因此，通过 Commerce 总部的现有库存量页面、POS 用户界面 (UI) 以及通过电子商务库存可用性 API 获取的可用库存值，并不总是 100% 实时准确的。

许多零售商不会在电子商务店面中显示实际的库存值，而更愿意仅显示有关库存可用性状态的消息（例如，“有货”或“库存不足”），来告知客户某商品是可以购买还是有可能脱销。 对于这种方法，确定库存可用性消息传递的库存缓冲区和库存级别必须可用并进行配置。

## <a name="prerequisite-turn-on-the-inventory-buffers-and-inventory-levels-feature"></a>先决条件：打开库存缓冲区和库存级别功能

库存缓冲区和库存级别的功能通过 Commerce 总部中的“功能管理”加以控制。 若要打开此功能，请执行以下步骤。

1. 转到 **系统管理** \> **工作区** \> **功能管理**。
1. 搜索 **启用库存缓冲区和库存级别** 功能，选择此行，然后选择 **立即启用**。

启用此功能后，您可以在 **Retail 和 Commerce \> 库存管理** 处找到库存级别。

## <a name="create-and-configure-an-inventory-level-profile"></a>创建和配置库存级别配置文件

*库存级别配置文件* 确定是将给定的产品数量状态视为现货、缺货还是其他某个自定义状态。 您可以为每个法人创建和配置多个库存级别配置文件。 每个配置文件由一组库存级别组成，每个级别由 *范围*、*代码* 和 *标签* 定义。

- **范围** – 每个范围由 *开始数量* 和 *结束数量* 定义。 如果数量值大于范围的开始数量且不大于结束数量，该数量值位于范围内。
- **代码** – 代码是代表级别的内部缩写。 直接与库存 API 集成的客户可以使用代码为给定的库存级别构建其他逻辑。 例如，当产品的库存级别代码为 **OOS**（“库存不足”）时，客户可以关闭产品的购买功能。
- **标签** – 标签是一个有意义的面向客户的消息，向电子商务站点的客户传达库存级别。

### <a name="create-an-inventory-level-profile"></a>创建库存级别配置文件

要创建库存级别配置文件，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce** \> **库存管理** \> **库存级别**。
1. 在操作窗格上，选择 **新建**，然后在 **配置文件 ID** 和 **描述** 字段中输入值。
1. 在 **范围** 快速选项卡上，选择 **添加** 添加新级别，然后在该级别的 **开始数量**、**结束数量**、**代码** 和 **标签** 列中输入值。 重复此步骤添加更多级别。 根据需要，您可以编辑数据网格中的值，也可以选择 **删除** 删除级别。
1. 在操作窗格上，选择 **保存**。

创建新的配置文件后，将自动初始化两个库存级别：

- **OOS** –“库存不足”级别，范围的下限为负无穷大。 此级别的开始数量和代码无法编辑。
- **AVAIL** –“有货”级别，范围的上限为无穷大。 此级别的结束数量和代码无法编辑。

> [!NOTE]
> 此配置文件定义中的范围之间不能有间隔或重叠。

您可以使用操作窗格上的 **翻译** 按钮配置标签消息的本地化字符串。 然后，必须运行 **1110**（**全局配置**）配送计划作业来将本地化的字符串同步到渠道。

### <a name="configure-an-inventory-level-profile"></a>配置库存级别配置文件

您可以在产品类别级别或单个产品级别配置库存级别配置文件。 为产品配置库存级别配置文件时，库存级别基于链接的配置文件中定义的范围确定。 否则，“有货”或“库存不足”库存级别将基于产品是否有正现有数量确定。

要为类别配置库存级别配置文件，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce** \> **产品和类别** \> **商业产品层次结构**。
1. 选择要为其配置库存级别配置文件的类别。
1. 在 **销售产品属性** 快速选项卡上，选择一个法人。
1. 在 **商务库存** 部分，在 **库存级别配置文件** 字段中，选择预定义的库存级别配置文件之一。

您可以使用操作窗格上的 **更新产品** 按钮将类别级别的配置文件的值传播到类别的基础产品。 有关详细信息，请参阅[管理产品类别和产品](category-management-product-creation.md)。

要为已发布产品配置库存级别配置文件，请按照下列步骤操作。

1. 转至 **Retail 和 Commerce** \> **产品和类别** \> **按类别发布的产品**。
1. 选择一个产品，然后打开其产品详细信息页。
1. 在 **销售** 快速选项卡上，在 **商务库存** 部分，在 **库存级别配置文件** 字段中，选择预定义的库存级别配置文件之一。

创建新产品后，**库存级别配置文件** 字段与许多其他产品级属性一样，将被设置为为与产品关联的类别配置的值。

> [!NOTE]
> 库存级别配置文件是特定于法人的属性。 对于同一类别或产品，库存级别配置文件的值在各个法人之间可能会不同。

要将库存级别配置文件的配置同步到渠道，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce** \> **Retail 和 Commerce IT** \> **配送计划**。
1. 运行 **1040**（**产品**）分配计划。

## <a name="configure-an-inventory-buffer"></a>配置库存缓冲区

*库存缓冲区* 是用户定义的值，它从原始数量中减去商品的额外数量来计算估计数量。 此估计数量为零售商提供一个安全的缓冲空间，让他们不会因销售比实际的现有库存量更多的产品而超额销售产品。 您可以在产品类别级别或单个产品级别配置库存缓冲区。 如果未指定库存缓冲区，将使用默认值 **0**（零）。

要为类别配置库存缓冲区，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce** \> **产品和类别** \> **商业产品层次结构**。
1. 选择要为其配置库存缓冲区的类别。
1. 在 **销售产品属性** 快速选项卡上，选择一个法人。
1. 在 **商务库存** 部分，在 **库存缓冲区** 字段中，输入一个正值。

您可以使用操作窗格上的 **更新产品** 按钮将类别级别缓冲区的值传播到类别的基础产品。 有关详细信息，请参阅[管理产品类别和产品](category-management-product-creation.md)。

要为已发布产品配置库存缓冲区，请按照下列步骤操作。

1. 转至 **Retail 和 Commerce** \> **产品和类别** \> **按类别发布的产品**。
1. 选择一个产品，然后打开其产品详细信息页。
1. 在 **销售** 快速选项卡上，在 **商务库存** 部分，在 **库存缓冲区** 字段中，输入一个正值。

创建新产品后，**库存缓冲区** 字段将被设置为为与产品关联的类别配置的值。

> [!NOTE]
> 如果为产品同时配置了库存缓冲区和库存级别配置文件，该产品的估计数量（即原始数量减去缓冲值）将用于范围计算来确定库存级别。

要将库存缓冲区的配置同步到渠道，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce** \> **Retail 和 Commerce IT** \> **配送计划**。
1. 运行 **1040**（**产品**）分配计划。

## <a name="use-inventory-buffers-and-inventory-levels-in-e-commerce-scenario"></a>在电子商务方案中使用库存缓冲区和库存级别

Commerce 站点构建器使用 Commerce 总部中的库存缓冲区和库存级别功能来确定电子商务站点的库存可用性消息。 有关详细信息，请参阅[应用库存设置](inventory-settings.md)。

或者，如果您与第三方电子商务解决方案集成，则可以使用 **GetEstimatedAvailability** 和 **GetEstimatedProductWarehouseAvailability** API 来在您的电子商务方案中显示产品的库存可用性。 有关这些 API 的详细信息，请参阅[计算零售渠道的库存可用性](calculated-inventory-retail-channels.md)。

库存缓冲区和库存级别的引入，使这些 API 可以返回基于总可用值和可用实际值确定的库存级别代码和标签消息。 API 可以进一步配置为确定库存量是否与消息一起返回，以及可用数量是否减掉库存缓冲值。

要配置产品可用性 API 的响应，请按照下列步骤操作。

1. 转到 **Retail 和 Commerce** \> **总部设置** \> **参数** \> **Commerce 参数**。
1. 在 **商店库存** 部分，在 **库存** 选项卡上，在 **电子商务产品可用性 API** 字段中，选择一个值。
1. 要将设置应用于渠道，请运行 **1110**（**全局配置**）配送计划作业。

## <a name="additional-resources"></a>其他资源

[管理产品类别和产品](category-management-product-creation.md)

[应用库存设置](inventory-settings.md)

[计算零售渠道的库存现有量](calculated-inventory-retail-channels.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
