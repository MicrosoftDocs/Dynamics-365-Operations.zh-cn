---
title: 主动质量更新
description: 本文提供有关主动交付质量更新的信息。
author: rashmansur
ms.date: 09/12/2022
ms.topic: article
audience: Application User, Developer, IT Pro
ms.reviewer: sericks
ms.search.region: Global
ms.author: rashmim
ms.search.validFrom: 2022-08-19
ms.search.form: ''
ms.dyn365.ops.version: 10.0.29
ms.openlocfilehash: 60f9d84b240016671ff726fc3cca2e02cfd811ca
ms.sourcegitcommit: 3e04f7e4bc0c29c936dc177d5fa11761a58e9a02
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/18/2022
ms.locfileid: "9689191"
---
# <a name="proactive-quality-updates"></a>主动质量更新

[!include[banner](../includes/banner.md)]

在过去几年中，Microsoft 在我们所说的 [One Version](../../dev-itpro/lifecycle-services/oneversion-overview.md) 方面不断取得进步。 One Version 的前提很简单：我们越接近让所有客户使用相同的软件版本，我们可以交付的质量就越高。 我们一次发现并解决问题，我们可以更快地将这些解决方案交到更多客户手中。

结果证实了这一前提：我们产品中的事故数降低。 当客户不在同一个版本上时，我们总是能够发现他们会受到已有解决方案的问题的影响。 我们已经在 Dynamics 365 Finance、Dynamics 365 Supply Chain、Dynamics 365 Project Operations 和 Dynamics 365 Commerce 中取得了很大进步，并且由于最近的技术进步，现在可以迈出下一步。 以下信息列出了我们将要做什么，我们为作好准备完成了哪些工作，以及我们将如何以及何时引入新功能而不发生中断。

## <a name="focus-on-quality-updates"></a>专注于质量更新

我们目前每年提供七次[服务更新](public-preview-releases.md)。 例如，版本 10.0.29 是一次服务更新。 直到最近，每年有八次更新。 但是，我们放弃了一次更新以响应客户反馈，该反馈提出了避免在日历年末进行更改的期望。

我们不会改变服务更新的节奏。 而是安排 One Version 旅程的下一步专注于 *质量更新*。 质量更新是修补程序的累积版本。 不包括新功能。 在任何给定时间，我们的整个客户社区都分布在三到四个最近的服务更新之间。 但是，对于任何给定的服务更新，都可以在组内使用几十个不同的质量更新版本，具体取决于人员部署的日期。 在下一步中，我们将主动广播质量更新。 我们已经将此模型用于我们基于 Dataverse 的应用程序，并且已经看到了预期的质量提高和支持事件减少的结果。

当然，减少缺陷可以减少或完全消除对质量更新的需要。 我们正在实施多项计划来减少需要质量更新的缺陷。 即使在质量更新中减少了有效负载，整个客户群的一致性也将提高可支持性，更快地为客户提供改进，并降低客户遇到已经存在解决方法的问题的频率。

## <a name="making-proactive-distribution-possible"></a>实现主动分发

多项先进技术已经部署，可实现主动交付质量更新：

- **近零停机更新** – 为推送频率更高的环境，必须减少对环境可用性的影响以保留 Dynamics 365 服务级别协议 (SLA)。 最初引入近零停机更新是为了帮助改进每月的操作系统修补，方法是使用群集故障转移来激活更新后的映像，同时将中断降到最低。 应用更新的机制正在得到增强，以使它的破坏性更小，这将会覆盖操作系统修补和质量更新部署。

    对于交互式用户，活动会话可能会被中断，重试将转到现在的更新后的环境。 随着[基于优先级的批处理计划](../../dev-itpro/sysadmin/priority-based-batch-scheduling.md)（现在可以选择加入）的引入，批处理计划和处理在更新后会立即恢复。 在客户开始参与为其生产环境主动分发质量更新之前，将为他们实施基于优先级的批处理计划。

- **黑暗时间** – 为每个 Azure 区域定义了黑暗时间，近零停机更新将在黑暗时间进行。

## <a name="the-proactive-update-process"></a>主动更新流程

主动质量更新的部署将遵照安全部署流程 (SDP)。 SDP 的细节将不断发展，但质量更新最初将部署到沙盒环境。 此流程将从选择加入早期部署的环境开始。 随着成功部署沙盒的比例的增加，将开始部署到生产环境。 同样，流程将从选择加入早期部署的环境开始。 侦听系统将监视系统遥测和活动站点事件，如果检测到任何退化，将停止推出特定版本。 如果需要，客户仍然可以在主动部署之前拉取质量更新。

当前的发布管理数据显示，质量更新中引入的退化不到 3%。 随着对消除退化和增强 SDP 的关注度的日益增加，退化的潜在影响将大大低于通过更快地为客户广泛部署修复程序所获得的质量收益。

## <a name="process-changes"></a>处理更改

一组流程更改会在激活主动质量更新部署之前实施：

- **架构** – 工具将确保质量更新版本仅包括可在服务在线时应用的架构更改。 此方法将有助于保持在近零停机的情况下应用更新的能力。
- **加强更改审查** – 目前，已经有一个额外的流程步骤来审批更改，以将其包含在质量更新中。 将增加对额外步骤的审查，以帮助减少可能出现的退化。 质量更新中不允许进行中断性变更，加强对更改的审查将有助于确保我们实现这一目标。
- **可见性** – 我们将通过管理中心、Lifecycle Services (LCS) 以及其他可用渠道发送通知，来告知即将进行的主动质量更新。 此外，支持团队和事件负责人将会了解主动部署质量更新的位置。
 > [!NOTE]
 > Microsoft 通信团队正在调查目前发生的阻止发送电子邮件通知的电子邮件工具的退化问题。 请继续关注 Microsoft 365 消息中心，获取有关加入和通知的消息。
- **通过外部测试提供失败保护** – 只要在质量更新 bug 修复中适用，外部测试将用于保护代码更改，或使用与修复相关的现有功能外部测试。 如果在主动部署后需要回退或关闭更改，可以通过外部测试系统完成，以避免进一步失败。
- **沙盒同步指定** – 今天，只有不到 20% 的客户有多个沙盒，并在版本与生产相匹配的位置部署一个沙盒，来帮助进行故障排除。 如果客户使用沙盒测试比其生产版本更新的版本，该沙盒将收到更新版本的质量更新。

## <a name="what-is-the-rollout-roadmap-for-quality-updates"></a>质量更新的推出路线图是怎样的？

预计将于 2022 年 9 月或 10 月下旬开始为 Azure 公有云客户分发沙盒环境的主动质量更新。 到时，试用环境也将开始接收主动更新部署。 9 月，将向每个客户发送通知，告知他们其环境的预期计划。 仅受美国食品和药品管理局监管的客户可以对主动更新的分发流程设定例外。 我们仍在研究如何管理受监管的环境以及主权云和政府云客户。

在接下来的六个月内，我们将逐步增加接收主动更新的沙盒环境的比例，直到包括所有指定的环境并逐步更新生产环境。 在整个期间内，我们将进行监控以确保部署过程是无缝的，并确保我们正在达到我们的非破坏性有效负载目标。

由于客户将定期收到较小的有效负载，我们预期保持最新功能的流程会变得更简单。 随着我们展示出在不中断的情况下运行流程的能力，我们将调整更新部署的频率。 此流程已经在针对我们的 Dataverse 平台和应用程序有效地运行，并正在交付预期的服务质量改进。 我们渴望在财务和运营应用程序中迈出同样的一步。

## <a name="when-will-quality-updates-start-for-production-environments"></a>生产环境的质量更新何时开始？
目前，质量更新仅针对沙盒。 当我们从沙盒的主动更新中获得更具体的数据和指标时，我们将使用生产环境的开始日期更新此空间，以衡量生产环境的准备情况。

## <a name="what-is-the-schedule-for-sandbox-proactive-quality-updates"></a>沙盒主动质量更新的计划是什么？
有关每个区域的黑暗时间的信息，请参阅[各个区域的计划内维护时段在什么时间？](../../dev-itpro/deployment/plannedmaintenance-selfservice.md#windows)。

### <a name="proactive-quality-update-release-10028"></a>主动质量更新版本：10.0.28
**应用版本：10.0.1265.89**
**对应最新知识库文章：745340**

| 站点 | 区域 | 已完成计划| 近期沙盒计划
|---|---|---|---|
| 站点 1 | 加拿大中部、加拿大东部、法国中部、印度中部、挪威东部、瑞士西部 | 2022 年 9 月 15 日到 9 月 18 日、2022 年 9 月 19 日到 9 月 22 日、2022 年 10 月 7 日到 10 月 10 日 | 2022 年 10 月 25 日到 10 月 28 日 |
| 站点 2 | 法国南部、印度南部、挪威西部、瑞士北部、南非北部、澳大利亚东部、英国南部、阿拉伯联合酋长国北部、日本东部、澳大利亚东南部、东南亚 | 2022 年 9 月 25 日到 9 月 28 日和 2022 年 10 月 7 日到 10 月 10 日 | 2022 年 10 月 25 日到 10 月 28 日 |
| 站点 3 | 东亚、英国西部、日本西部、巴西南部、西欧、美国东部、阿拉伯联合酋长国中部 | 2022 年 9 月 26 日到 9 月 29 日和 2022 年 10 月 7 日到 10 月 10 日 | 2022 年 10 月 25 日到 10 月 28 日 |
| 站点 4 | 北欧、美国中部、美国西部 | 2022 年 9 月 28 日到 10 月 1 日和 2022 年 10 月 7 日到 10 月 10 日 | 2022 年 10 月 25 日到 10 月 28 日 |
| 站点 5 | DoD、政府社区云、中国 | 未计划 | 未计划 |

### <a name="proactive-quality-update-release-10029"></a><a name="schedule"></a> 主动质量更新版本：10.0.29
**应用版本：10.0.1326.70**
**对应最新知识库文章：748926**

| 站点 | 区域 | 近期沙盒计划
|---|---|---|
| 站点 1 | 加拿大中部、加拿大东部、法国中部、印度中部、挪威东部、瑞士西部 | 2022 年 10 月 14 日到 10 月 17 日 |
| 站点 2 | 法国南部、印度南部、挪威西部、瑞士北部、南非北部、澳大利亚东部、英国南部、阿拉伯联合酋长国北部、日本东部、澳大利亚东南部、东南亚 | 2022 年 10 月 15 日到 10 月 18 日 |
| 站点 3 | 东亚、英国西部、日本西部、巴西南部、西欧、美国东部、阿拉伯联合酋长国中部 | 2022 年 10 月 16 日到 10 月 19 日 |
| 站点 4 | 北欧、美国中部、美国西部 | 2022 年 10 月 17 日到 10 月 20 日 |
| 站点 5 | DoD、政府社区云、中国 | 未计划 |

> [!IMPORTANT] 
> Microsoft 将提前五天更新上述计划，并向计划接收这些质量更新的环境集发送电子邮件通知。 上述计划仅适用于已收到近期更新通知的环境。 有关每个区域的黑暗时间的信息，请参阅[各个区域的计划内维护时段在什么时间？](../../dev-itpro/deployment/plannedmaintenance-selfservice.md#windows)。
>
> 对于当前计划推出质量更新的每个地区组或 *站点*，计划显示的范围为四天。 质量更新仅从沙盒环境开始。 然后，随着成功部署沙盒的比例的增加，部署到生产环境将从提前通知客户开始。
> 
> 质量更新将始终以滚动方式进行，这样，我们可以根据计划针对一组环境执行，在第四天结束前完成一个站点的所有环境。 但是，这并不意味着环境更新会持续四天。 只意味着我们无法预先确定在四天范围内的给定日期更新哪些环境集。 所有更新都将在黑暗时间进行，停机时间几乎为零。 更新最终将在给定区域的黑暗时段内结束。

## <a name="how-are-the-dark-hours-handled-for-customers-that-have-one-finance-and-operations-apps-instance-but-are-active-in-multiple-time-zones"></a>对于有一个财务和运营应用实例但在多个时区处于活动状态的客户，黑暗时间是如何处理的？ 
在存在财务和运营应用实例的黑暗时间之外没有特殊计划，因为我们计划使用 [nZDT](../../dev-itpro/deployment/plannedmaintenance-selfservice.md#what-does-near-zero-downtime-maintenance-mean) 以破坏性最小的方式推出质量更新。

## <a name="what-is-the-current-rollout-cadence-for-proactive-quality-updates"></a>主动质量更新的当前推出节奏是怎样的？
对于每个支持的服务更新版本，主动质量更新 (PQU) 目前每月发布一次。 除非客户移到新的服务更新版本，否则对于指定的沙盒环境，每月只推送一次更新。 在这种情况下，他们可能会在现有培训中获得预先计划的 PQU，来获取新的服务更新。 2023 年全球推出完成后，这些更新的频率将会增加。 每当发布节奏发生变化时，您始终会至少提前一个月收到通知。

## <a name="how-will-microsoft-ensure-the-quality-of-these-updates"></a>Microsoft 如何确保这些更新的质量？
Microsoft 会努力保持发布管道足够高效，以提供小型有效负载，从而保持较低的验证成本。 质量更新中的每个修复都经过严格且安全的部署过程，这有助于提高质量和可靠性，从而减少对客户的影响。 部署将首先在沙盒环境中分阶段进行，然后是生产环境。 分阶段部署允许进行适当的监视来确定进一步部署是否安全。 如果在部署的每组客户中检测到问题，我们将停止推出，并确保推出的每个步骤都有足够的时间让问题浮出水面。 对于每个近期的质量更新，我们将通过更新公共文档和电子邮件来提供计划信息，以便客户可以提前计划。

## <a name="can-customers-delay-reschedule-or-pause-a-quality-update"></a>客户可以推迟、重新计划或暂停质量更新吗？
否。 质量更新的主要目标是确保为客户持续改进安全性、隐私、可靠性、可用性和性能等基础方面。 推迟或暂停更新，安全性、可用性和可靠性将面临风险。

## <a name="how-do-i-know-what-set-of-changes-went-into-a-quality-update-payload"></a>如何得知质量更新有效负载中进行了哪些更改？
以下步骤是一个临时解决方案，我们会继续努力提供更好的解决方案，来确定进入质量更新有效负载的更改列表。 

使用 KB#745340 进行 10.0.28 质量更新培训和使用相关的应用版本 10.0.1265.89。

1. 在 LCS 中，打开您的沙盒的 **环境详细信息** 页面。 
2. 在 **可用更新** 部分，选择 **查看更新** 显示最新的质量更新版本。 
3. 将此版本导出到 CSV 或 Microsoft Excel 文件。
4. 在导出的文件中，根据时间对信息进行排序（最早的信息在最前面），然后在 **更新 ID** 列中搜索 KB 编号 745340。 现在您应该能够看到 KB 的增量列表。
 
 > [!NOTE]
 > 必须在更新环境之前导出到 CSV 或 Excel 文件。 或者，您可以使用具有类似配置但未安装更新的环境，按照上述步骤操作。

[![具有质量更新的环境的示例。](./media/how-to-get-kb-list-pqu.png)](./media/how-to-get-kb-list-pqu.png)

## <a name="what-is-the-process-if-a-critical-issue-is-found-after-a-quality-update"></a>如果在质量更新后发现关键问题，推出过程会有怎样的变化？
关键问题或退化是一个或多个事件，通常会导致多个客户对我们的一项或多项服务的体验下降。 这些问题可能导致计划外停机，包括不可用、性能下降和对服务管理的干扰。 如果由于此类退化对客户产生广泛影响，我们将停止推出质量更新，直到我们能够传达并解决问题。 通常，下一次质量更新将进行必要的修复来恢复推出。

如果一个客户环境受到影响，请联系 Microsoft 支持部门开立票证。 根据具体理由，我们将停止向该项目中的所有其他环境推出质量更新，直到问题得到缓解。

## <a name="can-customers-still-manually-apply-hotfix-updates-from-lcs"></a>客户仍然可以从 LCS 手动应用修补程序更新吗？
是。 为确保与修补程序的工作方式保持一致，修补程序更新仍可应用于 LCS 中的客户环境。 但是，重要的是要注意，作为质量更新的一部分部署的修补程序在部署更新之前会执行标准 SDP。 由于质量更高，这将降低退化风险。 我们建议您选择质量更新而不是手动应用修补程序，以提高可靠性。

## <a name="can-customers-proactively-install-a-quality-update-build-ahead-of-the-schedule"></a>客户能否提前于计划主动安装质量更新版本？
是。 您可以主动安装质量更新。 如果环境的当前内部版本等于或高于所安装的质量更新，Microsoft 将跳过更新。

## <a name="if-an-environment-has-an-upcoming-scheduled-monthly-service-update-within-a-week-will-it-still-receive-quality-updates"></a>如果某个环境在一周内有即将进行的计划每月服务更新，它是否仍会收到质量更新？
- 如果在计划进行质量更新后的一周内计划了即将进行的服务更新，则不会对生产环境应用质量更新。
- 如果沙盒环境具有与即将进行的质量更新相同或更高的内部版本，将跳过更新。
- 如果生产环境具有与即将进行的质量更新相同或更高的内部版本，将跳过更新。
- 如果沙盒由于质量更新或手动更新到生产环境而具有相同或更高的内部版本，生产环境仍将收到每月服务更新的计划版本。 如果您不希望计划的生产环境更新到服务更新版本，您可以暂停 LCS 的服务更新。 
- 我们建议您使用最新的质量更新版本来测试您对即将进行的服务更新所做的更改，以获得更好的稳定性和效果。

## <a name="if-an-environment-has-an-upcoming-scheduled-action-and-a-scheduled-quality-update-in-the-same-maintenance-window-will-it-still-receive-the-quality-update"></a>如果一个环境在同一维护时段有即将执行的计划操作和计划的质量更新，它还会收到质量更新吗？
如果与预先计划的操作（例如，时间点还原 (PITR)）有任何冲突，质量更新将重新安排到四天时段内的下一个可用维护时段。 有关计划的更多详细信息，请参阅[主动质量更新的计划是什么？](#schedule)。 

## <a name="can-an-environment-be-brought-back-to-its-previous-state-if-there-are-issues-after-a-quality-update-is-applied"></a>如果在应用质量更新后出现问题，环境能否恢复到以前的状态？
应用质量更新后，在任何情况下都不会回滚。 只能通过提前安装补丁来缓解问题。

## <a name="what-about-fda-regulation-and-gpx"></a>FDA 监管和 GPX 如何安排？
针对需要接受 FDA 验证和监管的客户的计划仍在不断完善。 相信很快会有更多更新。 目前，所有此类客户都无需质量更新。 要确保客户遵守 FDA 法规要求，请访问 [Microsoft Azure GPX 产品/服务](/azure/compliance/offerings/offering-gxp)。

## <a name="what-versions-of-service-updates-are-supported-for-these-quality-updates"></a>这些质量更新支持哪些版本的服务更新？
所有支持的服务更新版本的客户都有资格进行质量更新。 

## <a name="finance-and-operations-apps-deployments-with-retail-components-typically-require-additional-work-in-addition-to-having-to-redeploy-mpos-how-will-these-quality-updates-impact-the-retailsdk"></a>除了必须重新部署 MPOS 之外，使用零售组件部署财务和运营应用通常需要完成额外的工作。 这些质量更新将如何影响 RetailSDK？ 
由于修补程序本身的性质不会在质量更新有效负载中发生变化，因此我们预计目前不会有任何与零售组件相关的额外影响。

## <a name="is-there-any-impact-to-cloud-hosted-environments-che"></a>对云托管的环境 (CHE) 有影响吗？ 
CHE 环境超出了质量更新范围，它们超出了 Microsoft 的权限范围

## <a name="are-there-any-integration-issues-with-microsoft-dataverse"></a>Microsoft Dataverse 是否存在集成问题？ 
Dataverse 的质量更新没有已知的集成问题。

