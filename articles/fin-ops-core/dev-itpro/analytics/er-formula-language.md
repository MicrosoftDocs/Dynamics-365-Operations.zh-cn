---
title: 电子申报公式语言
description: 本主题提供有关如何在电子申报 (ER) 中使用公式语言的信息。
author: NickSelin
ms.date: 05/04/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: d2015405f3c7f89ba36f811ca125f3a73bc13c38
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/31/2021
ms.locfileid: "5753256"
---
# <a name="electronic-reporting-formula-language"></a><span data-ttu-id="2212e-103">电子申报公式语言</span><span class="sxs-lookup"><span data-stu-id="2212e-103">Electronic reporting formula language</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="2212e-104">电子申报 (ER) 提供了强大的数据换算体验。</span><span class="sxs-lookup"><span data-stu-id="2212e-104">Electronic reporting (ER) provides a powerful data transformation experience.</span></span> <span data-ttu-id="2212e-105">[ER 公式设计器](general-electronic-reporting-formula-designer.md)中用于表达所需数据操作的语言类似于 Microsoft Excel 中的公式语言。</span><span class="sxs-lookup"><span data-stu-id="2212e-105">The language that is used to express the required data manipulations in the [ER formula designer](general-electronic-reporting-formula-designer.md) resembles the formula language in Microsoft Excel.</span></span>

## <a name="basic-syntax"></a><span data-ttu-id="2212e-106">基本语法</span><span class="sxs-lookup"><span data-stu-id="2212e-106">Basic syntax</span></span>

<span data-ttu-id="2212e-107">ER 表达式可以包含任意或所有以下元素：</span><span class="sxs-lookup"><span data-stu-id="2212e-107">ER expressions can contain any or all of the following elements:</span></span>

- [<span data-ttu-id="2212e-108">常量</span><span class="sxs-lookup"><span data-stu-id="2212e-108">Constants</span></span>](#Constants)
- [<span data-ttu-id="2212e-109">运算符</span><span class="sxs-lookup"><span data-stu-id="2212e-109">Operators</span></span>](#Operators)
- [<span data-ttu-id="2212e-110">参考</span><span class="sxs-lookup"><span data-stu-id="2212e-110">References</span></span>](#References)
- [<span data-ttu-id="2212e-111">路径</span><span class="sxs-lookup"><span data-stu-id="2212e-111">Paths</span></span>](#Paths)
- [<span data-ttu-id="2212e-112">功能</span><span class="sxs-lookup"><span data-stu-id="2212e-112">Functions</span></span>](#Functions)

## <a name=""></a><span data-ttu-id="2212e-113"><a name="Constants">常量</a></span><span class="sxs-lookup"><span data-stu-id="2212e-113"><a name="Constants">Constants</a></span></span>

<span data-ttu-id="2212e-114">您可以在设计表达式时使用文本和数值常量（即未计算的值）。</span><span class="sxs-lookup"><span data-stu-id="2212e-114">When you design expressions, you can use text and numeric constants (that is, values that aren't calculated).</span></span> <span data-ttu-id="2212e-115">例如，表达式 `VALUE ("100") + 20` 使用数值常量 **20** 和字符串常量 **"100"**，返回数值 **120**。</span><span class="sxs-lookup"><span data-stu-id="2212e-115">For example, the expression `VALUE ("100") + 20` uses the numeric constant **20** and the string constant **"100"**, and it returns the numeric value **120**.</span></span>

<span data-ttu-id="2212e-116">ER 公式设计器支持转义序列。</span><span class="sxs-lookup"><span data-stu-id="2212e-116">The ER formula designer supports escape sequences.</span></span> <span data-ttu-id="2212e-117">因此，可以指定应以不同方式处理的表达式字符串。</span><span class="sxs-lookup"><span data-stu-id="2212e-117">Therefore, you can specify an expression string that should be handled differently.</span></span> <span data-ttu-id="2212e-118">例如，表达式 `"Leo Tolstoy ""War and Peace"" Volume 1"` 返回文本字符串 **Leo Tolstoy "War and Peace" Volume 1**。</span><span class="sxs-lookup"><span data-stu-id="2212e-118">For example, the expression `"Leo Tolstoy ""War and Peace"" Volume 1"` returns the text string **Leo Tolstoy "War and Peace" Volume 1**.</span></span>

## <a name=""></a><span data-ttu-id="2212e-119"><a name="Operators">运算符</a></span><span class="sxs-lookup"><span data-stu-id="2212e-119"><a name="Operators">Operators</a></span></span>

<span data-ttu-id="2212e-120">下表显示您可以用于执行基本算术运算的算术运算符，例如加、减、乘和除。</span><span class="sxs-lookup"><span data-stu-id="2212e-120">The following table shows the arithmetic operators that you can use to do basic mathematical operations, such as addition, subtraction, multiplication, and division.</span></span>

| <span data-ttu-id="2212e-121">操作员</span><span class="sxs-lookup"><span data-stu-id="2212e-121">Operator</span></span> | <span data-ttu-id="2212e-122">含义</span><span class="sxs-lookup"><span data-stu-id="2212e-122">Meaning</span></span>               | <span data-ttu-id="2212e-123">示例</span><span class="sxs-lookup"><span data-stu-id="2212e-123">Example</span></span>     |
|----------|-----------------------|-------------|
| +        | <span data-ttu-id="2212e-124">增加额</span><span class="sxs-lookup"><span data-stu-id="2212e-124">Addition</span></span>              | `1+2`       |
| -        | <span data-ttu-id="2212e-125">减法，负</span><span class="sxs-lookup"><span data-stu-id="2212e-125">Subtraction, negation</span></span> | <span data-ttu-id="2212e-126">`5-2`, `-1`</span><span class="sxs-lookup"><span data-stu-id="2212e-126">`5-2`, `-1`</span></span> |
| \*       | <span data-ttu-id="2212e-127">乘</span><span class="sxs-lookup"><span data-stu-id="2212e-127">Multiplication</span></span>        | `7\*8`      |
| /        | <span data-ttu-id="2212e-128">分部</span><span class="sxs-lookup"><span data-stu-id="2212e-128">Division</span></span>              | `9/3`       |

<span data-ttu-id="2212e-129">下表显示支持的比较运算符。</span><span class="sxs-lookup"><span data-stu-id="2212e-129">The following table shows the comparison operators that are supported.</span></span> <span data-ttu-id="2212e-130">您可以使用这些运算符比较两个值。</span><span class="sxs-lookup"><span data-stu-id="2212e-130">You can use these operators to compare two values.</span></span>

| <span data-ttu-id="2212e-131">操作员</span><span class="sxs-lookup"><span data-stu-id="2212e-131">Operator</span></span> | <span data-ttu-id="2212e-132">含义</span><span class="sxs-lookup"><span data-stu-id="2212e-132">Meaning</span></span>                  | <span data-ttu-id="2212e-133">示例</span><span class="sxs-lookup"><span data-stu-id="2212e-133">Example</span></span>      |
|----------|--------------------------|--------------|
| =        | <span data-ttu-id="2212e-134">相等</span><span class="sxs-lookup"><span data-stu-id="2212e-134">Equal</span></span>                    | `X=Y`        |
| &gt;     | <span data-ttu-id="2212e-135">大于</span><span class="sxs-lookup"><span data-stu-id="2212e-135">Greater than</span></span>             | `X>Y`        |
| &lt;     | <span data-ttu-id="2212e-136">小于</span><span class="sxs-lookup"><span data-stu-id="2212e-136">Less than</span></span>                | `X<Y`        |
| &gt;=    | <span data-ttu-id="2212e-137">大于等于</span><span class="sxs-lookup"><span data-stu-id="2212e-137">Greater than or equal to</span></span> | `X>=Y`       |
| &lt;=    | <span data-ttu-id="2212e-138">小于等于</span><span class="sxs-lookup"><span data-stu-id="2212e-138">Less than or equal to</span></span>    | `X<=Y`       |
| &lt;&gt; | <span data-ttu-id="2212e-139">不等于</span><span class="sxs-lookup"><span data-stu-id="2212e-139">Not equal to</span></span>             | `X<>Y`       |

<span data-ttu-id="2212e-140">也可以将星号 (&) 用作文本连接运算符。</span><span class="sxs-lookup"><span data-stu-id="2212e-140">Additionally, you can use an ampersand (&) as a text concatenation operator.</span></span> <span data-ttu-id="2212e-141">这样就可以将一个或多个文本字符串联接或连接为一段文本。</span><span class="sxs-lookup"><span data-stu-id="2212e-141">In this way, you can join, or concatenate, one or more text strings into a single piece of text.</span></span>

| <span data-ttu-id="2212e-142">操作员</span><span class="sxs-lookup"><span data-stu-id="2212e-142">Operator</span></span> | <span data-ttu-id="2212e-143">含义</span><span class="sxs-lookup"><span data-stu-id="2212e-143">Meaning</span></span>     | <span data-ttu-id="2212e-144">示例</span><span class="sxs-lookup"><span data-stu-id="2212e-144">Example</span></span>                                               |
|----------|-------------|-------------------------------------------------------|
| &        | <span data-ttu-id="2212e-145">连接</span><span class="sxs-lookup"><span data-stu-id="2212e-145">Concatenate</span></span> | `"Nothing to print:" & " " & "no records found"`      |

### <a name="operator-precedence"></a><span data-ttu-id="2212e-146">运算符优先级</span><span class="sxs-lookup"><span data-stu-id="2212e-146">Operator precedence</span></span>

<span data-ttu-id="2212e-147">复合表达式部分评估的顺序很重要。</span><span class="sxs-lookup"><span data-stu-id="2212e-147">The order in which the parts of a compound expression are evaluated is important.</span></span> <span data-ttu-id="2212e-148">例如，表达式 `1 + 4 / 2` 的结果根据先执行加还是除运算有所不同。</span><span class="sxs-lookup"><span data-stu-id="2212e-148">For example, the result of the expression `1 + 4 / 2` varies, depending on whether the addition or division operation is done first.</span></span> <span data-ttu-id="2212e-149">您可以使用括号明确定义表达式如何进行评估。</span><span class="sxs-lookup"><span data-stu-id="2212e-149">You can use parentheses to explicitly define how an expression is evaluated.</span></span> <span data-ttu-id="2212e-150">例如，要指示应首先执行加运算，您可以将之前的表达式更改为 `(1 + 4) / 2`。</span><span class="sxs-lookup"><span data-stu-id="2212e-150">For example, to indicate that the addition operation should be done first, you can change the preceding expression to `(1 + 4) / 2`.</span></span> <span data-ttu-id="2212e-151">如果不在表达式中明确指定运算顺序，顺序将基于分配给支持的运算符的默认优先级。</span><span class="sxs-lookup"><span data-stu-id="2212e-151">If you don't explicitly indicate the order of operations in an expression, the order is based on the default precedence that is assigned to the supported operators.</span></span> <span data-ttu-id="2212e-152">下表显示分配给每个运算符的优先级。</span><span class="sxs-lookup"><span data-stu-id="2212e-152">The following table shows the precedence that is assigned to each operator.</span></span> <span data-ttu-id="2212e-153">有较高优先级的运算符（例如，7）在具有较低优先级的运算符之前进行评估（例如，1）。</span><span class="sxs-lookup"><span data-stu-id="2212e-153">Operators that have a higher precedence (for example, 7) are evaluated before operators that have a lower precedence (for example, 1).</span></span>

| <span data-ttu-id="2212e-154">优先级</span><span class="sxs-lookup"><span data-stu-id="2212e-154">Precedence</span></span> | <span data-ttu-id="2212e-155">运算符</span><span class="sxs-lookup"><span data-stu-id="2212e-155">Operators</span></span>      | <span data-ttu-id="2212e-156">语法</span><span class="sxs-lookup"><span data-stu-id="2212e-156">Syntax</span></span>                                                                  |
|------------|----------------|-------------------------------------------------------------------------|
| <span data-ttu-id="2212e-157">7</span><span class="sxs-lookup"><span data-stu-id="2212e-157">7</span></span>          | <span data-ttu-id="2212e-158">分组</span><span class="sxs-lookup"><span data-stu-id="2212e-158">Grouping</span></span>       | <span data-ttu-id="2212e-159">( …</span><span class="sxs-lookup"><span data-stu-id="2212e-159">( …</span></span> <span data-ttu-id="2212e-160">)</span><span class="sxs-lookup"><span data-stu-id="2212e-160">)</span></span>                                                                   |
| <span data-ttu-id="2212e-161">6</span><span class="sxs-lookup"><span data-stu-id="2212e-161">6</span></span>          | <span data-ttu-id="2212e-162">成员访问</span><span class="sxs-lookup"><span data-stu-id="2212e-162">Member access</span></span>  | <span data-ttu-id="2212e-163">…</span><span class="sxs-lookup"><span data-stu-id="2212e-163">…</span></span> <span data-ttu-id="2212e-164">。</span><span class="sxs-lookup"><span data-stu-id="2212e-164">.</span></span> <span data-ttu-id="2212e-165">…</span><span class="sxs-lookup"><span data-stu-id="2212e-165">…</span></span>                                                                   |
| <span data-ttu-id="2212e-166">5</span><span class="sxs-lookup"><span data-stu-id="2212e-166">5</span></span>          | <span data-ttu-id="2212e-167">函数调用</span><span class="sxs-lookup"><span data-stu-id="2212e-167">Function call</span></span>  | <span data-ttu-id="2212e-168">…</span><span class="sxs-lookup"><span data-stu-id="2212e-168">…</span></span> <span data-ttu-id="2212e-169">( …</span><span class="sxs-lookup"><span data-stu-id="2212e-169">( …</span></span> <span data-ttu-id="2212e-170">)</span><span class="sxs-lookup"><span data-stu-id="2212e-170">)</span></span>                                                                 |
| <span data-ttu-id="2212e-171">4</span><span class="sxs-lookup"><span data-stu-id="2212e-171">4</span></span>          | <span data-ttu-id="2212e-172">乘</span><span class="sxs-lookup"><span data-stu-id="2212e-172">Multiplicative</span></span> | <span data-ttu-id="2212e-173">…</span><span class="sxs-lookup"><span data-stu-id="2212e-173">…</span></span> <span data-ttu-id="2212e-174">\* …</span><span class="sxs-lookup"><span data-stu-id="2212e-174">\* …</span></span><br><span data-ttu-id="2212e-175">…</span><span class="sxs-lookup"><span data-stu-id="2212e-175">…</span></span> <span data-ttu-id="2212e-176">/ …</span><span class="sxs-lookup"><span data-stu-id="2212e-176">/ …</span></span>                                                         |
| <span data-ttu-id="2212e-177">3</span><span class="sxs-lookup"><span data-stu-id="2212e-177">3</span></span>          | <span data-ttu-id="2212e-178">加法的</span><span class="sxs-lookup"><span data-stu-id="2212e-178">Additive</span></span>       | <span data-ttu-id="2212e-179">…</span><span class="sxs-lookup"><span data-stu-id="2212e-179">…</span></span> <span data-ttu-id="2212e-180">+ …</span><span class="sxs-lookup"><span data-stu-id="2212e-180">+ …</span></span><br><span data-ttu-id="2212e-181">…</span><span class="sxs-lookup"><span data-stu-id="2212e-181">…</span></span> <span data-ttu-id="2212e-182">- …</span><span class="sxs-lookup"><span data-stu-id="2212e-182">- …</span></span>                                                          |
| <span data-ttu-id="2212e-183">2</span><span class="sxs-lookup"><span data-stu-id="2212e-183">2</span></span>          | <span data-ttu-id="2212e-184">比较</span><span class="sxs-lookup"><span data-stu-id="2212e-184">Comparison</span></span>     | <span data-ttu-id="2212e-185">…</span><span class="sxs-lookup"><span data-stu-id="2212e-185">…</span></span> <span data-ttu-id="2212e-186">&lt; …</span><span class="sxs-lookup"><span data-stu-id="2212e-186">&lt; …</span></span><br><span data-ttu-id="2212e-187">…</span><span class="sxs-lookup"><span data-stu-id="2212e-187">…</span></span> <span data-ttu-id="2212e-188">&lt;= …</span><span class="sxs-lookup"><span data-stu-id="2212e-188">&lt;= …</span></span><br><span data-ttu-id="2212e-189">…</span><span class="sxs-lookup"><span data-stu-id="2212e-189">…</span></span><span data-ttu-id="2212e-190"> =&gt; …</span><span class="sxs-lookup"><span data-stu-id="2212e-190"> =&gt; …</span></span><br><span data-ttu-id="2212e-191">…</span><span class="sxs-lookup"><span data-stu-id="2212e-191">…</span></span> <span data-ttu-id="2212e-192">&gt; …</span><span class="sxs-lookup"><span data-stu-id="2212e-192">&gt; …</span></span><br><span data-ttu-id="2212e-193">…</span><span class="sxs-lookup"><span data-stu-id="2212e-193">…</span></span> <span data-ttu-id="2212e-194">= …</span><span class="sxs-lookup"><span data-stu-id="2212e-194">= …</span></span><br><span data-ttu-id="2212e-195">…</span><span class="sxs-lookup"><span data-stu-id="2212e-195">…</span></span> <span data-ttu-id="2212e-196">&lt;&gt; …</span><span class="sxs-lookup"><span data-stu-id="2212e-196">&lt;&gt; …</span></span> |
| <span data-ttu-id="2212e-197">1</span><span class="sxs-lookup"><span data-stu-id="2212e-197">1</span></span>          | <span data-ttu-id="2212e-198">分隔</span><span class="sxs-lookup"><span data-stu-id="2212e-198">Separation</span></span>     | <span data-ttu-id="2212e-199">…</span><span class="sxs-lookup"><span data-stu-id="2212e-199">…</span></span> <span data-ttu-id="2212e-200">, …</span><span class="sxs-lookup"><span data-stu-id="2212e-200">, …</span></span>                                                                   |

<span data-ttu-id="2212e-201">如果表达式中包含多个具有相同优先级的连续运算符，将从左到右执行这些运算。</span><span class="sxs-lookup"><span data-stu-id="2212e-201">If an expression includes multiple consecutive operators that have the same precedence, those operations are evaluated from left to right.</span></span> <span data-ttu-id="2212e-202">例如，表达式 `1 + 6 / 2 \* 3 > 5` 返回 **true**。</span><span class="sxs-lookup"><span data-stu-id="2212e-202">For example, the expression `1 + 6 / 2 \* 3 > 5` returns **true**.</span></span> <span data-ttu-id="2212e-203">我们建议您使用括号明确指示评估表达式中所需的运算顺序，以使表达式更便于读取和维护。</span><span class="sxs-lookup"><span data-stu-id="2212e-203">We recommend that you use parentheses to explicitly indicate the desired order of operations in expressions, so that the expressions are easier to read and maintain.</span></span>

## <a name=""></a><span data-ttu-id="2212e-204"><a name="References">参考</a></span><span class="sxs-lookup"><span data-stu-id="2212e-204"><a name="References">References</a></span></span>

<span data-ttu-id="2212e-205">在表达式设计期间当前 ER 组件的所有数据源均可用作指定引用。</span><span class="sxs-lookup"><span data-stu-id="2212e-205">All data sources of the current ER component that are available during the design of an expression can be used as named references.</span></span> <span data-ttu-id="2212e-206">当前的 ER 组件可以是模型映射或格式。</span><span class="sxs-lookup"><span data-stu-id="2212e-206">The current ER component can be either a model mapping or a format.</span></span> <span data-ttu-id="2212e-207">例如，当前的 ER 模型映射包含数据源 **ReportingDate** 数据源，该数据源返回 *DateTime* 数据类型的值。</span><span class="sxs-lookup"><span data-stu-id="2212e-207">For example, the current ER model mapping contains the **ReportingDate** data source, which returns a value of the *DateTime* data type.</span></span> <span data-ttu-id="2212e-208">若要获取在生成文档中正确格式化的值，您可以按照如下方法在表达式中引用数据源：`DATETIMEFORMAT (ReportingDate, "dd-MM-yyyy")`。</span><span class="sxs-lookup"><span data-stu-id="2212e-208">To correctly format that value in the generating document, you can reference the data source in the expression as `DATETIMEFORMAT (ReportingDate, "dd-MM-yyyy")`.</span></span>

<span data-ttu-id="2212e-209">不代表字母的引用数据源的名称中的所有字符必须前加单引号 (')。</span><span class="sxs-lookup"><span data-stu-id="2212e-209">All characters in the name of a referencing data source that don't represent a letter of the alphabet must be preceded by a single quotation mark (').</span></span> <span data-ttu-id="2212e-210">如果引用数据源的名称包含至少一个不代表字母的符号，名称必须以单引号括起。</span><span class="sxs-lookup"><span data-stu-id="2212e-210">If the name of a referencing data source contains at least one symbol that doesn't represent a letter of the alphabet, the name must be enclosed in single quotation marks.</span></span> <span data-ttu-id="2212e-211">例如，这些非字母符号可以是标点符号或其他书面符号。</span><span class="sxs-lookup"><span data-stu-id="2212e-211">For example, these non-alphabetic symbols can be punctuation marks or other written symbols.</span></span> <span data-ttu-id="2212e-212">下面举了一些示例加以说明：</span><span class="sxs-lookup"><span data-stu-id="2212e-212">Here are some examples:</span></span>

- <span data-ttu-id="2212e-213">**今日日期和时间** 数据源必须在 ER 表达式中引用，如下所示：`'Today''s date & time'`。</span><span class="sxs-lookup"><span data-stu-id="2212e-213">The **Today's date & time** data source must be referred to in an ER expression as `'Today''s date & time'`.</span></span>
- <span data-ttu-id="2212e-214">**Customers** 数据源的 **name()** 方法必须在 ER 表达式中引用，如下所示：`Customers.'name()'`。</span><span class="sxs-lookup"><span data-stu-id="2212e-214">The **name()** method of the **Customers** data source must be referred to in an ER expression as `Customers.'name()'`.</span></span>

<span data-ttu-id="2212e-215">如果应用程序数据源的方法有参数，则使用下面的语法调用这些方法：</span><span class="sxs-lookup"><span data-stu-id="2212e-215">If the methods of application data sources have parameters, the following syntax is used to call those methods:</span></span>

- <span data-ttu-id="2212e-216">如果 **System** 数据源的 **isLanguageRTL** 方法具有 *String* 数据类型的 **EN-US** 参数，则该方法必须在 ER 表达式中引用为 `System.isLanguageRTL("EN-US")`。</span><span class="sxs-lookup"><span data-stu-id="2212e-216">If the **isLanguageRTL** method of the **System** data source has an **EN-US** parameter of the *String* data type, this method must be referred to in an ER expression as `System.isLanguageRTL("EN-US")`.</span></span>
- <span data-ttu-id="2212e-217">当方法名称仅包含一个字母数字符号时，引号不是必需的。</span><span class="sxs-lookup"><span data-stu-id="2212e-217">Quotation marks aren't required when a method name contains only alphanumeric symbols.</span></span> <span data-ttu-id="2212e-218">但是，如果名称中包含括号，则它们是表方法所必需的。</span><span class="sxs-lookup"><span data-stu-id="2212e-218">However, they are required for a method of a table if the name includes brackets.</span></span>

<span data-ttu-id="2212e-219">当 **System** 数据源被添加到引用 **全局** 应用程序类的 ER 映射时，表达式 `System.isLanguageRTL("EN-US ")` 返回 *布尔* 值 **FALSE**。</span><span class="sxs-lookup"><span data-stu-id="2212e-219">When the **System** data source is added to an ER mapping that refers to the **Global** application class, the expression `System.isLanguageRTL("EN-US ")` returns the *Boolean* value **FALSE**.</span></span> <span data-ttu-id="2212e-220">修改后的表达式 `System.isLanguageRTL("AR")` 返回 *布尔* 值 **TRUE**。</span><span class="sxs-lookup"><span data-stu-id="2212e-220">The modified expression `System.isLanguageRTL("AR")` returns the *Boolean* value **TRUE**.</span></span>

<span data-ttu-id="2212e-221">可限制值传递到此类型方法的参数的方式：</span><span class="sxs-lookup"><span data-stu-id="2212e-221">You can limit the way that values are passed to the parameters of this type of method:</span></span>

- <span data-ttu-id="2212e-222">只有常量可传递到此类型的方法。</span><span class="sxs-lookup"><span data-stu-id="2212e-222">Only constants can be passed to methods of this type.</span></span> <span data-ttu-id="2212e-223">常量的值定义为设计时间。</span><span class="sxs-lookup"><span data-stu-id="2212e-223">The values of the constants are defined at design time.</span></span>
- <span data-ttu-id="2212e-224">此类型的参数仅支持原始（基本）数据类型。</span><span class="sxs-lookup"><span data-stu-id="2212e-224">Only primitive (basic) data types are supported for parameters of this type.</span></span> <span data-ttu-id="2212e-225">原始数据类型包括 *整数*、*实数*、*布尔值*、*字符串*。</span><span class="sxs-lookup"><span data-stu-id="2212e-225">The primitive data types include *Integer*, *Real*, *Boolean*, and *String*.</span></span>

## <a name=""></a><span data-ttu-id="2212e-226"><a name="Paths">路径</a></span><span class="sxs-lookup"><span data-stu-id="2212e-226"><a name="Paths">Paths</a></span></span>

<span data-ttu-id="2212e-227">在表达式引用结构化的数据源时，可以使用路径定义选择该数据源的特定基本元素。</span><span class="sxs-lookup"><span data-stu-id="2212e-227">When an expression references a structured data source, you can use the path definition to select a specific primitive element of that data source.</span></span> <span data-ttu-id="2212e-228">点字符 (.) 用于分离结构化数据源的各个元素。</span><span class="sxs-lookup"><span data-stu-id="2212e-228">A dot character (.) is used to separate individual elements of a structured data source.</span></span> <span data-ttu-id="2212e-229">例如，当前的 ER 模型映射包含 **InvoiceTransactions** 数据源，并且该数据源返回记录列表。</span><span class="sxs-lookup"><span data-stu-id="2212e-229">For example, the current ER model mapping contains the **InvoiceTransactions** data source, and this data source returns a list of records.</span></span> <span data-ttu-id="2212e-230">**InvoiceTransactions** 记录结构包含 **AmountDebit** 和 **AmountCredit** 字段，并且这两个字段都将返回数值。</span><span class="sxs-lookup"><span data-stu-id="2212e-230">The **InvoiceTransactions** record structure contains the **AmountDebit** and **AmountCredit** fields, and both these fields return numeric values.</span></span> <span data-ttu-id="2212e-231">因此，您可以设计以下表达式来计算开票金额：`InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit`。</span><span class="sxs-lookup"><span data-stu-id="2212e-231">Therefore, you can design the following expression to calculate the invoiced amount: `InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit`.</span></span> <span data-ttu-id="2212e-232">此表达式中的 `InvoiceTransactions.AmountDebit` 构造是用于访问 *记录列表* 类型的 **InvoiceTransactions** 数据源的 **AmountDebit** 字段的路径。</span><span class="sxs-lookup"><span data-stu-id="2212e-232">The `InvoiceTransactions.AmountDebit` construction in this expression is the path that is used to access the **AmountDebit** field of the **InvoiceTransactions** data source of the *Record list* type.</span></span>

### <a name="relative-path"></a><span data-ttu-id="2212e-233">相对路径</span><span class="sxs-lookup"><span data-stu-id="2212e-233">Relative path</span></span>

<span data-ttu-id="2212e-234">如果结构化数据源的路径以“at”符号 (@) 开头，它是相对路径。</span><span class="sxs-lookup"><span data-stu-id="2212e-234">If the path of a structured data source starts with an "at" sign (@), it's a relative path.</span></span> <span data-ttu-id="2212e-235">显示的是“at”符号，而不是所使用的层次结构树结构的绝对路径的其余部分。</span><span class="sxs-lookup"><span data-stu-id="2212e-235">The "at" sign is shown instead of the remaining part of the absolute path of the hierarchical tree structure that is used.</span></span> <span data-ttu-id="2212e-236">下图显示了一个示例。</span><span class="sxs-lookup"><span data-stu-id="2212e-236">The following illustration shows an example.</span></span> <span data-ttu-id="2212e-237">在这里，绝对路径 `Ledger.'accountingCurrency()'` 表示来自 **分类帐** 数据源的记帐币种值已输入到数据模型的 **AccountingCurrency** 字段中。</span><span class="sxs-lookup"><span data-stu-id="2212e-237">Here, the absolute path `Ledger.'accountingCurrency()'` indicates that the accounting currency value from the **Ledger** data source is entered in the **AccountingCurrency** field of the data model.</span></span>

![ER 模型映射设计器页面上的绝对路径的示例](./media/ER-FormulaLanguage-AbsolutePath.png)

<span data-ttu-id="2212e-239">下图中的示例显示了如何使用相对路径。</span><span class="sxs-lookup"><span data-stu-id="2212e-239">The example in the following illustration shows how a relative path is used.</span></span> <span data-ttu-id="2212e-240">相对路径 `@.AccountNum` 表示 **Intrastat** 数据源（在数据模型层次结构树中的 **AccountNum** 字段上方显示一个级别）的 **AccountNum** 字段用于在数据模型的 **AccountNum** 字段中输入客户或供应商帐号。</span><span class="sxs-lookup"><span data-stu-id="2212e-240">The relative path `@.AccountNum` indicates that the **AccountNum** field of the **Intrastat** data source (which appears one level above the **AccountNum** field in the data model's hierarchical tree) is used to enter the customer or vendor account number in the data model's **AccountNum** field.</span></span>

![ER 模型映射设计器页面上的相对路径的示例](./media/ER-FormulaLanguage-RelativePath1.png)

<span data-ttu-id="2212e-242">绝对路径的其余部分还显示在 [ER 公式编辑器](general-electronic-reporting-formula-designer.md)中。</span><span class="sxs-lookup"><span data-stu-id="2212e-242">The remaining part of the absolute path is also shown in the [ER formula editor](general-electronic-reporting-formula-designer.md).</span></span>

![ER 公式设计器页面上绝对路径的其余部分](./media/ER-FormulaLanguage-RelativePath2.png)

<span data-ttu-id="2212e-244">有关更多信息，请参阅[在 ER 模型和格式的数据绑定中使用相对路径](relative-path-data-bindings-er-models-format.md)。</span><span class="sxs-lookup"><span data-stu-id="2212e-244">For more information, see [Use a relative path in data bindings of ER models and formats](relative-path-data-bindings-er-models-format.md).</span></span>

## <a name=""></a><span data-ttu-id="2212e-245"><a name="Functions">功能</a></span><span class="sxs-lookup"><span data-stu-id="2212e-245"><a name="Functions">Functions</a></span></span>

<span data-ttu-id="2212e-246">ER 内置函数可以在 ER 表达式中使用。</span><span class="sxs-lookup"><span data-stu-id="2212e-246">ER built-in functions can be used in ER expressions.</span></span> <span data-ttu-id="2212e-247">根据调用函数参数的列表，可将表达式上下文（即当前 ER 模型映射或 ER 格式）的所有数据源用作调用函数的参数，以便与调用函数的参数列表保持一致。</span><span class="sxs-lookup"><span data-stu-id="2212e-247">All data sources of the expression context (that is, the current ER model mapping or ER format) can be used as parameters of calling functions, in accordance with the list of arguments for calling functions.</span></span> <span data-ttu-id="2212e-248">也可以将常量用作调用函数的参数。</span><span class="sxs-lookup"><span data-stu-id="2212e-248">Constants can also be used as parameters of calling functions.</span></span> <span data-ttu-id="2212e-249">例如，当前的 ER 模型映射包含 **InvoiceTransactions** 数据源，并且该数据源返回记录列表。</span><span class="sxs-lookup"><span data-stu-id="2212e-249">For example, the current ER model mapping contains the **InvoiceTransactions** data source, and this data source returns a list of records.</span></span> <span data-ttu-id="2212e-250">**InvoiceTransactions** 记录结构包含 **AmountDebit** 和 **AmountCredit** 字段，并且这两个字段都将返回数值。</span><span class="sxs-lookup"><span data-stu-id="2212e-250">The **InvoiceTransactions** record structure contains the **AmountDebit** and **AmountCredit** fields, and both these fields return numeric values.</span></span> <span data-ttu-id="2212e-251">因此，若要计算发票金额，可以设计使用内置的 ER 舍入函数的以下表达式：`ROUND (InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit, 2)`。</span><span class="sxs-lookup"><span data-stu-id="2212e-251">Therefore, to calculate the invoiced amount, you can design the following expression that uses the built-in ER rounding function: `ROUND (InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit, 2)`.</span></span>

<span data-ttu-id="2212e-252">设计 ER 模型映射和 ER 报表时，可以使用以下类别的 ER 函数：</span><span class="sxs-lookup"><span data-stu-id="2212e-252">When you design ER model mappings and ER reports, you can use ER functions from the following categories:</span></span>

- [<span data-ttu-id="2212e-253">日期和时间函数</span><span class="sxs-lookup"><span data-stu-id="2212e-253">Date and time functions</span></span>](er-functions-category-datetime.md)
- [<span data-ttu-id="2212e-254">列表函数</span><span class="sxs-lookup"><span data-stu-id="2212e-254">List functions</span></span>](er-functions-category-list.md)
- [<span data-ttu-id="2212e-255">逻辑函数</span><span class="sxs-lookup"><span data-stu-id="2212e-255">Logical functions</span></span>](er-functions-category-logical.md)
- [<span data-ttu-id="2212e-256">数学函数</span><span class="sxs-lookup"><span data-stu-id="2212e-256">Mathematical functions</span></span>](er-functions-category-mathematical.md)
- [<span data-ttu-id="2212e-257">记录函数</span><span class="sxs-lookup"><span data-stu-id="2212e-257">Record functions</span></span>](er-functions-category-record.md)
- [<span data-ttu-id="2212e-258">文本函数</span><span class="sxs-lookup"><span data-stu-id="2212e-258">Text functions</span></span>](er-functions-category-text.md)
- [<span data-ttu-id="2212e-259">数据收集功能</span><span class="sxs-lookup"><span data-stu-id="2212e-259">Data collection functions</span></span>](er-functions-category-data-collection.md)
- [<span data-ttu-id="2212e-260">其他（业务域特定的）函数</span><span class="sxs-lookup"><span data-stu-id="2212e-260">Other (business domain–specific) functions</span></span>](er-functions-category-other.md)
- [<span data-ttu-id="2212e-261">类型转换函数</span><span class="sxs-lookup"><span data-stu-id="2212e-261">Type conversion functions</span></span>](er-functions-category-type-conversion.md)

## <a name="functions-list-extension"></a><span data-ttu-id="2212e-262">函数的列表扩展</span><span class="sxs-lookup"><span data-stu-id="2212e-262">Functions list extension</span></span>

<span data-ttu-id="2212e-263">ER 允许您扩展 ER 表达式中使用的函数列表的功能。</span><span class="sxs-lookup"><span data-stu-id="2212e-263">ER lets you extend the list of functions that are used in ER expressions.</span></span> <span data-ttu-id="2212e-264">需要执行一些工程工作。</span><span class="sxs-lookup"><span data-stu-id="2212e-264">Some engineering effort is required.</span></span> <span data-ttu-id="2212e-265">有关详细信息，请参阅[扩展电子申报 (ER) 功能的列表](general-electronic-reporting-formulas-list-extension.md)。</span><span class="sxs-lookup"><span data-stu-id="2212e-265">For detailed information, see [Extend the list of Electronic reporting (ER) functions](general-electronic-reporting-formulas-list-extension.md).</span></span>

## <a name="compound-expressions"></a><span data-ttu-id="2212e-266">复合表达式</span><span class="sxs-lookup"><span data-stu-id="2212e-266">Compound expressions</span></span>

<span data-ttu-id="2212e-267">如果数据类型匹配，您可以创建使用不同类别函数的复合表达式。</span><span class="sxs-lookup"><span data-stu-id="2212e-267">You can create compound expressions that use functions from different categories, provided that the data types match.</span></span> <span data-ttu-id="2212e-268">将函数一起使用时，将一个函数的输出数据类型与另一函数所需的输入数据类型匹配。</span><span class="sxs-lookup"><span data-stu-id="2212e-268">When you use functions together, match the data type of the output from one function to the input data type that is required by another function.</span></span> <span data-ttu-id="2212e-269">例如，为避免在将字段绑定到 ER 格式元素时可能出现的“列表为空”错误，请将[列表](er-functions-category-list.md)类别的函数与[逻辑](er-functions-category-logical.md)类别的函数组合，如下例所示。</span><span class="sxs-lookup"><span data-stu-id="2212e-269">For example, to avoid a possible "list-is-empty" error in a binding of a field to an ER format element, combine functions from the [List](er-functions-category-list.md) category with a function from the [Logical](er-functions-category-logical.md) category, as the following example shows.</span></span> <span data-ttu-id="2212e-270">在这里，公式使用 [IF](er-functions-logical-if.md) 函数测试 **IntrastatTotals** 列表在从该列表返回所需聚合的值之前是否为空。</span><span class="sxs-lookup"><span data-stu-id="2212e-270">Here, the formula uses the [IF](er-functions-logical-if.md) function to test whether the **IntrastatTotals** list is empty before it returns the value of the required aggregation from that list.</span></span> <span data-ttu-id="2212e-271">如果 **IntrastatTotals** 列表为空，公式将返回 **0**（零）。</span><span class="sxs-lookup"><span data-stu-id="2212e-271">If the **IntrastatTotals** list is empty, the formula returns **0** (zero).</span></span>

```vb
IF(ISEMPTY(IntrastatTotals), 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
```

## <a name="multiple-solutions"></a><span data-ttu-id="2212e-272">多种解决方案</span><span class="sxs-lookup"><span data-stu-id="2212e-272">Multiple solutions</span></span>

<span data-ttu-id="2212e-273">通常，通过使用不同类别的函数或相同类别的不同函数，您可以通过多种方式获得相同的数据换算结果。</span><span class="sxs-lookup"><span data-stu-id="2212e-273">Often, you can get the same data transformation result in multiple ways, by using functions from different categories or different functions from the same category.</span></span> <span data-ttu-id="2212e-274">例如，也可以使用[列表](er-functions-category-list.md)类别的 [COUNT](er-functions-list-count.md) 函数来配置前一个表达式。</span><span class="sxs-lookup"><span data-stu-id="2212e-274">For example, the previous expression can also be configured by using the [COUNT](er-functions-list-count.md) function from the [List](er-functions-category-list.md) category.</span></span>

```vb
IF(COUNT (IntrastatTotals)=0, 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
```

## <a name="additional-resources"></a><span data-ttu-id="2212e-275">其他资源</span><span class="sxs-lookup"><span data-stu-id="2212e-275">Additional resources</span></span>

[<span data-ttu-id="2212e-276">电子申报概览</span><span class="sxs-lookup"><span data-stu-id="2212e-276">Electronic Reporting overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="2212e-277">电子报告中的配方设计器</span><span class="sxs-lookup"><span data-stu-id="2212e-277">Formula designer in Electronic reporting</span></span>](general-electronic-reporting-formula-designer.md)

[<span data-ttu-id="2212e-278">扩展电子报告功能的列表</span><span class="sxs-lookup"><span data-stu-id="2212e-278">Extend the list of Electronic reporting functions</span></span>](general-electronic-reporting-formulas-list-extension.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]