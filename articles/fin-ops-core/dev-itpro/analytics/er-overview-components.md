---
title: 电子报告组件
description: 本主题介绍电子报告 (ER) 组件。
author: nselin
ms.date: 09/28/2021
ms.topic: ''
ms.prod: ''
ms.technology: ''
ms.search.form: ERWorkspace
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 58941
ms.assetid: 5d51b6a6-ad12-4af9-a66d-a1eb820ae57f
ms.search.region: global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: de8bccf5a8a9bb81be51658010ad4c2ef67aabb2
ms.sourcegitcommit: 86f0574363fb869482ef73ff294f345f81d17c5b
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/29/2021
ms.locfileid: "7562241"
---
# <a name="electronic-reporting-components"></a>电子报告组件

[!include [banner](../includes/banner.md)]

电子报告 (ER) 支持以下组件类型：

- 数据模型
- 模型映射
- 格式
- 元数据

## <a name="data-model-component"></a>数据模型组件

数据模型组件是数据结构的抽象表现形式。 它用足够的详细信息描述一个特定的业务域领域以满足该域的报告要求。 数据模型组件由以下部分组成︰

- **数据模型** - 一组特定于域的业务实体以及这些实体之间的关系的分层式定义。
- **模型映射** - 将选定的应用程序数据源关联到数据模型的各个元素，该数据模型在运行时指定用于在数据模型组件中输入业务数据的数据流和规则。

数据模型的业务实体表示为容器或记录。 业务实体属性表示为数据项或字段。 每个数据项具有一个唯一的名称、标签、描述和值。 每个数据项的值可以设计，以便它被识别为字符串、整数、实数、日期、枚举或布尔值。 此外，数据项可以是另一条记录或记录列表。

单个数据模型组件可以包含特定域的业务实体的若干层次结构。 它还可以包含在运行时间支持特定报告的数据流的模型映射。 层次结构通过被选择为模型映射的根的单一记录区分。 例如，付款域区域的数据模型可支持以下映射：


- 公司 \> 供应商 \> AP 域的付款交易记录
- 客户 \> 公司 \> AP 域的付款交易记录

业务实体（如公司和付款交易记录）是仅一次性设计而成。 不同的映射可以根据需要重用它们。

## <a name="model-mapping-component"></a>模型映射组件

模型映射将应用程序数据源关联到数据模型的各个元素，这些元素在运行时指定用于在数据模型组件中输入业务数据的数据流和规则。

支持传出电子文档的模型映射具有以下功能：

- 它可以使用不同的数据类型作为数据模型的数据源。 这些数据类型包括表、数据实体、方法和枚举。
- 当某些数据必须在运行时指定时，它支持用户输入可定义为数据模型数据源的参数。
- 它支持将数据转换成所需的组。 您还可以对数据进行筛选、排序和汇总，并且还追加通过与 Microsoft Excel 公式类似的公式设计的逻辑计算字段。 有关详细信息，请参阅[电子申报 (ER) 中的公式设计器](general-electronic-reporting-formula-designer.md)。

支持传入电子文档的模型映射具有以下功能：

- 它可以使用不同的可更新数据元素作为目标。 这些数据元素包括表、数据实体和视图。 这些数据可以使用来自电子文档的传入数据进行更新。 可以在单个模型映射中使用多个目标。
- 当某些数据必须在运行时指定时，它支持用户输入可定义为数据模型数据源的参数。

数据模型组件是针对用作统一数据源进行报告的每个业务域设计的。 统一数据源将报告与数据源的实际实现隔离开来。 组件表示提高了报告格式的初始设计和后续维护的效率的窗体中特定于域的业务概念和功能。

## <a name="format-component"></a>格式组件

### <a name="format-components-for-outgoing-electronic-documents"></a>传出电子文档的格式组件

格式组件是在运行时生成的报告输出的方案。 方案由下列元素组成︰

- 定义在运行时生成的传出电子文档的结构和内容的格式。
- 数据源，形式为一组用户输入参数和使用所选模型映射的特定于域的数据模型。
- 一个格式映射，形式为具有某个格式的单独元素的格式数据源的一组绑定，该格式在运行时指定用于生成格式输出的数据流和规则。
- 一个格式验证，形式为在运行时根据运行上下文控制报表生成的一组可配置规则。 例如，可能存在规则在选定供应商的特定属性（例如银行帐号）缺失时停止供应商付款的输出生成并引发异常。

格式组件支持以下函数︰

- 使用不同格式（例如文本、XML、Microsoft Word 文档或工作表）作为单个文件创建报告输出
- 单独创建多个文件，并将这些文件封装为 zip 文件

格式组件能让您附加可在报告输出中使用的特定文件：

- 包含可用作使用 OPENXML 工作表格式输出的模板的工作表的 Excel 工作簿
- 包含可用作 Microsoft Word 文档格式的输出模板的文档的 Word 文件
- 其他文件可合并到格式的输出中以坐为预定义文件

下图显示这些格式的数据流情况。

[![传入格式组件的数据流。](./media/ER-overview-03.png)](./media/ER-overview-03.png)

要运行单个 ER 格式配置以从传入电子文档导入数据，请确定格式配置的预期映射，以及模型映射的集成点。 您可以使用不同的格式为不同类型的传入文档同时使用相同的模型映射和目标。

## <a name="component-versioning"></a>组件版本控制

ER 组件支持版本控制。 提供了以下工作流以便在 ER 组件中管理更改：

1. 最初创建的版本被标记为 **草稿** 版本。 此版本可进行编辑，并可用于测试运行。
2. **草稿** 版本可以转换为 **已完成** 版本。 此版本可在本地报告流程中使用。
3. **已完成** 版本可以转换为 **共享** 版本。 此版本在 Microsoft Dynamics Lifecycle Services (LCS) 上发布，并可在全球报告流程中使用。
4. **共享** 版本可以转换为 **已终止** 版本。 可以删除此版本。

状态为 **已完成** 或 **共享** 的版本可用于其他数据交换。 可以对具有这些状态的组件执行以下操作：

- 该组件可以以 XML 格式序列化并导出为 XML 格式的文件。
- 组件可以从 XML 文件重新序列化并作为 ER 组件的新版本导入到应用程序中。

## <a name="component-date-effectivity"></a>组件日期有效性

ER 组件版本是有时限的。 可以设置 ER 组件的“生效日期”，以指定此组件开始对报告流程生效时的日期。 应用程序会话日期用于定义组件是否对执行有效。 当多个版本在特定日期生效时，最新版本将用于报告流程。

## <a name="component-access"></a>组件访问权限

对 ER 格式组件的访问权限取决于国际标准化组织 (ISO) 国家/地区代码的设置。 如果所选格式配置的版本的这一设置为空，则可以在运行时从任何公司访问格式组件。 如果此设置包含 ISO 国家/地区代码，则格式组件只能从为格式组件 ISO 国家/地区代码之一定义了主要地址的公司访问。

不同版本的数据格式组件可以有不同的 ISO 国家/地区代码设置。

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]

