---
title: ER 通过采用该格式的新的基本版本升级格式
description: 本主题介绍如何维护电子报告 (ER) 格式配置。
author: NickSelin
manager: AnnBe
ms.date: 08/29/2018
ms.topic: business-process
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ERWorkspace, ERVendorPart, ERSolutionTable, ERSolutionCreateDropDialog, EROperationDesigner, ERComponentTypeDropDialog
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: b76fb09ff961a3100b6a4bf890c1b12e6a0a2771
ms.sourcegitcommit: 5192cfaedfd861faea63d8954d7bcc500608a225
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/30/2021
ms.locfileid: "5092558"
---
# <a name="er-upgrade-your-format-by-adopting-a-new-base-version-of-that-format"></a>ER 通过采用该格式的新的基本版本升级格式

[!include [banner](../../includes/banner.md)]

以下步骤说明属于系统管理员或电子报表开发人员的用户如何维护电子申报 (ER) 格式配置。 此过程说明如何基于配置提供程序 (CP) 接收的格式创建格式的自定义版本。 它还说明如何采用该格式的新的基本版本。

为了完成这些步骤，您必须首先完成“创建配置提供程序并标记其为有效“和“使用创建的格式生成电子付款单据”过程中的步骤。 这些步骤可以在 GBSI 公司执行。

## <a name="select-format-configuration-for-customization"></a>选择自定义格式配置
1. 转到“组织管理”>“工作区”>“电子申报”。

    在此示例中，示例公司 Litware 公司 (https://www.litware.com) 将充当支持特定国家/地区的电子付款的格式配置的配置提供商。    示例公司 Proseware 公司 (http://www.proseware.com) 将充当 Litware 公司提供的格式配置的使用者。 Proseware 公司在该国家/地区的某些地区使用格式。  
2. 单击“申报配置”。
3. 单击“显示筛选器”。
4. 应用以下筛选器：使用“开头为”筛选器运算符在“名称”字段中输入筛选器值“BACS（英国虚构）”。
  
    提供商 Litware 公司拥有所选格式配置 BACS（英国虚构）。  

5. 单击“显示筛选器”。
6. 在列表中，找到并选择所需记录。

    状态为“已完成”的格式的版本将由 Proseware, Inc 用于 自定义。  

## <a name="create-a-new-configuration-for-your-custom-format-of-electronic-document"></a>为您的电子单据自定义格式创建新配置
Proseware 公司收到包含初始格式的 BACS（英国虚构）配置的版本 1.1 以根据其服务订阅从 Litware 公司生成电子付款单据。 Proseware 公司想要开始使用此作为他们的国家/地区的标准，但支持特定的地区要求需要部分自定义。 Proseware 公司还想要保留 Litware 公司一提供自定义格式的新版本（通过对支持新国家/地区特定要求的更改）即升级自定义格式的能力，并希望以最低的成本执行此项升级。  

因此，Proseware 公司需要以 Litware 公司配置 BACS（英国虚构）为基础创建配置。  

1. 关闭该页面。
2. 选择 Proseware 公司将其设置为有效的提供商。
3. 单击“设置有效”。
4. 单击“申报配置”。
5. 在树结构中，展开“付款（简化模型）”。
6. 在树结构中，选择“付款（简化模型）\BACS（英国虚构）”。

    选择 Litware 公司的 BACS（英国虚构）配置。Proseware 公司将使用版本 1.1 作为自定义版本的基础。  

7. 单击“创建配置”，以打开下拉对话框。

    可供您创建自定义付款格式的新配置。  

8. 在“新建”字段中，输入“从名称派生：BACS（英国虚构），Litware 公司”。

    选择“派生”选项以确认使用 BACS（英国虚构）作为创建自定义版本的基础。  

9. 在“名称”字段中，键入“BACS（英国虚构自定义）”。
10. 在“描述”字段中，键入“银行自动对帐系统供应商付款（英国虚拟自定义）”。

    有效配置提供商 (Proseware, Inc.) 将自动在此输入。 此提供商可以维护此配置。 其他提供商可以使用此配置，但不能对其进行维护。  

11. 单击“创建配置”。

## <a name="customize-your-format-for-the-electronic-document"></a>自定义电子单据格式
1. 单击“设计器”。
2. 单击”展开/折叠“。
3. 单击”展开/折叠“。
4. 在树结构中，选择“Xml\消息\付款\项\供应商\银行”。
5. 单击“添加”以打开下拉对话框。
6. 在树结构中，选择“XML\元素”。
7. 在“名称”字段中，键入“IBAN”。
8. 单击“确定”。
9. 在树结构中，选择“Xml\消息\付款\项\供应商\银行\IBAN”。
10. 单击“添加”以打开下拉对话框。
11. 在树结构中，选择“文本\字符串”。
12. 单击“确定”。
13. 在树结构中，选择“Xml\消息\付款\项\供应商\名称\字符串”。
14. 在“最大长度”字段中，输入 '60'。
15. 单击“映射”选项卡。
16. 在树结构中，展开“模型”。
17. 在树结构中，展开“模型\付款”。
18. 在树结构中，展开“模型\付款\贷方”。
19. 在树结构中，展开“模型\付款\贷方\金额”。
20. 在树结构中，选择“模型\付款\贷方\帐户\IBAN”。
21. 在树结构中，选择“Xml\消息\付款\项 = 模型.付款\供应商\银行\IBAN\字符串”。
22. 单击“绑定”。
23. 单击“保存”。

## <a name="validate-the-customized-format"></a>验证自定义格式
1. 单击“验证”。

    验证自定义的格式布局和数据映射更改，以确保所有绑定正常。  

2. 关闭该页面。

## <a name="change-the-status-of-the-current-version-of-the-custom-format-configuration"></a>更改自定义格式配置的当前版本状态
将设计的格式配置的状态从“草稿”更改为“已完成”，以使得可供付款单据生成使用。  

1. 单击“更改状态”。

    请注意，所选配置的当前版本为“草稿”状态。  

2. 单击“完成”。
3. 在“描述”字段中，键入一个值。
4. 单击“确定”。
5. 在列表中，找到并选择所需记录。

    请注意已创建配置保存为已完成版本 1.1.1。 这意味着它是自定义 BACS（英国虚构自定义）格式的版本 1，其基于 BACS（英国虚构）格式的版本 1，且基于付款（简化模型）数据模型的版本 1。  

## <a name="test-the-customized-format-to-generate-payment-files"></a>测试自定义格式以生成付款文件
在一个并行 Finance and Operations 会话中完成“使用创建的格式生成付款电子单据”过程中的步骤。 在电子付款方式参数中选择 BACS（英国虚构自定义）格式。 确保创建的付款文件包含最近引入的根据区域要求呈现 IBAN 代码的 XML 代码。  

## <a name="update-the-existing-country-specific-configuration"></a>更新现有国家/地区特定配置
Litware 公司需要更新 BACS（英国虚构）配置并采用管理电子单据格式的新的国家/地区要求。 随后，这将包括在将为服务订阅者（包括 Proseware, Inc.）提供的此配置的新版本中。  

在实际的服务设置相关流程中，BACS（英国虚构）的每个新版本可由 Proseware 公司从 Litware 公司配置的 LCS 存储库导入。 在此过程中，我们将通过代表服务提供商更新 BACS（英国虚构）来模拟此操作。  

1. 关闭该页面。
2. 选择 Litware 公司 提供程序。
3. 单击“设置有效”。
4. 单击“申报配置”。
5. 在树结构中，展开“付款（简化模型）”。
6. 在树结构中，选择“付款（简化模型）\BACS（英国虚构）”。

    Litware 公司提供商 BACS（英国虚构）拥有的草稿版本被选择引入更改以支持新的特定于国家/地区的要求。  

## <a name="localize-the-base-format-of-the-electronic-document"></a>本地化电子单据的基本格式
假定具有某些由 Litware 公司支持的新的国家/地区特定要求：  

- 每个付款交易记录中的贷方银行 SWIFT 代码的值。
- 生成文件时供应商名称的文本长度限制为 100 个字符。  
- 新国家/地区特定要求  
- 选择所需配置的草稿版本以引入所需的更改。  


1. 单击“设计器”。
2. 单击”展开/折叠“。
3. 单击”展开/折叠“。
4. 在树结构中，选择“Xml\消息\付款\项\供应商\银行”。
5. 单击“添加”以打开下拉对话框。
6. 在树结构中，选择“XML\元素”。
7. 在“名称”字段中，键入“SWIFT”。
8. 单击“确定”。
9. 在树结构中，选择“Xml\消息\付款\项\供应商\银行\SWIFT”。
10. 单击“添加”以打开下拉对话框。
11. 在树结构中，选择“文本\字符串”。
12. 单击“确定”。
13. 在树结构中，选择“Xml\消息\付款\项\供应商\名称\字符串”。
14. 在“最大长度”字段中，输入 '100'。
15. 单击“映射”选项卡。
16. 在树结构中，展开“模型”。
17. 在树结构中，展开“模型\付款”。
18. 在树结构中，展开“模型\付款\贷方”。
19. 在树结构中，展开“模型\付款\贷方\代理”。
20. 在树结构中，选择“模型\付款\贷方\代理\SWIFT”。
21. 在树结构中，选择“Xml\消息\付款\项 = 模型.付款\供应商\银行\SWIFT\字符串”。
22. 单击“绑定”。
23. 单击“保存”。

## <a name="validate-the-localized-format"></a>验证本地化格式
1. 单击“验证”。
2. 关闭该页面。

## <a name="change-the-status-of-the-current-version-of-the-base-format-configuration"></a>更改基本格式配置的当前版本状态
将更新的基本格式配置的状态从“草稿”更改为“已完成”，以使它可用于付款单据的生成以及从其派生的格式配置的更新。  

1. 单击“更改状态”。

    请注意，所选配置的当前版本为“草稿”状态。  

2. 单击“完成”。
3. 在“描述”字段中，键入一个值。
4. 单击“确定”。
5. 在列表中，找到并选择所需记录。

## <a name="change-the-base-version-for-the-custom-format-configuration"></a>更改自定义格式配置的基本版本

Proseware 公司获知 BACS（英国虚构）配置的新版本 1.2 可用于根据最近颁布的特定于国家/地区的要求生成电子付款单据。 Proseware 公司想要开始使用其作为国家/地区的标准。  

因此，Proseware 公司需要更改自定义配置 BACS（英国虚构自定义）的基本配置版本。 使用新版本 1.2，而不是 BACS（英国虚构）的版本 1.1。  

1. 转到“组织管理”>“工作区”>“电子申报”。
2. 选择 Proseware 公司提供商将其设置为有效的提供商。
3. 单击“设置有效”。
4. 单击“申报配置”。
5. 在树结构中，展开“付款（简化模型）”。
6. 在树结构中，展开“付款（简化模型）\BACS（英国虚构）”。
7. 在树结构中，选择“付款（简化模型）\BACS（英国虚构）\BACS（英国虚构自定义）”。

    选择 Proseware, Inc 拥有的 BACS（英国虚构）配置。  

    使用所选配置的草稿版本以引入所需的更改。  

8. 单击“重定基本值”。

    选择基本配置的新版本 1.2 用作更新配置的新基准。  

9. 单击“确定”。

    请注意，已在合并自定义版本和表示不能自动合并的一些格式更改的新基本版本之间发现某些冲突。  

## <a name="resolve-rebase-conflicts"></a>解决重定基本值冲突
1. 单击“设计器”。
    
    请注意，无法自动解决对供应商名称文本长度限制的更改。 因此，这在冲突列表中呈现。 对于每个“更新”类型的冲突，提供以下选项：- 应用之前的基值（网格顶部的按钮）以引入以前的基本版本值（我们的案例中是 0）。  - 应用基值（网格顶部的按钮）以引入新的基本版本值（我们的案例中是 100）。  - 保留自己的（自定义）值（我们的示例值为 60）。  单击“应用基值”为供应商名称文本长度应用 100 个字符的国家/地区特定限制。  

    请注意，Proseware 公司和 Litware 公司具有使用 IBAN 和 SWIFT 代码（具有以管理格式自动合并的相关组件）的此格式的自定义和本地版本。  

2. 单击“应用基值”。

    单击“应用基值”为供应商名称应用 100 个字符的国家/地区特定限制。  

3. 单击“保存”。

    保存该格式将从冲突列表中删除已解决的冲突。  

4. 关闭该页面。

## <a name="change-the-status-of-the-new-version-of-the-custom-format-configuration"></a>更改自定义格式配置的新版本状态
1. 单击“更改状态”。

    将更新的自定义格式配置的状态从“草稿”更改为“已完成”。 这将使格式配置可用于生成付款单据。 请注意，所选配置的当前版本为“草稿”状态。  

2. 单击“完成”。
3. 在“描述”字段中，键入一个值。
4. 单击“确定”。

    请注意，已创建的配置保存为已完成的版本 1.2.2：基本 BACS（英国虚构自定义）格式的版本 2，基于基本 BACS（英国虚构）格式的版本 2，基于付款（简化模型）数据模型的版本 1。  

## <a name="test-the-customized-format-for-payment-files-generation"></a>测试付款文件生成的自定义格式
在一个并行 Finance and Operations 会话中完成“使用创建的格式生成付款电子单据”过程中的步骤。 在电子付款方式参数中选择已创建的“BACS（英国虚构自定义）”格式。 确保创建的付款文件包含 Proseware 公司最近引入的根据区域要求呈现 IBAN 帐户代码的 XML 代码。 该文件还应包含 Litware 公司近期根据国家/地区要求引入的 呈现 SWIFT 银行代码到的 XML 节点。  

