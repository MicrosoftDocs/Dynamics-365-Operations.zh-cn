---
title: 设计 ER 配置以从 CSV 格式的外部文件导入数据
description: 使用此过程可以设计电子报告配置以从 CSV 格式的外部文件将数据导入 Finance and Operations 应用。
author: NickSelin
manager: AnnBe
ms.date: 12/12/2017
ms.topic: business-process
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kfend
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-06-30
ms.dyn365.ops.version: Version 7.0.0
ms.openlocfilehash: 7fbae4570448a6bb1309ffe0092ff9b07825d717
ms.sourcegitcommit: 5192cfaedfd861faea63d8954d7bcc500608a225
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/30/2021
ms.locfileid: "5092758"
---
# <a name="design-er-configurations-to-import-data-from-external-csv-files"></a><span data-ttu-id="f6d23-103">设计 ER 配置以从 CSV 格式的外部文件导入数据</span><span class="sxs-lookup"><span data-stu-id="f6d23-103">Design ER configurations to import data from external CSV files</span></span>

[!include [banner](../../includes/banner.md)]

<span data-ttu-id="f6d23-104">使用此过程可以设计电子报告 (ER) 配置以从 CSV 格式的外部文件将数据导入应用程序。</span><span class="sxs-lookup"><span data-stu-id="f6d23-104">Use this procedure to design Electronic reporting (ER) configurations to import data in to the application from an external file in CSV format.</span></span> <span data-ttu-id="f6d23-105">在此过程中，将为示例公司 Litware 公司创建所需 ER 配置。若要完成这些步骤，您必须首先完成过程“ER 创建一个配置提供程序，并标记其为当前运行的”中的步骤。</span><span class="sxs-lookup"><span data-stu-id="f6d23-105">In this procedure, you will create the required ER configurations for the sample company, Litware, Inc. To complete these steps, you must first complete the steps in the procedure, "ER Create a configuration provider and mark it as active."</span></span>

<span data-ttu-id="f6d23-106">此过程是为向其分配了系统管理员角色或电子申报开发人员角色的用户创建的。</span><span class="sxs-lookup"><span data-stu-id="f6d23-106">This procedure is created for users with the assigned role of System administrator or Electronic reporting developer.</span></span> <span data-ttu-id="f6d23-107">可使用 USMF 数据集完成这些步骤。</span><span class="sxs-lookup"><span data-stu-id="f6d23-107">These steps can be completed using the USMF data set.</span></span>

<span data-ttu-id="f6d23-108">还必须下载以下文件并保存到本地：[Dynamics 365 Finance 电子申报示例](https://go.microsoft.com/fwlink/?linkid=862266)：1099model.xml、1099formatcsv.xml、1099entriescsv.csv。</span><span class="sxs-lookup"><span data-stu-id="f6d23-108">You must also download and save the following files locally: [Dynamics 365 Finance Electronic Reporting Examples](https://go.microsoft.com/fwlink/?linkid=862266): 1099model.xml, 1099formatcsv.xml, 1099entriescsv.csv.</span></span>

1. <span data-ttu-id="f6d23-109">转到“组织管理”>“工作区”>“电子申报”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-109">Go to Organization administration > Workspaces > Electronic reporting.</span></span>
    * <span data-ttu-id="f6d23-110">您可以配置一个流程，以 XML、TXT 或 CSV 格式将外部文件导入应用程序的表中。</span><span class="sxs-lookup"><span data-stu-id="f6d23-110">You can configure a process to import external files in XML, TXT, or CSV format to tables in the application.</span></span> <span data-ttu-id="f6d23-111">首先，必须从业务角度创建一个抽象数据模型来代表导入的数据 – 为此创建 ER 数据模型配置。</span><span class="sxs-lookup"><span data-stu-id="f6d23-111">First, you must create an abstract data model to represent the imported data, from a business standpoint – an ER data model configuration is created for that.</span></span> <span data-ttu-id="f6d23-112">接下来，将映射到设计的数据模型的导入文件结构定义为将数据从文件转移到抽象数据模型的方式 – 为此创建 ER 格式配置。</span><span class="sxs-lookup"><span data-stu-id="f6d23-112">Next, define a structure of the imported file that maps to the designed data model as the way to port data from the file to the abstract data model – an ER format configuration is created for that.</span></span> <span data-ttu-id="f6d23-113">然后，必须使用新的模型映射扩展 ER 数据模型配置，该映射介绍导入文件的数据和抽象数据模型的永久性数据如何用于更新申请表或数据实体。</span><span class="sxs-lookup"><span data-stu-id="f6d23-113">Then, the ER data model configuration must be extended with a new model mapping that describes how the data from the imported file and the persisted data from the abstract data model is used to update the application tables or data entities.</span></span>
    * <span data-ttu-id="f6d23-114">以下步骤显示外部跟踪的供应商交易记录如何从外部 CSV 文件导入以便以后用于 1099 窗体的供应商结算。</span><span class="sxs-lookup"><span data-stu-id="f6d23-114">The following steps show how externally tracked vendors' transactions are imported from the external CSV file for later use in the vendor's settlement for 1099's forms.</span></span>
    * <span data-ttu-id="f6d23-115">验证示例公司 Litware 公司的配置提供程序可用且标记为有效。</span><span class="sxs-lookup"><span data-stu-id="f6d23-115">Verify that the configuration provider for sample company, Litware, Inc. is available and marked as active.</span></span> <span data-ttu-id="f6d23-116">如果没有看到此配置提供程序，您必须首先完成“创建配置提供程序并标记为有效”这一过程中的步骤。</span><span class="sxs-lookup"><span data-stu-id="f6d23-116">If you don't see this configuration provider, you must first complete the steps in the procedure, "Create a configuration provider and mark it as active".</span></span>
2. <span data-ttu-id="f6d23-117">单击“申报配置”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-117">Click Reporting configurations.</span></span>
3. <span data-ttu-id="f6d23-118">应用“1099 付款模型”筛选器。</span><span class="sxs-lookup"><span data-stu-id="f6d23-118">Apply the '1099 Payments model' filter.</span></span> <span data-ttu-id="f6d23-119">如果您已经完成了过程“ER 针对电子申报创建从外部文件导入数据所需配置”，并且“1099 付款模型”配置在配置树中可用，则跳过下一个子任务的所有步骤。</span><span class="sxs-lookup"><span data-stu-id="f6d23-119">If you already completed the procedure," ER Create required configurations to import data from an external file for electronic reporting", and the '1099 Payments model' configuration is available in the configuration tree, skip all of the steps in the next sub-task.</span></span>

## <a name="add-a-new-er-model-configuration"></a><span data-ttu-id="f6d23-120">添加新 ER 模型配置</span><span class="sxs-lookup"><span data-stu-id="f6d23-120">Add a new ER model configuration</span></span>

1. <span data-ttu-id="f6d23-121">加载前面下载的 1099model.xml 文件，而不是创建新模型。</span><span class="sxs-lookup"><span data-stu-id="f6d23-121">Instead of creating a new model to support data import, load the 1099model.xml file that you previously downloaded.</span></span> <span data-ttu-id="f6d23-122">此文件中包含供应商的交易的自定义数据模型。</span><span class="sxs-lookup"><span data-stu-id="f6d23-122">This file contains the custom data model of vendors' transactions.</span></span> <span data-ttu-id="f6d23-123">此数据模型已映射到必要的数据组件。</span><span class="sxs-lookup"><span data-stu-id="f6d23-123">This data model is already mapped to the necessary data components.</span></span>
2. <span data-ttu-id="f6d23-124">单击“交换”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-124">Click Exchange.</span></span>
3. <span data-ttu-id="f6d23-125">单击“从 XML 文件加载”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-125">Click Load from XML file.</span></span>
4. <span data-ttu-id="f6d23-126">单击“浏览”并导航到前面下载的 1099model.xml 文件。</span><span class="sxs-lookup"><span data-stu-id="f6d23-126">Click Browse and navigate to the 1099model.xml file that you previously downloaded.</span></span>
5. <span data-ttu-id="f6d23-127">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-127">Click OK.</span></span>

## <a name="add-a-new-er-format-configuration-that-supports-data-import"></a><span data-ttu-id="f6d23-128">添加支持导入数据的新 ER 格式配置</span><span class="sxs-lookup"><span data-stu-id="f6d23-128">Add a new ER format configuration that supports data import</span></span>

1. <span data-ttu-id="f6d23-129">在树结构中，选择“1099 付款模型”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-129">In the tree, select '1099 Payments model'.</span></span>
2. <span data-ttu-id="f6d23-130">单击“创建配置”，以打开下拉对话框。</span><span class="sxs-lookup"><span data-stu-id="f6d23-130">Click Create configuration to open the drop dialog.</span></span>
3. <span data-ttu-id="f6d23-131">在“新建”字段中，输入“基于数据模型 1099 付款模型的格式”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-131">In the New field, enter 'Format based on data model 1099 Payments model'.</span></span>
4. <span data-ttu-id="f6d23-132">在“支持数据导入”字段中选择"是"。</span><span class="sxs-lookup"><span data-stu-id="f6d23-132">Select Yes in the Supports data import field.</span></span>
5. <span data-ttu-id="f6d23-133">按 ESC 键关闭此页。</span><span class="sxs-lookup"><span data-stu-id="f6d23-133">Press ESC key to close this page.</span></span>
    * <span data-ttu-id="f6d23-134">加载前面下载的文件 1099formatcsv.xml 文件，而不是创建新的 ER 格式来支持数据导入。</span><span class="sxs-lookup"><span data-stu-id="f6d23-134">Instead of creating a new ER format to support data import, load the 1099formatcsv.xml file that you previously downloaded.</span></span> <span data-ttu-id="f6d23-135">此文件中包含所需的 ER 格式，该格式定义传入 CSV 文件的结构以及此结构与供应商交易的数据模型的映射。</span><span class="sxs-lookup"><span data-stu-id="f6d23-135">This file contains the required ER format that defines the structure of the incoming CSV file and the mapping of this structure to the data model of the vendors' transactions.</span></span>
6. <span data-ttu-id="f6d23-136">单击“交换”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-136">Click Exchange.</span></span>
7. <span data-ttu-id="f6d23-137">单击“从 XML 文件加载”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-137">Click Load from XML file.</span></span>
    * <span data-ttu-id="f6d23-138">单击“浏览”并导航到前面下载的 1099formatcsv.xml 文件。</span><span class="sxs-lookup"><span data-stu-id="f6d23-138">Click Browse and navigate to the 1099formatcsv.xml file that you previously downloaded.</span></span>
8. <span data-ttu-id="f6d23-139">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-139">Click OK.</span></span>
9. <span data-ttu-id="f6d23-140">在树结构中，展开“1099 付款模型”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-140">In the tree, expand '1099 Payments model'.</span></span>
10. <span data-ttu-id="f6d23-141">在树结构中，选择“1099 付款模型\用于导入供应商的交易 (CSV)”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-141">In the tree, select '1099 Payments model\For importing vendors' transactions (CSV)'.</span></span>

## <a name="review-format-settings"></a><span data-ttu-id="f6d23-142">检查格式设置</span><span class="sxs-lookup"><span data-stu-id="f6d23-142">Review format settings</span></span>

1. <span data-ttu-id="f6d23-143">单击“设计器”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-143">Click Designer.</span></span>
2. <span data-ttu-id="f6d23-144">单击”展开/折叠“。</span><span class="sxs-lookup"><span data-stu-id="f6d23-144">Click Expand/collapse.</span></span>
3. <span data-ttu-id="f6d23-145">打开”显示详细信息“。</span><span class="sxs-lookup"><span data-stu-id="f6d23-145">Toggle 'Show details' on.</span></span>
    * <span data-ttu-id="f6d23-146">设计的格式表示 CSV 格式的外部文件的预期结构。</span><span class="sxs-lookup"><span data-stu-id="f6d23-146">The designed format represents the expected structure of the external file in CSV format.</span></span>
4. <span data-ttu-id="f6d23-147">在树中，选择“Incoming: File\Root: Sequence”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-147">In the tree, select 'Incoming: File\Root: Sequence'.</span></span>
    * <span data-ttu-id="f6d23-148">对于类型 SEQUENCE 的根元素，已选择了“特殊字符”字段中的选项“新行 - Windows (CR LF)”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-148">For the Root element of the type SEQUENCE, the option 'New line - Windows (CR LF)' has been selected in the 'Special characters' field.</span></span> <span data-ttu-id="f6d23-149">基于此设置，必须将分析文件的每一行视为单独的记录。</span><span class="sxs-lookup"><span data-stu-id="f6d23-149">Based on this setting, each line in the parsing file must be considered as a separate record.</span></span>
5. <span data-ttu-id="f6d23-150">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..*`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-150">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..*`.</span></span>
    * <span data-ttu-id="f6d23-151">对于类型 SEQUENCE 的 Root\Line 元素，已选择了“多样性”字段中的选项“一个 多个”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-151">For the Root\Line element of the type SEQUENCE, the option 'One many' has been selected in the 'Multiplicity' field.</span></span> <span data-ttu-id="f6d23-152">基于此设置，至少在分析文件中存在一个行。</span><span class="sxs-lookup"><span data-stu-id="f6d23-152">Based on this setting, at least one line will be presented in the parsing file.</span></span>
6. <span data-ttu-id="f6d23-153">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-153">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case`.</span></span>
    * <span data-ttu-id="f6d23-154">请注意，类型 CASE 的 Root\Line\Types 元素已添加为 Root\Line 序列的嵌套元素。</span><span class="sxs-lookup"><span data-stu-id="f6d23-154">Note that the Root\Line\Types element of the type CASE has been added as the nested element of the Root\Line sequence.</span></span> <span data-ttu-id="f6d23-155">由于此 CASE 元素包含 3 个嵌套序列元素，此设置假定我们在分析文件中预期要达到 3 个不同的行类型。</span><span class="sxs-lookup"><span data-stu-id="f6d23-155">Because this CASE element contains 3 nested sequence elements, this setting assumes that we expect to meet 3 different types of line in the parsing file.</span></span>
7. <span data-ttu-id="f6d23-156">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Header: Sequence 1..1`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-156">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Header: Sequence 1..1`.</span></span>
    * <span data-ttu-id="f6d23-157">类型 SEQUENCE 的 Root\Line\Types\Header 元素包含嵌套的 STRING 元素，其值已被定义为固定字符串值。</span><span class="sxs-lookup"><span data-stu-id="f6d23-157">The Root\Line\Types\Header element of the type SEQUENCE contains the nested STRING element the value of which has been defined as the fixed string value.</span></span> <span data-ttu-id="f6d23-158">此序列将分析分析文件的标题行。</span><span class="sxs-lookup"><span data-stu-id="f6d23-158">This sequence will parse the header line of the parsing file.</span></span>
8. <span data-ttu-id="f6d23-159">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-159">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)`.</span></span>
    * <span data-ttu-id="f6d23-160">类型 SEQUENCE 的 Root\Line\Types\Record 元素已被配置为分析交易记录行。</span><span class="sxs-lookup"><span data-stu-id="f6d23-160">The Root\Line\Types\Record element of the type SEQUENCE, has been configured to parse the transaction lines.</span></span> <span data-ttu-id="f6d23-161">请注意，“自定义分隔符”字符选项已被配置为逗号。</span><span class="sxs-lookup"><span data-stu-id="f6d23-161">Note that the 'Custom delimiter' character option has been configured as a comma.</span></span> <span data-ttu-id="f6d23-162">这意味着逗号将用作分析文件中此行类型的字段的分隔符。</span><span class="sxs-lookup"><span data-stu-id="f6d23-162">This means that the comma will be used as a fields' separator for this type of line in the parsing file.</span></span>
    * <span data-ttu-id="f6d23-163">请注意，已为 Root\Line\Types\Record 元素添加了多个不同数据类型的嵌套元素以用于作为分隔的字段分析交易记录行。</span><span class="sxs-lookup"><span data-stu-id="f6d23-163">Note that several nested elements of different data types have been added for the Root\Line\Types\Record element for parsing the transaction's lines as separated fields.</span></span> <span data-ttu-id="f6d23-164">请注意，“报价单申请表”选项没有配置为“无”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-164">Note that the 'Quotation application' option has been configured as 'None'.</span></span> <span data-ttu-id="f6d23-165">这意味着在分析文件中，此类型的所有字段都将被视为包含括住的字符。</span><span class="sxs-lookup"><span data-stu-id="f6d23-165">This means that in the parsing file, all fields of this type will be considered as having no enclosed characters.</span></span>
9. <span data-ttu-id="f6d23-166">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\TransactionDate: DateTime`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-166">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\TransactionDate: DateTime`.</span></span>
    * <span data-ttu-id="f6d23-167">例如，类型 DATETIME 的 Root\Line\Types\Record\TransactionDate 元素已被配置为从“M/d/yyyy”格式的分析文件获取交易日期和时间值。</span><span class="sxs-lookup"><span data-stu-id="f6d23-167">For example, the Root\Line\Types\Record\TransactionDate element of the type DATETIME has been configured to get the transaction's date and time value from the parsing file in the 'M/d/yyyy' format.</span></span>
10. <span data-ttu-id="f6d23-168">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\CountryCode: String 0..1`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-168">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\CountryCode: String 0..1`.</span></span>
    * <span data-ttu-id="f6d23-169">请注意，类型 STRING 的 Root\Line\Types\Record\CountryCode 元素已被配置为在“多样性”字段中包含选项“零个 一个”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-169">Note that Root\Line\Types\Record\CountryCode element of the type STRING has been configured as having the option 'Zero one' in the 'Multiplicity' field.</span></span> <span data-ttu-id="f6d23-170">此设置将分析行中的 CountryCode 字段的值视为可选。</span><span class="sxs-lookup"><span data-stu-id="f6d23-170">This setting considers the value of the CountryCode field in the parsing line as optional.</span></span>
11. <span data-ttu-id="f6d23-171">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\Remark: Sequence 1..1 (,)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-171">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Record: Sequence 1..1 (,)\Remark: Sequence 1..1 (,)`.</span></span>
    * <span data-ttu-id="f6d23-172">请注意，类型 SEQUENCE 的 Root\Line\Types\Record\Remark 元素已被配置为在“报价单申请表”字段中包含选项“所有”，并在“报价单标记”字段中包含双引号字符。</span><span class="sxs-lookup"><span data-stu-id="f6d23-172">Note that Root\Line\Types\Record\Remark element of the type SEQUENCE has been configured as having the option 'All' in the 'Quotation application' field and double quotes character in the 'Quotation mark' field.</span></span> <span data-ttu-id="f6d23-173">这意味着分析文件（由嵌套元素描述：STRING 类型的文本）中此行类型的所有字段都将被视为以双引号括住的字符。</span><span class="sxs-lookup"><span data-stu-id="f6d23-173">It means that all fields of this type of lines in the parsing file (described by the nested elements: Text of the STRING type) will be considered as enclosed in double quotes characters.</span></span>
12. <span data-ttu-id="f6d23-174">在树中，选择 `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Unparsed: Sequence 1..1`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-174">In the tree, select `Incoming: File\Root: Sequence\Line: Sequence 1..* \Types: Case\Unparsed: Sequence 1..1`.</span></span>
    * <span data-ttu-id="f6d23-175">类型 SEQUENCE 的 Root\Line\Types\Unparsed 元素已被配置为分析与父 CASE 元素中的上述结构不一致的结构的交易记录行。</span><span class="sxs-lookup"><span data-stu-id="f6d23-175">The Root\Line\Types\Unparsed element of the type SEQUENCE has been configured to parse the transaction lines for the structure which does not match the structure described above in the parent CASE element.</span></span>

## <a name="review-the-setting-of-the-format-mapping-to-the-data-model"></a><span data-ttu-id="f6d23-176">检查格式到数据模型的映射的设置</span><span class="sxs-lookup"><span data-stu-id="f6d23-176">Review the setting of the format mapping to the data model</span></span>

1. <span data-ttu-id="f6d23-177">单击”将格式映射到模型“。</span><span class="sxs-lookup"><span data-stu-id="f6d23-177">Click Map format to model.</span></span>
    * <span data-ttu-id="f6d23-178">模型映射“从 CSV 格式的模型映射”描述从传入的 CSV 文件到数据模型的数据传输的数据流。</span><span class="sxs-lookup"><span data-stu-id="f6d23-178">The model mapping 'Mapping to model from CSV format' describes the data flow of the data transfer from the incoming CSV file to the data model.</span></span>
2. <span data-ttu-id="f6d23-179">单击“设计器”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-179">Click Designer.</span></span>
3. <span data-ttu-id="f6d23-180">在树中，展开“格式”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-180">In the tree, expand 'format'.</span></span>
    * <span data-ttu-id="f6d23-181">请注意，设计的格式在此处表示为数据源组件。</span><span class="sxs-lookup"><span data-stu-id="f6d23-181">Note that the designed format is presented here as a data source component.</span></span>
4. <span data-ttu-id="f6d23-182">在树中，展开“format\Incoming: File(Incoming)”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-182">In the tree, expand 'format\Incoming: File(Incoming)'.</span></span>
5. <span data-ttu-id="f6d23-183">在树中，展开“format\Incoming: File(Incoming)\Root: Sequence(Root)”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-183">In the tree, expand 'format\Incoming: File(Incoming)\Root: Sequence(Root)'.</span></span>
6. <span data-ttu-id="f6d23-184">在树中，展开 `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-184">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)`.</span></span>
7. <span data-ttu-id="f6d23-185">在树中，展开 `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-185">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)`.</span></span>
8. <span data-ttu-id="f6d23-186">在树中，展开 `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-186">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)`.</span></span>
9. <span data-ttu-id="f6d23-187">在树中，展开 `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-187">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data`.</span></span>
10. <span data-ttu-id="f6d23-188">在树中，展开 `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\CountryCode: String 0..1 (CountryCode)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-188">In the tree, expand `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\CountryCode: String 0..1 (CountryCode)`.</span></span>
11. <span data-ttu-id="f6d23-189">在树中，选择 `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\TransactionDate: DateTime(TransactionDate)`。</span><span class="sxs-lookup"><span data-stu-id="f6d23-189">In the tree, select `format\Incoming: File(Incoming)\Root: Sequence(Root)\Line: Sequence 1..* (Line)\Types: Case(Types)\Record: Sequence 1..1 (,)(Record)\Data\TransactionDate: DateTime(TransactionDate)`.</span></span>
    * <span data-ttu-id="f6d23-190">请注意，所需格式元素和可选格式元素，如 TransactionDate 和 CountryCode，在预定义的“格式”数据源组件中看上去不同。</span><span class="sxs-lookup"><span data-stu-id="f6d23-190">Note that the required and optional format elements, such as TransactionDate and CountryCode, look different in the predefined 'format' data source component.</span></span>
12. <span data-ttu-id="f6d23-191">在树中，展开“交易记录 = '$both'”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-191">In the tree, expand 'Transactions = '$both''.</span></span>
    * <span data-ttu-id="f6d23-192">请注意，用于定义所导入文件的结构的格式的元素绑定到数据模型的元素。</span><span class="sxs-lookup"><span data-stu-id="f6d23-192">Note that the elements of the format that defines the structure of the imported file are bound to the elements of the data model.</span></span> <span data-ttu-id="f6d23-193">所导入 CSV 文件的内容将在运行时在现有数据模型中根据这些绑定排序。</span><span class="sxs-lookup"><span data-stu-id="f6d23-193">Based on these bindings, the content of the imported CSV file will be stored at run-time in the existing data model.</span></span> <span data-ttu-id="f6d23-194">请注意 CountryRegion 元素的绑定。</span><span class="sxs-lookup"><span data-stu-id="f6d23-194">Pay attention to the binding of the CountryRegion element.</span></span> <span data-ttu-id="f6d23-195">对于未指定国家/地区代码值的传入文件中的任何交易元素，将在数据模型中填充默认国家/地区代码“USA”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-195">For any transaction element in the incoming file that does not have a country code value specified, the default country code 'USA' will be populated in the data model.</span></span>
13. <span data-ttu-id="f6d23-196">打开“显示详细信息”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-196">Toggle on 'Show details'.</span></span>
14. <span data-ttu-id="f6d23-197">单击“验证”选项卡。</span><span class="sxs-lookup"><span data-stu-id="f6d23-197">Click the Validations tab.</span></span>
15. <span data-ttu-id="f6d23-198">单击“搜索”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-198">Click Search.</span></span>
16. <span data-ttu-id="f6d23-199">在“查找”字段中，键入“供应商”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-199">In the Find field, type 'vend'.</span></span>
17. <span data-ttu-id="f6d23-200">单击“查找下一个”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-200">Click Find next.</span></span>
    * <span data-ttu-id="f6d23-201">此格式映射中可以包含用户定义的逻辑，用于从业务角度验证导入的数据的精确性。</span><span class="sxs-lookup"><span data-stu-id="f6d23-201">This format mapping may contain user-defined logic to validate the accuracy of the imported data from a business standpoint.</span></span> <span data-ttu-id="f6d23-202">例如，基于此设置，对于导入文件中的任何行（其结构既不与标题行也不与交易记录行一致），将在通知用户此情况的信息日志中生成警告消息，在文件中指示交易记录的序列号。</span><span class="sxs-lookup"><span data-stu-id="f6d23-202">For example, based on the setting, for any line in the importing file the structure of which does not match neither the structure of the header line nor transaction line, a warning message will be generated in the Info log informing the user about this case, indicating the transaction's sequence number in the file.</span></span>
18. <span data-ttu-id="f6d23-203">关闭该页面。</span><span class="sxs-lookup"><span data-stu-id="f6d23-203">Close the page.</span></span>

## <a name="run-the-format-mapping"></a><span data-ttu-id="f6d23-204">运行格式映射</span><span class="sxs-lookup"><span data-stu-id="f6d23-204">Run the format mapping</span></span>

<span data-ttu-id="f6d23-205">为了进行测试，请使用以前下载的 1099entriescsv.csv 文件执行格式映射。</span><span class="sxs-lookup"><span data-stu-id="f6d23-205">For testing purposes, execute the format mapping using the 1099entriescsv.csv file that you previously downloaded.</span></span> <span data-ttu-id="f6d23-206">生成的输出代表将从所选 CSV 文件导入，并在实际导入时填充到自定义数据模型的数据。</span><span class="sxs-lookup"><span data-stu-id="f6d23-206">The generated output will present data that will be imported from the selected CSV file and populated to the custom data model at real import.</span></span>

1. <span data-ttu-id="f6d23-207">单击“运行”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-207">Click Run.</span></span>
    * <span data-ttu-id="f6d23-208">单击“浏览”并导航到前面下载的 1099entriescsv.csv 文件。</span><span class="sxs-lookup"><span data-stu-id="f6d23-208">Click Browse and navigate to the 1099entriescsv.csv file that you previously downloaded.</span></span>
2. <span data-ttu-id="f6d23-209">单击“确定”。</span><span class="sxs-lookup"><span data-stu-id="f6d23-209">Click OK.</span></span>
    * <span data-ttu-id="f6d23-210">请注意有关不接受的行的警告消息。</span><span class="sxs-lookup"><span data-stu-id="f6d23-210">Note the warning messages about lines that are not accepted.</span></span> <span data-ttu-id="f6d23-211">行 4 包含以不接受格式表示的收入值，而行 7 不包含使用双引号括住的交易注解文本。</span><span class="sxs-lookup"><span data-stu-id="f6d23-211">Line 4 contains the income value that is presented in the non-acceptable format while line 7 does not contain the transaction remark text in double quotes.</span></span>
    * <span data-ttu-id="f6d23-212">检查 XML 格式的输出，该输出表示已从所选文件导入并移植到数据模型的数据。</span><span class="sxs-lookup"><span data-stu-id="f6d23-212">Review the output in XML format that represents the data that has been imported from the selected file and ported to the data model.</span></span> <span data-ttu-id="f6d23-213">请注意，导入的 CSV 文件的所有 7 行都被处理。</span><span class="sxs-lookup"><span data-stu-id="f6d23-213">Note that all 7 lines of the imported CSV file were processed.</span></span> <span data-ttu-id="f6d23-214">包含字段的标题行 1 已跳过，4 个交易已正确分析，2 个交易被识别为无效。</span><span class="sxs-lookup"><span data-stu-id="f6d23-214">The containing fields' titles line 1 were skipped, 4 transactions were properly parsed, and 2 transactions were recognized as not valid.</span></span>
3. <span data-ttu-id="f6d23-215">关闭该页面。</span><span class="sxs-lookup"><span data-stu-id="f6d23-215">Close the page.</span></span>
4. <span data-ttu-id="f6d23-216">关闭该页面。</span><span class="sxs-lookup"><span data-stu-id="f6d23-216">Close the page.</span></span>
