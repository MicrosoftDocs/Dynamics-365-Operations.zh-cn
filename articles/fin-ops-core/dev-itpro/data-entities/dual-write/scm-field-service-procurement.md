---
title: 在 Supply Chain Management 和 Field Service 之间集成采购
description: 本主题介绍双写入集成如何支持采购订单的创建以及来自 Supply Chain Management 和 Field Service 的更新。
author: RichardLuan
manager: tfehr
ms.date: 11/11/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: rhaertle
ms.search.region: Global
ms.author: riluan
ms.search.validFrom: 2020-11-11
ms.dyn365.ops.version: Release 10.0.17
ms.openlocfilehash: c2b0d5be38425b5ceebb38b7964f5ec600b1c838
ms.sourcegitcommit: ca05440ee503bf15fe98fe138d317c1cdf21ad16
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/09/2021
ms.locfileid: "5141896"
---
# <a name="integrate-procurement-between-supply-chain-management-and-field-service"></a><span data-ttu-id="69aeb-103">在 Supply Chain Management 和 Field Service 之间集成采购</span><span class="sxs-lookup"><span data-stu-id="69aeb-103">Integrate procurement between Supply Chain Management and Field Service</span></span>

[!include [banner](../../includes/banner.md)]

[!include [banner](../../includes/preview-banner.md)]

<span data-ttu-id="69aeb-104">Microsoft Dynamics 365 Supply Chain Management 提供强大的采购功能。</span><span class="sxs-lookup"><span data-stu-id="69aeb-104">Microsoft Dynamics 365 Supply Chain Management provides robust procurement functionality.</span></span> <span data-ttu-id="69aeb-105">Dynamics 365 Field Service 提供支持与服务流程关联的采购流程的类似功能。</span><span class="sxs-lookup"><span data-stu-id="69aeb-105">Dynamics 365 Field Service offers similar functionality that supports the purchasing processes that are associated with the service process.</span></span> <span data-ttu-id="69aeb-106">这两个应用中的功能通过双写入进行集成，并通过表映射、解决方案逻辑、视图和窗体支持生成的跨功能用例。</span><span class="sxs-lookup"><span data-stu-id="69aeb-106">The functionality in these two apps is integrated through dual-write, and the resulting cross-functional use cases are enabled through table mappings, solution logic, views, and forms.</span></span>

<span data-ttu-id="69aeb-107">此集成支持创建采购订单，并在大多数情况下支持两个应用的更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-107">This integration supports purchase order creation and, in most cases, updates from both apps.</span></span> <span data-ttu-id="69aeb-108">但是，Supply Chain Management 控制定价、地址和产品收据。</span><span class="sxs-lookup"><span data-stu-id="69aeb-108">However, Supply Chain Management controls pricing, addresses, and product receipt.</span></span> <span data-ttu-id="69aeb-109">为同时使用 Field Service 和 Supply Chain Management 的组织支持多个强大的跨功能用例。</span><span class="sxs-lookup"><span data-stu-id="69aeb-109">Several powerful cross-functional use cases are enabled for organizations that use both Field Service and Supply Chain Management.</span></span> <span data-ttu-id="69aeb-110">这些用例可以跨两个系统发起和跟踪采购。</span><span class="sxs-lookup"><span data-stu-id="69aeb-110">These use cases enable procurements to be initiated and tracked across both systems.</span></span>

<span data-ttu-id="69aeb-111">下图显示了这两个系统中的表以及它们如何相互映射。</span><span class="sxs-lookup"><span data-stu-id="69aeb-111">The following illustration shows the tables in both systems and how they are mapped to each other.</span></span> <span data-ttu-id="69aeb-112">Field Service 中的采购订单引用 *帐户* 行，而 Supply Chain Management 中的采购订单引用 *供应商* 行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-112">Purchase orders in Field Service reference an *account* row, whereas purchase orders in Supply Chain Management reference a *vendor* row.</span></span> <span data-ttu-id="69aeb-113">为处理集成，双写入使用引用将 *供应商* 行与 *帐户* 行关联起来。</span><span class="sxs-lookup"><span data-stu-id="69aeb-113">To resolve the integration, dual-write uses a reference to link *vendor* rows with *account* rows.</span></span> <span data-ttu-id="69aeb-114">有关详细信息，请参阅[集成供应商主数据](vendor-mapping.md)。</span><span class="sxs-lookup"><span data-stu-id="69aeb-114">For more information, see [Integrated vendor master](vendor-mapping.md).</span></span>

![采购映射](media/scm-field-service-tables.png)

## <a name="prerequisites"></a><span data-ttu-id="69aeb-116">先决条件</span><span class="sxs-lookup"><span data-stu-id="69aeb-116">Prerequisites</span></span>

<span data-ttu-id="69aeb-117">要将 Supply Chain Management 与 Field Service 集成在一起，必须安装以下组件：</span><span class="sxs-lookup"><span data-stu-id="69aeb-117">To integrate Supply Chain Management with Field Service, you must install the following components:</span></span>

- <span data-ttu-id="69aeb-118">Field Service 版本 8.8.31.60 或更高版本，用于全面的采购订单集成</span><span class="sxs-lookup"><span data-stu-id="69aeb-118">Field Service version 8.8.31.60 or later, for comprehensive purchase order integration</span></span>
- <span data-ttu-id="69aeb-119">Supply Chain Management 版本 10.0.14 或更高版本</span><span class="sxs-lookup"><span data-stu-id="69aeb-119">Supply Chain Management version 10.0.14 or later</span></span>
- <span data-ttu-id="69aeb-120">双写入，用于运行 OneFSSCM 解决方案</span><span class="sxs-lookup"><span data-stu-id="69aeb-120">Dual-write, to run the OneFSSCM solution</span></span>

## <a name="installation-guidelines"></a><span data-ttu-id="69aeb-121">安装指南</span><span class="sxs-lookup"><span data-stu-id="69aeb-121">Installation guidelines</span></span>

### <a name="prerequisites"></a><span data-ttu-id="69aeb-122">先决条件</span><span class="sxs-lookup"><span data-stu-id="69aeb-122">Prerequisites</span></span>

+ <span data-ttu-id="69aeb-123">**双写入** – 有关详细信息，请参阅[双写入主页](dual-write-home-page.md#dual-write-setup)。</span><span class="sxs-lookup"><span data-stu-id="69aeb-123">**Dual-write** – For more information, see the [Dual-write home page](dual-write-home-page.md#dual-write-setup).</span></span>
+ <span data-ttu-id="69aeb-124">**Dynamics 365 Field Service** – 有关详细信息，请参阅[如何安装 Dynamics 365 Field Service](https://docs.microsoft.com/dynamics365/field-service/install-field-service#step-1-install-dynamics-365-field-service)。</span><span class="sxs-lookup"><span data-stu-id="69aeb-124">**Dynamics 365 Field Service** – For more information, see [How to install Dynamics 365 Field Service](https://docs.microsoft.com/dynamics365/field-service/install-field-service#step-1-install-dynamics-365-field-service).</span></span>

<span data-ttu-id="69aeb-125">在 Microsoft Dataverse 中启用时，双写入和 Field Service 将引入几个解决方案层，它们通过新的元数据、窗体、视图和逻辑扩展环境。</span><span class="sxs-lookup"><span data-stu-id="69aeb-125">When they are enabled in Microsoft Dataverse, dual-write and Field Service introduce several solution layers that extend the environment with new metadata, forms, views, and logic.</span></span> <span data-ttu-id="69aeb-126">这些解决方案可以按任何顺序启用，通常会按以下给定顺序安装：</span><span class="sxs-lookup"><span data-stu-id="69aeb-126">These solutions can be enabled in any order, though you typically install in the order that is given here:</span></span>

1. <span data-ttu-id="69aeb-127">**Field Service Common** – Field Service Common 在环境中安装了 Field Service 时安装。</span><span class="sxs-lookup"><span data-stu-id="69aeb-127">**Field Service Common** – Field Service Common is installed when Field Service is installed in the environment.</span></span>
2. <span data-ttu-id="69aeb-128">**Field Service（定位点）** – Field Service（定位点）在环境中安装了 Field Service 时安装。</span><span class="sxs-lookup"><span data-stu-id="69aeb-128">**Field Service (Anchor)** – Field Service (Anchor) is installed when Field Service is installed in the environment.</span></span> 
3. <span data-ttu-id="69aeb-129">**Supply Chain Management 扩展版** – Supply Chain Management 扩展版在环境中启用了双写入时自动安装。</span><span class="sxs-lookup"><span data-stu-id="69aeb-129">**Supply Chain Management Extended** – Supply Chain Management Extended is automatically installed when dual-write is enabled in an environment.</span></span> 
4. <span data-ttu-id="69aeb-130">**OneFSSCM 解决方案** – 无论最后安装的是哪个解决方案（Field Service 或 Supply Chain Management），都会自动安装 OneFSSCM。</span><span class="sxs-lookup"><span data-stu-id="69aeb-130">**OneFSSCM solution** – OneFSSCM is automatically installed by whichever solution (Field Service or Supply Chain Management) is installed last.</span></span>

    + <span data-ttu-id="69aeb-131">如果环境中已经安装 Field Service，并且您启用了双写入（这会安装 Supply Chain Management 扩展版），将安装 OneFSSCM。</span><span class="sxs-lookup"><span data-stu-id="69aeb-131">If Field Service is already installed in the environment, and you enable dual-write, which installs Supply Chain Management Extended, OneFSSCM is installed.</span></span>
    + <span data-ttu-id="69aeb-132">如果环境中已经安装 Supply Chain Management 扩展版，并且您安装了 Field Service，将安装 OneFSSCM。</span><span class="sxs-lookup"><span data-stu-id="69aeb-132">If Supply Chain Management Extended is already installed in the environment, and you install Field Service, OneFSSCM is installed.</span></span>

## <a name="initial-synchronization"></a><span data-ttu-id="69aeb-133">初始同步</span><span class="sxs-lookup"><span data-stu-id="69aeb-133">Initial synchronization</span></span>

<span data-ttu-id="69aeb-134">若要创建新采购订单并处理现有采购订单，必须在 Supply Chain Management 和 Dataverse 之间同步参考数据。</span><span class="sxs-lookup"><span data-stu-id="69aeb-134">To create new purchase orders and work with existing purchase orders, you must sync the reference data between Supply Chain Management and Dataverse.</span></span> <span data-ttu-id="69aeb-135">您使用初始写入功能来检测表关系和查找必须为给定映射启用的表。</span><span class="sxs-lookup"><span data-stu-id="69aeb-135">You use the initial write functionality to detect the table relationships and find the tables that you must enable for a given map.</span></span>

<span data-ttu-id="69aeb-136">您必须同步以下表：</span><span class="sxs-lookup"><span data-stu-id="69aeb-136">You must sync the following tables:</span></span>

- <span data-ttu-id="69aeb-137">产品模板</span><span class="sxs-lookup"><span data-stu-id="69aeb-137">Product templates</span></span>

    <span data-ttu-id="69aeb-138">运行初始写入时，将获得所需表的完整列表。</span><span class="sxs-lookup"><span data-stu-id="69aeb-138">When you run the initial write, you get a full list of the tables that are required.</span></span> <span data-ttu-id="69aeb-139">以下是这些模板的一些示例：</span><span class="sxs-lookup"><span data-stu-id="69aeb-139">Here are some examples of these templates:</span></span>

    - <span data-ttu-id="69aeb-140">所有产品</span><span class="sxs-lookup"><span data-stu-id="69aeb-140">All products</span></span>
    - <span data-ttu-id="69aeb-141">已发布产品 V2</span><span class="sxs-lookup"><span data-stu-id="69aeb-141">Released products V2</span></span>
    - <span data-ttu-id="69aeb-142">Dataverse 发布的独特产品</span><span class="sxs-lookup"><span data-stu-id="69aeb-142">Dataverse released distinct products</span></span>

- <span data-ttu-id="69aeb-143">站点</span><span class="sxs-lookup"><span data-stu-id="69aeb-143">Sites</span></span>
- <span data-ttu-id="69aeb-144">仓库</span><span class="sxs-lookup"><span data-stu-id="69aeb-144">Warehouses</span></span>
- <span data-ttu-id="69aeb-145">采购类别模板</span><span class="sxs-lookup"><span data-stu-id="69aeb-145">Procurement categories templates</span></span>

    <span data-ttu-id="69aeb-146">以下是这些模板的一些示例：</span><span class="sxs-lookup"><span data-stu-id="69aeb-146">Here are some examples of these templates:</span></span>

    - <span data-ttu-id="69aeb-147">采购类别</span><span class="sxs-lookup"><span data-stu-id="69aeb-147">Procurement categories</span></span>
    - <span data-ttu-id="69aeb-148">专业</span><span class="sxs-lookup"><span data-stu-id="69aeb-148">Pro</span></span>
    - <span data-ttu-id="69aeb-149">产品类别层次结构</span><span class="sxs-lookup"><span data-stu-id="69aeb-149">Product category hierarchy</span></span>
    - <span data-ttu-id="69aeb-150">产品类别分配</span><span class="sxs-lookup"><span data-stu-id="69aeb-150">Product category assignments</span></span>

- <span data-ttu-id="69aeb-151">供应商模板，如“供应商 V2”</span><span class="sxs-lookup"><span data-stu-id="69aeb-151">Vendor templates, such as Vendor V2</span></span>
- <span data-ttu-id="69aeb-152">联系人模板，如“Dataverse 联系人 V2”</span><span class="sxs-lookup"><span data-stu-id="69aeb-152">Contact person templates, such as Dataverse Contacts V2</span></span>
- <span data-ttu-id="69aeb-153">工作人员模板，如“工作人员”</span><span class="sxs-lookup"><span data-stu-id="69aeb-153">Worker templates, such as Worker</span></span>

<span data-ttu-id="69aeb-154">同步表可确保 Supply Chain Management 中的所有单据（采购订单和产品收据）在 Dataverse 中可用。</span><span class="sxs-lookup"><span data-stu-id="69aeb-154">Synchronization of the tables ensures that all documents (purchase orders and product receipts) in Supply Chain Management are available in Dataverse.</span></span>

### <a name="account-and-vendor-tables"></a><span data-ttu-id="69aeb-155">帐户和供应商表</span><span class="sxs-lookup"><span data-stu-id="69aeb-155">Account and Vendor tables</span></span>

<span data-ttu-id="69aeb-156">Field Service 中的采购订单依赖“帐户”表来跟踪供应商。</span><span class="sxs-lookup"><span data-stu-id="69aeb-156">Purchase orders in Field Service rely on the Account table to track vendors.</span></span> <span data-ttu-id="69aeb-157">因此，Dataverse 采购订单表使用帐户来跟踪供应商。</span><span class="sxs-lookup"><span data-stu-id="69aeb-157">Therefore, the Dataverse tables for purchase orders use accounts to track vendors.</span></span> <span data-ttu-id="69aeb-158">为了适应这一主要差异，必须激活以下四个工作流来让帐户和供应商保持同步：</span><span class="sxs-lookup"><span data-stu-id="69aeb-158">To accommodate this key difference, the following four workflows must be activated to keep the accounts and vendors in sync:</span></span> 

- <span data-ttu-id="69aeb-159">在“客户”表中创建供应商</span><span class="sxs-lookup"><span data-stu-id="69aeb-159">Create Vendors in Accounts table</span></span>
- <span data-ttu-id="69aeb-160">在“供应商”表中创建供应商</span><span class="sxs-lookup"><span data-stu-id="69aeb-160">Create Vendors in Vendors table</span></span>
- <span data-ttu-id="69aeb-161">在“客户”表中更新供应商</span><span class="sxs-lookup"><span data-stu-id="69aeb-161">Update Vendors in Accounts table</span></span>
- <span data-ttu-id="69aeb-162">在“供应商”表中更新供应商</span><span class="sxs-lookup"><span data-stu-id="69aeb-162">Update Vendors in Vendors table</span></span>

<span data-ttu-id="69aeb-163">如果安装了 OneFSSCM，由于同时安装了 Field Service 和 Supply Chain Management 扩展版，这些工作流将自动激活。</span><span class="sxs-lookup"><span data-stu-id="69aeb-163">If OneFSSCM is installed, because both Field Service and Supply Chain Management Extended are installed, these workflows are automatically activated.</span></span> <span data-ttu-id="69aeb-164">如果未安装 Field Service，但您想要将采购订单表与 Dataverse 集成，则必须激活这些工作流。</span><span class="sxs-lookup"><span data-stu-id="69aeb-164">If Field Service isn't installed, but you want to integrate the purchase order tables with Dataverse, you must activate these workflows.</span></span> <span data-ttu-id="69aeb-165">在这两种情况下，除非您从头开始，否则，您都可能必须要确保在创建采购订单之前在 Dataverse 中作为帐户创建所有供应商。</span><span class="sxs-lookup"><span data-stu-id="69aeb-165">In both cases, unless you start from scratch, you might have to ensure that all vendors are created as accounts in Dataverse before you create purchase orders.</span></span> <span data-ttu-id="69aeb-166">否则，可能会发生错误。</span><span class="sxs-lookup"><span data-stu-id="69aeb-166">Otherwise, errors might occur.</span></span>

### <a name="initial-synchronization"></a><span data-ttu-id="69aeb-167">初始同步</span><span class="sxs-lookup"><span data-stu-id="69aeb-167">Initial synchronization</span></span>

<span data-ttu-id="69aeb-168">满足所有先决条件之后，如果您希望现有的采购订单和产品收据在两个系统中都可以使用，必须对以下模板执行初始同步：</span><span class="sxs-lookup"><span data-stu-id="69aeb-168">After all the prerequisites are in place, if you want existing purchase orders and product receipts to be available in both systems, you must do an initial synchronization of the following templates:</span></span>

- <span data-ttu-id="69aeb-169">采购订单头 V2</span><span class="sxs-lookup"><span data-stu-id="69aeb-169">Purchase Order Header V2</span></span>
- <span data-ttu-id="69aeb-170">CDS 采购订单行</span><span class="sxs-lookup"><span data-stu-id="69aeb-170">CDS Purchase Order Line</span></span>
- <span data-ttu-id="69aeb-171">CDS 采购订单行软删除</span><span class="sxs-lookup"><span data-stu-id="69aeb-171">CDS Purchase Order Line soft delete</span></span>
- <span data-ttu-id="69aeb-172">采购订单收货</span><span class="sxs-lookup"><span data-stu-id="69aeb-172">Purchase Order Receipt</span></span>
- <span data-ttu-id="69aeb-173">采购订单收货产品</span><span class="sxs-lookup"><span data-stu-id="69aeb-173">Purchase Order Receipt Product</span></span>

## <a name="mappings-with-logic"></a><span data-ttu-id="69aeb-174">使用逻辑进行映射</span><span class="sxs-lookup"><span data-stu-id="69aeb-174">Mappings with logic</span></span>

<span data-ttu-id="69aeb-175">采购集成使用以下逻辑扩展产品映射，以确保在 Dataverse 中的产品表中正确设置 **Field Service 产品类型** 列：</span><span class="sxs-lookup"><span data-stu-id="69aeb-175">The procurement integration extends the product mapping with the following logic to ensure that the **Field Service Product Type** column is correctly set in the products table in Dataverse:</span></span>

- <span data-ttu-id="69aeb-176">如果 **产品类型** 设置为 *产品*，**物料模型组, 贮存的产品** 设置为 *True*，**Field Service 产品类型** 将设置为 *库存*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-176">If **Product Type** is set to *Product*, and **Item model group, Stocked product** is set to *True*, **Field Service Product Type** is set to *Inventory*.</span></span>
- <span data-ttu-id="69aeb-177">如果 **产品类型** 设置为 *产品*，**物料模型组, 贮存的产品** 设置为 *False*，**Field Service 产品类型** 将设置为 *非库存*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-177">If **Product Type** is set to *Product*, and **Item model group, Stocked product** is set to *False*, **Field Service Product Type** is set to *Non-Inventory*.</span></span>
- <span data-ttu-id="69aeb-178">如果 **产品类型** 设置为 *服务*，**Field Service 产品类型** 将设置为 *服务*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-178">If **Product Type** is set to *Service*, **Field Service Product Type** is set to *Service*.</span></span>

<span data-ttu-id="69aeb-179">此外，Dataverse 还包括用于将供应商与其相关帐户进行映射的逻辑。</span><span class="sxs-lookup"><span data-stu-id="69aeb-179">In addition, Dataverse includes logic that maps vendors with their related accounts.</span></span> <span data-ttu-id="69aeb-180">此逻辑设置默认发票供应商帐户。</span><span class="sxs-lookup"><span data-stu-id="69aeb-180">This logic sets the default invoice vendor account.</span></span> <span data-ttu-id="69aeb-181">创建时，服务器端插件逻辑从与该帐户相关的供应商设置默认发票供应商帐户。</span><span class="sxs-lookup"><span data-stu-id="69aeb-181">On create, server-side plug-in logic sets the default invoice vendor account from the vendor that is related to the account.</span></span> <span data-ttu-id="69aeb-182">供应商具有对用于设置此值的发票帐户的引用。</span><span class="sxs-lookup"><span data-stu-id="69aeb-182">The vendor has a reference to the invoice account that is used to set this value.</span></span>

## <a name="supported-scenarios"></a><span data-ttu-id="69aeb-183">支持的方案</span><span class="sxs-lookup"><span data-stu-id="69aeb-183">Supported scenarios</span></span>

+ <span data-ttu-id="69aeb-184">采购订单可以由 Dataverse 用户创建和更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-184">Purchase orders can be created and updated by Dataverse users.</span></span> <span data-ttu-id="69aeb-185">但是，流程和数据由 Supply Chain Management 控制。</span><span class="sxs-lookup"><span data-stu-id="69aeb-185">However, the process and data are controlled by Supply Chain Management.</span></span> <span data-ttu-id="69aeb-186">对 Supply Chain Management 中采购订单列的更新的约束在更新来自 Field Service 时应用。</span><span class="sxs-lookup"><span data-stu-id="69aeb-186">The constraints on updates to purchase order columns in Supply Chain Management apply when updates come from Field Service.</span></span> <span data-ttu-id="69aeb-187">例如，如果采购订单已完成，则无法进行更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-187">For example, you can't update a purchase order if it has been finalized.</span></span> 
+ <span data-ttu-id="69aeb-188">如果采购订单由 Supply Chain Management 中的更改管理控制，Field Service 用户则只能在 Supply Chain Management 审核状态为 *草稿* 时更新采购订单。</span><span class="sxs-lookup"><span data-stu-id="69aeb-188">If the purchase order is controlled by change management in Supply Chain Management, a Field Service user can update the purchase order only when the Supply Chain Management approval status is *Draft*.</span></span>
+ <span data-ttu-id="69aeb-189">有几列仅由 Supply Chain Management 管理，无法在 Field Service 中更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-189">Several columns are managed only by Supply Chain Management and can't be updated in Field Service.</span></span> <span data-ttu-id="69aeb-190">要了解哪些列无法更新，请查看产品中的映射表。</span><span class="sxs-lookup"><span data-stu-id="69aeb-190">To learn which columns can't be updated, review the mapping tables in the product.</span></span> <span data-ttu-id="69aeb-191">为了简单起见，这些列中的大多数在 Dataverse 页上都设置为只读。</span><span class="sxs-lookup"><span data-stu-id="69aeb-191">For the sake of simplicity, most of these columns are set to read-only on Dataverse pages.</span></span> 

    <span data-ttu-id="69aeb-192">例如，价格信息的列由 Supply Chain Management 管理。</span><span class="sxs-lookup"><span data-stu-id="69aeb-192">For example, the columns for price information are managed by Supply Chain Management.</span></span> <span data-ttu-id="69aeb-193">Supply Chain Management 有可以使 Field Service 受益的贸易协议。</span><span class="sxs-lookup"><span data-stu-id="69aeb-193">Supply Chain Management has trade agreements that Field Service can benefit from.</span></span> <span data-ttu-id="69aeb-194">**单价**、**折扣** 和 **净额** 仅来自 Supply Chain Management。</span><span class="sxs-lookup"><span data-stu-id="69aeb-194">columns such as **Unit price**, **Discount**, and **Net amount** come only from Supply Chain Management.</span></span> <span data-ttu-id="69aeb-195">为确保将价格同步到 Field Service，在输入采购订单数据后，应在 Dataverse  中的 **采购订单** 和 **采购订单产品** 页上使用 **同步** 功能。</span><span class="sxs-lookup"><span data-stu-id="69aeb-195">To ensure that the price is synced to Field Service, you should use the **Sync** feature on the **Purchase Order** and **Purchase Order Product** pages in Dataverse when purchase order data has been entered.</span></span> <span data-ttu-id="69aeb-196">有关详细信息，请参阅[按需与 Dynamics 365 Supply Chain Management 采购数据同步](#sync-procurement)。</span><span class="sxs-lookup"><span data-stu-id="69aeb-196">For more information, see [Sync with the Dynamics 365 Supply Chain Management procurement data on demand](#sync-procurement).</span></span>

+ <span data-ttu-id="69aeb-197">**总计** 列仅在 Field Service 中可用，因为 Supply Chain Management 中没有采购订单的最新总计。</span><span class="sxs-lookup"><span data-stu-id="69aeb-197">The **Totals** column is available only in Field Service, because there are no up-to-date totals of the purchase order in Supply Chain Management.</span></span> <span data-ttu-id="69aeb-198">Supply Chain Management 中的总计是根据 Field Service 中不可用的多个参数计算得出的。</span><span class="sxs-lookup"><span data-stu-id="69aeb-198">The totals in Supply Chain Management are calculated based on multiple parameters that aren't available in Field Service.</span></span>
+ <span data-ttu-id="69aeb-199">仅指定了采购类别，或所指定产品是 *服务* 产品类型或 Field Service 产品类型的物料的采购订单行，只能在 Supply Chain Management 中启动。</span><span class="sxs-lookup"><span data-stu-id="69aeb-199">Purchase order lines where only a procurement category is specified, or where the product that is specified is an item of the *Service* product type or Field Service product type, can be initiated only in Supply Chain Management.</span></span> <span data-ttu-id="69aeb-200">这些行然后会同步到 Dataverse，并且在 Field Service 中可见。</span><span class="sxs-lookup"><span data-stu-id="69aeb-200">The lines are then synced to Dataverse and are visible in Field Service.</span></span>
+ <span data-ttu-id="69aeb-201">如果仅安装了 Field Service，没有安装 Supply Chain Management，**仓库** 列在采购订单上则是强制的。</span><span class="sxs-lookup"><span data-stu-id="69aeb-201">If only Field Service is installed, not Supply Chain Management, the **Warehouse** column is mandatory on the purchase order.</span></span> <span data-ttu-id="69aeb-202">但是，如果安装了 Supply Chain Management，此要求会放宽，因为 Supply Chain Management 允许有某些情况下未指定仓库的采购订单行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-202">However, if Supply Chain Management is installed, this requirement is relaxed, because Supply Chain Management allows for purchase order lines where no warehouse is specified in certain situations.</span></span>
+ <span data-ttu-id="69aeb-203">产品收据（Dataverse 中的采购订单收据）由 Supply Chain Management 管理，如果安装了Supply Chain Management，则无法从 Dataverse 创建。</span><span class="sxs-lookup"><span data-stu-id="69aeb-203">Product receipts (purchase order receipts in Dataverse) are managed by Supply Chain Management and can't be created from Dataverse if Supply Chain Management is installed.</span></span> <span data-ttu-id="69aeb-204">Supply Chain Management 中的产品收据从 Supply Chain Management 同步到 Dataverse。</span><span class="sxs-lookup"><span data-stu-id="69aeb-204">The product receipts from Supply Chain Management are synced from Supply Chain Management to Dataverse.</span></span>
+ <span data-ttu-id="69aeb-205">Supply Chain Management 中允许欠交。</span><span class="sxs-lookup"><span data-stu-id="69aeb-205">Under-delivery is allowed in Supply Chain Management.</span></span> <span data-ttu-id="69aeb-206">OneFSSCM 解决方案增加了逻辑，以在创建或更新产品收据行（或 Dataverse 中的采购订单收货产品）时，在 Dataverse 中创建库存日记帐行，以针对欠交的情况调整订单上的剩余数量。</span><span class="sxs-lookup"><span data-stu-id="69aeb-206">The OneFSSCM solution adds logic so that, when the product receipt line (or purchase order receipt product in Dataverse) is created or updated, an inventory journal row is created in Dataverse to adjust the remaining quantity that is on order for under-delivery scenarios.</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="69aeb-207">不支持的方案</span><span class="sxs-lookup"><span data-stu-id="69aeb-207">Unsupported scenarios</span></span>

+ <span data-ttu-id="69aeb-208">Field Service 阻止将行添加到 Supply Chain Management 中已取消的采购订单中。</span><span class="sxs-lookup"><span data-stu-id="69aeb-208">Field Service prevents lines from being added to a canceled purchase order in Supply Chain Management.</span></span> <span data-ttu-id="69aeb-209">解决方法是，可以在 Field Service 中更改采购订单的系统状态，然后在 Field Service 或 Supply Chain Management 中添加新行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-209">As a workaround, you can change the system status of the purchase order in Field Service, and then add the new line in either Field Service or Supply Chain Management.</span></span>
+ <span data-ttu-id="69aeb-210">虽然采购行会影响两个系统中的库存级别，但是此集成不能确保库存跨 Supply Chain Management 和 Field Service 保持一致。</span><span class="sxs-lookup"><span data-stu-id="69aeb-210">Although procurement rows affect inventory levels in both systems, this integration doesn't ensure inventory alignment across Supply Chain Management and Field Service.</span></span> <span data-ttu-id="69aeb-211">Field Service 和 Supply Chain Management 都有其他更新库存级别的流程。</span><span class="sxs-lookup"><span data-stu-id="69aeb-211">Both Field Service and Supply Chain Management have other processes that update inventory levels.</span></span> <span data-ttu-id="69aeb-212">这些流程在采购范围之外。</span><span class="sxs-lookup"><span data-stu-id="69aeb-212">Those processes are outside the scope of procurement.</span></span>

## <a name="status-management"></a><span data-ttu-id="69aeb-213">状态管理</span><span class="sxs-lookup"><span data-stu-id="69aeb-213">Status management</span></span>

<span data-ttu-id="69aeb-214">Field Service 中采购订单的状态与 Supply Chain Management 中的状态不同。</span><span class="sxs-lookup"><span data-stu-id="69aeb-214">The statuses of purchase orders in Field Service differ from the statuses in Supply Chain Management.</span></span>

### <a name="field-service-purchase-order-and-purchase-order-product-statuses"></a><span data-ttu-id="69aeb-215">Field Service 采购订单和采购订单产品状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-215">Field Service purchase order and purchase order product statuses</span></span>

| <span data-ttu-id="69aeb-216">标头 – 系统状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-216">Header – System status</span></span> | <span data-ttu-id="69aeb-217">标头 - 审核状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-217">Header - Approval status</span></span> | <span data-ttu-id="69aeb-218">物料状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-218">Item status</span></span> |
|---|---|---|
| <ul><li><span data-ttu-id="69aeb-219">草案</span><span class="sxs-lookup"><span data-stu-id="69aeb-219">Draft</span></span></li><li><span data-ttu-id="69aeb-220">提交日期</span><span class="sxs-lookup"><span data-stu-id="69aeb-220">Submitted</span></span></li><li><span data-ttu-id="69aeb-221">已取消</span><span class="sxs-lookup"><span data-stu-id="69aeb-221">Cancelled</span></span></li><li><span data-ttu-id="69aeb-222">产品已接收</span><span class="sxs-lookup"><span data-stu-id="69aeb-222">Product received</span></span></li><li><span data-ttu-id="69aeb-223">已结算</span><span class="sxs-lookup"><span data-stu-id="69aeb-223">Billed</span></span></li></ul> | <ul><li><span data-ttu-id="69aeb-224">空</span><span class="sxs-lookup"><span data-stu-id="69aeb-224">Null</span></span></li><li><span data-ttu-id="69aeb-225">批准额</span><span class="sxs-lookup"><span data-stu-id="69aeb-225">Approved</span></span></li><li><span data-ttu-id="69aeb-226">已拒绝</span><span class="sxs-lookup"><span data-stu-id="69aeb-226">Rejected</span></span></li></ul> | <ul><li><span data-ttu-id="69aeb-227">待处理</span><span class="sxs-lookup"><span data-stu-id="69aeb-227">Pending</span></span></li><li><span data-ttu-id="69aeb-228">已收货</span><span class="sxs-lookup"><span data-stu-id="69aeb-228">Received</span></span></li><li><span data-ttu-id="69aeb-229">已取消</span><span class="sxs-lookup"><span data-stu-id="69aeb-229">Cancelled</span></span></li></ul> |

### <a name="supply-chain-management-purchase-order-and-purchase-order-line-statuses"></a><span data-ttu-id="69aeb-230">Supply Chain Management 采购订单和采购订单行状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-230">Supply Chain Management purchase order and purchase order line statuses</span></span>

<span data-ttu-id="69aeb-231">仅当存在行工作流时，行审核状态才有效。</span><span class="sxs-lookup"><span data-stu-id="69aeb-231">Line approval statuses are active only when there is a line workflow.</span></span>

| <span data-ttu-id="69aeb-232">标头 – 单据状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-232">Header – documents status</span></span> | <span data-ttu-id="69aeb-233">标头 - 审核状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-233">Header - Approval status</span></span> | <span data-ttu-id="69aeb-234">行状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-234">Line status</span></span> | <span data-ttu-id="69aeb-235">行审核状态</span><span class="sxs-lookup"><span data-stu-id="69aeb-235">Line approval status</span></span> |
|---|---|---|---|
| <ul><li><span data-ttu-id="69aeb-236">未结订单（欠交订单）</span><span class="sxs-lookup"><span data-stu-id="69aeb-236">Open Order (Back order)</span></span></li><li><span data-ttu-id="69aeb-237">已收货</span><span class="sxs-lookup"><span data-stu-id="69aeb-237">Received</span></span></li><li><span data-ttu-id="69aeb-238">已开单</span><span class="sxs-lookup"><span data-stu-id="69aeb-238">Invoiced</span></span></li><li><span data-ttu-id="69aeb-239">已取消</span><span class="sxs-lookup"><span data-stu-id="69aeb-239">Cancelled</span></span></li></ul> | <ul><li><span data-ttu-id="69aeb-240">草案</span><span class="sxs-lookup"><span data-stu-id="69aeb-240">Draft</span></span></li><li><span data-ttu-id="69aeb-241">正在审核</span><span class="sxs-lookup"><span data-stu-id="69aeb-241">In Review</span></span></li><li><span data-ttu-id="69aeb-242">批准额</span><span class="sxs-lookup"><span data-stu-id="69aeb-242">Approved</span></span></li><li><span data-ttu-id="69aeb-243">已拒绝</span><span class="sxs-lookup"><span data-stu-id="69aeb-243">Rejected</span></span></li><li><span data-ttu-id="69aeb-244">正在进行外部审核</span><span class="sxs-lookup"><span data-stu-id="69aeb-244">In External Review</span></span></li><li><span data-ttu-id="69aeb-245">已确认</span><span class="sxs-lookup"><span data-stu-id="69aeb-245">Confirmed</span></span></li><li><span data-ttu-id="69aeb-246">定案</span><span class="sxs-lookup"><span data-stu-id="69aeb-246">Finalized</span></span></li></ul> | <ul><li><span data-ttu-id="69aeb-247">未结订单（欠交订单）</span><span class="sxs-lookup"><span data-stu-id="69aeb-247">Open Order (back order)</span></span></li><li><span data-ttu-id="69aeb-248">已收货</span><span class="sxs-lookup"><span data-stu-id="69aeb-248">Received</span></span></li><li><span data-ttu-id="69aeb-249">已开单</span><span class="sxs-lookup"><span data-stu-id="69aeb-249">Invoiced</span></span></li><li><span data-ttu-id="69aeb-250">已取消</span><span class="sxs-lookup"><span data-stu-id="69aeb-250">Cancelled</span></span></li></ul> | <ul><li><span data-ttu-id="69aeb-251">未提交</span><span class="sxs-lookup"><span data-stu-id="69aeb-251">Not Submitted</span></span></li><li><span data-ttu-id="69aeb-252">正在审核</span><span class="sxs-lookup"><span data-stu-id="69aeb-252">In Review</span></span></li><li><span data-ttu-id="69aeb-253">批准额</span><span class="sxs-lookup"><span data-stu-id="69aeb-253">Approved</span></span></li><li><span data-ttu-id="69aeb-254">已拒绝</span><span class="sxs-lookup"><span data-stu-id="69aeb-254">Rejected</span></span></li></ul> |

<span data-ttu-id="69aeb-255">以下规则将应用于状态列：</span><span class="sxs-lookup"><span data-stu-id="69aeb-255">The following rules are applied to the status columns:</span></span>

+ <span data-ttu-id="69aeb-256">Supply Chain Management 中的状态无法从 Field Service 更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-256">The status in Supply Chain Management can't be updated from Field Service.</span></span> <span data-ttu-id="69aeb-257">但是，在有些情况下，当 Supply Chain Management 中的采购订单状态更改时，Field Service 中的状态将更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-257">However, in some cases, the status in Field Service will be updated when the purchase order status in Supply Chain Management is changed.</span></span>
+ <span data-ttu-id="69aeb-258">如果 Supply Chain Management 中的采购订单正在接受更改管理，并且更改正在处理中，审核状态将为 *草稿* 或 *正在审核*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-258">If a purchase order in Supply Chain Management is under change management, and a change is being processed, the approval status is *Draft* or *In Review*.</span></span> <span data-ttu-id="69aeb-259">在这种情况下，Field Service 审核状态将设置为 *Null*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-259">In this case, the Field Service approval status will be set to *Null*.</span></span>
+ <span data-ttu-id="69aeb-260">如果 Supply Chain Management 中的采购订单审核状态设置为 *已审核*、*正在进行外部审核*、*已确认* 或 *完成*，Field Service 采购订单审核状态将设置为 *已审核*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-260">If the purchase order approval status in Supply Chain Management is set to *Approved*, *In External review*, *Confirmed*, or *Finalized*, the Field Service purchase order approval status will be set to *Approved*.</span></span>
+ <span data-ttu-id="69aeb-261">如果 Supply Chain Management 中的采购订单审核状态设置为 *已拒绝*，Field Service 采购订单审核状态将设置为 *已拒绝*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-261">If the purchase order approval status in Supply Chain Management is set to *Rejected*, the Field Service purchase order approval status will be set to *Rejected*.</span></span>
+ <span data-ttu-id="69aeb-262">如果 Supply Chain Management 中的单据标题状态更改为 *未结订单(欠交订单)*，Field Service 采购订单状态为 *草稿* 或 *已取消*，Field Service 采购订单状态将更改为 *已提交*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-262">If the document header status in Supply Chain Management is changed to *Open order (Back order)*, and the Field Service purchase order status is *Draft* or *Cancelled*, the Field Service purchase order status will be changed to *Submitted*.</span></span>
+ <span data-ttu-id="69aeb-263">如果 Supply Chain Management 中的单据标题状态更改为 *已取消*，并且未将 Field Service 中的采购订单收货产品与采购订单相关联（通过采购订单产品），Field Service 系统状态将设置为 *已取消*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-263">If the document header status in Supply Chain Management is changed to *Cancelled*, and no purchase order receipt products in Field Service are associated with the purchase order (via purchase order products), the Field Service system status is set to *Cancelled*.</span></span>
+ <span data-ttu-id="69aeb-264">如果 Supply Chain Management 中的采购订单行状态为 *已取消*，Field Service 中的采购订单产品状态将设置为 *已取消*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-264">If purchase order line status in Supply Chain Management is *Cancelled*, the purchase order product status in Field Service is set to *Cancelled*.</span></span> <span data-ttu-id="69aeb-265">此外，如果 Supply Chain Management 中的采购订单行状态从 *已取消* 更改为 *欠交订单*，Field Service 中的采购订单产品物料状态将设置为 *待定*。</span><span class="sxs-lookup"><span data-stu-id="69aeb-265">In addition, if the purchase order line status in Supply Chain Management is changed from *Cancelled* to *Back Order*, the purchase order product item status in Field Service is set to *Pending*.</span></span>

## <a name="sync-with-the-supply-chain-management-procurement-data-on-demand"></a><a id="sync-procurement"></a><span data-ttu-id="69aeb-266">按需与 Supply Chain Management 采购数据同步</span><span class="sxs-lookup"><span data-stu-id="69aeb-266">Sync with the Supply Chain Management procurement data on demand</span></span>

<span data-ttu-id="69aeb-267">Supply Chain Management 包括处理贸易协议、折扣和其他依赖于 Supply Chain Management 中辅助流程的场景的采购数据。</span><span class="sxs-lookup"><span data-stu-id="69aeb-267">Supply Chain Management includes procurement data that handles trade agreements, discounts, and other scenarios that rely on secondary processes in Supply Chain Management.</span></span> <span data-ttu-id="69aeb-268">采购引擎使用复杂的规则来确定给定采购订单的最佳价格。</span><span class="sxs-lookup"><span data-stu-id="69aeb-268">The procurement engine uses complex rules to determine the best price for a given purchase order.</span></span> <span data-ttu-id="69aeb-269">当您使用双写入时，数据并不总是跨两个环境保持同步，特别是在从 Dataverse 创建或更新行并可能触发 Supply Chain Management 中的跟进流程的情况下。</span><span class="sxs-lookup"><span data-stu-id="69aeb-269">When you use dual-write, data isn't always kept synchronous across the two environments, especially in scenarios where the row was created or updated from Dataverse and might trigger follow-on processes in Supply Chain Management.</span></span>

## <a name="sync-the-procurement-data-from-supply-chain-management"></a><span data-ttu-id="69aeb-270">同步 Supply Chain Management 中的采购数据</span><span class="sxs-lookup"><span data-stu-id="69aeb-270">Sync the procurement data from Supply Chain Management</span></span>

1. <span data-ttu-id="69aeb-271">在 Dataverse 中，转到 **库存 \> 采购订单**。</span><span class="sxs-lookup"><span data-stu-id="69aeb-271">In Dataverse, go to **Inventory \> Purchase Order**.</span></span>
2. <span data-ttu-id="69aeb-272">选择 **新建** 创建新的采购订单，或选择现有采购订单的行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-272">Select **New** to create a new purchase order, or select the row for an existing purchase order.</span></span>
3. <span data-ttu-id="69aeb-273">从采购订单或采购订单行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-273">From the purchase order or purchase order line.</span></span>
4. <span data-ttu-id="69aeb-274">在操作窗格上，选择 **同步**。</span><span class="sxs-lookup"><span data-stu-id="69aeb-274">On the Action Pane, select **Sync**.</span></span>

<span data-ttu-id="69aeb-275">Supply Chain Management 共享的 Dataverse 和 Field Service 中的所有列都将同步。</span><span class="sxs-lookup"><span data-stu-id="69aeb-275">All columns from Dataverse and Field Service that are shared by Supply Chain Management are synced.</span></span>

<span data-ttu-id="69aeb-276">以下是您可能会使用 **同步** 功能的情况：</span><span class="sxs-lookup"><span data-stu-id="69aeb-276">Here are the situations where you might use the **Sync** function:</span></span>

- <span data-ttu-id="69aeb-277">如果您从 Dataverse 对同一行进行了多次连续的更改，请运行 **同步** 功能。</span><span class="sxs-lookup"><span data-stu-id="69aeb-277">If you make multiple successive changes to the same row from Dataverse, run the **Sync** function.</span></span>
- <span data-ttu-id="69aeb-278">如果您不确定某个更改是否可能是 Dataverse 中的第二次连续更改，可能需要运行 **同步** 功能。</span><span class="sxs-lookup"><span data-stu-id="69aeb-278">If you aren't sure whether a change might be the second successive change from Dataverse, it might make sense to run the **Sync** function.</span></span>
- <span data-ttu-id="69aeb-279">如果从 Supply Chain Management 收到有关更新值的错误消息，请运行 **同步** 功能，然后在 Dataverse 中重试更新。</span><span class="sxs-lookup"><span data-stu-id="69aeb-279">If you receive an error message about updating a value from Supply Chain Management, run the **Sync** function, and then retry the update in Dataverse.</span></span>

## <a name="cancelling-the-posting-process"></a><span data-ttu-id="69aeb-280">取消发布流程</span><span class="sxs-lookup"><span data-stu-id="69aeb-280">Cancelling the posting process</span></span>

<span data-ttu-id="69aeb-281">如果在处理过程中取消了产品收据发布流程，双写入可能会在 Dataverse 中创建产品收据行，但不会在 Supply Chain Management 中创建产品收据行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-281">If the product receipt posting process is cancelled during processing, then dual-write might create a product receipt row in Dataverse, but not create a product receipt row in Supply Chain Management.</span></span> <span data-ttu-id="69aeb-282">发生此情况是因为双写入不支持分布式事务。</span><span class="sxs-lookup"><span data-stu-id="69aeb-282">This situation happens because dual-write does not support distributed transactions.</span></span>

## <a name="templates"></a><span data-ttu-id="69aeb-283">模板</span><span class="sxs-lookup"><span data-stu-id="69aeb-283">Templates</span></span>

<span data-ttu-id="69aeb-284">以下模板可用于集成与采购相关的单据。</span><span class="sxs-lookup"><span data-stu-id="69aeb-284">The following templates are available for the integration of procurement-related documents.</span></span>

| <span data-ttu-id="69aeb-285">供应链管理</span><span class="sxs-lookup"><span data-stu-id="69aeb-285">Supply Chain Management</span></span> | <span data-ttu-id="69aeb-286">Field Service</span><span class="sxs-lookup"><span data-stu-id="69aeb-286">Field Service</span></span> | <span data-ttu-id="69aeb-287">说明</span><span class="sxs-lookup"><span data-stu-id="69aeb-287">Description</span></span> |
|---|---|---|
| <span data-ttu-id="69aeb-288">采购订单头 V2</span><span class="sxs-lookup"><span data-stu-id="69aeb-288">Purchase order header V2</span></span> | <span data-ttu-id="69aeb-289">msdyn\_Purchaseorders</span><span class="sxs-lookup"><span data-stu-id="69aeb-289">msdyn\_Purchaseorders</span></span> | <span data-ttu-id="69aeb-290">此表包含表示采购订单头的列。</span><span class="sxs-lookup"><span data-stu-id="69aeb-290">This table contains the columns that represent the purchase order header.</span></span> |
| <span data-ttu-id="69aeb-291">采购订单行实体</span><span class="sxs-lookup"><span data-stu-id="69aeb-291">Purchase order line entity</span></span> | <span data-ttu-id="69aeb-292">msdyn\_PurchaseOrderProducts</span><span class="sxs-lookup"><span data-stu-id="69aeb-292">msdyn\_PurchaseOrderProducts</span></span> | <span data-ttu-id="69aeb-293">此表包含表示采购订单上的行的行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-293">This table contains the rows that represent lines on a purchase order.</span></span> <span data-ttu-id="69aeb-294">产品编号用于同步。</span><span class="sxs-lookup"><span data-stu-id="69aeb-294">The product number is used for synchronization.</span></span> <span data-ttu-id="69aeb-295">这会将产品标识为库存单位 (SKU)，包括产品维度。</span><span class="sxs-lookup"><span data-stu-id="69aeb-295">This identifies the product as a stock keeping unit (SKU), including product dimensions.</span></span> <span data-ttu-id="69aeb-296">有关与 Dataverse 进行产品集成的详细信息，请参阅[统一的产品体验](product-mapping.md)。</span><span class="sxs-lookup"><span data-stu-id="69aeb-296">For more information about product integration with Dataverse, see [Unified product experience](product-mapping.md).</span></span> |
| <span data-ttu-id="69aeb-297">物料收货标题</span><span class="sxs-lookup"><span data-stu-id="69aeb-297">Product receipt header</span></span> | <span data-ttu-id="69aeb-298">msdyn\_purchaseorderreceipts</span><span class="sxs-lookup"><span data-stu-id="69aeb-298">msdyn\_purchaseorderreceipts</span></span> | <span data-ttu-id="69aeb-299">此表包含在 Supply Chain Management 中发布产品收据时创建的产品收据标题。</span><span class="sxs-lookup"><span data-stu-id="69aeb-299">This table contains the product receipt headers that are created when a product receipt is posted in Supply Chain Management.</span></span> |
| <span data-ttu-id="69aeb-300">物料收货行</span><span class="sxs-lookup"><span data-stu-id="69aeb-300">Product receipt line</span></span> | <span data-ttu-id="69aeb-301">msdyn\_purchaseorderreceiptproducts</span><span class="sxs-lookup"><span data-stu-id="69aeb-301">msdyn\_purchaseorderreceiptproducts</span></span> | <span data-ttu-id="69aeb-302">此表包含在 Supply Chain Management 中发布产品收据时创建的产品收据行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-302">This table contains the product receipt lines that are created when a product receipt is posted in Supply Chain Management.</span></span> |
| <span data-ttu-id="69aeb-303">采购订单行软删除实体</span><span class="sxs-lookup"><span data-stu-id="69aeb-303">Purchase order line soft deleted entity</span></span> | <span data-ttu-id="69aeb-304">msdyn\_purchaseorderproducts</span><span class="sxs-lookup"><span data-stu-id="69aeb-304">msdyn\_purchaseorderproducts</span></span> | <span data-ttu-id="69aeb-305">此表包含有关已软删除的采购订单行的信息。</span><span class="sxs-lookup"><span data-stu-id="69aeb-305">This table contains information about purchase order lines that are soft-deleted.</span></span> <span data-ttu-id="69aeb-306">如果启用了更改管理，则只有在确认或审核了采购订单后，才能软删除 Supply Chain Management 中的采购订单行。</span><span class="sxs-lookup"><span data-stu-id="69aeb-306">A purchase order line in Supply Chain Management can be soft-deleted only when the purchase order has been confirmed or approved, if change management is turned on.</span></span> <span data-ttu-id="69aeb-307">此行存在于 Supply Chain Management 数据库中，标记为 **IsDeleted**。</span><span class="sxs-lookup"><span data-stu-id="69aeb-307">The row exists in the Supply Chain Management database and is marked as **IsDeleted**.</span></span> <span data-ttu-id="69aeb-308">由于 Dataverse 没有软删除概念，所以将此信息同步到 Dataverse 非常重要。</span><span class="sxs-lookup"><span data-stu-id="69aeb-308">Because Dataverse doesn't have a concept of soft-deletion, it's important that this information be synced to Dataverse.</span></span> <span data-ttu-id="69aeb-309">这样，在 Supply Chain Management 中被软删除的行可以从 Dataverse 中自动删除。</span><span class="sxs-lookup"><span data-stu-id="69aeb-309">In this way, lines that are soft-deleted in Supply Chain Management can automatically be deleted from Dataverse.</span></span> <span data-ttu-id="69aeb-310">在这种情况下，在 Dataverse 中删除行的逻辑位于 Supply Chain Management 扩展版中。</span><span class="sxs-lookup"><span data-stu-id="69aeb-310">In this case, the logic for deleting a line in Dataverse is located in Supply Chain Management Extended.</span></span> |

[!include [banner](../../includes/dual-write-symbols.md)]

[!include [Currency](includes/productreceiptheader-msdyn-purchaseorderreceipts.md)]

[!include [Currency](includes/productreceiptline-msdyn-purchaseorderreceiptproducts.md)]

[!include [Currency](includes/purchaseorderheadersv2-msdyn-purchaseorders.md)]

[!include [Currency](includes/purchaseorderlinesoftdeletedtable-msdyn-purchaseorderproducts.md)]

[!include [Currency](includes/purchaseorderlinetable-msdyn-purchaseorderproducts.md)]
