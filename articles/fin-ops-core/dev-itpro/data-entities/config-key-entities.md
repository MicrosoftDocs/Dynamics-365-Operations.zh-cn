---
title: 配置键和数据实体
description: 此主题介绍配置键和数据实体之间的关系。
author: Sunil-Garg
manager: AnnBe
ms.date: 05/10/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application user
ms.reviewer: sericks
ms.search.scope: Operations
ms.custom: 25341
ms.assetid: 8e214c95-616b-4ee1-b5a4-fa5ce5147f2c
ms.search.region: Global
ms.author: sunilg
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: Platform update 13
ms.openlocfilehash: b951c1da298689ea82f8c0abb868bea7c8c22487
ms.sourcegitcommit: 3ba95d50b8262fa0f43d4faad76adac4d05eb3ea
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/27/2019
ms.locfileid: "2182063"
---
# <a name="configuration-keys-and-data-entities"></a>Configuration Key 和数据实体

[!include [banner](../includes/banner.md)]

使用数据实体导入或导出数据之前，建议首先确定配置键对要使用的数据实体的影响。

若要了解有关配置键的详细信息，请参阅[许可证代码和配置键报告](../sysadmin/license-codes-configuration-keys-report.md)。

### <a name="configuration-key-assignments"></a>指定配置键
可以为下面的一种或全部项目指定配置键。

- 数据实体
- 用作数据源的表
- 表字段
- 数据实体字段

下表汇总介绍构成对象的不同项目的配置键值如何更改对象的预期行为。

| 数据实体的配置键设置 | 表的配置键设置 | 表字段的配置键设置 | 数据实体字段的配置键设置 | 预期行为 |
|-----------------------------------------|------------------------------------|------------------------------------------|----------------------------------------|------------------|
| 已禁用                                | 不评估                      | 不评估                            | 不评估                          | 如果禁用数据实体的配置键，数据实体将不起作用。 启用还是禁用基础表和字段中的配置键无关紧要。 |
| 已启用                                 | 已禁用                           | 不评估                            | 不评估                          | 如果启用数据实体的配置键，数据管理框架将检查各个基础表中的配置键。 如果禁用表的配置键，该表在数据实体中将不可用于功能性使用。 如果禁用表的配置键，将不评估表和数据实体配置键设置。 如果实体中的主表已禁用其配置键，系统将视为已禁用实体的配置键。 |
| 已启用                                 | 已启用                            | 已禁用                                 | 不评估                          | 如果启用数据实体的配置键，并且启用基础表配置键，数据管理框架将检查表中字段的配置键。 如果禁用字段的配置键，即使响应数据实体字段已启用了配置键，该字段在数据实体中也不可用于功能性使用。 |
| 已启用                                 | 已启用                            | 已启用                                  | 已禁用                               | 如果在其他所有级别中启用配置键，但是未启用实体字段配置键，该字段在数据实体中将不可用。 |

> [!NOTE]
> 如果一个实体将另一个实体用作数据源，将以递归方式应用上述语义。

### <a name="entity-list-refresh"></a>刷新实体列表
刷新实体列表时，数据管理框架构建配置键元数据供运行时使用。 此元数据使用上面介绍的逻辑构建。 我们强烈建议先等待实体列表刷新完毕，再使用数据管理框架中的作业和实体。 如果不等待，配置键元数据可能不是最新的，从而导致意外结果。 刷新实体列表时，实体列表页面中将显示以下消息。

![刷新实体列表](./media/Entity_refresh_list.png)

### <a name="data-entity-list-page"></a>数据实体列表页面
“数据管理”工作区中的数据实体列表页面显示实体的配置键设置。 请从该页面开始了解配置键对数据实体的影响。

此信息使用实体刷新期间构建的元数据显示。 配置键列显示与数据实体关联的配置键的名称。 如果此列为空，说明没有配置键与数据实体关联。 配置键状态列显示配置键的状态。 如果它有选中标记，说明已启用该键。 如果为空，说明已禁用该键或没有关联的键。

![实体列表页面](./media/Data_entity_list_page.png)

### <a name="target-fields"></a>目标字段
下一步是钻取到数据实体中以查看配置键对表和字段的影响。 数据实体的目标字段窗体显示数据实体中的相关表和字段的配置键和键状态信息。 如果数据实体本身已禁用其配置键，将显示一条警告消息，说明无论实体的配置键为哪种状态，该实体的目标字段窗体中的表和字段都将不可用。

![目标字段](./media/Target_fields_1.png)

### <a name="child-entities"></a>子实体 
某些实体将其他实体用作数据库，或为复合数据实体：将在子实体窗体中显示这些实体的配置键信息。 此窗体的使用方法类似上面介绍的实体列表页面。 子实体的目标字段窗体的行为也类似上面介绍的行为。

![目标字段](./media/Target_fields_2.png)

### <a name="using-data-entities"></a>使用数据实体
了解了配置键对要使用的数据实体的全部影响（如果有）之后，现在可继续使用数据实体，方法是将其添加到数据项目。 

### <a name="run-time-validations-for-configuration-keys"></a>配置键的运行时验证
以下用例下将使用实体列表刷新期间构建的配置键元数据执行运行时验证。

- 向作业添加了数据实体时
- 用户在实体列表中单击“验证”时
- 用户将包加载到数据项目中时
- 用户将模板加载到数据项目中时
- 加载现有数据项目时
- 将模板加载到数据项目中时
- 执行导出/导入作业前（批处理、非批处理、重复执行、OData）
- 用户生成映射时
- 用户在映射 UI 中映射字段时
- 用户仅添加“可导入字段”时

### <a name="managing-configuration-key-changes"></a>管理配置键更改
只要在实体、表或字段级别更新配置键，都必须刷新数据管理框架中的实体列表。 此流程确保该框架拾取最新的配置键设置。 刷新实体列表前，实体列表页面中将显示以下警告。 刷新实体列表之后，更新后的配置键更改将立即生效。 建议在配置键更改生效后，验证现有数据对象和作业，以确保其功能正常。

![目标字段](./media/Target_fields_3.png)
